(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{"/2Ve":function(e,t,a){},"1+KQ":function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return x}));var n=a("q1tI"),l=a.n(n),r=a("NKCw"),c=a("jFIn"),i=a("/MKj"),o=a("Bl7J"),m=a("VU5L"),s=a("Qu+8"),u=a("rePB"),d=a("KQm4"),b=a("y6RJ"),E=a("pJDg"),f=a("7vrA"),h=a("cWnB"),p=a("QojX");function v(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?v(Object(a),!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):v(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function g(e){var t,a=e.note,c=e.screenSize,o=Object(i.c)(m.b).email,s=Object(i.c)(m.b).user,u=null===(t=Object(i.c)(m.b))||void 0===t?void 0:t.avatarUrl,v=Object(n.useState)(null),g=v[0],j=v[1],O=Object(r.b)({defaultValues:null!=a&&a.content?a.content:{}}),w=O.handleSubmit,_=Object(n.useState)("last_edit"),N=_[0],C=_[1];console.log(a);var S=function(e){if(console.log(e),o.length>6){var t,n=o.replace(/[^a-zA-Z0-9]/g,"_"),l=null!=a&&a.id&&"new"!==a.id?a.id:b.a.database().ref("usersScience/"+n).child("notes").push().key,r=null===(m=null==a||null===(t=a.content)||void 0===t?void 0:t.old_editions)||"function"!=typeof m&&"object"!=typeof m?[e.last_edit]:[].concat(Object(d.a)(Object.keys(a.content.old_editions).map((function(e){return a.content.old_editions[e]}))),[e.last_edit]);console.log(r);var c={id:l,type:"sciencenotes",content:y(y({},e),{},{old_editions:r}),deleted:!1,email:o,user:s,avatarUrl:u||null,date:new Intl.DateTimeFormat("ru",{weekday:"short",year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"}).format(new Date)};console.log(c);var i={};return i["usersScience/"+n+"/notes/"+l]=c,b.a.database().ref().update(i).then((function(){j(!0),setTimeout(window.location.reload(),8e3)}))}var m};return l.a.createElement(r.a,O,"large"===c?l.a.createElement(f.a,null,l.a.createElement(E.a,{"aria-label":"Basic example",size:"sm"},l.a.createElement(h.a,{variant:"outline-secondary",onClick:function(){return C("h1")}},"h1"),l.a.createElement(h.a,{variant:"outline-secondary",onClick:function(){return C("h2")}},"h2"),l.a.createElement(h.a,{variant:"outline-secondary",onClick:function(){return C("h3")}},"h3"),l.a.createElement(h.a,{variant:"outline-secondary",onClick:function(){return C("h4")}},"h4"),l.a.createElement(h.a,{variant:"outline-secondary",onClick:function(){return C("h5")}},"h5"),l.a.createElement(h.a,{variant:"outline-secondary",onClick:function(){return C("h6")}},"h6"),l.a.createElement(h.a,{variant:"outline-secondary",onClick:function(){return C("last_edit")}},"Last Edit"),l.a.createElement(h.a,{variant:"outline-secondary",onClick:function(){return C("cited_reference")}},"Cited Reference"),l.a.createElement(h.a,{variant:"outline-secondary",onClick:function(){return C("plagiarism")}},"Plagiarism")),l.a.createElement(p.a,{onSubmit:w(S)},function(){switch(N){case"h1":return l.a.createElement(k,{key:N,name:N,label:"Заголовок 1"});case"h2":return l.a.createElement(k,{key:N,name:N,label:"Заголовок 2"});case"h3":return l.a.createElement(k,{key:N,name:N,label:"Заголовок 3"});case"h4":return l.a.createElement(k,{key:N,name:N,label:"Заголовок 4"});case"h5":return l.a.createElement(k,{key:N,name:N,label:"Заголовок 5"});case"h6":return l.a.createElement(k,{key:N,name:N,label:"Заголовок 6"});case"last_edit":return l.a.createElement(k,{key:N,name:N,label:"Текст"});case"cited_reference":return l.a.createElement(k,{key:N,name:N,label:"Источник"});case"plagiarism":return l.a.createElement(k,{key:N,name:N,label:"Уникальность"})}}(),l.a.createElement(h.a,{variant:"outline-secondary",type:"submit",size:"sm",block:!0,disabled:g},"Сохранить"))):l.a.createElement(f.a,null,l.a.createElement(p.a,{onSubmit:w(S)},l.a.createElement(k,{name:"h6",label:"Заголовок"}),l.a.createElement(k,{name:"last_edit",label:"Текст"}),l.a.createElement(k,{name:"cited_reference",label:"Источник"}),l.a.createElement(k,{name:"plagiarism",label:"Уникальность"}),l.a.createElement(h.a,{variant:"outline-secondary",type:"submit",size:"sm",block:!0,disabled:g},"Сохранить"))))}function k(e){var t=e.name,a=e.label,n=void 0===a?null:a,c=Object(r.c)();return l.a.createElement(p.a.Group,{controlId:"field_"+t},l.a.createElement(p.a.Label,{className:"small text-muted"},n||t),l.a.createElement(p.a.Control,Object.assign({},c.register(t),{as:"textarea",rows:"3"})))}var j=a("6xyR"),O=a("jDKy"),w=a("6ctO"),_=a("+YzT"),N=a("J7+s"),C=a("fhwx"),S=a.n(C);a("/2Ve");function x(){var e=Object(i.c)(m.b).email.replace(/[^a-zA-Z0-9]/g,"_"),t=(Object(i.c)(m.b).avatarUrl,Object(i.c)(m.b).user,l.a.useState(null)),a=t[0],n=t[1],u=Object(c.a)("usersScience/"+e+"/notes/"),d=u.data,b=u.loading,E=u.error,v=Object(s.a)(["(min-width: 810px)","(min-width: 400px)","(min-width: 100px)"],["large","medium","small"],"large"),y=Object(r.b)(),k=y.register,C=y.handleSubmit,x=function(e){return console.log(e)};if(b||!d)return l.a.createElement(o.a,null,"...");if(E)return l.a.createElement(o.a,null,":-(");var z=Object.keys(d).map((function(e){return d[e]}));return a?l.a.createElement(o.a,null,l.a.createElement(g,{note:"new"===a?{id:"new"}:z.filter((function(e){return e.id===a}))[0],screenSize:v})):"medium"===v?l.a.createElement(o.a,null,l.a.createElement(w.a,{bg:"light",expand:"sm",sticky:"top",className:"mb-2"},l.a.createElement(w.a.Brand,null,"Notes"),l.a.createElement(w.a.Toggle,{"aria-controls":"basic-navbar-nav"}),l.a.createElement(w.a.Collapse,{id:"basic-navbar-nav"},l.a.createElement(_.a,{className:"mr-auto"},l.a.createElement(_.a.Link,{onClick:function(){return n("new")}},"+")),l.a.createElement(p.a,{inline:!0,onSubmit:C(x)},l.a.createElement(O.a,Object.assign({},k("search_string"),{className:"mr-2",size:"sm"})),l.a.createElement(h.a,{variant:"outline-secondary",type:"submit"},l.a.createElement(N.e,null))))),!!z&&z.map((function(e){return l.a.createElement("div",{key:e.id},l.a.createElement("small",{className:"line-clamp"},S()(e.content.last_edit)),l.a.createElement("br",null),l.a.createElement(h.a,{variant:"outline-light",size:"sm",onClick:function(){return n(e.id)}}," ",l.a.createElement(N.d,null)),l.a.createElement("cite",{title:"cited_reference"},l.a.createElement("small",null,e.content.cited_reference)),"   ",l.a.createElement("cite",{title:"plagiarism"},l.a.createElement("small",null,e.content.plagiarism)),l.a.createElement("hr",null))}))):l.a.createElement(o.a,null,l.a.createElement(w.a,{bg:"light",expand:"sm",sticky:"top",className:"mb-2"},l.a.createElement(w.a.Brand,null,"Notes"),l.a.createElement(w.a.Toggle,{"aria-controls":"basic-navbar-nav"}),l.a.createElement(w.a.Collapse,{id:"basic-navbar-nav"},l.a.createElement(_.a,{className:"mr-auto"},l.a.createElement(_.a.Link,{onClick:function(){return n("new")}},"+")),l.a.createElement(p.a,{inline:!0,onSubmit:C(x)},l.a.createElement(O.a,Object.assign({},k("search_string"),{className:"mr-2"})),l.a.createElement(h.a,{variant:"outline-secondary",type:"submit"},l.a.createElement(N.e,null))))),l.a.createElement(f.a,null,!!z&&z.map((function(e){var t,a,r,c;return l.a.createElement(j.a,{key:e.id,className:"mb-1"},l.a.createElement(j.a.Header,null,l.a.createElement(h.a,{variant:"outline-light",size:"sm",onClick:function(){return n(e.id)}}," ",l.a.createElement(N.d,null)),l.a.createElement("span",{className:"ml-2"},null!=(c=e.content)&&c.h6?c.h6:null!=c&&c.h5?c.h5:null!=c&&c.h4?c.h4:null!=c&&c.h3?c.h3:null!=c&&c.h2?c.h2:null!=c&&c.h1?c.h1:"Заголовок")),l.a.createElement(j.a.Body,null,l.a.createElement("blockquote",{className:"blockquote mb-0"},l.a.createElement("small",{className:"line-clamp"},null!=e&&null!==(t=e.content)&&void 0!==t&&t.last_edit?S()(e.content.last_edit):"-"),null!=e&&null!==(a=e.content)&&void 0!==a&&a.cited_reference?l.a.createElement("footer",{className:"blockquote-footer"},l.a.createElement("cite",{title:"Сited_Reference"}," ",e.content.cited_reference)):null,null!=e&&null!==(r=e.content)&&void 0!==r&&r.plagiarism?l.a.createElement("footer",{className:"blockquote-footer"},l.a.createElement("cite",{title:"Plagiarism"}," ",e.content.plagiarism)):null)))}))))}},"8ypT":function(e,t,a){},Bl7J:function(e,t,a){"use strict";var n=a("q1tI"),l=a.n(n),r=a("Wbzz"),c=function(e){var t=e.siteTitle;return l.a.createElement("nav",{className:"navbar  navbar-light bg-light "}," ",l.a.createElement("h3",{style:{margin:0}},l.a.createElement(r.Link,{to:"/",style:{color:"gray",textDecoration:"none"}},t)),l.a.createElement("a",{className:"navbar-brand",href:"https://vk.com/id151078439"},l.a.createElement("img",{src:"https://sun9-37.userapi.com/c317630/v317630439/76a0/Bz6QTfBog0I.jpg?ava=1",alt:"",style:{verticalAlign:"middle",width:"40px",height:"40px",borderRadius:"50%",filter:"grayscale(100%)",objectFit:"cover"}})))};c.defaultProps={siteTitle:""};var i=c;a("8ypT"),t.a=function(e){var t=e.children,a=Object(r.useStaticQuery)("2326376460");return l.a.createElement(l.a.Fragment,null,l.a.createElement(i,{siteTitle:a.site.siteMetadata.title}),l.a.createElement("div",{style:{margin:"0 auto",maxWidth:800,padding:"2rem"}},l.a.createElement("main",null,t),l.a.createElement("footer",null,l.a.createElement("span",{style:{color:"darkgray"}},"© ",(new Date).getFullYear(),", "," ",l.a.createElement("a",{href:"https://vk.com/id151078439",style:{color:"darkgray"}},a.site.siteMetadata.author)))))}}}]);
//# sourceMappingURL=component---src-pages-mysciencenotes-js-cd854b73dbefe54a40e3.js.map