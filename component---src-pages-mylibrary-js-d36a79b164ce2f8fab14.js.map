{"version":3,"sources":["webpack:///./src/components/header.js","webpack:///./src/components/layout.js","webpack:///./node_modules/memoize-one/dist/memoize-one.esm.js","webpack:///./node_modules/tiny-invariant/dist/tiny-invariant.esm.js","webpack:///./node_modules/css-box-model/dist/css-box-model.esm.js","webpack:///./node_modules/use-memo-one/dist/use-memo-one.esm.js","webpack:///./src/components/ReactBeautifulDnD.js","webpack:///./node_modules/react-bootstrap/esm/BreadcrumbItem.js","webpack:///./node_modules/react-bootstrap/esm/Breadcrumb.js","webpack:///./src/pages/mylibrary.js","webpack:///./src/mediatemplates/ScienceNotesEditor.js","webpack:///./node_modules/raf-schd/dist/raf-schd.esm.js"],"names":["Header","siteTitle","className","style","margin","to","color","textDecoration","href","src","alt","verticalAlign","width","height","borderRadius","filter","objectFit","defaultProps","Layout","children","data","useStaticQuery","site","siteMetadata","title","maxWidth","padding","Date","getFullYear","author","safeIsNaN","Number","isNaN","value","areInputsEqual","newInputs","lastInputs","length","i","first","second","resultFn","isEqual","lastThis","lastResult","lastArgs","calledOnce","newArgs","_i","arguments","this","apply","condition","message","Error","getRect","_ref","top","right","bottom","left","x","y","center","expand","target","expandBy","shrink","shrinkBy","noSpacing","createBox","_ref2","borderBox","_ref2$margin","_ref2$border","border","_ref2$padding","marginBox","paddingBox","contentBox","raw","slice","result","offset","original","change","shiftBy","shifted","withScroll","scroll","window","pageXOffset","pageYOffset","calculateBox","styles","marginTop","marginRight","marginBottom","marginLeft","paddingTop","paddingRight","paddingBottom","paddingLeft","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","getBox","el","getBoundingClientRect","getComputedStyle","useMemoOne","getResult","inputs","initial","isFirstRun","committed","cache","current","Boolean","useMemo","useCallback","callback","getItemsFromProps","items","map","k","index","id","getTime","content","getItemStyle","isDragging","draggableStyle","userSelect","grid","background","ReactBeatifulDnD","possibleItems","updatedList","useState","state","setState","Button","variant","size","onClick","display","onDragEnd","source","destination","sInd","droppableId","dInd","list","startIndex","endIndex","Array","from","removed","splice","reorder","newState","droppableSource","droppableDestination","sourceClone","destClone","move","group","ind","key","provided","snapshot","ref","innerRef","isDraggingOver","droppableProps","item","draggableId","draggableProps","dragHandleProps","justifyContent","type","placeholder","_excluded","BreadcrumbItem","forwardRef","bsPrefix","active","_ref$as","as","Component","_ref$linkAs","linkAs","LinkComponent","SafeAnchor","linkProps","props","prefix","createElement","undefined","displayName","Breadcrumb","listProps","label","Item","MyLibrary","userEmail","useSelector","selectApplication","email","replace","useFirebaseNode","userLibrary","loading","error","console","log","libraryItems","Object","keys","MyLibraryLayout","useImmer","libraryContent","updateLibraryContent","level1","level2","level3","level4","level5","libraryState","updateLibraryState","onSave","updates","firebase","database","update","then","updateLibrary","command","option","draft","Container","Row","Col","minWidth","ShowBooks","books","addBook","book_title","push","ShowChapters","chapters","sourceId","addChapter","chapter_title","ShowSubChapters","subchapters","addSubChapter","subchapter_title","ShowIdeas","ideas","addIdea","idea_title","ShowScienceNotes","sciencenotes","React","open","setOpen","useForm","register","handleSubmit","book","aria-controls","aria-expanded","Collapse","in","Form","onSubmit","Group","controlId","Label","Control","rows","block","chapter","subchapter","idea","sciencenote","ShowScienceNote","fireNodeId","userNote","screenSize","useMedia","currentEditId","setCurrentEditId","ScienceNotesEditor","note","ScienceNoteCard","currentFullMode","setCurrentFullMode","toggleMode","ReactHtmlParser","last_edit","cited_reference","date","plagiarism","h6","h5","h4","h3","h2","h1","Body","user","avatarUrl","savedAnswer","setSavedAnswer","methods","defaultValues","currentField","setCurrentField","tags","idNote","child","old_editions","val","keyItem","postObject","deleted","Intl","DateTimeFormat","weekday","year","month","day","hour","minute","format","setTimeout","location","reload","aria-label","ActiveField","name","disabled","SaveJustFirstAndLastEditions","useFormContext","SaveJustFirstAndLast","fn","frameId","wrapperFn","_len","args","_key","requestAnimationFrame","cancel","cancelAnimationFrame"],"mappings":"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","file":"component---src-pages-mylibrary-js-d36a79b164ce2f8fab14.js","sourcesContent":["import { Link } from \"gatsby\"\nimport PropTypes from \"prop-types\"\nimport React from \"react\"\n\nconst Header = ({ siteTitle }) => (\n  <nav className=\"navbar  navbar-light bg-light \"> {/* navbar-dark bg-primary */}\n\n    <h3 style={{ margin: 0 }}>\n      <Link to=\"/\" style={{ color: `gray`, textDecoration: `none`, }}>{siteTitle}</Link>\n    </h3>\n    <a className=\"navbar-brand\" href=\"https://vk.com/id151078439\">\n      <img\n        src=\"https://sun9-37.userapi.com/c317630/v317630439/76a0/Bz6QTfBog0I.jpg?ava=1\"\n        //  width=\"30\"\n        //  height=\"45\"\n        alt=\"\"\n        style={{\n          verticalAlign: 'middle',\n          width: '40px',\n          height: '40px',\n          borderRadius: '50%',\n          filter: 'grayscale(100%)',\n          objectFit: 'cover'\n        }} />\n    </a>\n  </nav>\n\n  // <header\n  //   style={{\n  //     background: `rebeccapurple`,\n  //     marginBottom: `1.45rem`,\n  //   }}\n  // >\n  //   <div\n  //     style={{\n  //       margin: `0 auto`,\n  //       maxWidth: 960,\n  //       padding: `1.45rem 1.0875rem`,\n  //     }}\n  //   >\n  //     <h1 style={{ margin: 0 }}>\n  //       <Link\n  //         to=\"/\"\n  //         style={{\n  //           color: `white`,\n  //           textDecoration: `none`,\n  //         }}\n  //       >\n  //         {siteTitle}\n  //       </Link>\n  //     </h1>\n  //   </div>\n  // </header>\n)\n\nHeader.propTypes = {\n  siteTitle: PropTypes.string,\n}\n\nHeader.defaultProps = {\n  siteTitle: ``,\n}\n\nexport default Header\n","/**\n * Layout component that queries for data\n * with Gatsby's useStaticQuery component\n *\n * See: https://www.gatsbyjs.org/docs/use-static-query/\n */\n\nimport React from \"react\"\nimport PropTypes from \"prop-types\"\nimport { useStaticQuery, graphql } from \"gatsby\"\n\nimport Header from \"./header\"\nimport \"./layout.css\"\n\nconst Layout = ({ children }) => {\n  const data = useStaticQuery(graphql`\n    query SiteTitleQuery {\n      site {\n        siteMetadata {\n          title\n          author\n        }\n      }\n    }\n  `)\n\n  return (\n    <>\n      <Header siteTitle={data.site.siteMetadata.title} />\n      <div\n        style={{\n          margin: `0 auto`,\n          maxWidth: 800,\n          padding: '2rem'\n        }}\n      >\n        <main>{children}</main>\n        <footer>\n          <span style={{color: 'darkgray'}}>\n          © {new Date().getFullYear()}, {\" \"}\n          <a href=\"https://vk.com/id151078439\" style={{color: 'darkgray'}}>{data.site.siteMetadata.author}</a>\n          </span>         \n        </footer>\n      </div>\n    </>\n  )\n}\n\nLayout.propTypes = {\n  children: PropTypes.node.isRequired,\n}\n\nexport default Layout\n","var safeIsNaN = Number.isNaN || function ponyfill(value) {\n  return typeof value === 'number' && value !== value;\n};\n\nfunction isEqual(first, second) {\n  if (first === second) {\n    return true;\n  }\n\n  if (safeIsNaN(first) && safeIsNaN(second)) {\n    return true;\n  }\n\n  return false;\n}\n\nfunction areInputsEqual(newInputs, lastInputs) {\n  if (newInputs.length !== lastInputs.length) {\n    return false;\n  }\n\n  for (var i = 0; i < newInputs.length; i++) {\n    if (!isEqual(newInputs[i], lastInputs[i])) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction memoizeOne(resultFn, isEqual) {\n  if (isEqual === void 0) {\n    isEqual = areInputsEqual;\n  }\n\n  var lastThis;\n  var lastArgs = [];\n  var lastResult;\n  var calledOnce = false;\n\n  function memoized() {\n    var newArgs = [];\n\n    for (var _i = 0; _i < arguments.length; _i++) {\n      newArgs[_i] = arguments[_i];\n    }\n\n    if (calledOnce && lastThis === this && isEqual(newArgs, lastArgs)) {\n      return lastResult;\n    }\n\n    lastResult = resultFn.apply(this, newArgs);\n    calledOnce = true;\n    lastThis = this;\n    lastArgs = newArgs;\n    return lastResult;\n  }\n\n  return memoized;\n}\n\nexport default memoizeOne;","var isProduction = process.env.NODE_ENV === 'production';\nvar prefix = 'Invariant failed';\n\nfunction invariant(condition, message) {\n  if (condition) {\n    return;\n  }\n\n  if (isProduction) {\n    throw new Error(prefix);\n  }\n\n  throw new Error(prefix + \": \" + (message || ''));\n}\n\nexport default invariant;","import invariant from 'tiny-invariant';\n\nvar getRect = function getRect(_ref) {\n  var top = _ref.top,\n      right = _ref.right,\n      bottom = _ref.bottom,\n      left = _ref.left;\n  var width = right - left;\n  var height = bottom - top;\n  var rect = {\n    top: top,\n    right: right,\n    bottom: bottom,\n    left: left,\n    width: width,\n    height: height,\n    x: left,\n    y: top,\n    center: {\n      x: (right + left) / 2,\n      y: (bottom + top) / 2\n    }\n  };\n  return rect;\n};\n\nvar expand = function expand(target, expandBy) {\n  return {\n    top: target.top - expandBy.top,\n    left: target.left - expandBy.left,\n    bottom: target.bottom + expandBy.bottom,\n    right: target.right + expandBy.right\n  };\n};\n\nvar shrink = function shrink(target, shrinkBy) {\n  return {\n    top: target.top + shrinkBy.top,\n    left: target.left + shrinkBy.left,\n    bottom: target.bottom - shrinkBy.bottom,\n    right: target.right - shrinkBy.right\n  };\n};\n\nvar shift = function shift(target, shiftBy) {\n  return {\n    top: target.top + shiftBy.y,\n    left: target.left + shiftBy.x,\n    bottom: target.bottom + shiftBy.y,\n    right: target.right + shiftBy.x\n  };\n};\n\nvar noSpacing = {\n  top: 0,\n  right: 0,\n  bottom: 0,\n  left: 0\n};\n\nvar createBox = function createBox(_ref2) {\n  var borderBox = _ref2.borderBox,\n      _ref2$margin = _ref2.margin,\n      margin = _ref2$margin === void 0 ? noSpacing : _ref2$margin,\n      _ref2$border = _ref2.border,\n      border = _ref2$border === void 0 ? noSpacing : _ref2$border,\n      _ref2$padding = _ref2.padding,\n      padding = _ref2$padding === void 0 ? noSpacing : _ref2$padding;\n  var marginBox = getRect(expand(borderBox, margin));\n  var paddingBox = getRect(shrink(borderBox, border));\n  var contentBox = getRect(shrink(paddingBox, padding));\n  return {\n    marginBox: marginBox,\n    borderBox: getRect(borderBox),\n    paddingBox: paddingBox,\n    contentBox: contentBox,\n    margin: margin,\n    border: border,\n    padding: padding\n  };\n};\n\nvar parse = function parse(raw) {\n  var value = raw.slice(0, -2);\n  var suffix = raw.slice(-2);\n\n  if (suffix !== 'px') {\n    return 0;\n  }\n\n  var result = Number(value);\n  !!isNaN(result) ? process.env.NODE_ENV !== \"production\" ? invariant(false, \"Could not parse value [raw: \" + raw + \", without suffix: \" + value + \"]\") : invariant(false) : void 0;\n  return result;\n};\n\nvar getWindowScroll = function getWindowScroll() {\n  return {\n    x: window.pageXOffset,\n    y: window.pageYOffset\n  };\n};\n\nvar offset = function offset(original, change) {\n  var borderBox = original.borderBox,\n      border = original.border,\n      margin = original.margin,\n      padding = original.padding;\n  var shifted = shift(borderBox, change);\n  return createBox({\n    borderBox: shifted,\n    border: border,\n    margin: margin,\n    padding: padding\n  });\n};\n\nvar withScroll = function withScroll(original, scroll) {\n  if (scroll === void 0) {\n    scroll = getWindowScroll();\n  }\n\n  return offset(original, scroll);\n};\n\nvar calculateBox = function calculateBox(borderBox, styles) {\n  var margin = {\n    top: parse(styles.marginTop),\n    right: parse(styles.marginRight),\n    bottom: parse(styles.marginBottom),\n    left: parse(styles.marginLeft)\n  };\n  var padding = {\n    top: parse(styles.paddingTop),\n    right: parse(styles.paddingRight),\n    bottom: parse(styles.paddingBottom),\n    left: parse(styles.paddingLeft)\n  };\n  var border = {\n    top: parse(styles.borderTopWidth),\n    right: parse(styles.borderRightWidth),\n    bottom: parse(styles.borderBottomWidth),\n    left: parse(styles.borderLeftWidth)\n  };\n  return createBox({\n    borderBox: borderBox,\n    margin: margin,\n    padding: padding,\n    border: border\n  });\n};\n\nvar getBox = function getBox(el) {\n  var borderBox = el.getBoundingClientRect();\n  var styles = window.getComputedStyle(el);\n  return calculateBox(borderBox, styles);\n};\n\nexport { calculateBox, createBox, expand, getBox, getRect, offset, shrink, withScroll };","import { useState, useRef, useEffect } from 'react';\n\nfunction areInputsEqual(newInputs, lastInputs) {\n  if (newInputs.length !== lastInputs.length) {\n    return false;\n  }\n\n  for (var i = 0; i < newInputs.length; i++) {\n    if (newInputs[i] !== lastInputs[i]) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction useMemoOne(getResult, inputs) {\n  var initial = useState(function () {\n    return {\n      inputs: inputs,\n      result: getResult()\n    };\n  })[0];\n  var isFirstRun = useRef(true);\n  var committed = useRef(initial);\n  var useCache = isFirstRun.current || Boolean(inputs && committed.current.inputs && areInputsEqual(inputs, committed.current.inputs));\n  var cache = useCache ? committed.current : {\n    inputs: inputs,\n    result: getResult()\n  };\n  useEffect(function () {\n    isFirstRun.current = false;\n    committed.current = cache;\n  }, [cache]);\n  return cache.result;\n}\n\nfunction useCallbackOne(callback, inputs) {\n  return useMemoOne(function () {\n    return callback;\n  }, inputs);\n}\n\nvar useMemo = useMemoOne;\nvar useCallback = useCallbackOne;\nexport { useCallback, useCallbackOne, useMemo, useMemoOne };","import React, { useState } from \"react\";\nimport { DragDropContext, Droppable, Draggable } from \"react-beautiful-dnd\";\n\nimport Button from \"react-bootstrap/Button\";\n\n// fake data generator\n// const getItems = (count, offset = 0) =>\n//   Array.from({ length: count }, (v, k) => k).map(k => ({\n//     id: `item-${k + offset}-${new Date().getTime()}`,\n//     content: `item ${k + offset}`\n//   }));\n\nconst getItemsFromProps = (items, offset = 0) =>\n  // Array.from({ length: items.length }, (v, k) => k).map(k => ({\n  items.map((k, index) => ({\n    id: `item-${items[index].id + offset}-${new Date().getTime()}`,\n    content: items[index].title\n  }));\n\nconst reorder = (list, startIndex, endIndex) => {\n  const result = Array.from(list);\n  const [removed] = result.splice(startIndex, 1);\n  result.splice(endIndex, 0, removed);\n\n  return result;\n};\n\n/**\n * Moves an item from one list to another list.\n */\nconst move = (source, destination, droppableSource, droppableDestination) => {\n  const sourceClone = Array.from(source);\n  const destClone = Array.from(destination);\n  const [removed] = sourceClone.splice(droppableSource.index, 1);\n\n  destClone.splice(droppableDestination.index, 0, removed);\n\n  const result = {};\n  result[droppableSource.droppableId] = sourceClone;\n  result[droppableDestination.droppableId] = destClone;\n\n  return result;\n};\nconst grid = 8;\n\nconst getItemStyle = (isDragging, draggableStyle) => ({\n  // some basic styles to make the items look a bit nicer\n  userSelect: \"none\",\n  padding: grid * 2,\n  margin: `0 0 ${grid}px 0`,\n\n  // change background colour if dragging\n  background: isDragging ? \"lightgreen\" : \"grey\",\n\n  // styles we need to apply on draggables\n  ...draggableStyle\n});\nconst getListStyle = isDraggingOver => ({\n  background: isDraggingOver ? \"lightblue\" : \"lightgrey\",\n  padding: grid,\n  width: 250\n});\n\nexport default function ReactBeatifulDnD({ items, possibleItems, updatedList }) {\n  const [state, setState] = useState([getItemsFromProps(items), getItemsFromProps(possibleItems, 10)]);\n\n\n\n  function onDragEnd(result) {\n    const { source, destination } = result;\n\n    // dropped outside the list\n    if (!destination) {\n      return;\n    }\n    const sInd = +source.droppableId;\n    const dInd = +destination.droppableId;\n\n    if (sInd === dInd) {\n      const items = reorder(state[sInd], source.index, destination.index);\n      const newState = [...state];\n      newState[sInd] = items;\n      setState(newState);\n    } else {\n      const result = move(state[sInd], state[dInd], source, destination);\n      const newState = [...state];\n      newState[sInd] = result[sInd];\n      newState[dInd] = result[dInd];\n\n      setState(newState.filter(group => group.length));\n    }\n  }\n\n  //  console.log(state);\n\n  return (\n    <div>\n      <Button\n        //   type=\"button\"\n        variant=\"outline-light\"\n        size=\"sm\"\n        onClick={() => {\n          updatedList(state[0])\n        }}\n      >\n        Сохр\n      </Button>\n      {/* <button\n        type=\"button\"\n        onClick={() => {\n          setState([...state, []]);\n        }}\n      >\n        Add new group\n      </button>\n      <button\n        type=\"button\"\n        onClick={() => {\n          setState([...state, getItems(1)]);\n        }}\n      >\n        Add new item\n      </button> */}\n      <div style={{ display: \"flex\" }}>\n        <DragDropContext onDragEnd={onDragEnd}>\n          {state.map((el, ind) => (\n            <Droppable key={ind} droppableId={`${ind}`}>\n              {(provided, snapshot) => (\n                <div\n                  ref={provided.innerRef}\n                  style={getListStyle(snapshot.isDraggingOver)}\n                  {...provided.droppableProps}\n                >\n                  {el.map((item, index) => (\n                    <Draggable\n                      key={item.id}\n                      draggableId={item.id}\n                      index={index}\n                    >\n                      {(provided, snapshot) => (\n                        <div\n                          ref={provided.innerRef}\n                          {...provided.draggableProps}\n                          {...provided.dragHandleProps}\n                          style={getItemStyle(\n                            snapshot.isDragging,\n                            provided.draggableProps.style\n                          )}\n                        >\n                          <div\n                            style={{\n                              display: \"flex\",\n                              justifyContent: \"space-between\"\n                            }}\n                          >\n                        <small className=\"text-white\">{item.content}</small>    \n                            <Button\n                              type=\"button\"\n                              variant=\"outline-light\"\n                              size=\"sm\"\n                              type=\"button\"\n                              onClick={() => {\n                                const newState = [...state];\n                                newState[ind].splice(index, 1);\n                                setState(\n                                  newState.filter(group => group.length)\n                                );\n                              }}\n                            >\n                              X\n                            </Button>\n                          </div>\n                        </div>\n                      )}\n                    </Draggable>\n                  ))}\n                  {provided.placeholder}\n                </div>\n              )}\n            </Droppable>\n          ))}\n        </DragDropContext>\n      </div>\n    </div>\n  );\n}\n\n\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nvar _excluded = [\"bsPrefix\", \"active\", \"children\", \"className\", \"as\", \"linkAs\", \"linkProps\", \"href\", \"title\", \"target\"];\nimport classNames from 'classnames';\nimport React from 'react';\nimport SafeAnchor from './SafeAnchor';\nimport { useBootstrapPrefix } from './ThemeProvider';\nvar defaultProps = {\n  active: false,\n  linkProps: {}\n};\nvar BreadcrumbItem = /*#__PURE__*/React.forwardRef(function (_ref, ref) {\n  var bsPrefix = _ref.bsPrefix,\n      active = _ref.active,\n      children = _ref.children,\n      className = _ref.className,\n      _ref$as = _ref.as,\n      Component = _ref$as === void 0 ? 'li' : _ref$as,\n      _ref$linkAs = _ref.linkAs,\n      LinkComponent = _ref$linkAs === void 0 ? SafeAnchor : _ref$linkAs,\n      linkProps = _ref.linkProps,\n      href = _ref.href,\n      title = _ref.title,\n      target = _ref.target,\n      props = _objectWithoutPropertiesLoose(_ref, _excluded);\n\n  var prefix = useBootstrapPrefix(bsPrefix, 'breadcrumb-item');\n  return /*#__PURE__*/React.createElement(Component, _extends({\n    ref: ref\n  }, props, {\n    className: classNames(prefix, className, {\n      active: active\n    }),\n    \"aria-current\": active ? 'page' : undefined\n  }), active ? children : /*#__PURE__*/React.createElement(LinkComponent, _extends({}, linkProps, {\n    href: href,\n    title: title,\n    target: target\n  }), children));\n});\nBreadcrumbItem.displayName = 'BreadcrumbItem';\nBreadcrumbItem.defaultProps = defaultProps;\nexport default BreadcrumbItem;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nvar _excluded = [\"bsPrefix\", \"className\", \"listProps\", \"children\", \"label\", \"as\"];\nimport classNames from 'classnames';\nimport React from 'react';\nimport { useBootstrapPrefix } from './ThemeProvider';\nimport BreadcrumbItem from './BreadcrumbItem';\nvar defaultProps = {\n  label: 'breadcrumb',\n  listProps: {}\n};\nvar Breadcrumb = /*#__PURE__*/React.forwardRef(function (_ref, ref) {\n  var bsPrefix = _ref.bsPrefix,\n      className = _ref.className,\n      listProps = _ref.listProps,\n      children = _ref.children,\n      label = _ref.label,\n      _ref$as = _ref.as,\n      Component = _ref$as === void 0 ? 'nav' : _ref$as,\n      props = _objectWithoutPropertiesLoose(_ref, _excluded);\n\n  var prefix = useBootstrapPrefix(bsPrefix, 'breadcrumb');\n  return /*#__PURE__*/React.createElement(Component, _extends({\n    \"aria-label\": label,\n    className: className,\n    ref: ref\n  }, props), /*#__PURE__*/React.createElement(\"ol\", _extends({}, listProps, {\n    className: classNames(prefix, listProps == null ? void 0 : listProps.className)\n  }), children));\n});\nBreadcrumb.displayName = 'Breadcrumb';\nBreadcrumb.defaultProps = defaultProps;\nBreadcrumb.Item = BreadcrumbItem;\nexport default Breadcrumb;","import React from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { useFirebaseNode } from \"../hooks/useFirebaseNode\";\nimport { useSelector } from \"react-redux\";\nimport { useImmer } from \"use-immer\";\nimport firebase from \"gatsby-plugin-firebase\";\n\nimport Layout from \"../components/layout\";\n\nimport { selectApplication } from \"../features/application/applicationSlice\";\nimport useMedia from \"../hooks/useMedia\";\n\nimport ScienceNotesEditor, { ScienceNoteCard } from \"../mediatemplates/ScienceNotesEditor\";\n\nimport ReactBeautifulDnD from \"../components/ReactBeautifulDnD\";\n\n//import BookEditor from \"../mediatemplates/BookEditor\";\n\nimport Collapse from \"react-bootstrap/Collapse\";\nimport Button from \"react-bootstrap/Button\";\nimport Container from \"react-bootstrap/Container\";\nimport Row from \"react-bootstrap/Row\";\nimport Col from \"react-bootstrap/Col\";\nimport Breadcrumb from \"react-bootstrap/Breadcrumb\";\n\nimport Form from \"react-bootstrap/Form\";\n//import FormControl from \"react-bootstrap/FormControl\";\n//import Navbar from \"react-bootstrap/Navbar\";\n//import Nav from \"react-bootstrap/Nav\";\n//import { SVGBootstrapIconPencilSquare, SVGBootstrapIconSearch, SVGBootstrapIconEnvelopeOpen } from \"../svgs\";\n//import ReactHtmlParser from 'react-html-parser'; //, { processNodes, convertNodeToElement, htmlparser2 }\n\nimport \"../mediatemplates/ScienceNotes.css\";\n\nlet fireNodes = [\n  { id: 1, type: \"book\", title: \"Книга 1\" },\n  { id: 2, type: \"book\", title: \"Книга 2\" },\n  { id: 3, type: \"book\", title: \"Книга 3\" },\n\n  { id: 4, type: \"chapter\", title: \"Глава 1 Книги 1\", source: \"Книга 1\" },\n  { id: 5, type: \"chapter\", title: \"Глава 2 Книги 1\", source: \"Книга 1\" },\n  { id: 6, type: \"chapter\", title: \"Глава 3 Книги 1\", source: \"Книга 1\" },\n\n  { id: 13, type: \"subchapter\", title: \"Параграф 1 Главы 1 Книги 1\", source: \"Глава 1 Книги 1\" },\n  { id: 14, type: \"subchapter\", title: \"Параграф 2 Главы 1 Книги 1\", source: \"Глава 1 Книги 1\" },\n  { id: 15, type: \"subchapter\", title: \"Параграф 3 Главы 1 Книги 1\", source: \"Глава 1 Книги 1\" },\n\n  { id: 16, type: \"idea\", title: \"Идея 1 Параграфа 1 Главы 1 Книги 1\", source: \"Параграф 1 Главы 1 Книги 1\" },\n  { id: 17, type: \"idea\", title: \"Идея 2 Параграфа 1 Главы 1 Книги 1\", source: \"Параграф 1 Главы 1 Книги 1\" },\n  { id: 18, type: \"idea\", title: \"Идея 3 Параграфа 1 Главы 1 Книги 1\", source: \"Параграф 1 Главы 1 Книги 1\" },\n\n  { id: 19, type: \"sciencenote\", title: \"Note 1\", source: \"Идея 1 Параграфа 1 Главы 1 Книги 1\", fireNodeId: \"-Mcryv4ypZu5k136cd1h\" },\n  { id: 20, type: \"sciencenote\", title: \"Note 2\", source: \"Идея 1 Параграфа 1 Главы 1 Книги 1\", fireNodeId: \"-Mcs53WMJfo-bpk9_vd5\" },\n  { id: 21, type: \"sciencenote\", title: \"Note 3\", source: \"Идея 1 Параграфа 1 Главы 1 Книги 1\", fireNodeId: \"-Mcz_KoaEbhmU2yvGvJI\" },\n\n  { id: 7, type: \"chapter\", title: \"Глава 1 Книги 2\", source: \"Книга 2\" },\n  { id: 8, type: \"chapter\", title: \"Глава 2 Книги 2\", source: \"Книга 2\" },\n  { id: 9, type: \"chapter\", title: \"Глава 3 Книги 2\", source: \"Книга 2\" },\n  { id: 10, type: \"chapter\", title: \"Глава 1 Книги 3\", source: \"Книга 3\" },\n  { id: 11, type: \"chapter\", title: \"Глава 2 Книги 3\", source: \"Книга 3\" },\n  { id: 12, type: \"chapter\", title: \"Глава 3 Книги 3\", source: \"Книга 3\" },\n]\n\nexport default function MyLibrary() {\n  const email = useSelector(selectApplication).email;\n  let userEmail = email.replace(/[^a-zA-Z0-9]/g, \"_\");\n\n  const { data: userLibrary, loading, error } = useFirebaseNode(\n    \"usersScience/\" + userEmail + \"/library/\"\n  );\n\n  console.log(userLibrary);\n\n  if (!!loading) { return <Layout>...</Layout> }\n  if (!!error) { return <Layout>:-(</Layout> }\n\n\n\n  let libraryItems = !!userLibrary ? Object.keys(userLibrary).map((item) => { return userLibrary[item] }) : null;\n\n  return <MyLibraryLayout libraryItems={libraryItems} />\n}\n\nfunction MyLibraryLayout({ libraryItems }) {\n  // const [data, setData] = React.useState(null);\n  const email = useSelector(selectApplication).email;\n  let userEmail = email.replace(/[^a-zA-Z0-9]/g, \"_\");\n  //const avatarUrl = useSelector(selectApplication).avatarUrl;\n  //const user = useSelector(selectApplication).user;\n  //const [currentEditId, setCurrentEditId] = React.useState(null);\n  //const [currentFullMode, setCurrentFullMode] = React.useState(null);\n\n  const [libraryContent, updateLibraryContent] = useImmer(!!libraryItems ? libraryItems : []);\n\n  const [libraryState, updateLibraryState] = useImmer({\n    level1: \"Книги\",\n    level2: \"Книга\",\n    level3: \"Главы\",\n    level4: \"Параграфы\",\n    level5: \"Идеи\"\n  });\n\n  function onSave() {\n    if (email.length > 6) {\n      var updates = {};\n      updates[\"usersScience/\" + userEmail + \"/library/\"] = libraryContent;\n      return firebase\n        .database()\n        .ref()\n        .update(updates)\n        .then(() => {\n          console.log('Success!!!')\n          //      DoSavedSuccessfully(true);\n          //      doEditPostTitleComment(false);\n        });\n    }\n  }\n\n  function updatedList(list) {\n    console.log(list);\n  }\n\n\n  function addBook(book_title) {\n    updateLibraryContent(draft => {\n      draft.push({\n        id: firebase.database().ref(\"usersScience/\" + userEmail + \"/library/\").push().key,\n        type: \"book\",\n        title: book_title\n      })\n    });\n    onSave();\n  }\n\n  function addChapter(chapter_title) {\n    updateLibraryContent(draft => {\n      draft.push({\n        id: firebase.database().ref(\"usersScience/\" + userEmail + \"/library/\").push().key,\n        type: \"chapter\",\n        title: chapter_title,\n        source: libraryState.level2,\n        sourceId: libraryContent.filter(item => item.type === \"book\" && item.title === libraryState.level2)[0].id\n      })\n    });\n    onSave();\n  }\n\n  function addSubChapter(subchapter_title) {\n    updateLibraryContent(draft => {\n      draft.push({\n        id: firebase.database().ref(\"usersScience/\" + userEmail + \"/library/\").push().key,\n        type: \"subchapter\",\n        title: subchapter_title,\n        source: libraryState.level3,\n        sourceId: libraryContent.filter(item => item.type === \"chapter\" && item.title === libraryState.level3)[0].id\n      })\n    });\n    onSave();\n  }\n\n  function addIdea(idea_title) {\n    updateLibraryContent(draft => {\n      draft.push({\n        id: firebase.database().ref(\"usersScience/\" + userEmail + \"/library/\").push().key,\n        type: \"idea\",\n        title: idea_title,\n        source: libraryState.level4,\n        sourceId: libraryContent.filter(item => item.type === \"subchapter\" && item.title === libraryState.level4)[0].id\n      })\n    });\n    onSave();\n  }\n\n  function addScienceNote(sciencenote_title) {\n    updateLibraryContent(draft => {\n      draft.push({\n        id: firebase.database().ref(\"usersScience/\" + userEmail + \"/library/\").push().key,\n        type: \"sciencenote\",\n        title: sciencenote_title,\n        source: libraryState.level5\n      })\n    });\n    onSave();\n  }\n\n\n  function updateLibrary(command = null, option = null) {\n    if (command === 'ShowAllBooks') {\n      updateLibraryState(draft => {\n        draft.level1 = 'Книги';\n        draft.level2 = 'Книга';\n        draft.level3 = 'Главы';\n        draft.level4 = 'Параграфы';\n        draft.level5 = 'Идеи'\n      })\n    }\n\n    if (command === 'ShowAllChapters') {\n      updateLibraryState(draft => {\n        draft.level3 = 'Главы';\n        draft.level4 = 'Параграфы';\n        draft.level5 = 'Идеи';\n      })\n    }\n\n    if (command === 'ShowAllSubChapters') {\n      updateLibraryState(draft => {\n        draft.level4 = 'Параграфы';\n        draft.level5 = 'Идеи';\n      })\n    }\n\n    if (command === 'ShowAllIdeas') {\n      updateLibraryState(draft => {\n        draft.level5 = 'Идеи';\n      })\n    }\n\n\n\n\n    if (command === 'SelectBook') {\n      updateLibraryState(draft => {\n        draft.level2 = option;\n      })\n    }\n\n    if (command === 'SelectChapter') {\n      updateLibraryState(draft => {\n        draft.level3 = option;\n      })\n    }\n\n    if (command === 'SelectSubChapter') {\n      updateLibraryState(draft => {\n        draft.level4 = option;\n      })\n    }\n\n    if (command === 'SelectIdea') {\n      updateLibraryState(draft => {\n        draft.level5 = option;\n      })\n    }\n\n  }\n\n  // if (!!currentEditId) {\n  //   return <Layout>\n  //     <ScienceNotesEditor note={currentEditId === \"new\" ? { id: \"new\" } : notes.filter(note => note.id === currentEditId)[0]} screenSize={screenSize} />\n  //   </Layout>\n  //   //    return <SmallScreenCalculations />;\n  // }\n\n\n  // if (screenSize !== \"large\") {\n  //   return <Layout>\n  //     Small Library\n  //   </Layout>  \n  // }\n\n  console.log(libraryState);\n\n\n  return (\n    <Layout>\n      <Container>\n        <Row>\n          <Col>\n            <Breadcrumb style={{ minWidth: \"30rem\" }}>\n              <Breadcrumb.Item onClick={() => updateLibrary('ShowAllBooks')}>{libraryState.level1}</Breadcrumb.Item>\n              <Breadcrumb.Item onClick={() => updateLibrary('ShowAllChapters')}>{libraryState.level2}</Breadcrumb.Item>\n              <Breadcrumb.Item onClick={() => updateLibrary('ShowAllSubChapters')}>{libraryState.level3}</Breadcrumb.Item>\n              <Breadcrumb.Item onClick={() => updateLibrary('ShowAllIdeas')}>{libraryState.level4}</Breadcrumb.Item>\n              <Breadcrumb.Item active >{libraryState.level5}</Breadcrumb.Item>\n            </Breadcrumb>\n            {libraryState.level1 === \"Книги\" && libraryState.level2 === \"Книга\" ?\n              <ShowBooks\n                books={libraryContent.filter(item => item.type === \"book\")}\n                updateLibrary={updateLibrary}\n                addBook={addBook}\n              />\n              : null}\n            {libraryState.level2 !== \"Книга\" && libraryState.level3 === \"Главы\" ?\n              <ShowChapters\n                chapters={libraryContent.filter(item =>\n                  item.type === \"chapter\" &&\n                  item.sourceId === libraryContent.filter(item => item.type === \"book\" && item.title === libraryState.level2)[0].id)} // && item.source === libraryState.level2\n                updateLibrary={updateLibrary}\n                addChapter={addChapter}\n              />\n              : null}\n            {libraryState.level3 !== \"Главы\" && libraryState.level4 === \"Параграфы\" ?\n              <ShowSubChapters\n                subchapters={libraryContent.filter(item =>\n                  item.type === \"subchapter\" &&\n                  item.sourceId === libraryContent.filter(item => item.type === \"chapter\" && item.title === libraryState.level3)[0].id)} //&& item.source === libraryState.level3\n                updateLibrary={updateLibrary}\n                addSubChapter={addSubChapter}\n              />\n              : null}\n            {libraryState.level4 !== \"Параграфы\" ?\n              <ShowIdeas\n                ideas={libraryContent.filter(item =>\n                  item.type === \"idea\" &&\n                  item.sourceId === libraryContent.filter(item => item.type === \"subchapter\" && item.title === libraryState.level4)[0].id)} // && item.source === libraryState.level4\n                updateLibrary={updateLibrary}\n                addIdea={addIdea}\n              />\n              : null}\n\n\n            {libraryState.level5 !== \"Идеи\" ?\n              <ReactBeautifulDnD\n                items={[\n                  { id: 1, type: \"citation\", title: \"Цитата 1\", source: \"Идея 1 Параграфа 1 Главы 1 Книги 1\" },\n                  { id: 2, type: \"citation\", title: \"Цитата 2\", source: \"Идея 1 Параграфа 1 Главы 1 Книги 1\" },\n                  { id: 3, type: \"citation\", title: \"Цитата 3\", source: \"Идея 1 Параграфа 1 Главы 1 Книги 1\" },\n                ]}\n                possibleItems={[\n                { id: 4, type: \"citation\", title: \"Цитата 4\", source: \"Идея 1 Параграфа 1 Главы 1 Книги 1\" },\n                { id: 5, type: \"citation\", title: \"Цитата 5\", source: \"Идея 1 Параграфа 1 Главы 1 Книги 1\" },\n                { id: 6, type: \"citation\", title: \"Цитата 6\", source: \"Идея 1 Параграфа 1 Главы 1 Книги 1\" },]}\n        //        updateLibrary={updateLibrary}\n                updatedList={updatedList}  \n              />\n              : null}\n\n\n\n          </Col>\n          <Col>\n            {/* <BookEditor /> */}\n            {libraryState.level5 !== \"Идеи\" ?\n              <ShowScienceNotes\n                sciencenotes={libraryContent.filter(item => item.type === \"sciencenote\" && item.source === libraryState.level5)}\n                updateLibrary={updateLibrary}\n              />\n              : <div>Выберите пункт</div>}\n          </Col>\n        </Row>\n      </Container>\n    </Layout>\n  );\n}\n\nfunction ShowBooks({ books = [], updateLibrary = null, addBook }) {\n  const [open, setOpen] = React.useState(false);\n  const { register, handleSubmit } = useForm();\n\n  const onSubmit = data => {\n    console.log(data);\n    addBook(data.book_title);\n    setOpen(false);\n  }\n\n  // console.log(books)\n\n  return <Container>\n    {!!books && books.map(book => <div key={book.id} onClick={() => updateLibrary(\"SelectBook\", book.title)}>\n      {book.title}\n    </div>)}\n\n    <Button\n      onClick={() => setOpen(!open)}\n      variant=\"outline-light\"\n      aria-controls=\"add_book_collapse\"\n      aria-expanded={open}\n      size=\"sm\"\n    >\n      {open ? \"-\" : \"+\"}\n    </Button>\n    <Collapse in={open}>\n      <div id=\"add_book_collapse\">\n        <Form onSubmit={handleSubmit(onSubmit)}>\n\n          <Form.Group controlId={\"book_name\"}>\n            <Form.Label className=\"small text-muted\">Добавить книгу</Form.Label>\n            <Form.Control\n              {...register(\"book_title\")}\n              as=\"textarea\"\n              rows=\"2\"\n            />\n            {/* <Form.Text className=\"text-muted\">Пример: =NPV(0.1;100,200,300)-500</Form.Text> */}\n          </Form.Group>\n          <Button\n            variant=\"outline-secondary\"\n\n            type=\"submit\"\n            size=\"sm\"\n            block\n          >\n            Сохранить\n          </Button>\n        </Form>\n      </div>\n    </Collapse>\n\n  </Container>\n}\n\nfunction ShowChapters({ chapters = [], updateLibrary = null, addChapter }) {\n  const [open, setOpen] = React.useState(false);\n  const { register, handleSubmit } = useForm();\n\n  const onSubmit = data => {\n    console.log(data);\n    addChapter(data.chapter_title);\n    setOpen(false);\n  }\n\n  // console.log(chapters);\n\n  return <Container>\n    {!!chapters && chapters.map(chapter => <div key={chapter.id} onClick={() => updateLibrary('SelectChapter', chapter.title)}>\n      {chapter.title}\n    </div>)}\n    <Button\n      onClick={() => setOpen(!open)}\n      variant=\"outline-light\"\n      aria-controls=\"add_chapter_collapse\"\n      aria-expanded={open}\n      size=\"sm\"\n    >\n      {open ? \"-\" : \"+\"}\n    </Button>\n    <Collapse in={open}>\n      <div id=\"add_chapter_collapse\">\n        <Form onSubmit={handleSubmit(onSubmit)}>\n\n          <Form.Group controlId={\"chapter_name\"}>\n            <Form.Label className=\"small text-muted\">Добавить главу</Form.Label>\n            <Form.Control\n              {...register(\"chapter_title\")}\n              as=\"textarea\"\n              rows=\"2\"\n            />\n            {/* <Form.Text className=\"text-muted\">Пример: =NPV(0.1;100,200,300)-500</Form.Text> */}\n          </Form.Group>\n          <Button\n            variant=\"outline-secondary\"\n            type=\"submit\"\n            size=\"sm\"\n            block\n          >\n            Сохранить\n          </Button>\n        </Form>\n      </div>\n    </Collapse>\n  </Container>\n}\n\nfunction ShowSubChapters({ subchapters = [], updateLibrary = null, addSubChapter }) {\n  const [open, setOpen] = React.useState(false);\n  const { register, handleSubmit } = useForm();\n\n  const onSubmit = data => {\n    console.log(data);\n    addSubChapter(data.subchapter_title);\n    setOpen(false);\n  }\n\n\n  console.log(subchapters)\n\n  return <Container>\n    {!!subchapters && subchapters.map(subchapter => <div key={subchapter.id} onClick={() => updateLibrary('SelectSubChapter', subchapter.title)}>\n      {subchapter.title}\n    </div>)}\n    <Button\n      onClick={() => setOpen(!open)}\n      variant=\"outline-light\"\n      aria-controls=\"add_subchapter_collapse\"\n      aria-expanded={open}\n      size=\"sm\"\n    >\n      {open ? \"-\" : \"+\"}\n    </Button>\n    <Collapse in={open}>\n      <div id=\"add_subchapter_collapse\">\n        <Form onSubmit={handleSubmit(onSubmit)}>\n\n          <Form.Group controlId={\"subchapter_name\"}>\n            <Form.Label className=\"small text-muted\">Добавить параграф</Form.Label>\n            <Form.Control\n              {...register(\"subchapter_title\")}\n              as=\"textarea\"\n              rows=\"2\"\n            />\n            {/* <Form.Text className=\"text-muted\">Пример: =NPV(0.1;100,200,300)-500</Form.Text> */}\n          </Form.Group>\n          <Button\n            variant=\"outline-secondary\"\n            type=\"submit\"\n            size=\"sm\"\n            block\n          >\n            Сохранить\n          </Button>\n        </Form>\n      </div>\n    </Collapse>\n\n  </Container>\n}\n\nfunction ShowIdeas({ ideas = [], updateLibrary = null, addIdea }) {\n  const [open, setOpen] = React.useState(false);\n  const { register, handleSubmit } = useForm();\n\n  const onSubmit = data => {\n    console.log(data);\n    addIdea(data.idea_title);\n    setOpen(false);\n  }\n\n  console.log(ideas)\n  return <Container>\n    {!!ideas && ideas.map(idea => <div key={idea.id} onClick={() => updateLibrary('SelectIdea', idea.title)}>\n      {idea.title}\n    </div>)}\n    <Button\n      onClick={() => setOpen(!open)}\n      variant=\"outline-light\"\n      aria-controls=\"add_idea_collapse\"\n      aria-expanded={open}\n      size=\"sm\"\n    >\n      {open ? \"-\" : \"+\"}\n    </Button>\n    <Collapse in={open}>\n      <div id=\"add_idea_collapse\">\n        <Form onSubmit={handleSubmit(onSubmit)}>\n\n          <Form.Group controlId={\"idea_name\"}>\n            <Form.Label className=\"small text-muted\">Добавить идею</Form.Label>\n            <Form.Control\n              {...register(\"idea_title\")}\n              as=\"textarea\"\n              rows=\"2\"\n            />\n            {/* <Form.Text className=\"text-muted\">Пример: =NPV(0.1;100,200,300)-500</Form.Text> */}\n          </Form.Group>\n          <Button\n            variant=\"outline-secondary\"\n            type=\"submit\"\n            size=\"sm\"\n            block\n          >\n            Сохранить\n          </Button>\n        </Form>\n      </div>\n    </Collapse>\n  </Container>\n}\n\nfunction ShowScienceNotes({ sciencenotes = [], updateLibrary = null }) {\n  console.log(sciencenotes)\n  return <Container className=\"mt-5\">\n    {!!sciencenotes && sciencenotes.map(sciencenote => <div key={sciencenote.id} > {/* onClick={() => updateLibrary('SelectIdea', sciencenote.title)} */}\n      <ShowScienceNote sciencenote={sciencenote} />\n    </div>)}\n  </Container>\n}\n\nfunction ShowScienceNote({ sciencenote }) {\n  const email = useSelector(selectApplication).email;\n  let userEmail = email.replace(/[^a-zA-Z0-9]/g, \"_\");\n  const { data: userNote, loading, error } = useFirebaseNode(\n    \"usersScience/\" + userEmail + \"/notes/\" + sciencenote.fireNodeId\n  );\n  const screenSize = useMedia(\n    // Media queries\n    [\"(min-width: 810px)\", \"(min-width: 400px)\", \"(min-width: 100px)\"],\n    // Column counts (relates to above media queries by array index)\n    [\"large\", \"medium\", \"small\"],\n    // Default column count\n    \"large\"\n  );\n  const [currentEditId, setCurrentEditId] = React.useState(null);\n\n  if (!!loading || !userNote) { return <div>...</div> }\n  if (!!error) { return <div>:-(</div> }\n\n  if (!!currentEditId) {\n    return <ScienceNotesEditor note={currentEditId === \"new\" ? { id: \"new\" } : userNote} screenSize={screenSize} />\n  }\n\n  return <ScienceNoteCard note={userNote} setCurrentEditId={setCurrentEditId} />\n}\n\n\n\n\n\n\n\n\n","import React, { useState } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { useForm, FormProvider, useFormContext } from \"react-hook-form\";\nimport firebase from \"gatsby-plugin-firebase\";\nimport ReactHtmlParser from 'react-html-parser'; //, { processNodes, convertNodeToElement, htmlparser2 }\n\nimport { selectApplication } from \"../features/application/applicationSlice\";\n\n//import CreatableSelectComponent from \"../components/CreatableSelectComponent\";\n\nimport useMedia from \"../hooks/useMedia\";\n\nimport ButtonGroup from \"react-bootstrap/ButtonGroup\";\nimport Container from \"react-bootstrap/Container\";\nimport Button from \"react-bootstrap/Button\";\nimport Form from \"react-bootstrap/Form\";\nimport Card from \"react-bootstrap/Card\";\n\nimport { SVGBootstrapIconPencilSquare, SVGBootstrapIconSearch, SVGBootstrapIconEnvelopeOpen } from \"../svgs\";\n\nfunction cardTitle(content) {\n    if (!!content?.h6) { return content.h6 }\n    if (!!content?.h5) { return content.h5 }\n    if (!!content?.h4) { return content.h4 }\n    if (!!content?.h3) { return content.h3 }\n    if (!!content?.h2) { return content.h2 }\n    if (!!content?.h1) { return content.h1 }\n    return \"Заголовок\"\n}\n\n\nexport function ScienceNoteCard({ note, setCurrentEditId = null }) {\n    const [currentFullMode, setCurrentFullMode] = React.useState(false);\n\n    const screenSize = useMedia(\n        // Media queries\n        [\"(min-width: 810px)\", \"(min-width: 400px)\", \"(min-width: 100px)\"],\n        // Column counts (relates to above media queries by array index)\n        [\"large\", \"medium\", \"small\"],\n        // Default column count\n        \"large\"\n    );\n\n    function toggleMode() {\n        setCurrentFullMode((currentFullMode) => !currentFullMode)\n    }\n\n    if (screenSize !== \"large\") {\n        return <div key={note.id}>\n            <small className={currentFullMode ? \"\" : \"line-clamp\"} >{ReactHtmlParser(note.content.last_edit)}</small>\n            <br />\n            <Button variant=\"outline-light\" size=\"sm\" onClick={() => setCurrentEditId(note.id)}> <SVGBootstrapIconPencilSquare /></Button>\n            <Button variant=\"outline-light\" size=\"sm\" onClick={() => toggleMode()}> <SVGBootstrapIconEnvelopeOpen /></Button>\n            <cite title=\"cited_reference\"><small>{note.content.cited_reference}</small></cite>\n            {\"   \"}\n            <cite title=\"plagiarism\"><small>{note.date + \"   \"}  {note.content.plagiarism}</small></cite>\n\n            <hr />\n        </div>\n    }\n\n    return <Card key={note.id} className=\"mb-1\">\n        <Card.Header>\n            <Button variant=\"outline-light\" size=\"sm\" onClick={() => setCurrentEditId(note.id)}> <SVGBootstrapIconPencilSquare /></Button>\n            <Button variant=\"outline-light\" size=\"sm\" onClick={() => toggleMode()}> <SVGBootstrapIconEnvelopeOpen /></Button>\n            <span className=\"ml-2\" >{cardTitle(note.content)}</span>\n        </Card.Header>\n        <Card.Body>\n            {/* <Card.Title>Special title treatment</Card.Title> */}\n            <blockquote className=\"blockquote mb-0\">\n                <small className={currentFullMode ? \"\" : \"line-clamp\"}>{!!note?.content?.last_edit ? ReactHtmlParser(note.content.last_edit) : \"-\"}</small>\n\n                {!!note?.content?.cited_reference ?\n                    <footer className=\"blockquote-footer\">\n                        <cite title=\"Сited_Reference\"> {note.content.cited_reference}</cite>\n                    </footer>\n                    : null}\n\n                {!!note?.content?.plagiarism ?\n                    <footer className=\"blockquote-footer\">\n                        <cite title=\"Plagiarism\">{note.date + \"   \"} {note.content.plagiarism} </cite>\n                    </footer>\n                    : null}\n\n            </blockquote>\n            {/* <Card.Text>{note.content.h3}</Card.Text> */}\n\n        </Card.Body>\n    </Card>\n}\n\n\n\n\n// let formFields = [\n//     { id: 0, name: 'h1' },\n//     { id: 1, name: 'h2' },\n//     { id: 2, name: 'h3' },\n//     { id: 3, name: 'h4' },\n//     { id: 4, name: 'h5' },\n//     { id: 5, name: 'h6' },\n//     { id: 6, name: 'last_edit' },\n//     { id: 7, name: 'cited_reference' }\n// ]\n\nfunction isObject(val) { if (val === null) { return false; } return ((typeof val === 'function') || (typeof val === 'object')); }\n\nexport default function ScienceNotesEditor({ note, screenSize }) {\n    const email = useSelector(selectApplication).email;\n    const user = useSelector(selectApplication).user;\n    const avatarUrl = useSelector(selectApplication)?.avatarUrl;\n    const [savedAnswer, setSavedAnswer] = useState(null);\n    const methods = useForm({ defaultValues: !!note?.content ? note.content : {} });\n    const { handleSubmit } = methods;\n    const [currentField, setCurrentField] = useState('last_edit');\n    const [tags, setTags] = useState([]);\n\n\n\n    function updateTags(newtags) {\n        setTags(tags => [...newtags]);\n    }\n\n    //  console.log(note);\n\n\n\n    const onSubmit = data => {\n        console.log(data);\n\n        if (email.length > 6) {\n            let userEmail = email.replace(/[^a-zA-Z0-9]/g, \"_\");\n            let idNote = !!note?.id && note.id !== \"new\" ? note.id : firebase.database().ref(\"usersScience/\" + userEmail).child(\"notes\").push().key;\n\n            let old_editions = isObject(note?.content?.old_editions) ?\n                [...Object.keys(note.content.old_editions).map((keyItem) => { return note.content.old_editions[keyItem] }), data.last_edit]\n                : [data.last_edit];\n\n            console.log(old_editions);\n\n            let postObject = {\n                id: idNote, //Math.floor(Math.random() * 1001),\n                //         title: props.text,\n                //         theme: currentProjectTitle,\n                //         //    //     answer: value,\n                //         comment: currentProjectMediaAndDataAndTemplatesURL, //Тема\n                type: 'sciencenotes',\n                content: { ...data, old_editions, tags },\n                //         quizString: 'Рассчитано по отчетности ' + currentProjectTitle + ' по адресу ' + currentProjectSourseDataURL,\n                deleted: false,\n                email: email,\n                user: user,\n                avatarUrl: !!avatarUrl ? avatarUrl : null,\n                date: new Intl.DateTimeFormat(\"ru\", {\n                    weekday: \"short\",\n                    year: \"numeric\",\n                    month: \"short\",\n                    day: \"numeric\",\n                    hour: \"numeric\",\n                    minute: \"numeric\",\n                }).format(new Date()), //Date().toJSON()\n            };\n\n            console.log(postObject);\n\n            var updates = {};\n            updates[\"usersScience/\" + userEmail + \"/notes/\" + idNote] = postObject;\n\n            return firebase.database().ref().update(updates).then(() => {\n                setSavedAnswer(true);\n                setTimeout(window.location.reload(), 8000);\n            });\n\n        }\n    }\n\n\n\n\n    return <FormProvider {...methods}>\n\n        {screenSize === \"large\" ?\n            <Container>\n                <ButtonGroup aria-label=\"Basic example\" size=\"sm\">\n                    <Button variant=\"outline-secondary\" onClick={() => setCurrentField(\"h1\")}>h1</Button>\n                    <Button variant=\"outline-secondary\" onClick={() => setCurrentField(\"h2\")}>h2</Button>\n                    <Button variant=\"outline-secondary\" onClick={() => setCurrentField(\"h3\")}>h3</Button>\n                    <Button variant=\"outline-secondary\" onClick={() => setCurrentField(\"h4\")}>h4</Button>\n                    <Button variant=\"outline-secondary\" onClick={() => setCurrentField(\"h5\")}>h5</Button>\n                    <Button variant=\"outline-secondary\" onClick={() => setCurrentField(\"h6\")}>h6</Button>\n                    <Button variant=\"outline-secondary\" onClick={() => setCurrentField(\"last_edit\")}>Last Edit</Button>\n                    <Button variant=\"outline-secondary\" onClick={() => setCurrentField(\"cited_reference\")}>Cited Reference</Button>\n                    <Button variant=\"outline-secondary\" onClick={() => setCurrentField(\"plagiarism\")}>Plagiarism</Button>\n                </ButtonGroup>\n                <Form onSubmit={handleSubmit(onSubmit)}>\n                    {(() => {\n                        switch (currentField) {\n                            case \"h1\": return <ActiveField key={currentField} name={currentField} label={\"Заголовок 1\"} />;\n                            case \"h2\": return <ActiveField key={currentField} name={currentField} label={\"Заголовок 2\"} />;\n                            case \"h3\": return <ActiveField key={currentField} name={currentField} label={\"Заголовок 3\"} />;\n                            case \"h4\": return <ActiveField key={currentField} name={currentField} label={\"Заголовок 4\"} />;\n                            case \"h5\": return <ActiveField key={currentField} name={currentField} label={\"Заголовок 5\"} />;\n                            case \"h6\": return <ActiveField key={currentField} name={currentField} label={\"Заголовок 6\"} />;\n                            case \"last_edit\": return <ActiveField key={currentField} name={currentField} label={\"Текст\"} />;\n                            case \"cited_reference\": return <ActiveField key={currentField} name={currentField} label={\"Источник\"} />;\n                            case \"plagiarism\": return <ActiveField key={currentField} name={currentField} label={\"Уникальность\"} />;\n                        }\n                    })()}\n\n                    {/* <CreatableSelectComponent tags={note.content.tags} updateTags={updateTags} /> */}\n\n                    <Button\n                        variant=\"outline-secondary\"\n                        type=\"submit\"\n                        size=\"sm\"\n                        block\n                        disabled={savedAnswer}\n                    >\n                        Сохранить\n                    </Button>\n\n                    {!!note.content?.old_editions ? <SaveJustFirstAndLastEditions note={note} email={email} /> : null}\n\n                </Form>\n\n\n\n            </Container> :\n            <Container>\n                <Form onSubmit={handleSubmit(onSubmit)}>\n                    <ActiveField name={\"h6\"} label={\"Заголовок\"} />\n                    <ActiveField name={\"last_edit\"} label={\"Текст\"} />\n                    <ActiveField name={'cited_reference'} label={\"Источник\"} />\n                    <ActiveField name={'plagiarism'} label={\"Уникальность\"} />\n                    <Button\n                        variant=\"outline-secondary\"\n                        type=\"submit\"\n                        size=\"sm\"\n                        block\n                        disabled={savedAnswer}\n                    >\n                        Сохранить\n                    </Button>\n\n                </Form>\n\n                {!!note.content?.old_editions ? <SaveJustFirstAndLastEditions note={note} email={email} /> : null}\n\n\n            </Container>\n        }\n\n\n\n        {/* {formFields.map((item) =>\n                <ActiveField key={item.name} name={item.name} />\n            )} */}\n\n    </FormProvider>\n}\n\nfunction ActiveField({ name, label = null }) {\n    const methods = useFormContext();\n    return <Form.Group controlId={\"field_\" + name}>\n        <Form.Label className=\"small text-muted\">{!!label ? label : name}</Form.Label>\n        <Form.Control\n            {...methods.register(name)}\n            as=\"textarea\"\n            rows=\"3\"\n        />\n        {/* <Form.Text className=\"text-muted\">Пример: =NPV(0.1;100,200,300)-500</Form.Text> */}\n    </Form.Group>\n}\n\n\nfunction SaveJustFirstAndLastEditions({ note, email }) {\n\n    function SaveJustFirstAndLast() {\n\n        if (email.length > 6) {\n            let userEmail = email.replace(/[^a-zA-Z0-9]/g, \"_\");\n            let idNote = !!note?.id && note.id !== \"new\" ? note.id : firebase.database().ref(\"usersScience/\" + userEmail).child(\"notes\").push().key;\n\n            // let old_editions = []; isObject(note?.content?.old_editions) ?\n            //     [Object.keys(note.content.old_editions).map((keyItem) => { return note.content.old_editions[keyItem] })[0]]\n            //     : null;\n\n            // console.log(old_editions);\n\n            let content = { ...note.content, old_editions: null }\n\n            let postObject = {\n                ...note,\n                content,\n                date: new Intl.DateTimeFormat(\"ru\", {\n                    weekday: \"short\",\n                    year: \"numeric\",\n                    month: \"short\",\n                    day: \"numeric\",\n                    hour: \"numeric\",\n                    minute: \"numeric\",\n                }).format(new Date()), //Date().toJSON()\n            };\n\n            console.log(postObject);\n\n            var updates = {};\n            updates[\"usersScience/\" + userEmail + \"/notes/\" + idNote] = postObject;\n\n            return firebase.database().ref().update(updates).then(() => {\n                //     setSavedAnswer(true);\n                setTimeout(window.location.reload(), 8000);\n            });\n\n        }\n\n    }\n\n\n    return <Button\n        variant=\"outline-secondary\"\n        size=\"sm\"\n        block\n        onClick={() => SaveJustFirstAndLast()}\n    >\n        {note.content.old_editions.length}  Удалить старые редакции\n    </Button>\n}","var rafSchd = function rafSchd(fn) {\n  var lastArgs = [];\n  var frameId = null;\n\n  var wrapperFn = function wrapperFn() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    lastArgs = args;\n\n    if (frameId) {\n      return;\n    }\n\n    frameId = requestAnimationFrame(function () {\n      frameId = null;\n      fn.apply(void 0, lastArgs);\n    });\n  };\n\n  wrapperFn.cancel = function () {\n    if (!frameId) {\n      return;\n    }\n\n    cancelAnimationFrame(frameId);\n    frameId = null;\n  };\n\n  return wrapperFn;\n};\n\nexport default rafSchd;"],"sourceRoot":""}