!function (e, t) { "object" == typeof exports && "object" == typeof module ? module.exports = t() : "function" == typeof define && define.amd ? define([], t) : "object" == typeof exports ? exports.dmgl = t() : e.dmgl = t() }(self, (function () { return (() => { "use strict"; var e = {}; (e => { "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, { value: "Module" }), Object.defineProperty(e, "__esModule", { value: !0 }) })(e); var t = localStorage.getItem("reduxState") ? JSON.parse(localStorage.getItem("reduxState")) : { posts: [], selectedPost: null, data: [], status: "loading" }; const r = window.Redux.createStore((function () { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : t, r = arguments.length > 1 ? arguments[1] : void 0; if ("CHANGE_STATUS" === r.type) { var a = window.immer.produce(e, (function (e) { e.status = r.payload.value })); return a } if ("CHANGE_SELECTED_POST" === r.type) { var n = window.immer.produce(e, (function (e) { e.selectedPost = r.payload })); return n } if ("ADD_ITEM_TO_POSTS" === r.type) { var c = window.immer.produce(e, (function (e) { e.posts.push(r.payload) })); return c } if ("DELETE_ITEM_IN_POSTS" === r.type) { var o = window.immer.produce(e, (function (e) { var t = e.posts.findIndex((function (e) { return e.id === r.payload.id })); -1 !== t && e.posts.splice(t, 1) })); return o } if ("UPDATE_ITEM_IN_POSTS" === r.type) { var l = window.immer.produce(e, (function (e) { var t = e.posts.findIndex((function (e) { return e.id === r.payload.id })); -1 !== t && (e.posts[t] = r.payload) })); return l } return e }), window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__()); function a() { return a = Object.assign || function (e) { for (var t = 1; t < arguments.length; t++) { var r = arguments[t]; for (var a in r) Object.prototype.hasOwnProperty.call(r, a) && (e[a] = r[a]) } return e }, a.apply(this, arguments) } function n(e, t) { var r = Object.keys(e); if (Object.getOwnPropertySymbols) { var a = Object.getOwnPropertySymbols(e); t && (a = a.filter((function (t) { return Object.getOwnPropertyDescriptor(e, t).enumerable }))), r.push.apply(r, a) } return r } function c(e) { for (var t = 1; t < arguments.length; t++) { var r = null != arguments[t] ? arguments[t] : {}; t % 2 ? n(Object(r), !0).forEach((function (t) { o(e, t, r[t]) })) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(r)) : n(Object(r)).forEach((function (t) { Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(r, t)) })) } return e } function o(e, t, r) { return t in e ? Object.defineProperty(e, t, { value: r, enumerable: !0, configurable: !0, writable: !0 }) : e[t] = r, e } var l = ReactRedux, i = l.Provider, s = l.useDispatch, m = l.useSelector, u = ReactHookForm.useForm, d = CryptoJS.SHA256; function p() { return React.createElement(i, { store: r }, "Hello World!", React.createElement(f, null), React.createElement(E, null)) } function f() { var e = u(), t = e.register, r = e.handleSubmit, n = e.watch, o = (e.formState.errors, s()), l = d(JSON.stringify({ id: n("id"), date: n("date"), text: n("text") })).toString(); return React.createElement("div", { className: "card" }, React.createElement("img", { src: "https://images.unsplash.com/photo-1561451213-d5c9f0951fdf?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1031&q=80", className: "card-img-top", alt: "..." }), React.createElement("div", { className: "card-body" }, React.createElement("h5", { className: "card-title" }, "Новый блок"), React.createElement("form", { onSubmit: r((function (e) { console.log(e); var t = c(c({}, e), {}, { hash: d(JSON.stringify(e)).toString() }); o({ type: "ADD_ITEM_TO_POSTS", payload: t }) })) }, React.createElement("div", { className: "row g-3 align-items-center m-2" }, React.createElement("div", { className: "col-1" }, React.createElement("label", { htmlFor: "idNumber", className: "col-form-label" }, "#")), React.createElement("div", { className: "col-2" }, React.createElement("input", a({ type: "number" }, t("id"), { id: "inputPassword6", className: "form-control", "aria-describedby": "passwordHelpInline" }))), React.createElement("div", { className: "col-1" }, React.createElement("label", { htmlFor: "inputPassword6", className: "col-form-label" }, "Date")), React.createElement("div", { className: "col-4" }, React.createElement("input", a({ type: "date" }, t("date"))))), React.createElement("div", { className: "row" }, React.createElement("textarea", a({ className: "m-3" }, t("text", { required: !0 })))), React.createElement("input", { type: "submit" })), React.createElement("p", { className: "card-text" }, "hash: ", l))) } function E() { var e = s(), t = m((function (e) { return e.posts })); return React.createElement("div", null, React.createElement("div", { className: "list-group m-3" }, t.map((function (r, a) { return React.createElement("div", { key: r.hash, className: "list-group-item list-group-item-action", "aria-current": "true", onClick: function () { return function (r) { console.log(r), console.log(t[r]), e({ type: "CHANGE_SELECTED_POST", payload: t[r] }) }(a) } }, React.createElement("div", { className: "d-flex w-100 justify-content-between" }, React.createElement("h5", { className: "mb-1" }, r.id)), React.createElement("p", { className: "mb-1" }, r.text), React.createElement("div", null, React.createElement("small", null, "Хэш предыдущего блока:", " ", a > 0 ? t[a - 1].hash : "-")), React.createElement("div", null, React.createElement("small", null, "Хэш текущего блока: ", r.hash), " ")) })))) } return console.log(window), ReactDOM.render(React.createElement(p, null), document.getElementById("mydiv")), e })() }));
