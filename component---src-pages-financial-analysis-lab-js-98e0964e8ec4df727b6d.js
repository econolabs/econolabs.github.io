(window.webpackJsonp=window.webpackJsonp||[]).push([[428],{"+YzT":function(e,t,n){"use strict";n("n0hJ");var r=n("wx14"),a=n("zLVn"),o=n("TSYQ"),c=n.n(o),l=(n("K9S6"),n("q1tI")),i=n.n(l),u=n("JCAc"),s=n("vUet"),f=i.a.createContext(null),m=n("Wzyw"),v=(n("sc67"),n("Zeqi"));var b=function(e){return e&&"function"!=typeof e?function(t){e.current=t}:e};var d=function(e,t){return Object(l.useMemo)((function(){return function(e,t){var n=b(e),r=b(t);return function(e){n&&n(e),r&&r(e)}}(e,t)}),[e,t])},y=i.a.createContext(null),p=i.a.createContext(),j=function(e,t){return null!=e?String(e):t||null},O=p,g=i.a.createContext(null),h=function(){},E=i.a.forwardRef((function(e,t){var n,o,c=e.as,u=void 0===c?"ul":c,s=e.onSelect,f=e.activeKey,m=e.role,b=e.onKeyDown,p=Object(a.a)(e,["as","onSelect","activeKey","role","onKeyDown"]),E=Object(l.useReducer)((function(e){return!e}),!1)[1],k=Object(l.useRef)(!1),S=Object(l.useContext)(O),I=Object(l.useContext)(g);I&&(m=m||"tablist",f=I.activeKey,n=I.getControlledId,o=I.getControllerId);var _=Object(l.useRef)(null),w=function(e){if(!_.current)return null;var t=Object(v.a)(_.current,"[data-rb-event-key]:not(.disabled)"),n=_.current.querySelector(".active"),r=t.indexOf(n);if(-1===r)return null;var a=r+e;return a>=t.length&&(a=0),a<0&&(a=t.length-1),t[a]},C=function(e,t){null!=e&&(s&&s(e,t),S&&S(e,t))};Object(l.useEffect)((function(){if(_.current&&k.current){var e=_.current.querySelector("[data-rb-event-key].active");e&&e.focus()}k.current=!1}));var x=d(t,_);return i.a.createElement(O.Provider,{value:C},i.a.createElement(y.Provider,{value:{role:m,activeKey:j(f),getControlledId:n||h,getControllerId:o||h}},i.a.createElement(u,Object(r.a)({},p,{onKeyDown:function(e){var t;switch(b&&b(e),e.key){case"ArrowLeft":case"ArrowUp":t=w(-1);break;case"ArrowRight":case"ArrowDown":t=w(1);break;default:return}t&&(e.preventDefault(),C(t.dataset.rbEventKey,e),k.current=!0,E())},ref:x,role:m}))))})),k=i.a.forwardRef((function(e,t){var n=e.bsPrefix,o=e.className,l=e.children,u=e.as,f=void 0===u?"div":u,m=Object(a.a)(e,["bsPrefix","className","children","as"]);return n=Object(s.b)(n,"nav-item"),i.a.createElement(f,Object(r.a)({},m,{ref:t,className:c()(o,n)}),l)}));k.displayName="NavItem";var S=k,I=n("dbZe"),_=n("ZCiN"),w=(n("2W6z"),i.a.forwardRef((function(e,t){var n=e.active,o=e.className,u=e.tabIndex,s=e.eventKey,f=e.onSelect,m=e.onClick,v=e.as,b=Object(a.a)(e,["active","className","tabIndex","eventKey","onSelect","onClick","as"]),d=j(s,b.href),p=Object(l.useContext)(O),g=Object(l.useContext)(y),h=n;if(g){b.role||"tablist"!==g.role||(b.role="tab");var E=g.getControllerId(d),k=g.getControlledId(d);b["data-rb-event-key"]=d,b.id=E||b.id,b["aria-controls"]=k||b["aria-controls"],h=null==n&&null!=d?g.activeKey===d:n}"tab"===b.role&&(b.tabIndex=h?u:-1,b["aria-selected"]=h);var S=Object(_.a)((function(e){m&&m(e),null!=d&&(f&&f(d,e),p&&p(d,e))}));return i.a.createElement(v,Object(r.a)({},b,{ref:t,onClick:S,className:c()(o,h&&"active")}))})));w.defaultProps={disabled:!1};var C=w,x={disabled:!1,as:I.a},P=i.a.forwardRef((function(e,t){var n=e.bsPrefix,o=e.disabled,l=e.className,u=e.href,f=e.eventKey,m=e.onSelect,v=e.as,b=Object(a.a)(e,["bsPrefix","disabled","className","href","eventKey","onSelect","as"]);return n=Object(s.b)(n,"nav-link"),i.a.createElement(C,Object(r.a)({},b,{href:u,ref:t,eventKey:f,as:v,disabled:o,onSelect:m,className:c()(l,n,o&&"disabled")}))}));P.displayName="NavLink",P.defaultProps=x;var N=P,V=i.a.forwardRef((function(e,t){var n,o,v,b=Object(u.a)(e,{activeKey:"onSelect"}),d=b.as,y=void 0===d?"div":d,p=b.bsPrefix,j=b.variant,O=b.fill,g=b.justify,h=b.navbar,k=b.className,S=b.children,I=b.activeKey,_=Object(a.a)(b,["as","bsPrefix","variant","fill","justify","navbar","className","children","activeKey"]);p=Object(s.b)(p,"nav");var w=Object(l.useContext)(f),C=Object(l.useContext)(m.a);return w?(o=w.bsPrefix,h=null==h||h):C&&(v=C.cardHeaderBsPrefix),i.a.createElement(E,Object(r.a)({as:y,ref:t,activeKey:I,className:c()(k,(n={},n[p]=!h,n[o+"-nav"]=h,n[v+"-"+j]=!!v,n[p+"-"+j]=!!j,n[p+"-fill"]=O,n[p+"-justified"]=g,n))},_),S)}));V.displayName="Nav",V.defaultProps={justify:!1,fill:!1},V.Item=S,V.Link=N;t.a=V},S6L3:function(e,t,n){"use strict";n.r(t);var r=n("q1tI"),a=n.n(r),o=(n("xtjI"),n("pJf4"),n("q8oJ"),n("cFtU"),n("m210"),n("4DPX"),n("HQhv"),n("gu/5"),n("eoYm"),n("Ggvi"),n("E5k/"),n("6kNP"),n("rzGZ"),n("Dq+y"),n("8npG"),n("YbXK"),n("Til1")),c=n("eDuk"),l=n.n(c),i=n("WV72"),u=(n("CtJk"),n("n7j8"),"undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)),s=new Uint8Array(16);function f(){if(!u)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return u(s)}n("C9fy");for(var m=[],v=0;v<256;++v)m.push((v+256).toString(16).substr(1));var b=function(e,t){var n=t||0;return(m[e[n+0]]+m[e[n+1]]+m[e[n+2]]+m[e[n+3]]+"-"+m[e[n+4]]+m[e[n+5]]+"-"+m[e[n+6]]+m[e[n+7]]+"-"+m[e[n+8]]+m[e[n+9]]+"-"+m[e[n+10]]+m[e[n+11]]+m[e[n+12]]+m[e[n+13]]+m[e[n+14]]+m[e[n+15]]).toLowerCase()};var d=function(e,t,n){var r=(e=e||{}).random||(e.rng||f)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var a=0;a<16;++a)t[n+a]=r[a];return t}return b(r)},y=n("SGa5"),p=n("pKDO"),j=n("7vrA"),O=n("+YzT"),g=n("3Z9Z"),h=n("JI6e");function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){S(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function I(e){return function(e){if(Array.isArray(e))return _(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return _(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var w=new l.a({allErrors:!0});function C(e){var t=w.compile(e);return function(e){if(t(e),t.errors&&t.errors.length)throw{details:t.errors}}}var x=function(e){var t,n,o=Object(r.useState)(!1),c=o[0],l=o[1],i=Object(r.useState)({}),u=i[0],s=i[1],f=Object(r.useState)(null),m=f[0],v=f[1],b=Object(r.useState)({}),d=b[0],g=b[1],h=Object(r.useState)({}),E=h[0],k=h[1],S=Object(p.a)();return Object(r.useEffect)((function(){var t,n=[];S.edges.forEach((function(e){n.push(e.node)}));var r,a={},o={};Object.keys(e.uniformSchema.properties).map((function(e){var t,r;a[e]=(null===(t=n.filter((function(t){return t.dictionaryId===e}))[0])||void 0===t?void 0:t.comment)||"Показатель",o[e]=(null===(r=n.filter((function(t){return t.dictionaryId===e}))[0])||void 0===r?void 0:r.type)||"text"})),g(a),k(o),(r=(null===(t=e.uniformSchema)||void 0===t?void 0:t.properties)?Object.keys(e.uniformSchema.properties):[],Promise.all(["currenttask"].concat(I(r)).map((function(e){return y.userCraft.getItem(e).then((function(t){var n;return(n={})[e]=t,n})).catch((function(t){var n;return console.log(t),(n={})[e]=null,n}))}))).then((function(e){return Object.assign.apply(Object,I(e))}))).then((function(e){var t=e.currenttask,n=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,["currenttask"]);v(t),s(n),l(!0)})).catch((function(e){console.log(e)}))}),[]),console.log(e),c&&!(null===(t=e.uniformSchema)||void 0===t?void 0:t.columns)?a.a.createElement(j.a,null,a.a.createElement(O.a,{fill:!0,className:"justify-content-center"},a.a.createElement(O.a.Item,null,a.a.createElement("small",null,m)),a.a.createElement(O.a.Item,null,a.a.createElement("small",null,e.uniformSchema.title))),a.a.createElement(N,{formDictionaryTitles:d,formDictionaryTypes:E,formInitialValues:u,currentTask:m,uniformSchema:e.uniformSchema})):c&&(null===(n=e.uniformSchema)||void 0===n?void 0:n.columns)&&e.uniformSchema.columns.length>1?a.a.createElement(j.a,null,a.a.createElement(O.a,{fill:!0,className:"justify-content-center"},a.a.createElement(O.a.Item,null,a.a.createElement("small",null,m)),a.a.createElement(O.a.Item,null,a.a.createElement("small",null,e.uniformSchema.title))),a.a.createElement(P,{formDictionaryTitles:d,formDictionaryTypes:E,formInitialValues:u,formColumns:e.uniformSchema.columns,currentTask:m,uniformSchema:e.uniformSchema})):null};function P(e){var t=Object(r.useState)(!1),n=t[0],c=t[1],l=Object(r.useState)({}),u=l[0],s=l[1],f=Object(r.useState)({}),m=f[0],v=f[1],b=Object(r.useState)([]),p=b[0],O=b[1],E=e.currentTask;Object(r.useEffect)((function(){var t={},n=[],r={};console.log(e.formInitialValues),Object.keys(e.uniformSchema.properties).map((function(r){e.formColumns.map((function(a){var o=r+"_|_"+a;t[o]=e.uniformSchema.properties[r],n.push(o)}))})),console.log(t),Object.keys(e.formInitialValues||{}).forEach((function(t){var n=e.formInitialValues[t];Object.keys(n||{}).forEach((function(e){var a;if((null===(a=n[e])||void 0===a?void 0:a.currenttask)&&n[e].currenttask===E){var o,c,l=null==n||null===(o=n[e])||void 0===o?void 0:o.period,i=null==n||null===(c=n[e])||void 0===c?void 0:c.value;r[t+"_|_"+l]=i}}))})),O(n),v(t),s(r),c(!0)}),[]),console.log(e);var S=k(k({},e.uniformSchema),{},{properties:m,required:p}),I=new i.a(S,C(S));return console.log(u),a.a.createElement(j.a,null,n?a.a.createElement(o.b,{schema:I,model:u,onSubmit:function(t){return function(t){console.log(t);var n={};Object.keys(e.formInitialValues).map((function(r){n[r]=k({},e.formInitialValues[r]),Object.keys(t).map((function(a){if(a.includes(r)){var o=a.split("_|_"),c=null;e.formInitialValues[r]&&Object.keys(e.formInitialValues[r]).forEach((function(t){var n=e.formInitialValues[r][t];n.currenttask===E&&n.period===o[1]&&(c=t)})),c?(n[r][c]={currenttask:E,period:o[1],context:"Default",value:t[a]},console.log(n[r])):(n[r][d()]={currenttask:E,period:o[1],context:"Default",value:t[a]},console.log(n[r]))}}))}));var r=[];for(var a in Object.keys(n)){var o=Object.keys(n)[a];r.push(y.userCraft.setItem(o,n[o]))}Promise.all(r).then((function(){c(!0)}))}(t)},className:"m-3"},a.a.createElement(g.a,null,a.a.createElement(h.a,null,"Показатели"),e.formColumns.map((function(e){return a.a.createElement(h.a,{key:e},e)}))),Object.keys(e.uniformSchema.properties).map((function(t){return a.a.createElement(g.a,{key:t},a.a.createElement(h.a,null,e.formDictionaryTitles[t]),e.formColumns.map((function(e){return a.a.createElement(h.a,{key:e},a.a.createElement(o.a,{name:t+"_|_"+e,key:t+"_|_"+e}))})))})),Object.keys(m).map((function(e){return a.a.createElement(g.a,{key:e},a.a.createElement(o.c,{name:e,key:e}))})),a.a.createElement(o.e,null)):null)}function N(e){var t=Object(r.useState)(!1),n=t[0],c=t[1],l=Object(r.useState)({}),u=l[0],s=l[1],f=e.currentTask;Object(r.useEffect)((function(){var t={};Object.keys(e.formInitialValues||{}).forEach((function(n){var r=e.formInitialValues[n];Object.keys(r||{}).forEach((function(e){var a;if((null===(a=r[e])||void 0===a?void 0:a.currenttask)&&r[e].currenttask===f){var o,c=null==r||null===(o=r[e])||void 0===o?void 0:o.value;t[n]=c}}))})),s(t),c(!0)}),[]),console.log(u);var m=k({},e.uniformSchema),v=new i.a(m,C(m));return n?a.a.createElement("div",{style:{margin:"0 auto",maxWidth:800,padding:"2rem"}},a.a.createElement("div",{className:"m-3"},a.a.createElement(o.b,{schema:v,model:u,onSubmit:function(t){return function(t){var n={};Object.keys(e.formInitialValues).map((function(r){console.log(r),n[r]=k({},e.formInitialValues[r]),console.log(r),Object.keys(t).map((function(a){if(a.includes(r)){var o=null;e.formInitialValues[r]&&Object.keys(e.formInitialValues[r]).forEach((function(t){e.formInitialValues[r][t].currenttask===f&&(o=t)})),o?(n[r][o]={currenttask:f,context:"Default",value:t[a]},console.log(n[r])):(n[r][d()]={currenttask:f,context:"Default",value:t[a]},console.log(n[r]))}}))}));var r=[];for(var a in Object.keys(n)){var o=Object.keys(n)[a];r.push(y.userCraft.setItem(o,n[o]))}Promise.all(r).then((function(){c(!0)}))}(t)}}))):null}var V=n("LbRr"),D=n("pJDg"),K=n("cWnB"),T=[{title:"Сведения о проекте",type:"object",properties:{currentcompanyfullname:{type:"string",label:"Название компании"},currentcompanyreporturl:{type:"string",label:"Название компании"},currentcompanyunitofmoney:{type:"string",label:"Ден. ед."},additionalInfo:{type:"string",label:"Комментарий"}},required:["currentcompanyfullname","currentcompanyreporturl","currentcompanyunitofmoney"]},{title:"Структура баланса",type:"object",columns:["2017","2018","2019"],properties:{code2110_minfin_ru_66n:{type:"integer",label:""},code1100_minfin_ru_66n:{type:"integer",label:""},code1200_minfin_ru_66n:{type:"integer",label:""},code1300_minfin_ru_66n:{type:"integer",label:""},code1400_minfin_ru_66n:{type:"integer",label:""},code1500_minfin_ru_66n:{type:"integer",label:""}},required:["code2110_minfin_ru_66n","code1100_minfin_ru_66n","code1200_minfin_ru_66n","code1300_minfin_ru_66n","code1400_minfin_ru_66n","code1500_minfin_ru_66n"]}];t.default=function(){var e=Object(r.useState)(0),t=e[0],n=e[1],o=Object(r.useState)(!0),c=o[0],l=o[1],i=Object(r.useState)(T[0]),u=i[0],s=i[1];return a.a.useEffect((function(){l(!1),s(T[t]);var e=setTimeout((function(){l(!0)}),0);return function(){return clearTimeout(e)}}),[t]),console.log(T[t]),a.a.createElement(a.a.Fragment,null,a.a.createElement(V.a,{siteTitle:"Econolabs"}),a.a.createElement(g.a,null,a.a.createElement(h.a,{sm:"3"},a.a.createElement(D.a,{vertical:!0,className:"m-5",size:"sm",style:{with:"100%"}},T.map((function(e,t){return a.a.createElement(K.a,{key:t,variant:"outline-secondary",onClick:function(){return n(t)}},e.title)})))),a.a.createElement(h.a,{sm:"9"},a.a.createElement(j.a,null,c?a.a.createElement(x,{uniformSchema:u}):null))))}},pJDg:function(e,t,n){"use strict";var r=n("wx14"),a=n("zLVn"),o=n("TSYQ"),c=n.n(o),l=n("q1tI"),i=n.n(l),u=n("vUet"),s=i.a.forwardRef((function(e,t){var n=e.bsPrefix,o=e.size,l=e.toggle,s=e.vertical,f=e.className,m=e.as,v=void 0===m?"div":m,b=Object(a.a)(e,["bsPrefix","size","toggle","vertical","className","as"]),d=Object(u.b)(n,"btn-group"),y=d;return s&&(y=d+"-vertical"),i.a.createElement(v,Object(r.a)({},b,{ref:t,className:c()(f,y,o&&d+"-"+o,l&&d+"-toggle")}))}));s.displayName="ButtonGroup",s.defaultProps={vertical:!1,toggle:!1,role:"group"},t.a=s}}]);
//# sourceMappingURL=component---src-pages-financial-analysis-lab-js-98e0964e8ec4df727b6d.js.map