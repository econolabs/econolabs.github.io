<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>My JSXGraph Example with Bootstrap Colors</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/jsxgraph/distrib/jsxgraphcore.js"></script>
    <link rel="stylesheet" type="text/css"
          href="https://cdn.jsdelivr.net/npm/jsxgraph/distrib/jsxgraph.css">
    <style>
        .jxgbox {
            border: 1px solid #dee2e6;
            border-radius: 0.375rem;
        }
    </style>
</head>
<body class="bg-light">
    <div class="container py-4">
     
        <div class="row">
            <div class="col-md-8 col-xl-6">
                <div id="box" class="jxgbox bg-white shadow-sm" style="width:100%; aspect-ratio: 1/1;"></div>
            </div>
           
        </div>
    </div>
 
    <script>
      
        // Альтернативная версия с поддержкой большего количества математических функций
   
      
        // Инициализация доски
        var board = JXG.JSXGraph.initBoard(
            'box', {
                boundingbox: [-10, 10, 10, -10],
                axis: true,
                grid: true,
                showNavigation: true,
                showCopyright: false
            }
        );
        
        // Массив цветов Bootstrap
        const bootstrapColors = [
            '#0d6efd', // primary (синий)
            '#dc3545', // danger (красный)
            '#198754', // success (зеленый)
            '#ffc107', // warning (желтый)
            '#6f42c1', // purple (фиолетовый)
            '#0dcaf0', // info (голубой)
            '#fd7e14', // orange (оранжевый)
            '#20c997', // teal (бирюзовый)
            '#6610f2', // indigo (индиго)
            '#d63384'  // pink (розовый)
        ];
        
        // Массив классов Bootstrap для цветов текста
        const bootstrapColorClasses = [
            'text-primary',
            'text-danger',
            'text-success',
            'text-warning',
            'text-purple',
            'text-info',
            'text-orange',
            'text-teal',
            'text-indigo',
            'text-pink'
        ];
        
        // Массив для хранения всех графиков
        let allGraphs = [];
        /**
         * Функция для построения графиков из текстовых математических выражений с цветами Bootstrap
         * @param {string[]} functionArray - Массив строк с математическими функциями
         * @param {object} options - Опциональные настройки для графиков
         * @returns {array} Массив созданных графиков
         */
        function plotFunctions(functionArray, options = {}) {
            const defaultOptions = {
                strokeWidth: 3,
                highlightStrokeWidth: 4,
                ...options
            };
            
            const graphs = [];
            
            functionArray.forEach((funcStr, index) => {
                try {
                    // Создаем функцию из строки (используем полный Math.* синтаксис)
                    const func = new Function('x', `return ${funcStr};`);
                    
                    // Выбираем цвет из палитры Bootstrap
                    const colorIndex = (allGraphs.length + index) % bootstrapColors.length;
                    const color = bootstrapColors[colorIndex];
                    const colorClass = bootstrapColorClasses[colorIndex];
                    
                    // Создаем график
                    const graph = board.create('functiongraph', [func], {
                        ...defaultOptions,
                        strokeColor: color,
                        highlightStrokeColor: color,
                        name: `f${allGraphs.length + index + 1}(x)`,
                        withLabel: true,
                        label: {
                            position: 'rt', 
                            offset: [5, -20 - allGraphs.length * 20 - index * 20],
                            cssClass: 
                          + ' fw-bold'
                        }
                    });
                    
                    graphs.push({
                        graph: graph,
                        function: funcStr,
                        color: color,
                        colorClass: colorClass,
                        displayName: simplifyFunctionName(funcStr)
                    });
                    
                    console.log(`График построен: ${funcStr}`);
                    
                } catch (error) {
                    console.error(`Ошибка при построении графика: "${funcStr}"`, error);
                    alert(`Ошибка в функции: ${funcStr}\nПроверьте синтаксис.`);
                }
            });
            
            allGraphs = allGraphs.concat(graphs);
            updateFunctionList();
            return graphs;
        }
        
  
            const initialFunctions = [
    'Math.sin(x)',
    'Math.cos(x)',
  //  'Math.tan(x)',
   // 'Math.exp(-x/3) * Math.sin(x)',
   // 'Math.log(Math.abs(x) + 1)',
    'Math.sqrt(x)',
   // '0.5 * Math.pow(x, 2) - 2 * x'
];
        
        // Построение начальных графиков
        plotFunctions(initialFunctions); 
      
        
    </script>
    
    <!-- Bootstrap JS Bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>