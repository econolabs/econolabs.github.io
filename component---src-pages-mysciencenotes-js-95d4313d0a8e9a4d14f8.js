(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{"/2Ve":function(e,t,a){},"1+KQ":function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return b}));var n=a("q1tI"),l=a.n(n),r=a("jFIn"),c=a("/MKj"),i=a("Bl7J"),o=a("VU5L"),u=a("Qu+8"),s=a("vEsD"),m=a("cWnB"),d=a("6ctO");a("/2Ve");function b(){var e=Object(c.c)(o.b).email.replace(/[^a-zA-Z0-9]/g,"_"),t=l.a.useState(null),a=t[0],n=t[1],b=Object(r.a)("usersScience/"+e+"/notes/"),E=b.data,f=b.loading,h=b.error,p=Object(u.a)(["(min-width: 810px)","(min-width: 400px)","(min-width: 100px)"],["large","medium","small"],"large");if(f||!E)return l.a.createElement(i.a,null,"...");if(h)return l.a.createElement(i.a,null,":-(");var y=Object.keys(E).map((function(e){return E[e]}));return a?l.a.createElement(i.a,null,l.a.createElement(s.b,{note:"new"===a?{id:"new"}:y.filter((function(e){return e.id===a}))[0],screenSize:p})):l.a.createElement(i.a,null,l.a.createElement(d.a,{bg:"light",expand:"sm",sticky:"top",className:"mb-2 justify-content-between"},l.a.createElement(d.a.Brand,null,"Notes"),l.a.createElement(m.a,{size:"sm",variant:"outline-secondary",onClick:function(){return n("new")}},"+")),!!y&&y.map((function(e){return l.a.createElement(s.a,{key:e.id,note:e,setCurrentEditId:n})})))}},"8ypT":function(e,t,a){},Bl7J:function(e,t,a){"use strict";var n=a("q1tI"),l=a.n(n),r=a("Wbzz"),c=function(e){var t=e.siteTitle;return l.a.createElement("nav",{className:"navbar  navbar-light bg-light "}," ",l.a.createElement("h3",{style:{margin:0}},l.a.createElement(r.Link,{to:"/",style:{color:"gray",textDecoration:"none"}},t)),l.a.createElement("a",{className:"navbar-brand",href:"https://vk.com/id151078439"},l.a.createElement("img",{src:"https://sun9-37.userapi.com/c317630/v317630439/76a0/Bz6QTfBog0I.jpg?ava=1",alt:"",style:{verticalAlign:"middle",width:"40px",height:"40px",borderRadius:"50%",filter:"grayscale(100%)",objectFit:"cover"}})))};c.defaultProps={siteTitle:""};var i=c;a("8ypT"),t.a=function(e){var t=e.children,a=Object(r.useStaticQuery)("2326376460");return l.a.createElement(l.a.Fragment,null,l.a.createElement(i,{siteTitle:a.site.siteMetadata.title}),l.a.createElement("div",{style:{margin:"0 auto",maxWidth:800,padding:"2rem"}},l.a.createElement("main",null,t),l.a.createElement("footer",null,l.a.createElement("span",{style:{color:"darkgray"}},"© ",(new Date).getFullYear(),", "," ",l.a.createElement("a",{href:"https://vk.com/id151078439",style:{color:"darkgray"}},a.site.siteMetadata.author)))))}},vEsD:function(e,t,a){"use strict";a.d(t,"a",(function(){return j})),a.d(t,"b",(function(){return O}));var n=a("rePB"),l=a("KQm4"),r=a("q1tI"),c=a.n(r),i=a("/MKj"),o=a("NKCw"),u=a("y6RJ"),s=a("fhwx"),m=a.n(s),d=a("VU5L"),b=a("Qu+8"),E=a("pJDg"),f=a("7vrA"),h=a("cWnB"),p=a("QojX"),y=a("6xyR"),v=a("J7+s");function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(Object(a),!0).forEach((function(t){Object(n.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function j(e){var t,a,n,l,r=e.note,i=e.setCurrentEditId,o=void 0===i?null:i,u=c.a.useState(!1),s=u[0],d=u[1];function E(){d((function(e){return!e}))}return"large"!==Object(b.a)(["(min-width: 810px)","(min-width: 400px)","(min-width: 100px)"],["large","medium","small"],"large")?c.a.createElement("div",{key:r.id},c.a.createElement("small",{className:s?"":"line-clamp"},m()(r.content.last_edit)),c.a.createElement("br",null),c.a.createElement(h.a,{variant:"outline-light",size:"sm",onClick:function(){return o(r.id)}}," ",c.a.createElement(v.e,null)),c.a.createElement(h.a,{variant:"outline-light",size:"sm",onClick:function(){return E()}}," ",c.a.createElement(v.d,null)),c.a.createElement("cite",{title:"cited_reference"},c.a.createElement("small",null,r.content.cited_reference)),"   ",c.a.createElement("cite",{title:"plagiarism"},c.a.createElement("small",null,r.date+"   ","  ",r.content.plagiarism)),c.a.createElement("hr",null)):c.a.createElement(y.a,{key:r.id,className:"mb-1"},c.a.createElement(y.a.Header,null,c.a.createElement(h.a,{variant:"outline-light",size:"sm",onClick:function(){return o(r.id)}}," ",c.a.createElement(v.e,null)),c.a.createElement(h.a,{variant:"outline-light",size:"sm",onClick:function(){return E()}}," ",c.a.createElement(v.d,null)),c.a.createElement("span",{className:"ml-2"},null!=(l=r.content)&&l.h6?l.h6:null!=l&&l.h5?l.h5:null!=l&&l.h4?l.h4:null!=l&&l.h3?l.h3:null!=l&&l.h2?l.h2:null!=l&&l.h1?l.h1:"Заголовок")),c.a.createElement(y.a.Body,null,c.a.createElement("blockquote",{className:"blockquote mb-0"},c.a.createElement("small",{className:s?"":"line-clamp"},null!=r&&null!==(t=r.content)&&void 0!==t&&t.last_edit?m()(r.content.last_edit):"-"),null!=r&&null!==(a=r.content)&&void 0!==a&&a.cited_reference?c.a.createElement("footer",{className:"blockquote-footer"},c.a.createElement("cite",{title:"Сited_Reference"}," ",r.content.cited_reference)):null,null!=r&&null!==(n=r.content)&&void 0!==n&&n.plagiarism?c.a.createElement("footer",{className:"blockquote-footer"},c.a.createElement("cite",{title:"Plagiarism"},r.date+"   "," ",r.content.plagiarism," ")):null)))}function O(e){var t,a=e.note,n=e.screenSize,s=Object(i.c)(d.b).email,m=Object(i.c)(d.b).user,b=null===(t=Object(i.c)(d.b))||void 0===t?void 0:t.avatarUrl,y=Object(r.useState)(null),v=y[0],g=y[1],j=Object(o.b)({defaultValues:null!=a&&a.content?a.content:{}}),O=j.handleSubmit,_=Object(r.useState)("last_edit"),C=_[0],x=_[1],S=Object(r.useState)([]),z=S[0];S[1];var N=function(e){if(console.log(e),s.length>6){var t,n=s.replace(/[^a-zA-Z0-9]/g,"_"),r=null!=a&&a.id&&"new"!==a.id?a.id:u.a.database().ref("usersScience/"+n).child("notes").push().key,c=null===(d=null==a||null===(t=a.content)||void 0===t?void 0:t.old_editions)||"function"!=typeof d&&"object"!=typeof d?[e.last_edit]:[].concat(Object(l.a)(Object.keys(a.content.old_editions).map((function(e){return a.content.old_editions[e]}))),[e.last_edit]);console.log(c);var i={id:r,type:"sciencenotes",content:k(k({},e),{},{old_editions:c,tags:z}),deleted:!1,email:s,user:m,avatarUrl:b||null,date:new Intl.DateTimeFormat("ru",{weekday:"short",year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"}).format(new Date)};console.log(i);var o={};return o["usersScience/"+n+"/notes/"+r]=i,u.a.database().ref().update(o).then((function(){g(!0),setTimeout(window.location.reload(),8e3)}))}var d};return c.a.createElement(o.a,j,"large"===n?c.a.createElement(f.a,null,c.a.createElement(E.a,{"aria-label":"Basic example",size:"sm"},c.a.createElement(h.a,{variant:"outline-secondary",onClick:function(){return x("h1")}},"h1"),c.a.createElement(h.a,{variant:"outline-secondary",onClick:function(){return x("h2")}},"h2"),c.a.createElement(h.a,{variant:"outline-secondary",onClick:function(){return x("h3")}},"h3"),c.a.createElement(h.a,{variant:"outline-secondary",onClick:function(){return x("h4")}},"h4"),c.a.createElement(h.a,{variant:"outline-secondary",onClick:function(){return x("h5")}},"h5"),c.a.createElement(h.a,{variant:"outline-secondary",onClick:function(){return x("h6")}},"h6"),c.a.createElement(h.a,{variant:"outline-secondary",onClick:function(){return x("last_edit")}},"Last Edit"),c.a.createElement(h.a,{variant:"outline-secondary",onClick:function(){return x("cited_reference")}},"Cited Reference"),c.a.createElement(h.a,{variant:"outline-secondary",onClick:function(){return x("plagiarism")}},"Plagiarism")),c.a.createElement(p.a,{onSubmit:O(N)},function(){switch(C){case"h1":return c.a.createElement(w,{key:C,name:C,label:"Заголовок 1"});case"h2":return c.a.createElement(w,{key:C,name:C,label:"Заголовок 2"});case"h3":return c.a.createElement(w,{key:C,name:C,label:"Заголовок 3"});case"h4":return c.a.createElement(w,{key:C,name:C,label:"Заголовок 4"});case"h5":return c.a.createElement(w,{key:C,name:C,label:"Заголовок 5"});case"h6":return c.a.createElement(w,{key:C,name:C,label:"Заголовок 6"});case"last_edit":return c.a.createElement(w,{key:C,name:C,label:"Текст"});case"cited_reference":return c.a.createElement(w,{key:C,name:C,label:"Источник"});case"plagiarism":return c.a.createElement(w,{key:C,name:C,label:"Уникальность"})}}(),c.a.createElement(h.a,{variant:"outline-secondary",type:"submit",size:"sm",block:!0,disabled:v},"Сохранить"))):c.a.createElement(f.a,null,c.a.createElement(p.a,{onSubmit:O(N)},c.a.createElement(w,{name:"h6",label:"Заголовок"}),c.a.createElement(w,{name:"last_edit",label:"Текст"}),c.a.createElement(w,{name:"cited_reference",label:"Источник"}),c.a.createElement(w,{name:"plagiarism",label:"Уникальность"}),c.a.createElement(h.a,{variant:"outline-secondary",type:"submit",size:"sm",block:!0,disabled:v},"Сохранить"))))}function w(e){var t=e.name,a=e.label,n=void 0===a?null:a,l=Object(o.c)();return c.a.createElement(p.a.Group,{controlId:"field_"+t},c.a.createElement(p.a.Label,{className:"small text-muted"},n||t),c.a.createElement(p.a.Control,Object.assign({},l.register(t),{as:"textarea",rows:"3"})))}}}]);
//# sourceMappingURL=component---src-pages-mysciencenotes-js-95d4313d0a8e9a4d14f8.js.map