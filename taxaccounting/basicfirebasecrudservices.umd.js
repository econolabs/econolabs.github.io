(function(Ln,un){typeof exports=="object"&&typeof module<"u"?module.exports=un():typeof define=="function"&&define.amd?define(un):(Ln=typeof globalThis<"u"?globalThis:Ln||self,Ln.basicfirebasecrudservices=un())})(this,(function(){"use strict";const Ln=()=>{};var un={};const Ia={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},D=function(t,e){if(!t)throw ln(e)},ln=function(t){return new Error("Firebase Database ("+Ia.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},Na=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);i<128?e[r++]=i:i<2048?(e[r++]=i>>6|192,e[r++]=i&63|128):(i&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=i>>18|240,e[r++]=i>>12&63|128,e[r++]=i>>6&63|128,e[r++]=i&63|128):(e[r++]=i>>12|224,e[r++]=i>>6&63|128,e[r++]=i&63|128)}return e},Sf=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const i=t[r++];if(i<128)e[n++]=String.fromCharCode(i);else if(i>191&&i<224){const h=t[r++];e[n++]=String.fromCharCode((i&31)<<6|h&63)}else if(i>239&&i<365){const h=t[r++],f=t[r++],a=t[r++],l=((i&7)<<18|(h&63)<<12|(f&63)<<6|a&63)-65536;e[n++]=String.fromCharCode(55296+(l>>10)),e[n++]=String.fromCharCode(56320+(l&1023))}else{const h=t[r++],f=t[r++];e[n++]=String.fromCharCode((i&15)<<12|(h&63)<<6|f&63)}}return e.join("")},zi={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let i=0;i<t.length;i+=3){const h=t[i],f=i+1<t.length,a=f?t[i+1]:0,l=i+2<t.length,o=l?t[i+2]:0,s=h>>2,u=(h&3)<<4|a>>4;let c=(a&15)<<2|o>>6,d=o&63;l||(d=64,f||(c=64)),n.push(r[s],r[u],r[c],r[d])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Na(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Sf(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let i=0;i<t.length;){const h=r[t.charAt(i++)],a=i<t.length?r[t.charAt(i)]:0;++i;const o=i<t.length?r[t.charAt(i)]:64;++i;const u=i<t.length?r[t.charAt(i)]:64;if(++i,h==null||a==null||o==null||u==null)throw new Df;const c=h<<2|a>>4;if(n.push(c),o!==64){const d=a<<4&240|o>>2;if(n.push(d),u!==64){const p=o<<6&192|u;n.push(p)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Df extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const wa=function(t){const e=Na(t);return zi.encodeByteArray(e,!0)},Dr=function(t){return wa(t).replace(/\./g,"")},$i=function(t){try{return zi.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Pf(t){return Ca(void 0,t)}function Ca(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const r=e;return new Date(r.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const r in e)!e.hasOwnProperty(r)||!Mf(r)||(t[r]=Ca(t[r],e[r]));return t}function Mf(t){return t!=="__proto__"}function Lf(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const kf=()=>Lf().__FIREBASE_DEFAULTS__,Ff=()=>{if(typeof process>"u"||typeof un>"u")return;const t=un.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Vf=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&$i(t[1]);return e&&JSON.parse(e)},Ta=()=>{try{return Ln()||kf()||Ff()||Vf()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Uf=t=>Ta()?.emulatorHosts?.[t],qf=t=>{const e=Uf(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},Ra=()=>Ta()?.config;class Pr{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}function Yi(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Bf(t){return(await fetch(t,{credentials:"include"})).ok}function Hf(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",i=t.iat||0,h=t.sub||t.user_id;if(!h)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f={iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:h,user_id:h,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Dr(JSON.stringify(r)),Dr(JSON.stringify(f)),""].join(".")}const kn={};function Gf(){const t={prod:[],emulator:[]};for(const e of Object.keys(kn))kn[e]?t.emulator.push(e):t.prod.push(e);return t}function Wf(t){let e=document.getElementById(t),r=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),r=!0),{created:r,element:e}}let Aa=!1;function zf(t,e){if(typeof window>"u"||typeof document>"u"||!Yi(window.location.host)||kn[t]===e||kn[t]||Aa)return;kn[t]=e;function r(c){return`__firebase__banner__${c}`}const n="__firebase__banner",h=Gf().prod.length>0;function f(){const c=document.getElementById(n);c&&c.remove()}function a(c){c.style.display="flex",c.style.background="#7faaf0",c.style.position="fixed",c.style.bottom="5px",c.style.left="5px",c.style.padding=".5em",c.style.borderRadius="5px",c.style.alignItems="center"}function l(c,d){c.setAttribute("width","24"),c.setAttribute("id",d),c.setAttribute("height","24"),c.setAttribute("viewBox","0 0 24 24"),c.setAttribute("fill","none"),c.style.marginLeft="-6px"}function o(){const c=document.createElement("span");return c.style.cursor="pointer",c.style.marginLeft="16px",c.style.fontSize="24px",c.innerHTML=" &times;",c.onclick=()=>{Aa=!0,f()},c}function s(c,d){c.setAttribute("id",d),c.innerText="Learn more",c.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",c.setAttribute("target","__blank"),c.style.paddingLeft="5px",c.style.textDecoration="underline"}function u(){const c=Wf(n),d=r("text"),p=document.getElementById(d)||document.createElement("span"),m=r("learnmore"),v=document.getElementById(m)||document.createElement("a"),y=r("preprendIcon"),E=document.getElementById(y)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(c.created){const g=c.element;a(g),s(v,m);const _=o();l(E,y),g.append(E,p,v,_),document.body.appendChild(g)}h?(p.innerText="Preview backend disconnected.",E.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(E.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,p.innerText="Preview backend running in this workspace."),p.setAttribute("id",d)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",u):u()}function $f(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ba(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test($f())}function Yf(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Qf(){return Ia.NODE_ADMIN===!0}function Kf(){try{return typeof indexedDB=="object"}catch{return!1}}function Xf(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(n);i.onsuccess=()=>{i.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},i.onupgradeneeded=()=>{r=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(r){e(r)}})}const Jf="FirebaseError";class Fn extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=Jf,Object.setPrototypeOf(this,Fn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Oa.prototype.create)}}class Oa{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},i=`${this.service}/${e}`,h=this.errors[e],f=h?Zf(h,n):"Error",a=`${this.serviceName}: ${f} (${i}).`;return new Fn(i,a,n)}}function Zf(t,e){return t.replace(xf,(r,n)=>{const i=e[n];return i!=null?String(i):`<${n}?>`})}const xf=/\{\$([^}]+)}/g;function Vn(t){return JSON.parse(t)}function Ne(t){return JSON.stringify(t)}const Sa=function(t){let e={},r={},n={},i="";try{const h=t.split(".");e=Vn($i(h[0])||""),r=Vn($i(h[1])||""),i=h[2],n=r.d||{},delete r.d}catch{}return{header:e,claims:r,data:n,signature:i}},jf=function(t){const e=Sa(t),r=e.claims;return!!r&&typeof r=="object"&&r.hasOwnProperty("iat")},eh=function(t){const e=Sa(t).claims;return typeof e=="object"&&e.admin===!0};function lt(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function cn(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Da(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Mr(t,e,r){const n={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=e.call(r,t[i],i,t));return n}function Lr(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const i of r){if(!n.includes(i))return!1;const h=t[i],f=e[i];if(Pa(h)&&Pa(f)){if(!Lr(h,f))return!1}else if(h!==f)return!1}for(const i of n)if(!r.includes(i))return!1;return!0}function Pa(t){return t!==null&&typeof t=="object"}function th(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(i=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}class nh{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,r){r||(r=0);const n=this.W_;if(typeof e=="string")for(let u=0;u<16;u++)n[u]=e.charCodeAt(r)<<24|e.charCodeAt(r+1)<<16|e.charCodeAt(r+2)<<8|e.charCodeAt(r+3),r+=4;else for(let u=0;u<16;u++)n[u]=e[r]<<24|e[r+1]<<16|e[r+2]<<8|e[r+3],r+=4;for(let u=16;u<80;u++){const c=n[u-3]^n[u-8]^n[u-14]^n[u-16];n[u]=(c<<1|c>>>31)&4294967295}let i=this.chain_[0],h=this.chain_[1],f=this.chain_[2],a=this.chain_[3],l=this.chain_[4],o,s;for(let u=0;u<80;u++){u<40?u<20?(o=a^h&(f^a),s=1518500249):(o=h^f^a,s=1859775393):u<60?(o=h&f|a&(h|f),s=2400959708):(o=h^f^a,s=3395469782);const c=(i<<5|i>>>27)+o+l+s+n[u]&4294967295;l=a,a=f,f=(h<<30|h>>>2)&4294967295,h=i,i=c}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+h&4294967295,this.chain_[2]=this.chain_[2]+f&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,r){if(e==null)return;r===void 0&&(r=e.length);const n=r-this.blockSize;let i=0;const h=this.buf_;let f=this.inbuf_;for(;i<r;){if(f===0)for(;i<=n;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<r;)if(h[f]=e.charCodeAt(i),++f,++i,f===this.blockSize){this.compress_(h),f=0;break}}else for(;i<r;)if(h[f]=e[i],++f,++i,f===this.blockSize){this.compress_(h),f=0;break}}this.inbuf_=f,this.total_+=r}digest(){const e=[];let r=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=r&255,r/=256;this.compress_(this.buf_);let n=0;for(let i=0;i<5;i++)for(let h=24;h>=0;h-=8)e[n]=this.chain_[i]>>h&255,++n;return e}}function Qi(t,e){return`${t} failed: ${e} argument `}const rh=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);if(i>=55296&&i<=56319){const h=i-55296;n++,D(n<t.length,"Surrogate pair missing trail surrogate.");const f=t.charCodeAt(n)-56320;i=65536+(h<<10)+f}i<128?e[r++]=i:i<2048?(e[r++]=i>>6|192,e[r++]=i&63|128):i<65536?(e[r++]=i>>12|224,e[r++]=i>>6&63|128,e[r++]=i&63|128):(e[r++]=i>>18|240,e[r++]=i>>12&63|128,e[r++]=i>>6&63|128,e[r++]=i&63|128)}return e},kr=function(t){let e=0;for(let r=0;r<t.length;r++){const n=t.charCodeAt(r);n<128?e++:n<2048?e+=2:n>=55296&&n<=56319?(e+=4,r++):e+=3}return e};function fn(t){return t&&t._delegate?t._delegate:t}class Un{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Bt="[DEFAULT]";class ih{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new Pr;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:r});i&&n.resolve(i)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){const r=this.normalizeInstanceIdentifier(e?.identifier),n=e?.optional??!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(n)return null;throw i}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(oh(e))try{this.getOrInitializeService({instanceIdentifier:Bt})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(r);try{const h=this.getOrInitializeService({instanceIdentifier:i});n.resolve(h)}catch{}}}}clearInstance(e=Bt){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Bt){return this.instances.has(e)}getOptions(e=Bt){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[h,f]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(h);n===a&&f.resolve(i)}return i}onInit(e,r){const n=this.normalizeInstanceIdentifier(r),i=this.onInitCallbacks.get(n)??new Set;i.add(e),this.onInitCallbacks.set(n,i);const h=this.instances.get(n);return h&&e(h,n),()=>{i.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const i of n)try{i(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:sh(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Bt){return this.component?this.component.multipleInstances?e:Bt:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function sh(t){return t===Bt?void 0:t}function oh(t){return t.instantiationMode==="EAGER"}class ah{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new ih(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}var ee;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ee||(ee={}));const uh={debug:ee.DEBUG,verbose:ee.VERBOSE,info:ee.INFO,warn:ee.WARN,error:ee.ERROR,silent:ee.SILENT},lh=ee.INFO,ch={[ee.DEBUG]:"log",[ee.VERBOSE]:"log",[ee.INFO]:"info",[ee.WARN]:"warn",[ee.ERROR]:"error"},fh=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),i=ch[e];if(i)console[i](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ma{constructor(e){this.name=e,this._logLevel=lh,this._logHandler=fh,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ee))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?uh[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ee.DEBUG,...e),this._logHandler(this,ee.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ee.VERBOSE,...e),this._logHandler(this,ee.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ee.INFO,...e),this._logHandler(this,ee.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ee.WARN,...e),this._logHandler(this,ee.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ee.ERROR,...e),this._logHandler(this,ee.ERROR,...e)}}const hh=(t,e)=>e.some(r=>t instanceof r);let La,ka;function dh(){return La||(La=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ph(){return ka||(ka=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Fa=new WeakMap,Ki=new WeakMap,Va=new WeakMap,Xi=new WeakMap,Ji=new WeakMap;function mh(t){const e=new Promise((r,n)=>{const i=()=>{t.removeEventListener("success",h),t.removeEventListener("error",f)},h=()=>{r(Ct(t.result)),i()},f=()=>{n(t.error),i()};t.addEventListener("success",h),t.addEventListener("error",f)});return e.then(r=>{r instanceof IDBCursor&&Fa.set(r,t)}).catch(()=>{}),Ji.set(e,t),e}function vh(t){if(Ki.has(t))return;const e=new Promise((r,n)=>{const i=()=>{t.removeEventListener("complete",h),t.removeEventListener("error",f),t.removeEventListener("abort",f)},h=()=>{r(),i()},f=()=>{n(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",h),t.addEventListener("error",f),t.addEventListener("abort",f)});Ki.set(t,e)}let Zi={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return Ki.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Va.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return Ct(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function gh(t){Zi=t(Zi)}function yh(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(xi(this),e,...r);return Va.set(n,e.sort?e.sort():[e]),Ct(n)}:ph().includes(t)?function(...e){return t.apply(xi(this),e),Ct(Fa.get(this))}:function(...e){return Ct(t.apply(xi(this),e))}}function Eh(t){return typeof t=="function"?yh(t):(t instanceof IDBTransaction&&vh(t),hh(t,dh())?new Proxy(t,Zi):t)}function Ct(t){if(t instanceof IDBRequest)return mh(t);if(Xi.has(t))return Xi.get(t);const e=Eh(t);return e!==t&&(Xi.set(t,e),Ji.set(e,t)),e}const xi=t=>Ji.get(t);function _h(t,e,{blocked:r,upgrade:n,blocking:i,terminated:h}={}){const f=indexedDB.open(t,e),a=Ct(f);return n&&f.addEventListener("upgradeneeded",l=>{n(Ct(f.result),l.oldVersion,l.newVersion,Ct(f.transaction),l)}),r&&f.addEventListener("blocked",l=>r(l.oldVersion,l.newVersion,l)),a.then(l=>{h&&l.addEventListener("close",()=>h()),i&&l.addEventListener("versionchange",o=>i(o.oldVersion,o.newVersion,o))}).catch(()=>{}),a}const Ih=["get","getKey","getAll","getAllKeys","count"],Nh=["put","add","delete","clear"],ji=new Map;function Ua(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(ji.get(e))return ji.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,i=Nh.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(i||Ih.includes(r)))return;const h=async function(f,...a){const l=this.transaction(f,i?"readwrite":"readonly");let o=l.store;return n&&(o=o.index(a.shift())),(await Promise.all([o[r](...a),i&&l.done]))[0]};return ji.set(e,h),h}gh(t=>({...t,get:(e,r,n)=>Ua(e,r)||t.get(e,r,n),has:(e,r)=>!!Ua(e,r)||t.has(e,r)}));class wh{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(Ch(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function Ch(t){return t.getComponent()?.type==="VERSION"}const es="@firebase/app",qa="0.14.2",mt=new Ma("@firebase/app"),Th="@firebase/app-compat",Rh="@firebase/analytics-compat",Ah="@firebase/analytics",bh="@firebase/app-check-compat",Oh="@firebase/app-check",Sh="@firebase/auth",Dh="@firebase/auth-compat",Ph="@firebase/database",Mh="@firebase/data-connect",Lh="@firebase/database-compat",kh="@firebase/functions",Fh="@firebase/functions-compat",Vh="@firebase/installations",Uh="@firebase/installations-compat",qh="@firebase/messaging",Bh="@firebase/messaging-compat",Hh="@firebase/performance",Gh="@firebase/performance-compat",Wh="@firebase/remote-config",zh="@firebase/remote-config-compat",$h="@firebase/storage",Yh="@firebase/storage-compat",Qh="@firebase/firestore",Kh="@firebase/ai",Xh="@firebase/firestore-compat",Jh="firebase",Zh="12.2.0",ts="[DEFAULT]",xh={[es]:"fire-core",[Th]:"fire-core-compat",[Ah]:"fire-analytics",[Rh]:"fire-analytics-compat",[Oh]:"fire-app-check",[bh]:"fire-app-check-compat",[Sh]:"fire-auth",[Dh]:"fire-auth-compat",[Ph]:"fire-rtdb",[Mh]:"fire-data-connect",[Lh]:"fire-rtdb-compat",[kh]:"fire-fn",[Fh]:"fire-fn-compat",[Vh]:"fire-iid",[Uh]:"fire-iid-compat",[qh]:"fire-fcm",[Bh]:"fire-fcm-compat",[Hh]:"fire-perf",[Gh]:"fire-perf-compat",[Wh]:"fire-rc",[zh]:"fire-rc-compat",[$h]:"fire-gcs",[Yh]:"fire-gcs-compat",[Qh]:"fire-fst",[Xh]:"fire-fst-compat",[Kh]:"fire-vertex","fire-js":"fire-js",[Jh]:"fire-js-all"},Ht=new Map,ns=new Map,rs=new Map;function Ba(t,e){try{t.container.addComponent(e)}catch(r){mt.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function Fr(t){const e=t.name;if(rs.has(e))return mt.debug(`There were multiple attempts to register component ${e}.`),!1;rs.set(e,t);for(const r of Ht.values())Ba(r,t);for(const r of ns.values())Ba(r,t);return!0}function jh(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function ed(t){return t==null?!1:t.settings!==void 0}const td={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Tt=new Oa("app","Firebase",td);class nd{constructor(e,r,n){this._isDeleted=!1,this._options={...e},this._config={...r},this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Un("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Tt.create("app-deleted",{appName:this._name})}}const rd=Zh;function Ha(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n={name:ts,automaticDataCollectionEnabled:!0,...e},i=n.name;if(typeof i!="string"||!i)throw Tt.create("bad-app-name",{appName:String(i)});if(r||(r=Ra()),!r)throw Tt.create("no-options");const h=Ht.get(i);if(h){if(Lr(r,h.options)&&Lr(n,h.config))return h;throw Tt.create("duplicate-app",{appName:i})}const f=new ah(i);for(const l of rs.values())f.addComponent(l);const a=new nd(r,n,f);return Ht.set(i,a),a}function id(t=ts){const e=Ht.get(t);if(!e&&t===ts&&Ra())return Ha();if(!e)throw Tt.create("no-app",{appName:t});return e}function is(){return Array.from(Ht.values())}async function sd(t){let e=!1;const r=t.name;Ht.has(r)?(e=!0,Ht.delete(r)):ns.has(r)&&t.decRefCount()<=0&&(ns.delete(r),e=!0),e&&(await Promise.all(t.container.getProviders().map(n=>n.delete())),t.isDeleted=!0)}function hn(t,e,r){let n=xh[t]??t;r&&(n+=`-${r}`);const i=n.match(/\s|\//),h=e.match(/\s|\//);if(i||h){const f=[`Unable to register library "${n}" with version "${e}":`];i&&f.push(`library name "${n}" contains illegal characters (whitespace or "/")`),i&&h&&f.push("and"),h&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),mt.warn(f.join(" "));return}Fr(new Un(`${n}-version`,()=>({library:n,version:e}),"VERSION"))}const od="firebase-heartbeat-database",ad=1,qn="firebase-heartbeat-store";let ss=null;function Ga(){return ss||(ss=_h(od,ad,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(qn)}catch(r){console.warn(r)}}}}).catch(t=>{throw Tt.create("idb-open",{originalErrorMessage:t.message})})),ss}async function ud(t){try{const r=(await Ga()).transaction(qn),n=await r.objectStore(qn).get(za(t));return await r.done,n}catch(e){if(e instanceof Fn)mt.warn(e.message);else{const r=Tt.create("idb-get",{originalErrorMessage:e?.message});mt.warn(r.message)}}}async function Wa(t,e){try{const n=(await Ga()).transaction(qn,"readwrite");await n.objectStore(qn).put(e,za(t)),await n.done}catch(r){if(r instanceof Fn)mt.warn(r.message);else{const n=Tt.create("idb-set",{originalErrorMessage:r?.message});mt.warn(n.message)}}}function za(t){return`${t.name}!${t.options.appId}`}const ld=1024,cd=30;class fd{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new dd(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),n=$a();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===n||this._heartbeatsCache.heartbeats.some(i=>i.date===n))return;if(this._heartbeatsCache.heartbeats.push({date:n,agent:r}),this._heartbeatsCache.heartbeats.length>cd){const i=pd(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){mt.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=$a(),{heartbeatsToSend:r,unsentEntries:n}=hd(this._heartbeatsCache.heartbeats),i=Dr(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return mt.warn(e),""}}}function $a(){return new Date().toISOString().substring(0,10)}function hd(t,e=ld){const r=[];let n=t.slice();for(const i of t){const h=r.find(f=>f.agent===i.agent);if(h){if(h.dates.push(i.date),Ya(r)>e){h.dates.pop();break}}else if(r.push({agent:i.agent,dates:[i.date]}),Ya(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class dd{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Kf()?Xf().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await ud(this.app);return r?.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return Wa(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return Wa(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function Ya(t){return Dr(JSON.stringify({version:2,heartbeats:t})).length}function pd(t){if(t.length===0)return-1;let e=0,r=t[0].date;for(let n=1;n<t.length;n++)t[n].date<r&&(r=t[n].date,e=n);return e}function md(t){Fr(new Un("platform-logger",e=>new wh(e),"PRIVATE")),Fr(new Un("heartbeat",e=>new fd(e),"PRIVATE")),hn(es,qa,t),hn(es,qa,"esm2020"),hn("fire-js","")}md("");var vd="firebase",gd="12.2.1";hn(vd,gd,"app");var Qa={};const Ka="@firebase/database",Xa="1.1.0";let Ja="";function yd(t){Ja=t}class Ed{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,r){r==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Ne(r))}get(e){const r=this.domStorage_.getItem(this.prefixedName_(e));return r==null?null:Vn(r)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class _d{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,r){r==null?delete this.cache_[e]:this.cache_[e]=r}get(e){return lt(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const Za=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Ed(e)}}catch{}return new _d},Gt=Za("localStorage"),Id=Za("sessionStorage"),dn=new Ma("@firebase/database"),Nd=(function(){let t=1;return function(){return t++}})(),xa=function(t){const e=rh(t),r=new nh;r.update(e);const n=r.digest();return zi.encodeByteArray(n)},Bn=function(...t){let e="";for(let r=0;r<t.length;r++){const n=t[r];Array.isArray(n)||n&&typeof n=="object"&&typeof n.length=="number"?e+=Bn.apply(null,n):typeof n=="object"?e+=Ne(n):e+=n,e+=" "}return e};let Hn=null,ja=!0;const wd=function(t,e){D(!0,"Can't turn on custom loggers persistently."),dn.logLevel=ee.VERBOSE,Hn=dn.log.bind(dn)},Oe=function(...t){if(ja===!0&&(ja=!1,Hn===null&&Id.get("logging_enabled")===!0&&wd()),Hn){const e=Bn.apply(null,t);Hn(e)}},Gn=function(t){return function(...e){Oe(t,...e)}},os=function(...t){const e="FIREBASE INTERNAL ERROR: "+Bn(...t);dn.error(e)},vt=function(...t){const e=`FIREBASE FATAL ERROR: ${Bn(...t)}`;throw dn.error(e),new Error(e)},Be=function(...t){const e="FIREBASE WARNING: "+Bn(...t);dn.warn(e)},Cd=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Be("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},as=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},Td=function(t){if(document.readyState==="complete")t();else{let e=!1;const r=function(){if(!document.body){setTimeout(r,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",r,!1),window.addEventListener("load",r,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&r()}),window.attachEvent("onload",r))}},pn="[MIN_NAME]",Wt="[MAX_NAME]",zt=function(t,e){if(t===e)return 0;if(t===pn||e===Wt)return-1;if(e===pn||t===Wt)return 1;{const r=nu(t),n=nu(e);return r!==null?n!==null?r-n===0?t.length-e.length:r-n:-1:n!==null?1:t<e?-1:1}},Rd=function(t,e){return t===e?0:t<e?-1:1},Wn=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Ne(e))},us=function(t){if(typeof t!="object"||t===null)return Ne(t);const e=[];for(const n in t)e.push(n);e.sort();let r="{";for(let n=0;n<e.length;n++)n!==0&&(r+=","),r+=Ne(e[n]),r+=":",r+=us(t[e[n]]);return r+="}",r},eu=function(t,e){const r=t.length;if(r<=e)return[t];const n=[];for(let i=0;i<r;i+=e)i+e>r?n.push(t.substring(i,r)):n.push(t.substring(i,i+e));return n};function Se(t,e){for(const r in t)t.hasOwnProperty(r)&&e(r,t[r])}const tu=function(t){D(!as(t),"Invalid JSON number");const e=11,r=52,n=(1<<e-1)-1;let i,h,f,a,l;t===0?(h=0,f=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-n)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),n),h=a+n,f=Math.round(t*Math.pow(2,r-a)-Math.pow(2,r))):(h=0,f=Math.round(t/Math.pow(2,1-n-r))));const o=[];for(l=r;l;l-=1)o.push(f%2?1:0),f=Math.floor(f/2);for(l=e;l;l-=1)o.push(h%2?1:0),h=Math.floor(h/2);o.push(i?1:0),o.reverse();const s=o.join("");let u="";for(l=0;l<64;l+=8){let c=parseInt(s.substr(l,8),2).toString(16);c.length===1&&(c="0"+c),u=u+c}return u.toLowerCase()},Ad=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},bd=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function Od(t,e){let r="Unknown Error";t==="too_big"?r="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?r="Client doesn't have permission to access the desired data.":t==="unavailable"&&(r="The service is unavailable");const n=new Error(t+" at "+e._path.toString()+": "+r);return n.code=t.toUpperCase(),n}const Sd=new RegExp("^-?(0*)\\d{1,10}$"),Dd=-2147483648,Pd=2147483647,nu=function(t){if(Sd.test(t)){const e=Number(t);if(e>=Dd&&e<=Pd)return e}return null},mn=function(t){try{t()}catch(e){setTimeout(()=>{const r=e.stack||"";throw Be("Exception was thrown by user callback.",r),e},Math.floor(0))}},Md=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},zn=function(t,e){const r=setTimeout(t,e);return typeof r=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(r):typeof r=="object"&&r.unref&&r.unref(),r};class Ld{constructor(e,r){this.appCheckProvider=r,this.appName=e.name,ed(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=r?.getImmediate({optional:!0}),this.appCheck||r?.get().then(n=>this.appCheck=n)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((r,n)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(r,n):r(null)},0)})}addTokenChangeListener(e){this.appCheckProvider?.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Be(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}class kd{constructor(e,r,n){this.appName_=e,this.firebaseOptions_=r,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(r=>r&&r.code==="auth/token-not-initialized"?(Oe("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(r)):new Promise((r,n)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(r,n):r(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(r=>r.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(r=>r.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Be(e)}}class Vr{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Vr.OWNER="owner";const ls="5",ru="v",iu="s",su="r",ou="f",au=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,uu="ls",lu="p",cs="ac",cu="websocket",fu="long_polling";class hu{constructor(e,r,n,i,h=!1,f="",a=!1,l=!1,o=null){this.secure=r,this.namespace=n,this.webSocketOnly=i,this.nodeAdmin=h,this.persistenceKey=f,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this.emulatorOptions=o,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Gt.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Gt.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",r=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${r}`}}function Fd(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function du(t,e,r){D(typeof e=="string","typeof type must == string"),D(typeof r=="object","typeof params must == object");let n;if(e===cu)n=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===fu)n=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);Fd(t)&&(r.ns=t.namespace);const i=[];return Se(r,(h,f)=>{i.push(h+"="+f)}),n+i.join("&")}class Vd{constructor(){this.counters_={}}incrementCounter(e,r=1){lt(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=r}get(){return Pf(this.counters_)}}const fs={},hs={};function ds(t){const e=t.toString();return fs[e]||(fs[e]=new Vd),fs[e]}function Ud(t,e){const r=t.toString();return hs[r]||(hs[r]=e()),hs[r]}class qd{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,r){this.closeAfterResponse=e,this.onClose=r,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,r){for(this.pendingResponses[e]=r;this.pendingResponses[this.currentResponseNum];){const n=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<n.length;++i)n[i]&&mn(()=>{this.onMessage_(n[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const pu="start",Bd="close",Hd="pLPCommand",Gd="pRTLPCB",mu="id",vu="pw",gu="ser",Wd="cb",zd="seg",$d="ts",Yd="d",Qd="dframe",yu=1870,Eu=30,Kd=yu-Eu,Xd=25e3,Jd=3e4;class vn{constructor(e,r,n,i,h,f,a){this.connId=e,this.repoInfo=r,this.applicationId=n,this.appCheckToken=i,this.authToken=h,this.transportSessionId=f,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Gn(e),this.stats_=ds(r),this.urlFn=l=>(this.appCheckToken&&(l[cs]=this.appCheckToken),du(r,fu,l))}open(e,r){this.curSegmentNum=0,this.onDisconnect_=r,this.myPacketOrderer=new qd(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Jd)),Td(()=>{if(this.isClosed_)return;this.scriptTagHolder=new ps((...h)=>{const[f,a,l,o,s]=h;if(this.incrementIncomingBytes_(h),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,f===pu)this.id=a,this.password=l;else if(f===Bd)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+f)},(...h)=>{const[f,a]=h;this.incrementIncomingBytes_(h),this.myPacketOrderer.handleResponse(f,a)},()=>{this.onClosed_()},this.urlFn);const n={};n[pu]="t",n[gu]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(n[Wd]=this.scriptTagHolder.uniqueCallbackIdentifier),n[ru]=ls,this.transportSessionId&&(n[iu]=this.transportSessionId),this.lastSessionId&&(n[uu]=this.lastSessionId),this.applicationId&&(n[lu]=this.applicationId),this.appCheckToken&&(n[cs]=this.appCheckToken),typeof location<"u"&&location.hostname&&au.test(location.hostname)&&(n[su]=ou);const i=this.urlFn(n);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){vn.forceAllow_=!0}static forceDisallow(){vn.forceDisallow_=!0}static isAvailable(){return vn.forceAllow_?!0:!vn.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!Ad()&&!bd()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const r=Ne(e);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const n=wa(r),i=eu(n,Kd);for(let h=0;h<i.length;h++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[h]),this.curSegmentNum++}addDisconnectPingFrame(e,r){this.myDisconnFrame=document.createElement("iframe");const n={};n[Qd]="t",n[mu]=e,n[vu]=r,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const r=Ne(e).length;this.bytesReceived+=r,this.stats_.incrementCounter("bytes_received",r)}}class ps{constructor(e,r,n,i){this.onDisconnect=n,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=Nd(),window[Hd+this.uniqueCallbackIdentifier]=e,window[Gd+this.uniqueCallbackIdentifier]=r,this.myIFrame=ps.createIFrame_();let h="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(h='<script>document.domain="'+document.domain+'";<\/script>');const f="<html><body>"+h+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(f),this.myIFrame.doc.close()}catch(a){Oe("frame writing exception"),a.stack&&Oe(a.stack),Oe(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Oe("No IE domain setting required")}catch{const n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,r){for(this.myID=e,this.myPW=r,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[mu]=this.myID,e[vu]=this.myPW,e[gu]=this.currentSerial;let r=this.urlFn(e),n="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+Eu+n.length<=yu;){const f=this.pendingSegs.shift();n=n+"&"+zd+i+"="+f.seg+"&"+$d+i+"="+f.ts+"&"+Yd+i+"="+f.d,i++}return r=r+n,this.addLongPollTag_(r,this.currentSerial),!0}else return!1}enqueueSegment(e,r,n){this.pendingSegs.push({seg:e,ts:r,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,r){this.outstandingRequests.add(r);const n=()=>{this.outstandingRequests.delete(r),this.newRequest_()},i=setTimeout(n,Math.floor(Xd)),h=()=>{clearTimeout(i),n()};this.addTag(e,h)}addTag(e,r){setTimeout(()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){const i=n.readyState;(!i||i==="loaded"||i==="complete")&&(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),r())},n.onerror=()=>{Oe("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch{}},Math.floor(1))}}const Zd=16384,xd=45e3;let Ur=null;typeof MozWebSocket<"u"?Ur=MozWebSocket:typeof WebSocket<"u"&&(Ur=WebSocket);class je{constructor(e,r,n,i,h,f,a){this.connId=e,this.applicationId=n,this.appCheckToken=i,this.authToken=h,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Gn(this.connId),this.stats_=ds(r),this.connURL=je.connectionURL_(r,f,a,i,n),this.nodeAdmin=r.nodeAdmin}static connectionURL_(e,r,n,i,h){const f={};return f[ru]=ls,typeof location<"u"&&location.hostname&&au.test(location.hostname)&&(f[su]=ou),r&&(f[iu]=r),n&&(f[uu]=n),i&&(f[cs]=i),h&&(f[lu]=h),du(e,cu,f)}open(e,r){this.onDisconnect=r,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Gt.set("previous_websocket_failure",!0);try{let n;Qf(),this.mySock=new Ur(this.connURL,[],n)}catch(n){this.log_("Error instantiating WebSocket.");const i=n.message||n.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=n=>{this.handleIncomingFrame(n)},this.mySock.onerror=n=>{this.log_("WebSocket error.  Closing connection.");const i=n.message||n.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){je.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const r=/Android ([0-9]{0,}\.[0-9]{0,})/,n=navigator.userAgent.match(r);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&Ur!==null&&!je.forceDisallow_}static previouslyFailed(){return Gt.isInMemoryStorage||Gt.get("previous_websocket_failure")===!0}markConnectionHealthy(){Gt.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const n=Vn(r);this.onMessage(n)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(D(this.frames===null,"We already have a frame buffer"),e.length<=6){const r=Number(e);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const r=e.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{const n=this.extractFrameCount_(r);n!==null&&this.appendFrame_(n)}}send(e){this.resetKeepAlive();const r=Ne(e);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const n=eu(r,Zd);n.length>1&&this.sendString_(String(n.length));for(let i=0;i<n.length;i++)this.sendString_(n[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(xd))}sendString_(e){try{this.mySock.send(e)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}je.responsesRequiredToBeHealthy=2,je.healthyTimeout=3e4;class $n{static get ALL_TRANSPORTS(){return[vn,je]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const r=je&&je.isAvailable();let n=r&&!je.previouslyFailed();if(e.webSocketOnly&&(r||Be("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[je];else{const i=this.transports_=[];for(const h of $n.ALL_TRANSPORTS)h&&h.isAvailable()&&i.push(h);$n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}$n.globalTransportInitialized_=!1;const jd=6e4,ep=5e3,tp=10*1024,np=100*1024,ms="t",_u="d",rp="s",Iu="r",ip="e",Nu="o",wu="a",Cu="n",Tu="p",sp="h";class op{constructor(e,r,n,i,h,f,a,l,o,s){this.id=e,this.repoInfo_=r,this.applicationId_=n,this.appCheckToken_=i,this.authToken_=h,this.onMessage_=f,this.onReady_=a,this.onDisconnect_=l,this.onKill_=o,this.lastSessionId=s,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Gn("c:"+this.id+":"),this.transportManager_=new $n(r),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const r=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(r,n)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=zn(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>np?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>tp?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return r=>{e===this.conn_?this.onConnectionLost_(r):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return r=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(r):e===this.secondaryConn_?this.onSecondaryMessageReceived_(r):this.log_("message on old connection"))}}sendRequest(e){const r={t:"d",d:e};this.sendData_(r)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(ms in e){const r=e[ms];r===wu?this.upgradeIfSecondaryHealthy_():r===Iu?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):r===Nu&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const r=Wn("t",e),n=Wn("d",e);if(r==="c")this.onSecondaryControl_(n);else if(r==="d")this.pendingDataMessages.push(n);else throw new Error("Unknown protocol layer: "+r)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Tu,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:wu,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Cu,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const r=Wn("t",e),n=Wn("d",e);r==="c"?this.onControl_(n):r==="d"&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const r=Wn(ms,e);if(_u in e){const n=e[_u];if(r===sp){const i={...n};this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(r===Cu){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else r===rp?this.onConnectionShutdown_(n):r===Iu?this.onReset_(n):r===ip?os("Server Error: "+n):r===Nu?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):os("Unknown control packet command: "+r)}}onHandshake_(e){const r=e.ts,n=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,r),ls!==n&&Be("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const r=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(r,n),zn(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(jd))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,r){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(r,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):zn(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(ep))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Tu,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Gt.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Ru{put(e,r,n,i){}merge(e,r,n,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,r,n){}onDisconnectMerge(e,r,n){}onDisconnectCancel(e,r){}reportStats(e){}}class Au{constructor(e){this.allowedEvents_=e,this.listeners_={},D(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...r){if(Array.isArray(this.listeners_[e])){const n=[...this.listeners_[e]];for(let i=0;i<n.length;i++)n[i].callback.apply(n[i].context,r)}}on(e,r,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:r,context:n});const i=this.getInitialEvent(e);i&&r.apply(n,i)}off(e,r,n){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let h=0;h<i.length;h++)if(i[h].callback===r&&(!n||n===i[h].context)){i.splice(h,1);return}}validateEventType_(e){D(this.allowedEvents_.find(r=>r===e),"Unknown event: "+e)}}class qr extends Au{static getInstance(){return new qr}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!ba()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return D(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}const bu=32,Ou=768;class x{constructor(e,r){if(r===void 0){this.pieces_=e.split("/");let n=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[n]=this.pieces_[i],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=r}toString(){let e="";for(let r=this.pieceNum_;r<this.pieces_.length;r++)this.pieces_[r]!==""&&(e+="/"+this.pieces_[r]);return e||"/"}}function X(){return new x("")}function Q(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Rt(t){return t.pieces_.length-t.pieceNum_}function te(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new x(t.pieces_,e)}function vs(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function ap(t){let e="";for(let r=t.pieceNum_;r<t.pieces_.length;r++)t.pieces_[r]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[r])));return e||"/"}function Yn(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function Su(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let r=t.pieceNum_;r<t.pieces_.length-1;r++)e.push(t.pieces_[r]);return new x(e,0)}function se(t,e){const r=[];for(let n=t.pieceNum_;n<t.pieces_.length;n++)r.push(t.pieces_[n]);if(e instanceof x)for(let n=e.pieceNum_;n<e.pieces_.length;n++)r.push(e.pieces_[n]);else{const n=e.split("/");for(let i=0;i<n.length;i++)n[i].length>0&&r.push(n[i])}return new x(r,0)}function Y(t){return t.pieceNum_>=t.pieces_.length}function Fe(t,e){const r=Q(t),n=Q(e);if(r===null)return e;if(r===n)return Fe(te(t),te(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function up(t,e){const r=Yn(t,0),n=Yn(e,0);for(let i=0;i<r.length&&i<n.length;i++){const h=zt(r[i],n[i]);if(h!==0)return h}return r.length===n.length?0:r.length<n.length?-1:1}function Du(t,e){if(Rt(t)!==Rt(e))return!1;for(let r=t.pieceNum_,n=e.pieceNum_;r<=t.pieces_.length;r++,n++)if(t.pieces_[r]!==e.pieces_[n])return!1;return!0}function Qe(t,e){let r=t.pieceNum_,n=e.pieceNum_;if(Rt(t)>Rt(e))return!1;for(;r<t.pieces_.length;){if(t.pieces_[r]!==e.pieces_[n])return!1;++r,++n}return!0}class lp{constructor(e,r){this.errorPrefix_=r,this.parts_=Yn(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let n=0;n<this.parts_.length;n++)this.byteLength_+=kr(this.parts_[n]);Pu(this)}}function cp(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=kr(e),Pu(t)}function fp(t){const e=t.parts_.pop();t.byteLength_-=kr(e),t.parts_.length>0&&(t.byteLength_-=1)}function Pu(t){if(t.byteLength_>Ou)throw new Error(t.errorPrefix_+"has a key path longer than "+Ou+" bytes ("+t.byteLength_+").");if(t.parts_.length>bu)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+bu+") or object contains a cycle "+$t(t))}function $t(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}class gs extends Au{static getInstance(){return new gs}constructor(){super(["visible"]);let e,r;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(r="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(r="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(r="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(r="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,r&&document.addEventListener(r,()=>{const n=!document[e];n!==this.visible_&&(this.visible_=n,this.trigger("visible",n))},!1)}getInitialEvent(e){return D(e==="visible","Unknown event type: "+e),[this.visible_]}}const Qn=1e3,hp=300*1e3,Mu=30*1e3,dp=1.3,pp=3e4,mp="server_kill",Lu=3;class gt extends Ru{constructor(e,r,n,i,h,f,a,l){if(super(),this.repoInfo_=e,this.applicationId_=r,this.onDataUpdate_=n,this.onConnectStatus_=i,this.onServerInfoUpdate_=h,this.authTokenProvider_=f,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=gt.nextPersistentConnectionId_++,this.log_=Gn("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Qn,this.maxReconnectDelay_=hp,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");gs.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&qr.getInstance().on("online",this.onOnline_,this)}sendRequest(e,r,n){const i=++this.requestNumber_,h={r:i,a:e,b:r};this.log_(Ne(h)),D(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(h),n&&(this.requestCBHash_[i]=n)}get(e){this.initConnection_();const r=new Pr,i={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:f=>{const a=f.d;f.s==="ok"?r.resolve(a):r.reject(a)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const h=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(h),r.promise}listen(e,r,n,i){this.initConnection_();const h=e._queryIdentifier,f=e._path.toString();this.log_("Listen called for "+f+" "+h),this.listens.has(f)||this.listens.set(f,new Map),D(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),D(!this.listens.get(f).has(h),"listen() called twice for same path/queryId.");const a={onComplete:i,hashFn:r,query:e,tag:n};this.listens.get(f).set(h,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const r=this.outstandingGets_[e];this.sendRequest("g",r.request,n=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(n)})}sendListen_(e){const r=e.query,n=r._path.toString(),i=r._queryIdentifier;this.log_("Listen on "+n+" for "+i);const h={p:n},f="q";e.tag&&(h.q=r._queryObject,h.t=e.tag),h.h=e.hashFn(),this.sendRequest(f,h,a=>{const l=a.d,o=a.s;gt.warnOnListenWarnings_(l,r),(this.listens.get(n)&&this.listens.get(n).get(i))===e&&(this.log_("listen response",a),o!=="ok"&&this.removeListen_(n,i),e.onComplete&&e.onComplete(o,l))})}static warnOnListenWarnings_(e,r){if(e&&typeof e=="object"&&lt(e,"w")){const n=cn(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const i='".indexOn": "'+r._queryParams.getIndex().toString()+'"',h=r._path.toString();Be(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${h} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||eh(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Mu)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,r=jf(e)?"auth":"gauth",n={cred:e};this.authOverride_===null?n.noauth=!0:typeof this.authOverride_=="object"&&(n.authvar=this.authOverride_),this.sendRequest(r,n,i=>{const h=i.s,f=i.d||"error";this.authToken_===e&&(h==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(h,f))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const r=e.s,n=e.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,n)})}unlisten(e,r){const n=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+i),D(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,i)&&this.connected_&&this.sendUnlisten_(n,i,e._queryObject,r)}sendUnlisten_(e,r,n,i){this.log_("Unlisten on "+e+" for "+r);const h={p:e},f="n";i&&(h.q=n,h.t=i),this.sendRequest(f,h)}onDisconnectPut(e,r,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,r,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:r,onComplete:n})}onDisconnectMerge(e,r,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,r,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:r,onComplete:n})}onDisconnectCancel(e,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(e,r,n,i){const h={p:r,d:n};this.log_("onDisconnect "+e,h),this.sendRequest(e,h,f=>{i&&setTimeout(()=>{i(f.s,f.d)},Math.floor(0))})}put(e,r,n,i){this.putInternal("p",e,r,n,i)}merge(e,r,n,i){this.putInternal("m",e,r,n,i)}putInternal(e,r,n,i,h){this.initConnection_();const f={p:r,d:n};h!==void 0&&(f.h=h),this.outstandingPuts_.push({action:e,request:f,onComplete:i}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+r)}sendPut_(e){const r=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(r,n,h=>{this.log_(r+" response",h),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(h.s,h.d)})}reportStats(e){if(this.connected_){const r={c:e};this.log_("reportStats",r),this.sendRequest("s",r,n=>{if(n.s!=="ok"){const h=n.d;this.log_("reportStats","Error sending stats: "+h)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Ne(e));const r=e.r,n=this.requestCBHash_[r];n&&(delete this.requestCBHash_[r],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,r){this.log_("handleServerMessage",e,r),e==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):e==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):e==="c"?this.onListenRevoked_(r.p,r.q):e==="ac"?this.onAuthRevoked_(r.s,r.d):e==="apc"?this.onAppCheckRevoked_(r.s,r.d):e==="sd"?this.onSecurityDebugPacket_(r):os("Unrecognized action received from server: "+Ne(e)+`
Are you using the latest client?`)}onReady_(e,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){D(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Qn,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Qn,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>pp&&(this.reconnectDelay_=Qn),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let r=Math.max(0,this.reconnectDelay_-e);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*dp)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+gt.nextConnectionId_++,h=this.lastSessionId;let f=!1,a=null;const l=function(){a?a.close():(f=!0,n())},o=function(u){D(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(u)};this.realtime_={close:l,sendRequest:o};const s=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[u,c]=await Promise.all([this.authTokenProvider_.getToken(s),this.appCheckTokenProvider_.getToken(s)]);f?Oe("getToken() completed but was canceled"):(Oe("getToken() completed. Creating connection."),this.authToken_=u&&u.accessToken,this.appCheckToken_=c&&c.token,a=new op(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,r,n,d=>{Be(d+" ("+this.repoInfo_.toString()+")"),this.interrupt(mp)},h))}catch(u){this.log_("Failed to get token: "+u),f||(this.repoInfo_.nodeAdmin&&Be(u),l())}}}interrupt(e){Oe("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Oe("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Da(this.interruptReasons_)&&(this.reconnectDelay_=Qn,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const r=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const r=this.outstandingPuts_[e];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,r){let n;r?n=r.map(h=>us(h)).join("$"):n="default";const i=this.removeListen_(e,n);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,r){const n=new x(e).toString();let i;if(this.listens.has(n)){const h=this.listens.get(n);i=h.get(r),h.delete(r),h.size===0&&this.listens.delete(n)}else i=void 0;return i}onAuthRevoked_(e,r){Oe("Auth token revoked: "+e+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Lu&&(this.reconnectDelay_=Mu,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,r){Oe("App check token revoked: "+e+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Lu&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const r of e.values())this.sendListen_(r);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let r="js";e["sdk."+r+"."+Ja.replace(/\./g,"-")]=1,ba()?e["framework.cordova"]=1:Yf()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=qr.getInstance().currentlyOnline();return Da(this.interruptReasons_)&&e}}gt.nextPersistentConnectionId_=0,gt.nextConnectionId_=0;class W{constructor(e,r){this.name=e,this.node=r}static Wrap(e,r){return new W(e,r)}}class Br{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,r){const n=new W(pn,e),i=new W(pn,r);return this.compare(n,i)!==0}minPost(){return W.MIN}}let Hr;class ku extends Br{static get __EMPTY_NODE(){return Hr}static set __EMPTY_NODE(e){Hr=e}compare(e,r){return zt(e.name,r.name)}isDefinedOn(e){throw ln("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,r){return!1}minPost(){return W.MIN}maxPost(){return new W(Wt,Hr)}makePost(e,r){return D(typeof e=="string","KeyIndex indexValue must always be a string."),new W(e,Hr)}toString(){return".key"}}const gn=new ku;class Gr{constructor(e,r,n,i,h=null){this.isReverse_=i,this.resultGenerator_=h,this.nodeStack_=[];let f=1;for(;!e.isEmpty();)if(e=e,f=r?n(e.key,r):1,i&&(f*=-1),f<0)this.isReverse_?e=e.left:e=e.right;else if(f===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),r;if(this.resultGenerator_?r=this.resultGenerator_(e.key,e.value):r={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return r}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Ce{constructor(e,r,n,i,h){this.key=e,this.value=r,this.color=n??Ce.RED,this.left=i??He.EMPTY_NODE,this.right=h??He.EMPTY_NODE}copy(e,r,n,i,h){return new Ce(e??this.key,r??this.value,n??this.color,i??this.left,h??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let i=this;const h=n(e,i.key);return h<0?i=i.copy(null,null,null,i.left.insert(e,r,n),null):h===0?i=i.copy(null,r,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,r,n)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return He.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,r){let n,i;if(n=this,r(e,n.key)<0)!n.left.isEmpty()&&!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,r),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),!n.right.isEmpty()&&!n.right.isRed_()&&!n.right.left.isRed_()&&(n=n.moveRedRight_()),r(e,n.key)===0){if(n.right.isEmpty())return He.EMPTY_NODE;i=n.right.min_(),n=n.copy(i.key,i.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,r))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Ce.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Ce.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Ce.RED=!0,Ce.BLACK=!1;class vp{copy(e,r,n,i,h){return this}insert(e,r,n){return new Ce(e,r,null)}remove(e,r){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class He{constructor(e,r=He.EMPTY_NODE){this.comparator_=e,this.root_=r}insert(e,r){return new He(this.comparator_,this.root_.insert(e,r,this.comparator_).copy(null,null,Ce.BLACK,null,null))}remove(e){return new He(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ce.BLACK,null,null))}get(e){let r,n=this.root_;for(;!n.isEmpty();){if(r=this.comparator_(e,n.key),r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}getPredecessorKey(e){let r,n=this.root_,i=null;for(;!n.isEmpty();)if(r=this.comparator_(e,n.key),r===0){if(n.left.isEmpty())return i?i.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}else r<0?n=n.left:r>0&&(i=n,n=n.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Gr(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,r){return new Gr(this.root_,e,this.comparator_,!1,r)}getReverseIteratorFrom(e,r){return new Gr(this.root_,e,this.comparator_,!0,r)}getReverseIterator(e){return new Gr(this.root_,null,this.comparator_,!0,e)}}He.EMPTY_NODE=new vp;function gp(t,e){return zt(t.name,e.name)}function ys(t,e){return zt(t,e)}let Es;function yp(t){Es=t}const Fu=function(t){return typeof t=="number"?"number:"+tu(t):"string:"+t},Vu=function(t){if(t.isLeafNode()){const e=t.val();D(typeof e=="string"||typeof e=="number"||typeof e=="object"&&lt(e,".sv"),"Priority must be a string or number.")}else D(t===Es||t.isEmpty(),"priority of unexpected type.");D(t===Es||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Uu;class Te{static set __childrenNodeConstructor(e){Uu=e}static get __childrenNodeConstructor(){return Uu}constructor(e,r=Te.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=r,this.lazyHash_=null,D(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Vu(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Te(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Te.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Y(e)?this:Q(e)===".priority"?this.priorityNode_:Te.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,r){return null}updateImmediateChild(e,r){return e===".priority"?this.updatePriority(r):r.isEmpty()&&e!==".priority"?this:Te.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,r).updatePriority(this.priorityNode_)}updateChild(e,r){const n=Q(e);return n===null?r:r.isEmpty()&&n!==".priority"?this:(D(n!==".priority"||Rt(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(n,Te.__childrenNodeConstructor.EMPTY_NODE.updateChild(te(e),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,r){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+Fu(this.priorityNode_.val())+":");const r=typeof this.value_;e+=r+":",r==="number"?e+=tu(this.value_):e+=this.value_,this.lazyHash_=xa(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Te.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Te.__childrenNodeConstructor?-1:(D(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const r=typeof e.value_,n=typeof this.value_,i=Te.VALUE_TYPE_ORDER.indexOf(r),h=Te.VALUE_TYPE_ORDER.indexOf(n);return D(i>=0,"Unknown leaf type: "+r),D(h>=0,"Unknown leaf type: "+n),i===h?n==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:h-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const r=e;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}Te.VALUE_TYPE_ORDER=["object","boolean","number","string"];let qu,Bu;function Ep(t){qu=t}function _p(t){Bu=t}class Ip extends Br{compare(e,r){const n=e.node.getPriority(),i=r.node.getPriority(),h=n.compareTo(i);return h===0?zt(e.name,r.name):h}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,r){return!e.getPriority().equals(r.getPriority())}minPost(){return W.MIN}maxPost(){return new W(Wt,new Te("[PRIORITY-POST]",Bu))}makePost(e,r){const n=qu(e);return new W(r,new Te("[PRIORITY-POST]",n))}toString(){return".priority"}}const oe=new Ip,Np=Math.log(2);class wp{constructor(e){const r=h=>parseInt(Math.log(h)/Np,10),n=h=>parseInt(Array(h+1).join("1"),2);this.count=r(e+1),this.current_=this.count-1;const i=n(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Wr=function(t,e,r,n){t.sort(e);const i=function(l,o){const s=o-l;let u,c;if(s===0)return null;if(s===1)return u=t[l],c=r?r(u):u,new Ce(c,u.node,Ce.BLACK,null,null);{const d=parseInt(s/2,10)+l,p=i(l,d),m=i(d+1,o);return u=t[d],c=r?r(u):u,new Ce(c,u.node,Ce.BLACK,p,m)}},h=function(l){let o=null,s=null,u=t.length;const c=function(p,m){const v=u-p,y=u;u-=p;const E=i(v+1,y),g=t[v],_=r?r(g):g;d(new Ce(_,g.node,m,null,E))},d=function(p){o?(o.left=p,o=p):(s=p,o=p)};for(let p=0;p<l.count;++p){const m=l.nextBitIsOne(),v=Math.pow(2,l.count-(p+1));m?c(v,Ce.BLACK):(c(v,Ce.BLACK),c(v,Ce.RED))}return s},f=new wp(t.length),a=h(f);return new He(n||e,a)};let _s;const yn={};class yt{static get Default(){return D(yn&&oe,"ChildrenNode.ts has not been loaded"),_s=_s||new yt({".priority":yn},{".priority":oe}),_s}constructor(e,r){this.indexes_=e,this.indexSet_=r}get(e){const r=cn(this.indexes_,e);if(!r)throw new Error("No index defined for "+e);return r instanceof He?r:null}hasIndex(e){return lt(this.indexSet_,e.toString())}addIndex(e,r){D(e!==gn,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const n=[];let i=!1;const h=r.getIterator(W.Wrap);let f=h.getNext();for(;f;)i=i||e.isDefinedOn(f.node),n.push(f),f=h.getNext();let a;i?a=Wr(n,e.getCompare()):a=yn;const l=e.toString(),o={...this.indexSet_};o[l]=e;const s={...this.indexes_};return s[l]=a,new yt(s,o)}addToIndexes(e,r){const n=Mr(this.indexes_,(i,h)=>{const f=cn(this.indexSet_,h);if(D(f,"Missing index implementation for "+h),i===yn)if(f.isDefinedOn(e.node)){const a=[],l=r.getIterator(W.Wrap);let o=l.getNext();for(;o;)o.name!==e.name&&a.push(o),o=l.getNext();return a.push(e),Wr(a,f.getCompare())}else return yn;else{const a=r.get(e.name);let l=i;return a&&(l=l.remove(new W(e.name,a))),l.insert(e,e.node)}});return new yt(n,this.indexSet_)}removeFromIndexes(e,r){const n=Mr(this.indexes_,i=>{if(i===yn)return i;{const h=r.get(e.name);return h?i.remove(new W(e.name,h)):i}});return new yt(n,this.indexSet_)}}let Kn;class q{static get EMPTY_NODE(){return Kn||(Kn=new q(new He(ys),null,yt.Default))}constructor(e,r,n){this.children_=e,this.priorityNode_=r,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Vu(this.priorityNode_),this.children_.isEmpty()&&D(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Kn}updatePriority(e){return this.children_.isEmpty()?this:new q(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const r=this.children_.get(e);return r===null?Kn:r}}getChild(e){const r=Q(e);return r===null?this:this.getImmediateChild(r).getChild(te(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,r){if(D(r,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(r);{const n=new W(e,r);let i,h;r.isEmpty()?(i=this.children_.remove(e),h=this.indexMap_.removeFromIndexes(n,this.children_)):(i=this.children_.insert(e,r),h=this.indexMap_.addToIndexes(n,this.children_));const f=i.isEmpty()?Kn:this.priorityNode_;return new q(i,f,h)}}updateChild(e,r){const n=Q(e);if(n===null)return r;{D(Q(e)!==".priority"||Rt(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(n).updateChild(te(e),r);return this.updateImmediateChild(n,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const r={};let n=0,i=0,h=!0;if(this.forEachChild(oe,(f,a)=>{r[f]=a.val(e),n++,h&&q.INTEGER_REGEXP_.test(f)?i=Math.max(i,Number(f)):h=!1}),!e&&h&&i<2*n){const f=[];for(const a in r)f[a]=r[a];return f}else return e&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+Fu(this.getPriority().val())+":"),this.forEachChild(oe,(r,n)=>{const i=n.hash();i!==""&&(e+=":"+r+":"+i)}),this.lazyHash_=e===""?"":xa(e)}return this.lazyHash_}getPredecessorChildName(e,r,n){const i=this.resolveIndex_(n);if(i){const h=i.getPredecessorKey(new W(e,r));return h?h.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const r=this.resolveIndex_(e);if(r){const n=r.minKey();return n&&n.name}else return this.children_.minKey()}getFirstChild(e){const r=this.getFirstChildName(e);return r?new W(r,this.children_.get(r)):null}getLastChildName(e){const r=this.resolveIndex_(e);if(r){const n=r.maxKey();return n&&n.name}else return this.children_.maxKey()}getLastChild(e){const r=this.getLastChildName(e);return r?new W(r,this.children_.get(r)):null}forEachChild(e,r){const n=this.resolveIndex_(e);return n?n.inorderTraversal(i=>r(i.name,i.node)):this.children_.inorderTraversal(r)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,r){const n=this.resolveIndex_(r);if(n)return n.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,W.Wrap);let h=i.peek();for(;h!=null&&r.compare(h,e)<0;)i.getNext(),h=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,r){const n=this.resolveIndex_(r);if(n)return n.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,W.Wrap);let h=i.peek();for(;h!=null&&r.compare(h,e)>0;)i.getNext(),h=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Xn?-1:0}withIndex(e){if(e===gn||this.indexMap_.hasIndex(e))return this;{const r=this.indexMap_.addIndex(e,this.children_);return new q(this.children_,this.priorityNode_,r)}}isIndexed(e){return e===gn||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const r=e;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){const n=this.getIterator(oe),i=r.getIterator(oe);let h=n.getNext(),f=i.getNext();for(;h&&f;){if(h.name!==f.name||!h.node.equals(f.node))return!1;h=n.getNext(),f=i.getNext()}return h===null&&f===null}else return!1;else return!1}}resolveIndex_(e){return e===gn?null:this.indexMap_.get(e.toString())}}q.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class Cp extends q{constructor(){super(new He(ys),q.EMPTY_NODE,yt.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return q.EMPTY_NODE}isEmpty(){return!1}}const Xn=new Cp;Object.defineProperties(W,{MIN:{value:new W(pn,q.EMPTY_NODE)},MAX:{value:new W(Wt,Xn)}}),ku.__EMPTY_NODE=q.EMPTY_NODE,Te.__childrenNodeConstructor=q,yp(Xn),_p(Xn);const Tp=!0;function Re(t,e=null){if(t===null)return q.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),D(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const r=t;return new Te(r,Re(e))}if(!(t instanceof Array)&&Tp){const r=[];let n=!1;if(Se(t,(f,a)=>{if(f.substring(0,1)!=="."){const l=Re(a);l.isEmpty()||(n=n||!l.getPriority().isEmpty(),r.push(new W(f,l)))}}),r.length===0)return q.EMPTY_NODE;const h=Wr(r,gp,f=>f.name,ys);if(n){const f=Wr(r,oe.getCompare());return new q(h,Re(e),new yt({".priority":f},{".priority":oe}))}else return new q(h,Re(e),yt.Default)}else{let r=q.EMPTY_NODE;return Se(t,(n,i)=>{if(lt(t,n)&&n.substring(0,1)!=="."){const h=Re(i);(h.isLeafNode()||!h.isEmpty())&&(r=r.updateImmediateChild(n,h))}}),r.updatePriority(Re(e))}}Ep(Re);class Rp extends Br{constructor(e){super(),this.indexPath_=e,D(!Y(e)&&Q(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,r){const n=this.extractChild(e.node),i=this.extractChild(r.node),h=n.compareTo(i);return h===0?zt(e.name,r.name):h}makePost(e,r){const n=Re(e),i=q.EMPTY_NODE.updateChild(this.indexPath_,n);return new W(r,i)}maxPost(){const e=q.EMPTY_NODE.updateChild(this.indexPath_,Xn);return new W(Wt,e)}toString(){return Yn(this.indexPath_,0).join("/")}}class Ap extends Br{compare(e,r){const n=e.node.compareTo(r.node);return n===0?zt(e.name,r.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,r){return!e.equals(r)}minPost(){return W.MIN}maxPost(){return W.MAX}makePost(e,r){const n=Re(e);return new W(r,n)}toString(){return".value"}}const bp=new Ap;function Hu(t){return{type:"value",snapshotNode:t}}function En(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Jn(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Zn(t,e,r){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:r}}function Op(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}class Is{constructor(e){this.index_=e}updateChild(e,r,n,i,h,f){D(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(r);return a.getChild(i).equals(n.getChild(i))&&a.isEmpty()===n.isEmpty()||(f!=null&&(n.isEmpty()?e.hasChild(r)?f.trackChildChange(Jn(r,a)):D(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?f.trackChildChange(En(r,n)):f.trackChildChange(Zn(r,n,a))),e.isLeafNode()&&n.isEmpty())?e:e.updateImmediateChild(r,n).withIndex(this.index_)}updateFullNode(e,r,n){return n!=null&&(e.isLeafNode()||e.forEachChild(oe,(i,h)=>{r.hasChild(i)||n.trackChildChange(Jn(i,h))}),r.isLeafNode()||r.forEachChild(oe,(i,h)=>{if(e.hasChild(i)){const f=e.getImmediateChild(i);f.equals(h)||n.trackChildChange(Zn(i,h,f))}else n.trackChildChange(En(i,h))})),r.withIndex(this.index_)}updatePriority(e,r){return e.isEmpty()?q.EMPTY_NODE:e.updatePriority(r)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class xn{constructor(e){this.indexedFilter_=new Is(e.getIndex()),this.index_=e.getIndex(),this.startPost_=xn.getStartPost_(e),this.endPost_=xn.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const r=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,n=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return r&&n}updateChild(e,r,n,i,h,f){return this.matches(new W(r,n))||(n=q.EMPTY_NODE),this.indexedFilter_.updateChild(e,r,n,i,h,f)}updateFullNode(e,r,n){r.isLeafNode()&&(r=q.EMPTY_NODE);let i=r.withIndex(this.index_);i=i.updatePriority(q.EMPTY_NODE);const h=this;return r.forEachChild(oe,(f,a)=>{h.matches(new W(f,a))||(i=i.updateImmediateChild(f,q.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,n)}updatePriority(e,r){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const r=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),r)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const r=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),r)}else return e.getIndex().maxPost()}}class Sp{constructor(e){this.withinDirectionalStart=r=>this.reverse_?this.withinEndPost(r):this.withinStartPost(r),this.withinDirectionalEnd=r=>this.reverse_?this.withinStartPost(r):this.withinEndPost(r),this.withinStartPost=r=>{const n=this.index_.compare(this.rangedFilter_.getStartPost(),r);return this.startIsInclusive_?n<=0:n<0},this.withinEndPost=r=>{const n=this.index_.compare(r,this.rangedFilter_.getEndPost());return this.endIsInclusive_?n<=0:n<0},this.rangedFilter_=new xn(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,r,n,i,h,f){return this.rangedFilter_.matches(new W(r,n))||(n=q.EMPTY_NODE),e.getImmediateChild(r).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,r,n,i,h,f):this.fullLimitUpdateChild_(e,r,n,h,f)}updateFullNode(e,r,n){let i;if(r.isLeafNode()||r.isEmpty())i=q.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<r.numChildren()&&r.isIndexed(this.index_)){i=q.EMPTY_NODE.withIndex(this.index_);let h;this.reverse_?h=r.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):h=r.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let f=0;for(;h.hasNext()&&f<this.limit_;){const a=h.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))i=i.updateImmediateChild(a.name,a.node),f++;else break;else continue}}else{i=r.withIndex(this.index_),i=i.updatePriority(q.EMPTY_NODE);let h;this.reverse_?h=i.getReverseIterator(this.index_):h=i.getIterator(this.index_);let f=0;for(;h.hasNext();){const a=h.getNext();f<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?f++:i=i.updateImmediateChild(a.name,q.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,n)}updatePriority(e,r){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,r,n,i,h){let f;if(this.reverse_){const u=this.index_.getCompare();f=(c,d)=>u(d,c)}else f=this.index_.getCompare();const a=e;D(a.numChildren()===this.limit_,"");const l=new W(r,n),o=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),s=this.rangedFilter_.matches(l);if(a.hasChild(r)){const u=a.getImmediateChild(r);let c=i.getChildAfterChild(this.index_,o,this.reverse_);for(;c!=null&&(c.name===r||a.hasChild(c.name));)c=i.getChildAfterChild(this.index_,c,this.reverse_);const d=c==null?1:f(c,l);if(s&&!n.isEmpty()&&d>=0)return h?.trackChildChange(Zn(r,n,u)),a.updateImmediateChild(r,n);{h?.trackChildChange(Jn(r,u));const m=a.updateImmediateChild(r,q.EMPTY_NODE);return c!=null&&this.rangedFilter_.matches(c)?(h?.trackChildChange(En(c.name,c.node)),m.updateImmediateChild(c.name,c.node)):m}}else return n.isEmpty()?e:s&&f(o,l)>=0?(h!=null&&(h.trackChildChange(Jn(o.name,o.node)),h.trackChildChange(En(r,n))),a.updateImmediateChild(r,n).updateImmediateChild(o.name,q.EMPTY_NODE)):e}}class Ns{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=oe}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return D(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return D(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:pn}hasEnd(){return this.endSet_}getIndexEndValue(){return D(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return D(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Wt}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return D(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===oe}copy(){const e=new Ns;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Dp(t){return t.loadsAllData()?new Is(t.getIndex()):t.hasLimit()?new Sp(t):new xn(t)}function Gu(t){const e={};if(t.isDefault())return e;let r;if(t.index_===oe?r="$priority":t.index_===bp?r="$value":t.index_===gn?r="$key":(D(t.index_ instanceof Rp,"Unrecognized index type!"),r=t.index_.toString()),e.orderBy=Ne(r),t.startSet_){const n=t.startAfterSet_?"startAfter":"startAt";e[n]=Ne(t.indexStartValue_),t.startNameSet_&&(e[n]+=","+Ne(t.indexStartName_))}if(t.endSet_){const n=t.endBeforeSet_?"endBefore":"endAt";e[n]=Ne(t.indexEndValue_),t.endNameSet_&&(e[n]+=","+Ne(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function Wu(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let r=t.viewFrom_;r===""&&(t.isViewFromLeft()?r="l":r="r"),e.vf=r}return t.index_!==oe&&(e.i=t.index_.toString()),e}class zr extends Ru{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,r){return r!==void 0?"tag$"+r:(D(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,r,n,i){super(),this.repoInfo_=e,this.onDataUpdate_=r,this.authTokenProvider_=n,this.appCheckTokenProvider_=i,this.log_=Gn("p:rest:"),this.listens_={}}listen(e,r,n,i){const h=e._path.toString();this.log_("Listen called for "+h+" "+e._queryIdentifier);const f=zr.getListenId_(e,n),a={};this.listens_[f]=a;const l=Gu(e._queryParams);this.restRequest_(h+".json",l,(o,s)=>{let u=s;if(o===404&&(u=null,o=null),o===null&&this.onDataUpdate_(h,u,!1,n),cn(this.listens_,f)===a){let c;o?o===401?c="permission_denied":c="rest_error:"+o:c="ok",i(c,null)}})}unlisten(e,r){const n=zr.getListenId_(e,r);delete this.listens_[n]}get(e){const r=Gu(e._queryParams),n=e._path.toString(),i=new Pr;return this.restRequest_(n+".json",r,(h,f)=>{let a=f;h===404&&(a=null,h=null),h===null?(this.onDataUpdate_(n,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,r={},n){return r.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,h])=>{i&&i.accessToken&&(r.auth=i.accessToken),h&&h.token&&(r.ac=h.token);const f=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+th(r);this.log_("Sending REST request for "+f);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(n&&a.readyState===4){this.log_("REST Response for "+f+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=Vn(a.responseText)}catch{Be("Failed to parse JSON response for "+f+": "+a.responseText)}n(null,l)}else a.status!==401&&a.status!==404&&Be("Got unsuccessful REST response for "+f+" Status: "+a.status),n(a.status);n=null}},a.open("GET",f,!0),a.send()})}}class Pp{constructor(){this.rootNode_=q.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,r){this.rootNode_=this.rootNode_.updateChild(e,r)}}function $r(){return{value:null,children:new Map}}function zu(t,e,r){if(Y(e))t.value=r,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,r);else{const n=Q(e);t.children.has(n)||t.children.set(n,$r());const i=t.children.get(n);e=te(e),zu(i,e,r)}}function ws(t,e,r){t.value!==null?r(e,t.value):Mp(t,(n,i)=>{const h=new x(e.toString()+"/"+n);ws(i,h,r)})}function Mp(t,e){t.children.forEach((r,n)=>{e(n,r)})}class Lp{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),r={...e};return this.last_&&Se(this.last_,(n,i)=>{r[n]=r[n]-i}),this.last_=e,r}}const $u=10*1e3,kp=30*1e3,Fp=300*1e3;class Vp{constructor(e,r){this.server_=r,this.statsToReport_={},this.statsListener_=new Lp(e);const n=$u+(kp-$u)*Math.random();zn(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const e=this.statsListener_.get(),r={};let n=!1;Se(e,(i,h)=>{h>0&&lt(this.statsToReport_,i)&&(r[i]=h,n=!0)}),n&&this.server_.reportStats(r),zn(this.reportStats_.bind(this),Math.floor(Math.random()*2*Fp))}}var et;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(et||(et={}));function Cs(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Ts(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Rs(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}class Yr{constructor(e,r,n){this.path=e,this.affectedTree=r,this.revert=n,this.type=et.ACK_USER_WRITE,this.source=Cs()}operationForChild(e){if(Y(this.path)){if(this.affectedTree.value!=null)return D(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const r=this.affectedTree.subtree(new x(e));return new Yr(X(),r,this.revert)}}else return D(Q(this.path)===e,"operationForChild called for unrelated child."),new Yr(te(this.path),this.affectedTree,this.revert)}}class jn{constructor(e,r){this.source=e,this.path=r,this.type=et.LISTEN_COMPLETE}operationForChild(e){return Y(this.path)?new jn(this.source,X()):new jn(this.source,te(this.path))}}class Yt{constructor(e,r,n){this.source=e,this.path=r,this.snap=n,this.type=et.OVERWRITE}operationForChild(e){return Y(this.path)?new Yt(this.source,X(),this.snap.getImmediateChild(e)):new Yt(this.source,te(this.path),this.snap)}}class _n{constructor(e,r,n){this.source=e,this.path=r,this.children=n,this.type=et.MERGE}operationForChild(e){if(Y(this.path)){const r=this.children.subtree(new x(e));return r.isEmpty()?null:r.value?new Yt(this.source,X(),r.value):new _n(this.source,X(),r)}else return D(Q(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new _n(this.source,te(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class At{constructor(e,r,n){this.node_=e,this.fullyInitialized_=r,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Y(e))return this.isFullyInitialized()&&!this.filtered_;const r=Q(e);return this.isCompleteForChild(r)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class Up{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function qp(t,e,r,n){const i=[],h=[];return e.forEach(f=>{f.type==="child_changed"&&t.index_.indexedValueChanged(f.oldSnap,f.snapshotNode)&&h.push(Op(f.childName,f.snapshotNode))}),er(t,i,"child_removed",e,n,r),er(t,i,"child_added",e,n,r),er(t,i,"child_moved",h,n,r),er(t,i,"child_changed",e,n,r),er(t,i,"value",e,n,r),i}function er(t,e,r,n,i,h){const f=n.filter(a=>a.type===r);f.sort((a,l)=>Hp(t,a,l)),f.forEach(a=>{const l=Bp(t,a,h);i.forEach(o=>{o.respondsTo(a.type)&&e.push(o.createEvent(l,t.query_))})})}function Bp(t,e,r){return e.type==="value"||e.type==="child_removed"||(e.prevName=r.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function Hp(t,e,r){if(e.childName==null||r.childName==null)throw ln("Should only compare child_ events.");const n=new W(e.childName,e.snapshotNode),i=new W(r.childName,r.snapshotNode);return t.index_.compare(n,i)}function Qr(t,e){return{eventCache:t,serverCache:e}}function tr(t,e,r,n){return Qr(new At(e,r,n),t.serverCache)}function Yu(t,e,r,n){return Qr(t.eventCache,new At(e,r,n))}function Kr(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Qt(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}let As;const Gp=()=>(As||(As=new He(Rd)),As);class ne{static fromObject(e){let r=new ne(null);return Se(e,(n,i)=>{r=r.set(new x(n),i)}),r}constructor(e,r=Gp()){this.value=e,this.children=r}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,r){if(this.value!=null&&r(this.value))return{path:X(),value:this.value};if(Y(e))return null;{const n=Q(e),i=this.children.get(n);if(i!==null){const h=i.findRootMostMatchingPathAndValue(te(e),r);return h!=null?{path:se(new x(n),h.path),value:h.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Y(e))return this;{const r=Q(e),n=this.children.get(r);return n!==null?n.subtree(te(e)):new ne(null)}}set(e,r){if(Y(e))return new ne(r,this.children);{const n=Q(e),h=(this.children.get(n)||new ne(null)).set(te(e),r),f=this.children.insert(n,h);return new ne(this.value,f)}}remove(e){if(Y(e))return this.children.isEmpty()?new ne(null):new ne(null,this.children);{const r=Q(e),n=this.children.get(r);if(n){const i=n.remove(te(e));let h;return i.isEmpty()?h=this.children.remove(r):h=this.children.insert(r,i),this.value===null&&h.isEmpty()?new ne(null):new ne(this.value,h)}else return this}}get(e){if(Y(e))return this.value;{const r=Q(e),n=this.children.get(r);return n?n.get(te(e)):null}}setTree(e,r){if(Y(e))return r;{const n=Q(e),h=(this.children.get(n)||new ne(null)).setTree(te(e),r);let f;return h.isEmpty()?f=this.children.remove(n):f=this.children.insert(n,h),new ne(this.value,f)}}fold(e){return this.fold_(X(),e)}fold_(e,r){const n={};return this.children.inorderTraversal((i,h)=>{n[i]=h.fold_(se(e,i),r)}),r(e,this.value,n)}findOnPath(e,r){return this.findOnPath_(e,X(),r)}findOnPath_(e,r,n){const i=this.value?n(r,this.value):!1;if(i)return i;if(Y(e))return null;{const h=Q(e),f=this.children.get(h);return f?f.findOnPath_(te(e),se(r,h),n):null}}foreachOnPath(e,r){return this.foreachOnPath_(e,X(),r)}foreachOnPath_(e,r,n){if(Y(e))return this;{this.value&&n(r,this.value);const i=Q(e),h=this.children.get(i);return h?h.foreachOnPath_(te(e),se(r,i),n):new ne(null)}}foreach(e){this.foreach_(X(),e)}foreach_(e,r){this.children.inorderTraversal((n,i)=>{i.foreach_(se(e,n),r)}),this.value&&r(e,this.value)}foreachChild(e){this.children.inorderTraversal((r,n)=>{n.value&&e(r,n.value)})}}class tt{constructor(e){this.writeTree_=e}static empty(){return new tt(new ne(null))}}function nr(t,e,r){if(Y(e))return new tt(new ne(r));{const n=t.writeTree_.findRootMostValueAndPath(e);if(n!=null){const i=n.path;let h=n.value;const f=Fe(i,e);return h=h.updateChild(f,r),new tt(t.writeTree_.set(i,h))}else{const i=new ne(r),h=t.writeTree_.setTree(e,i);return new tt(h)}}}function bs(t,e,r){let n=t;return Se(r,(i,h)=>{n=nr(n,se(e,i),h)}),n}function Qu(t,e){if(Y(e))return tt.empty();{const r=t.writeTree_.setTree(e,new ne(null));return new tt(r)}}function Os(t,e){return Kt(t,e)!=null}function Kt(t,e){const r=t.writeTree_.findRootMostValueAndPath(e);return r!=null?t.writeTree_.get(r.path).getChild(Fe(r.path,e)):null}function Ku(t){const e=[],r=t.writeTree_.value;return r!=null?r.isLeafNode()||r.forEachChild(oe,(n,i)=>{e.push(new W(n,i))}):t.writeTree_.children.inorderTraversal((n,i)=>{i.value!=null&&e.push(new W(n,i.value))}),e}function bt(t,e){if(Y(e))return t;{const r=Kt(t,e);return r!=null?new tt(new ne(r)):new tt(t.writeTree_.subtree(e))}}function Ss(t){return t.writeTree_.isEmpty()}function In(t,e){return Xu(X(),t.writeTree_,e)}function Xu(t,e,r){if(e.value!=null)return r.updateChild(t,e.value);{let n=null;return e.children.inorderTraversal((i,h)=>{i===".priority"?(D(h.value!==null,"Priority writes must always be leaf nodes"),n=h.value):r=Xu(se(t,i),h,r)}),!r.getChild(t).isEmpty()&&n!==null&&(r=r.updateChild(se(t,".priority"),n)),r}}function Xr(t,e){return el(e,t)}function Wp(t,e,r,n,i){D(n>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:r,writeId:n,visible:i}),i&&(t.visibleWrites=nr(t.visibleWrites,e,r)),t.lastWriteId=n}function zp(t,e,r,n){D(n>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:r,writeId:n,visible:!0}),t.visibleWrites=bs(t.visibleWrites,e,r),t.lastWriteId=n}function $p(t,e){for(let r=0;r<t.allWrites.length;r++){const n=t.allWrites[r];if(n.writeId===e)return n}return null}function Yp(t,e){const r=t.allWrites.findIndex(a=>a.writeId===e);D(r>=0,"removeWrite called with nonexistent writeId.");const n=t.allWrites[r];t.allWrites.splice(r,1);let i=n.visible,h=!1,f=t.allWrites.length-1;for(;i&&f>=0;){const a=t.allWrites[f];a.visible&&(f>=r&&Qp(a,n.path)?i=!1:Qe(n.path,a.path)&&(h=!0)),f--}if(i){if(h)return Kp(t),!0;if(n.snap)t.visibleWrites=Qu(t.visibleWrites,n.path);else{const a=n.children;Se(a,l=>{t.visibleWrites=Qu(t.visibleWrites,se(n.path,l))})}return!0}else return!1}function Qp(t,e){if(t.snap)return Qe(t.path,e);for(const r in t.children)if(t.children.hasOwnProperty(r)&&Qe(se(t.path,r),e))return!0;return!1}function Kp(t){t.visibleWrites=Ju(t.allWrites,Xp,X()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function Xp(t){return t.visible}function Ju(t,e,r){let n=tt.empty();for(let i=0;i<t.length;++i){const h=t[i];if(e(h)){const f=h.path;let a;if(h.snap)Qe(r,f)?(a=Fe(r,f),n=nr(n,a,h.snap)):Qe(f,r)&&(a=Fe(f,r),n=nr(n,X(),h.snap.getChild(a)));else if(h.children){if(Qe(r,f))a=Fe(r,f),n=bs(n,a,h.children);else if(Qe(f,r))if(a=Fe(f,r),Y(a))n=bs(n,X(),h.children);else{const l=cn(h.children,Q(a));if(l){const o=l.getChild(te(a));n=nr(n,X(),o)}}}else throw ln("WriteRecord should have .snap or .children")}}return n}function Zu(t,e,r,n,i){if(!n&&!i){const h=Kt(t.visibleWrites,e);if(h!=null)return h;{const f=bt(t.visibleWrites,e);if(Ss(f))return r;if(r==null&&!Os(f,X()))return null;{const a=r||q.EMPTY_NODE;return In(f,a)}}}else{const h=bt(t.visibleWrites,e);if(!i&&Ss(h))return r;if(!i&&r==null&&!Os(h,X()))return null;{const f=function(o){return(o.visible||i)&&(!n||!~n.indexOf(o.writeId))&&(Qe(o.path,e)||Qe(e,o.path))},a=Ju(t.allWrites,f,e),l=r||q.EMPTY_NODE;return In(a,l)}}}function Jp(t,e,r){let n=q.EMPTY_NODE;const i=Kt(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(oe,(h,f)=>{n=n.updateImmediateChild(h,f)}),n;if(r){const h=bt(t.visibleWrites,e);return r.forEachChild(oe,(f,a)=>{const l=In(bt(h,new x(f)),a);n=n.updateImmediateChild(f,l)}),Ku(h).forEach(f=>{n=n.updateImmediateChild(f.name,f.node)}),n}else{const h=bt(t.visibleWrites,e);return Ku(h).forEach(f=>{n=n.updateImmediateChild(f.name,f.node)}),n}}function Zp(t,e,r,n,i){D(n||i,"Either existingEventSnap or existingServerSnap must exist");const h=se(e,r);if(Os(t.visibleWrites,h))return null;{const f=bt(t.visibleWrites,h);return Ss(f)?i.getChild(r):In(f,i.getChild(r))}}function xp(t,e,r,n){const i=se(e,r),h=Kt(t.visibleWrites,i);if(h!=null)return h;if(n.isCompleteForChild(r)){const f=bt(t.visibleWrites,i);return In(f,n.getNode().getImmediateChild(r))}else return null}function jp(t,e){return Kt(t.visibleWrites,e)}function em(t,e,r,n,i,h,f){let a;const l=bt(t.visibleWrites,e),o=Kt(l,X());if(o!=null)a=o;else if(r!=null)a=In(l,r);else return[];if(a=a.withIndex(f),!a.isEmpty()&&!a.isLeafNode()){const s=[],u=f.getCompare(),c=h?a.getReverseIteratorFrom(n,f):a.getIteratorFrom(n,f);let d=c.getNext();for(;d&&s.length<i;)u(d,n)!==0&&s.push(d),d=c.getNext();return s}else return[]}function tm(){return{visibleWrites:tt.empty(),allWrites:[],lastWriteId:-1}}function Jr(t,e,r,n){return Zu(t.writeTree,t.treePath,e,r,n)}function Ds(t,e){return Jp(t.writeTree,t.treePath,e)}function xu(t,e,r,n){return Zp(t.writeTree,t.treePath,e,r,n)}function Zr(t,e){return jp(t.writeTree,se(t.treePath,e))}function nm(t,e,r,n,i,h){return em(t.writeTree,t.treePath,e,r,n,i,h)}function Ps(t,e,r){return xp(t.writeTree,t.treePath,e,r)}function ju(t,e){return el(se(t.treePath,e),t.writeTree)}function el(t,e){return{treePath:t,writeTree:e}}class rm{constructor(){this.changeMap=new Map}trackChildChange(e){const r=e.type,n=e.childName;D(r==="child_added"||r==="child_changed"||r==="child_removed","Only child changes supported for tracking"),D(n!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(n);if(i){const h=i.type;if(r==="child_added"&&h==="child_removed")this.changeMap.set(n,Zn(n,e.snapshotNode,i.snapshotNode));else if(r==="child_removed"&&h==="child_added")this.changeMap.delete(n);else if(r==="child_removed"&&h==="child_changed")this.changeMap.set(n,Jn(n,i.oldSnap));else if(r==="child_changed"&&h==="child_added")this.changeMap.set(n,En(n,e.snapshotNode));else if(r==="child_changed"&&h==="child_changed")this.changeMap.set(n,Zn(n,e.snapshotNode,i.oldSnap));else throw ln("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(n,e)}getChanges(){return Array.from(this.changeMap.values())}}class im{getCompleteChild(e){return null}getChildAfterChild(e,r,n){return null}}const tl=new im;class Ms{constructor(e,r,n=null){this.writes_=e,this.viewCache_=r,this.optCompleteServerCache_=n}getCompleteChild(e){const r=this.viewCache_.eventCache;if(r.isCompleteForChild(e))return r.getNode().getImmediateChild(e);{const n=this.optCompleteServerCache_!=null?new At(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Ps(this.writes_,e,n)}}getChildAfterChild(e,r,n){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Qt(this.viewCache_),h=nm(this.writes_,i,r,1,n,e);return h.length===0?null:h[0]}}function sm(t){return{filter:t}}function om(t,e){D(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),D(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function am(t,e,r,n,i){const h=new rm;let f,a;if(r.type===et.OVERWRITE){const o=r;o.source.fromUser?f=Ls(t,e,o.path,o.snap,n,i,h):(D(o.source.fromServer,"Unknown source."),a=o.source.tagged||e.serverCache.isFiltered()&&!Y(o.path),f=xr(t,e,o.path,o.snap,n,i,a,h))}else if(r.type===et.MERGE){const o=r;o.source.fromUser?f=lm(t,e,o.path,o.children,n,i,h):(D(o.source.fromServer,"Unknown source."),a=o.source.tagged||e.serverCache.isFiltered(),f=ks(t,e,o.path,o.children,n,i,a,h))}else if(r.type===et.ACK_USER_WRITE){const o=r;o.revert?f=hm(t,e,o.path,n,i,h):f=cm(t,e,o.path,o.affectedTree,n,i,h)}else if(r.type===et.LISTEN_COMPLETE)f=fm(t,e,r.path,n,h);else throw ln("Unknown operation type: "+r.type);const l=h.getChanges();return um(e,f,l),{viewCache:f,changes:l}}function um(t,e,r){const n=e.eventCache;if(n.isFullyInitialized()){const i=n.getNode().isLeafNode()||n.getNode().isEmpty(),h=Kr(t);(r.length>0||!t.eventCache.isFullyInitialized()||i&&!n.getNode().equals(h)||!n.getNode().getPriority().equals(h.getPriority()))&&r.push(Hu(Kr(e)))}}function nl(t,e,r,n,i,h){const f=e.eventCache;if(Zr(n,r)!=null)return e;{let a,l;if(Y(r))if(D(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const o=Qt(e),s=o instanceof q?o:q.EMPTY_NODE,u=Ds(n,s);a=t.filter.updateFullNode(e.eventCache.getNode(),u,h)}else{const o=Jr(n,Qt(e));a=t.filter.updateFullNode(e.eventCache.getNode(),o,h)}else{const o=Q(r);if(o===".priority"){D(Rt(r)===1,"Can't have a priority with additional path components");const s=f.getNode();l=e.serverCache.getNode();const u=xu(n,r,s,l);u!=null?a=t.filter.updatePriority(s,u):a=f.getNode()}else{const s=te(r);let u;if(f.isCompleteForChild(o)){l=e.serverCache.getNode();const c=xu(n,r,f.getNode(),l);c!=null?u=f.getNode().getImmediateChild(o).updateChild(s,c):u=f.getNode().getImmediateChild(o)}else u=Ps(n,o,e.serverCache);u!=null?a=t.filter.updateChild(f.getNode(),o,u,s,i,h):a=f.getNode()}}return tr(e,a,f.isFullyInitialized()||Y(r),t.filter.filtersNodes())}}function xr(t,e,r,n,i,h,f,a){const l=e.serverCache;let o;const s=f?t.filter:t.filter.getIndexedFilter();if(Y(r))o=s.updateFullNode(l.getNode(),n,null);else if(s.filtersNodes()&&!l.isFiltered()){const d=l.getNode().updateChild(r,n);o=s.updateFullNode(l.getNode(),d,null)}else{const d=Q(r);if(!l.isCompleteForPath(r)&&Rt(r)>1)return e;const p=te(r),v=l.getNode().getImmediateChild(d).updateChild(p,n);d===".priority"?o=s.updatePriority(l.getNode(),v):o=s.updateChild(l.getNode(),d,v,p,tl,null)}const u=Yu(e,o,l.isFullyInitialized()||Y(r),s.filtersNodes()),c=new Ms(i,u,h);return nl(t,u,r,i,c,a)}function Ls(t,e,r,n,i,h,f){const a=e.eventCache;let l,o;const s=new Ms(i,e,h);if(Y(r))o=t.filter.updateFullNode(e.eventCache.getNode(),n,f),l=tr(e,o,!0,t.filter.filtersNodes());else{const u=Q(r);if(u===".priority")o=t.filter.updatePriority(e.eventCache.getNode(),n),l=tr(e,o,a.isFullyInitialized(),a.isFiltered());else{const c=te(r),d=a.getNode().getImmediateChild(u);let p;if(Y(c))p=n;else{const m=s.getCompleteChild(u);m!=null?vs(c)===".priority"&&m.getChild(Su(c)).isEmpty()?p=m:p=m.updateChild(c,n):p=q.EMPTY_NODE}if(d.equals(p))l=e;else{const m=t.filter.updateChild(a.getNode(),u,p,c,s,f);l=tr(e,m,a.isFullyInitialized(),t.filter.filtersNodes())}}}return l}function rl(t,e){return t.eventCache.isCompleteForChild(e)}function lm(t,e,r,n,i,h,f){let a=e;return n.foreach((l,o)=>{const s=se(r,l);rl(e,Q(s))&&(a=Ls(t,a,s,o,i,h,f))}),n.foreach((l,o)=>{const s=se(r,l);rl(e,Q(s))||(a=Ls(t,a,s,o,i,h,f))}),a}function il(t,e,r){return r.foreach((n,i)=>{e=e.updateChild(n,i)}),e}function ks(t,e,r,n,i,h,f,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,o;Y(r)?o=n:o=new ne(null).setTree(r,n);const s=e.serverCache.getNode();return o.children.inorderTraversal((u,c)=>{if(s.hasChild(u)){const d=e.serverCache.getNode().getImmediateChild(u),p=il(t,d,c);l=xr(t,l,new x(u),p,i,h,f,a)}}),o.children.inorderTraversal((u,c)=>{const d=!e.serverCache.isCompleteForChild(u)&&c.value===null;if(!s.hasChild(u)&&!d){const p=e.serverCache.getNode().getImmediateChild(u),m=il(t,p,c);l=xr(t,l,new x(u),m,i,h,f,a)}}),l}function cm(t,e,r,n,i,h,f){if(Zr(i,r)!=null)return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(n.value!=null){if(Y(r)&&l.isFullyInitialized()||l.isCompleteForPath(r))return xr(t,e,r,l.getNode().getChild(r),i,h,a,f);if(Y(r)){let o=new ne(null);return l.getNode().forEachChild(gn,(s,u)=>{o=o.set(new x(s),u)}),ks(t,e,r,o,i,h,a,f)}else return e}else{let o=new ne(null);return n.foreach((s,u)=>{const c=se(r,s);l.isCompleteForPath(c)&&(o=o.set(s,l.getNode().getChild(c)))}),ks(t,e,r,o,i,h,a,f)}}function fm(t,e,r,n,i){const h=e.serverCache,f=Yu(e,h.getNode(),h.isFullyInitialized()||Y(r),h.isFiltered());return nl(t,f,r,n,tl,i)}function hm(t,e,r,n,i,h){let f;if(Zr(n,r)!=null)return e;{const a=new Ms(n,e,i),l=e.eventCache.getNode();let o;if(Y(r)||Q(r)===".priority"){let s;if(e.serverCache.isFullyInitialized())s=Jr(n,Qt(e));else{const u=e.serverCache.getNode();D(u instanceof q,"serverChildren would be complete if leaf node"),s=Ds(n,u)}s=s,o=t.filter.updateFullNode(l,s,h)}else{const s=Q(r);let u=Ps(n,s,e.serverCache);u==null&&e.serverCache.isCompleteForChild(s)&&(u=l.getImmediateChild(s)),u!=null?o=t.filter.updateChild(l,s,u,te(r),a,h):e.eventCache.getNode().hasChild(s)?o=t.filter.updateChild(l,s,q.EMPTY_NODE,te(r),a,h):o=l,o.isEmpty()&&e.serverCache.isFullyInitialized()&&(f=Jr(n,Qt(e)),f.isLeafNode()&&(o=t.filter.updateFullNode(o,f,h)))}return f=e.serverCache.isFullyInitialized()||Zr(n,X())!=null,tr(e,o,f,t.filter.filtersNodes())}}class dm{constructor(e,r){this.query_=e,this.eventRegistrations_=[];const n=this.query_._queryParams,i=new Is(n.getIndex()),h=Dp(n);this.processor_=sm(h);const f=r.serverCache,a=r.eventCache,l=i.updateFullNode(q.EMPTY_NODE,f.getNode(),null),o=h.updateFullNode(q.EMPTY_NODE,a.getNode(),null),s=new At(l,f.isFullyInitialized(),i.filtersNodes()),u=new At(o,a.isFullyInitialized(),h.filtersNodes());this.viewCache_=Qr(u,s),this.eventGenerator_=new Up(this.query_)}get query(){return this.query_}}function pm(t){return t.viewCache_.serverCache.getNode()}function mm(t){return Kr(t.viewCache_)}function vm(t,e){const r=Qt(t.viewCache_);return r&&(t.query._queryParams.loadsAllData()||!Y(e)&&!r.getImmediateChild(Q(e)).isEmpty())?r.getChild(e):null}function sl(t){return t.eventRegistrations_.length===0}function gm(t,e){t.eventRegistrations_.push(e)}function ol(t,e,r){const n=[];if(r){D(e==null,"A cancel should cancel all event registrations.");const i=t.query._path;t.eventRegistrations_.forEach(h=>{const f=h.createCancelEvent(r,i);f&&n.push(f)})}if(e){let i=[];for(let h=0;h<t.eventRegistrations_.length;++h){const f=t.eventRegistrations_[h];if(!f.matches(e))i.push(f);else if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(h+1));break}}t.eventRegistrations_=i}else t.eventRegistrations_=[];return n}function al(t,e,r,n){e.type===et.MERGE&&e.source.queryId!==null&&(D(Qt(t.viewCache_),"We should always have a full cache before handling merges"),D(Kr(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,h=am(t.processor_,i,e,r,n);return om(t.processor_,h.viewCache),D(h.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=h.viewCache,ul(t,h.changes,h.viewCache.eventCache.getNode(),null)}function ym(t,e){const r=t.viewCache_.eventCache,n=[];return r.getNode().isLeafNode()||r.getNode().forEachChild(oe,(h,f)=>{n.push(En(h,f))}),r.isFullyInitialized()&&n.push(Hu(r.getNode())),ul(t,n,r.getNode(),e)}function ul(t,e,r,n){const i=n?[n]:t.eventRegistrations_;return qp(t.eventGenerator_,e,r,i)}let jr;class ll{constructor(){this.views=new Map}}function Em(t){D(!jr,"__referenceConstructor has already been defined"),jr=t}function _m(){return D(jr,"Reference.ts has not been loaded"),jr}function Im(t){return t.views.size===0}function Fs(t,e,r,n){const i=e.source.queryId;if(i!==null){const h=t.views.get(i);return D(h!=null,"SyncTree gave us an op for an invalid query."),al(h,e,r,n)}else{let h=[];for(const f of t.views.values())h=h.concat(al(f,e,r,n));return h}}function cl(t,e,r,n,i){const h=e._queryIdentifier,f=t.views.get(h);if(!f){let a=Jr(r,i?n:null),l=!1;a?l=!0:n instanceof q?(a=Ds(r,n),l=!1):(a=q.EMPTY_NODE,l=!1);const o=Qr(new At(a,l,!1),new At(n,i,!1));return new dm(e,o)}return f}function Nm(t,e,r,n,i,h){const f=cl(t,e,n,i,h);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,f),gm(f,r),ym(f,r)}function wm(t,e,r,n){const i=e._queryIdentifier,h=[];let f=[];const a=St(t);if(i==="default")for(const[l,o]of t.views.entries())f=f.concat(ol(o,r,n)),sl(o)&&(t.views.delete(l),o.query._queryParams.loadsAllData()||h.push(o.query));else{const l=t.views.get(i);l&&(f=f.concat(ol(l,r,n)),sl(l)&&(t.views.delete(i),l.query._queryParams.loadsAllData()||h.push(l.query)))}return a&&!St(t)&&h.push(new(_m())(e._repo,e._path)),{removed:h,events:f}}function fl(t){const e=[];for(const r of t.views.values())r.query._queryParams.loadsAllData()||e.push(r);return e}function Ot(t,e){let r=null;for(const n of t.views.values())r=r||vm(n,e);return r}function hl(t,e){if(e._queryParams.loadsAllData())return ei(t);{const n=e._queryIdentifier;return t.views.get(n)}}function dl(t,e){return hl(t,e)!=null}function St(t){return ei(t)!=null}function ei(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let ti;function Cm(t){D(!ti,"__referenceConstructor has already been defined"),ti=t}function Tm(){return D(ti,"Reference.ts has not been loaded"),ti}let Rm=1;class pl{constructor(e){this.listenProvider_=e,this.syncPointTree_=new ne(null),this.pendingWriteTree_=tm(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Am(t,e,r,n,i){return Wp(t.pendingWriteTree_,e,r,n,i),i?Nn(t,new Yt(Cs(),e,r)):[]}function bm(t,e,r,n){zp(t.pendingWriteTree_,e,r,n);const i=ne.fromObject(r);return Nn(t,new _n(Cs(),e,i))}function Xt(t,e,r=!1){const n=$p(t.pendingWriteTree_,e);if(Yp(t.pendingWriteTree_,e)){let h=new ne(null);return n.snap!=null?h=h.set(X(),!0):Se(n.children,f=>{h=h.set(new x(f),!0)}),Nn(t,new Yr(n.path,h,r))}else return[]}function rr(t,e,r){return Nn(t,new Yt(Ts(),e,r))}function Om(t,e,r){const n=ne.fromObject(r);return Nn(t,new _n(Ts(),e,n))}function Sm(t,e){return Nn(t,new jn(Ts(),e))}function Dm(t,e,r){const n=Vs(t,r);if(n){const i=Us(n),h=i.path,f=i.queryId,a=Fe(h,e),l=new jn(Rs(f),a);return qs(t,h,l)}else return[]}function ml(t,e,r,n,i=!1){const h=e._path,f=t.syncPointTree_.get(h);let a=[];if(f&&(e._queryIdentifier==="default"||dl(f,e))){const l=wm(f,e,r,n);Im(f)&&(t.syncPointTree_=t.syncPointTree_.remove(h));const o=l.removed;if(a=l.events,!i){const s=o.findIndex(c=>c._queryParams.loadsAllData())!==-1,u=t.syncPointTree_.findOnPath(h,(c,d)=>St(d));if(s&&!u){const c=t.syncPointTree_.subtree(h);if(!c.isEmpty()){const d=km(c);for(let p=0;p<d.length;++p){const m=d[p],v=m.query,y=_l(t,m);t.listenProvider_.startListening(sr(v),ir(t,v),y.hashFn,y.onComplete)}}}!u&&o.length>0&&!n&&(s?t.listenProvider_.stopListening(sr(e),null):o.forEach(c=>{const d=t.queryToTagMap.get(ni(c));t.listenProvider_.stopListening(sr(c),d)}))}Fm(t,o)}return a}function vl(t,e,r,n){const i=Vs(t,n);if(i!=null){const h=Us(i),f=h.path,a=h.queryId,l=Fe(f,e),o=new Yt(Rs(a),l,r);return qs(t,f,o)}else return[]}function Pm(t,e,r,n){const i=Vs(t,n);if(i){const h=Us(i),f=h.path,a=h.queryId,l=Fe(f,e),o=ne.fromObject(r),s=new _n(Rs(a),l,o);return qs(t,f,s)}else return[]}function Mm(t,e,r,n=!1){const i=e._path;let h=null,f=!1;t.syncPointTree_.foreachOnPath(i,(c,d)=>{const p=Fe(c,i);h=h||Ot(d,p),f=f||St(d)});let a=t.syncPointTree_.get(i);a?(f=f||St(a),h=h||Ot(a,X())):(a=new ll,t.syncPointTree_=t.syncPointTree_.set(i,a));let l;h!=null?l=!0:(l=!1,h=q.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((d,p)=>{const m=Ot(p,X());m&&(h=h.updateImmediateChild(d,m))}));const o=dl(a,e);if(!o&&!e._queryParams.loadsAllData()){const c=ni(e);D(!t.queryToTagMap.has(c),"View does not exist, but we have a tag");const d=Vm();t.queryToTagMap.set(c,d),t.tagToQueryMap.set(d,c)}const s=Xr(t.pendingWriteTree_,i);let u=Nm(a,e,r,s,h,l);if(!o&&!f&&!n){const c=hl(a,e);u=u.concat(Um(t,e,c))}return u}function gl(t,e,r){const i=t.pendingWriteTree_,h=t.syncPointTree_.findOnPath(e,(f,a)=>{const l=Fe(f,e),o=Ot(a,l);if(o)return o});return Zu(i,e,h,r,!0)}function Lm(t,e){const r=e._path;let n=null;t.syncPointTree_.foreachOnPath(r,(o,s)=>{const u=Fe(o,r);n=n||Ot(s,u)});let i=t.syncPointTree_.get(r);i?n=n||Ot(i,X()):(i=new ll,t.syncPointTree_=t.syncPointTree_.set(r,i));const h=n!=null,f=h?new At(n,!0,!1):null,a=Xr(t.pendingWriteTree_,e._path),l=cl(i,e,a,h?f.getNode():q.EMPTY_NODE,h);return mm(l)}function Nn(t,e){return yl(e,t.syncPointTree_,null,Xr(t.pendingWriteTree_,X()))}function yl(t,e,r,n){if(Y(t.path))return El(t,e,r,n);{const i=e.get(X());r==null&&i!=null&&(r=Ot(i,X()));let h=[];const f=Q(t.path),a=t.operationForChild(f),l=e.children.get(f);if(l&&a){const o=r?r.getImmediateChild(f):null,s=ju(n,f);h=h.concat(yl(a,l,o,s))}return i&&(h=h.concat(Fs(i,t,n,r))),h}}function El(t,e,r,n){const i=e.get(X());r==null&&i!=null&&(r=Ot(i,X()));let h=[];return e.children.inorderTraversal((f,a)=>{const l=r?r.getImmediateChild(f):null,o=ju(n,f),s=t.operationForChild(f);s&&(h=h.concat(El(s,a,l,o)))}),i&&(h=h.concat(Fs(i,t,n,r))),h}function _l(t,e){const r=e.query,n=ir(t,r);return{hashFn:()=>(pm(e)||q.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return n?Dm(t,r._path,n):Sm(t,r._path);{const h=Od(i,r);return ml(t,r,null,h)}}}}function ir(t,e){const r=ni(e);return t.queryToTagMap.get(r)}function ni(t){return t._path.toString()+"$"+t._queryIdentifier}function Vs(t,e){return t.tagToQueryMap.get(e)}function Us(t){const e=t.indexOf("$");return D(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new x(t.substr(0,e))}}function qs(t,e,r){const n=t.syncPointTree_.get(e);D(n,"Missing sync point for query tag that we're tracking");const i=Xr(t.pendingWriteTree_,e);return Fs(n,r,i,null)}function km(t){return t.fold((e,r,n)=>{if(r&&St(r))return[ei(r)];{let i=[];return r&&(i=fl(r)),Se(n,(h,f)=>{i=i.concat(f)}),i}})}function sr(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(Tm())(t._repo,t._path):t}function Fm(t,e){for(let r=0;r<e.length;++r){const n=e[r];if(!n._queryParams.loadsAllData()){const i=ni(n),h=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(h)}}}function Vm(){return Rm++}function Um(t,e,r){const n=e._path,i=ir(t,e),h=_l(t,r),f=t.listenProvider_.startListening(sr(e),i,h.hashFn,h.onComplete),a=t.syncPointTree_.subtree(n);if(i)D(!St(a.value),"If we're adding a query, it shouldn't be shadowed");else{const l=a.fold((o,s,u)=>{if(!Y(o)&&s&&St(s))return[ei(s).query];{let c=[];return s&&(c=c.concat(fl(s).map(d=>d.query))),Se(u,(d,p)=>{c=c.concat(p)}),c}});for(let o=0;o<l.length;++o){const s=l[o];t.listenProvider_.stopListening(sr(s),ir(t,s))}}return f}class Bs{constructor(e){this.node_=e}getImmediateChild(e){const r=this.node_.getImmediateChild(e);return new Bs(r)}node(){return this.node_}}class Hs{constructor(e,r){this.syncTree_=e,this.path_=r}getImmediateChild(e){const r=se(this.path_,e);return new Hs(this.syncTree_,r)}node(){return gl(this.syncTree_,this.path_)}}const qm=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},Il=function(t,e,r){if(!t||typeof t!="object")return t;if(D(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return Bm(t[".sv"],e,r);if(typeof t[".sv"]=="object")return Hm(t[".sv"],e);D(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},Bm=function(t,e,r){switch(t){case"timestamp":return r.timestamp;default:D(!1,"Unexpected server value: "+t)}},Hm=function(t,e,r){t.hasOwnProperty("increment")||D(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const n=t.increment;typeof n!="number"&&D(!1,"Unexpected increment value: "+n);const i=e.node();if(D(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return n;const f=i.getValue();return typeof f!="number"?n:f+n},Nl=function(t,e,r,n){return Gs(e,new Hs(r,t),n)},Gm=function(t,e,r){return Gs(t,new Bs(e),r)};function Gs(t,e,r){const n=t.getPriority().val(),i=Il(n,e.getImmediateChild(".priority"),r);let h;if(t.isLeafNode()){const f=t,a=Il(f.getValue(),e,r);return a!==f.getValue()||i!==f.getPriority().val()?new Te(a,Re(i)):t}else{const f=t;return h=f,i!==f.getPriority().val()&&(h=h.updatePriority(new Te(i))),f.forEachChild(oe,(a,l)=>{const o=Gs(l,e.getImmediateChild(a),r);o!==l&&(h=h.updateImmediateChild(a,o))}),h}}class Ws{constructor(e="",r=null,n={children:{},childCount:0}){this.name=e,this.parent=r,this.node=n}}function zs(t,e){let r=e instanceof x?e:new x(e),n=t,i=Q(r);for(;i!==null;){const h=cn(n.node.children,i)||{children:{},childCount:0};n=new Ws(i,n,h),r=te(r),i=Q(r)}return n}function wn(t){return t.node.value}function wl(t,e){t.node.value=e,$s(t)}function Cl(t){return t.node.childCount>0}function Wm(t){return wn(t)===void 0&&!Cl(t)}function ri(t,e){Se(t.node.children,(r,n)=>{e(new Ws(r,t,n))})}function Tl(t,e,r,n){r&&e(t),ri(t,i=>{Tl(i,e,!0)})}function zm(t,e,r){let n=t.parent;for(;n!==null;){if(e(n))return!0;n=n.parent}return!1}function or(t){return new x(t.parent===null?t.name:or(t.parent)+"/"+t.name)}function $s(t){t.parent!==null&&$m(t.parent,t.name,t)}function $m(t,e,r){const n=Wm(r),i=lt(t.node.children,e);n&&i?(delete t.node.children[e],t.node.childCount--,$s(t)):!n&&!i&&(t.node.children[e]=r.node,t.node.childCount++,$s(t))}const Ym=/[\[\].#$\/\u0000-\u001F\u007F]/,Qm=/[\[\].#$\u0000-\u001F\u007F]/,Ys=10*1024*1024,Qs=function(t){return typeof t=="string"&&t.length!==0&&!Ym.test(t)},Rl=function(t){return typeof t=="string"&&t.length!==0&&!Qm.test(t)},Km=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Rl(t)},Xm=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!as(t)||t&&typeof t=="object"&&lt(t,".sv")},Jm=function(t,e,r,n){},Ks=function(t,e,r){const n=r instanceof x?new lp(r,t):r;if(e===void 0)throw new Error(t+"contains undefined "+$t(n));if(typeof e=="function")throw new Error(t+"contains a function "+$t(n)+" with contents = "+e.toString());if(as(e))throw new Error(t+"contains "+e.toString()+" "+$t(n));if(typeof e=="string"&&e.length>Ys/3&&kr(e)>Ys)throw new Error(t+"contains a string greater than "+Ys+" utf8 bytes "+$t(n)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,h=!1;if(Se(e,(f,a)=>{if(f===".value")i=!0;else if(f!==".priority"&&f!==".sv"&&(h=!0,!Qs(f)))throw new Error(t+" contains an invalid key ("+f+") "+$t(n)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);cp(n,f),Ks(t,a,n),fp(n)}),i&&h)throw new Error(t+' contains ".value" child '+$t(n)+" in addition to actual children.")}},Zm=function(t,e){let r,n;for(r=0;r<e.length;r++){n=e[r];const h=Yn(n);for(let f=0;f<h.length;f++)if(!(h[f]===".priority"&&f===h.length-1)){if(!Qs(h[f]))throw new Error(t+"contains an invalid key ("+h[f]+") in path "+n.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(up);let i=null;for(r=0;r<e.length;r++){if(n=e[r],i!==null&&Qe(i,n))throw new Error(t+"contains a path "+i.toString()+" that is ancestor of another path "+n.toString());i=n}},xm=function(t,e,r,n){const i=Qi(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const h=[];Se(e,(f,a)=>{const l=new x(f);if(Ks(i,a,se(r,l)),vs(l)===".priority"&&!Xm(a))throw new Error(i+"contains an invalid value for '"+l.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");h.push(l)}),Zm(i,h)},Al=function(t,e,r,n){if(!Rl(r))throw new Error(Qi(t,e)+'was an invalid path = "'+r+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},jm=function(t,e,r,n){r&&(r=r.replace(/^\/*\.info(\/|$)/,"/")),Al(t,e,r)},ev=function(t,e){if(Q(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},tv=function(t,e){const r=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Qs(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||r.length!==0&&!Km(r))throw new Error(Qi(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};class nv{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function bl(t,e){let r=null;for(let n=0;n<e.length;n++){const i=e[n],h=i.getPath();r!==null&&!Du(h,r.path)&&(t.eventLists_.push(r),r=null),r===null&&(r={events:[],path:h}),r.events.push(i)}r&&t.eventLists_.push(r)}function ct(t,e,r){bl(t,r),rv(t,n=>Qe(n,e)||Qe(e,n))}function rv(t,e){t.recursionDepth_++;let r=!0;for(let n=0;n<t.eventLists_.length;n++){const i=t.eventLists_[n];if(i){const h=i.path;e(h)?(iv(t.eventLists_[n]),t.eventLists_[n]=null):r=!1}}r&&(t.eventLists_=[]),t.recursionDepth_--}function iv(t){for(let e=0;e<t.events.length;e++){const r=t.events[e];if(r!==null){t.events[e]=null;const n=r.getEventRunner();Hn&&Oe("event: "+r.toString()),mn(n)}}}const sv="repo_interrupt",ov=25;class av{constructor(e,r,n,i){this.repoInfo_=e,this.forceRestClient_=r,this.authTokenProvider_=n,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new nv,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=$r(),this.transactionQueueTree_=new Ws,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function uv(t,e,r){if(t.stats_=ds(t.repoInfo_),t.forceRestClient_||Md())t.server_=new zr(t.repoInfo_,(n,i,h,f)=>{Sl(t,n,i,h,f)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>Dl(t,!0),0);else{if(typeof r<"u"&&r!==null){if(typeof r!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Ne(r)}catch(n){throw new Error("Invalid authOverride provided: "+n)}}t.persistentConnection_=new gt(t.repoInfo_,e,(n,i,h,f)=>{Sl(t,n,i,h,f)},n=>{Dl(t,n)},n=>{lv(t,n)},t.authTokenProvider_,t.appCheckProvider_,r),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(n=>{t.server_.refreshAuthToken(n)}),t.appCheckProvider_.addTokenChangeListener(n=>{t.server_.refreshAppCheckToken(n.token)}),t.statsReporter_=Ud(t.repoInfo_,()=>new Vp(t.stats_,t.server_)),t.infoData_=new Pp,t.infoSyncTree_=new pl({startListening:(n,i,h,f)=>{let a=[];const l=t.infoData_.getNode(n._path);return l.isEmpty()||(a=rr(t.infoSyncTree_,n._path,l),setTimeout(()=>{f("ok")},0)),a},stopListening:()=>{}}),Js(t,"connected",!1),t.serverSyncTree_=new pl({startListening:(n,i,h,f)=>(t.server_.listen(n,h,i,(a,l)=>{const o=f(a,l);ct(t.eventQueue_,n._path,o)}),[]),stopListening:(n,i)=>{t.server_.unlisten(n,i)}})}function Ol(t){const r=t.infoData_.getNode(new x(".info/serverTimeOffset")).val()||0;return new Date().getTime()+r}function Xs(t){return qm({timestamp:Ol(t)})}function Sl(t,e,r,n,i){t.dataUpdateCount++;const h=new x(e);r=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,r):r;let f=[];if(i)if(n){const l=Mr(r,o=>Re(o));f=Pm(t.serverSyncTree_,h,l,i)}else{const l=Re(r);f=vl(t.serverSyncTree_,h,l,i)}else if(n){const l=Mr(r,o=>Re(o));f=Om(t.serverSyncTree_,h,l)}else{const l=Re(r);f=rr(t.serverSyncTree_,h,l)}let a=h;f.length>0&&(a=ar(t,h)),ct(t.eventQueue_,a,f)}function Dl(t,e){Js(t,"connected",e),e===!1&&hv(t)}function lv(t,e){Se(e,(r,n)=>{Js(t,r,n)})}function Js(t,e,r){const n=new x("/.info/"+e),i=Re(r);t.infoData_.updateSnapshot(n,i);const h=rr(t.infoSyncTree_,n,i);ct(t.eventQueue_,n,h)}function Pl(t){return t.nextWriteId_++}function cv(t,e,r){const n=Lm(t.serverSyncTree_,e);return n!=null?Promise.resolve(n):t.server_.get(e).then(i=>{const h=Re(i).withIndex(e._queryParams.getIndex());Mm(t.serverSyncTree_,e,r,!0);let f;if(e._queryParams.loadsAllData())f=rr(t.serverSyncTree_,e._path,h);else{const a=ir(t.serverSyncTree_,e);f=vl(t.serverSyncTree_,e._path,h,a)}return ct(t.eventQueue_,e._path,f),ml(t.serverSyncTree_,e,r,null,!0),h},i=>(ii(t,"get for query "+Ne(e)+" failed: "+i),Promise.reject(new Error(i))))}function fv(t,e,r,n){ii(t,"update",{path:e.toString(),value:r});let i=!0;const h=Xs(t),f={};if(Se(r,(a,l)=>{i=!1,f[a]=Nl(se(e,a),Re(l),t.serverSyncTree_,h)}),i)Oe("update() called with empty data.  Don't do anything."),Ml(t,n,"ok",void 0);else{const a=Pl(t),l=bm(t.serverSyncTree_,e,f,a);bl(t.eventQueue_,l),t.server_.merge(e.toString(),r,(o,s)=>{const u=o==="ok";u||Be("update at "+e+" failed: "+o);const c=Xt(t.serverSyncTree_,a,!u),d=c.length>0?ar(t,e):e;ct(t.eventQueue_,d,c),Ml(t,n,o,s)}),Se(r,o=>{const s=Ul(t,se(e,o));ar(t,s)}),ct(t.eventQueue_,e,[])}}function hv(t){ii(t,"onDisconnectEvents");const e=Xs(t),r=$r();ws(t.onDisconnect_,X(),(i,h)=>{const f=Nl(i,h,t.serverSyncTree_,e);zu(r,i,f)});let n=[];ws(r,X(),(i,h)=>{n=n.concat(rr(t.serverSyncTree_,i,h));const f=Ul(t,i);ar(t,f)}),t.onDisconnect_=$r(),ct(t.eventQueue_,X(),n)}function dv(t){t.persistentConnection_&&t.persistentConnection_.interrupt(sv)}function ii(t,...e){let r="";t.persistentConnection_&&(r=t.persistentConnection_.id+":"),Oe(r,...e)}function Ml(t,e,r,n){e&&mn(()=>{if(r==="ok")e(null);else{const i=(r||"error").toUpperCase();let h=i;n&&(h+=": "+n);const f=new Error(h);f.code=i,e(f)}})}function Ll(t,e,r){return gl(t.serverSyncTree_,e,r)||q.EMPTY_NODE}function Zs(t,e=t.transactionQueueTree_){if(e||si(t,e),wn(e)){const r=Fl(t,e);D(r.length>0,"Sending zero length transaction queue"),r.every(i=>i.status===0)&&pv(t,or(e),r)}else Cl(e)&&ri(e,r=>{Zs(t,r)})}function pv(t,e,r){const n=r.map(o=>o.currentWriteId),i=Ll(t,e,n);let h=i;const f=i.hash();for(let o=0;o<r.length;o++){const s=r[o];D(s.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),s.status=1,s.retryCount++;const u=Fe(e,s.path);h=h.updateChild(u,s.currentOutputSnapshotRaw)}const a=h.val(!0),l=e;t.server_.put(l.toString(),a,o=>{ii(t,"transaction put response",{path:l.toString(),status:o});let s=[];if(o==="ok"){const u=[];for(let c=0;c<r.length;c++)r[c].status=2,s=s.concat(Xt(t.serverSyncTree_,r[c].currentWriteId)),r[c].onComplete&&u.push(()=>r[c].onComplete(null,!0,r[c].currentOutputSnapshotResolved)),r[c].unwatcher();si(t,zs(t.transactionQueueTree_,e)),Zs(t,t.transactionQueueTree_),ct(t.eventQueue_,e,s);for(let c=0;c<u.length;c++)mn(u[c])}else{if(o==="datastale")for(let u=0;u<r.length;u++)r[u].status===3?r[u].status=4:r[u].status=0;else{Be("transaction at "+l.toString()+" failed: "+o);for(let u=0;u<r.length;u++)r[u].status=4,r[u].abortReason=o}ar(t,e)}},f)}function ar(t,e){const r=kl(t,e),n=or(r),i=Fl(t,r);return mv(t,i,n),n}function mv(t,e,r){if(e.length===0)return;const n=[];let i=[];const f=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],o=Fe(r,l.path);let s=!1,u;if(D(o!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)s=!0,u=l.abortReason,i=i.concat(Xt(t.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=ov)s=!0,u="maxretry",i=i.concat(Xt(t.serverSyncTree_,l.currentWriteId,!0));else{const c=Ll(t,l.path,f);l.currentInputSnapshot=c;const d=e[a].update(c.val());if(d!==void 0){Ks("transaction failed: Data returned ",d,l.path);let p=Re(d);typeof d=="object"&&d!=null&&lt(d,".priority")||(p=p.updatePriority(c.getPriority()));const v=l.currentWriteId,y=Xs(t),E=Gm(p,c,y);l.currentOutputSnapshotRaw=p,l.currentOutputSnapshotResolved=E,l.currentWriteId=Pl(t),f.splice(f.indexOf(v),1),i=i.concat(Am(t.serverSyncTree_,l.path,E,l.currentWriteId,l.applyLocally)),i=i.concat(Xt(t.serverSyncTree_,v,!0))}else s=!0,u="nodata",i=i.concat(Xt(t.serverSyncTree_,l.currentWriteId,!0))}ct(t.eventQueue_,r,i),i=[],s&&(e[a].status=2,(function(c){setTimeout(c,Math.floor(0))})(e[a].unwatcher),e[a].onComplete&&(u==="nodata"?n.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):n.push(()=>e[a].onComplete(new Error(u),!1,null))))}si(t,t.transactionQueueTree_);for(let a=0;a<n.length;a++)mn(n[a]);Zs(t,t.transactionQueueTree_)}function kl(t,e){let r,n=t.transactionQueueTree_;for(r=Q(e);r!==null&&wn(n)===void 0;)n=zs(n,r),e=te(e),r=Q(e);return n}function Fl(t,e){const r=[];return Vl(t,e,r),r.sort((n,i)=>n.order-i.order),r}function Vl(t,e,r){const n=wn(e);if(n)for(let i=0;i<n.length;i++)r.push(n[i]);ri(e,i=>{Vl(t,i,r)})}function si(t,e){const r=wn(e);if(r){let n=0;for(let i=0;i<r.length;i++)r[i].status!==2&&(r[n]=r[i],n++);r.length=n,wl(e,r.length>0?r:void 0)}ri(e,n=>{si(t,n)})}function Ul(t,e){const r=or(kl(t,e)),n=zs(t.transactionQueueTree_,e);return zm(n,i=>{xs(t,i)}),xs(t,n),Tl(n,i=>{xs(t,i)}),r}function xs(t,e){const r=wn(e);if(r){const n=[];let i=[],h=-1;for(let f=0;f<r.length;f++)r[f].status===3||(r[f].status===1?(D(h===f-1,"All SENT items should be at beginning of queue."),h=f,r[f].status=3,r[f].abortReason="set"):(D(r[f].status===0,"Unexpected transaction status in abort"),r[f].unwatcher(),i=i.concat(Xt(t.serverSyncTree_,r[f].currentWriteId,!0)),r[f].onComplete&&n.push(r[f].onComplete.bind(null,new Error("set"),!1,null))));h===-1?wl(e,void 0):r.length=h+1,ct(t.eventQueue_,or(e),i);for(let f=0;f<n.length;f++)mn(n[f])}}function vv(t){let e="";const r=t.split("/");for(let n=0;n<r.length;n++)if(r[n].length>0){let i=r[n];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function gv(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const r of t.split("&")){if(r.length===0)continue;const n=r.split("=");n.length===2?e[decodeURIComponent(n[0])]=decodeURIComponent(n[1]):Be(`Invalid query segment '${r}' in query '${t}'`)}return e}const ql=function(t,e){const r=yv(t),n=r.namespace;r.domain==="firebase.com"&&vt(r.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!n||n==="undefined")&&r.domain!=="localhost"&&vt("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),r.secure||Cd();const i=r.scheme==="ws"||r.scheme==="wss";return{repoInfo:new hu(r.host,r.secure,n,i,e,"",n!==r.subdomain),path:new x(r.pathString)}},yv=function(t){let e="",r="",n="",i="",h="",f=!0,a="https",l=443;if(typeof t=="string"){let o=t.indexOf("//");o>=0&&(a=t.substring(0,o-1),t=t.substring(o+2));let s=t.indexOf("/");s===-1&&(s=t.length);let u=t.indexOf("?");u===-1&&(u=t.length),e=t.substring(0,Math.min(s,u)),s<u&&(i=vv(t.substring(s,u)));const c=gv(t.substring(Math.min(t.length,u)));o=e.indexOf(":"),o>=0?(f=a==="https"||a==="wss",l=parseInt(e.substring(o+1),10)):o=e.length;const d=e.slice(0,o);if(d.toLowerCase()==="localhost")r="localhost";else if(d.split(".").length<=2)r=d;else{const p=e.indexOf(".");n=e.substring(0,p).toLowerCase(),r=e.substring(p+1),h=n}"ns"in c&&(h=c.ns)}return{host:e,port:l,domain:r,subdomain:n,secure:f,scheme:a,pathString:i,namespace:h}},Bl="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Ev=(function(){let t=0;const e=[];return function(r){const n=r===t;t=r;let i;const h=new Array(8);for(i=7;i>=0;i--)h[i]=Bl.charAt(r%64),r=Math.floor(r/64);D(r===0,"Cannot push at time == 0");let f=h.join("");if(n){for(i=11;i>=0&&e[i]===63;i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)f+=Bl.charAt(e[i]);return D(f.length===20,"nextPushId: Length should be 20."),f}})();class _v{constructor(e,r,n,i){this.eventType=e,this.eventRegistration=r,this.snapshot=n,this.prevName=i}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Ne(this.snapshot.exportVal())}}class Iv{constructor(e,r,n){this.eventRegistration=e,this.error=r,this.path=n}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class Nv{constructor(e,r){this.snapshotCallback=e,this.cancelCallback=r}onValue(e,r){this.snapshotCallback.call(null,e,r)}onCancel(e){return D(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class js{constructor(e,r,n,i){this._repo=e,this._path=r,this._queryParams=n,this._orderByCalled=i}get key(){return Y(this._path)?null:vs(this._path)}get ref(){return new Et(this._repo,this._path)}get _queryIdentifier(){const e=Wu(this._queryParams),r=us(e);return r==="{}"?"default":r}get _queryObject(){return Wu(this._queryParams)}isEqual(e){if(e=fn(e),!(e instanceof js))return!1;const r=this._repo===e._repo,n=Du(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return r&&n&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+ap(this._path)}}class Et extends js{constructor(e,r){super(e,r,new Ns,!1)}get parent(){const e=Su(this._path);return e===null?null:new Et(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class ur{constructor(e,r,n){this._node=e,this.ref=r,this._index=n}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const r=new x(e),n=Cn(this.ref,e);return new ur(this._node.getChild(r),n,oe)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(n,i)=>e(new ur(i,Cn(this.ref,n),oe)))}hasChild(e){const r=new x(e);return!this._node.getChild(r).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function eo(t,e){return t=fn(t),t._checkNotDeleted("ref"),e!==void 0?Cn(t._root,e):t._root}function Cn(t,e){return t=fn(t),Q(t._path)===null?jm("child","path",e):Al("child","path",e),new Et(t._repo,se(t._path,e))}function wv(t,e){t=fn(t),ev("push",t._path),Jm("push",e,t._path);const r=Ol(t._repo),n=Ev(r),i=Cn(t,n),h=Cn(t,n);let f;return f=Promise.resolve(h),i.then=f.then.bind(f),i.catch=f.then.bind(f,void 0),i}function Cv(t,e){xm("update",e,t._path);const r=new Pr;return fv(t._repo,t._path,e,r.wrapCallback(()=>{})),r.promise}function Tv(t){t=fn(t);const e=new Nv(()=>{}),r=new to(e);return cv(t._repo,t,r).then(n=>new ur(n,new Et(t._repo,t._path),t._queryParams.getIndex()))}class to{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,r){const n=r._queryParams.getIndex();return new _v("value",this,new ur(e.snapshotNode,new Et(r._repo,r._path),n))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,r){return this.callbackContext.hasCancelCallback?new Iv(this,e,r):null}matches(e){return e instanceof to?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}Em(Et),Cm(Et);const Rv="FIREBASE_DATABASE_EMULATOR_HOST",no={};let Av=!1;function bv(t,e,r,n){const i=e.lastIndexOf(":"),h=e.substring(0,i),f=Yi(h);t.repoInfo_=new hu(e,f,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0,r),n&&(t.authTokenProvider_=n)}function Ov(t,e,r,n,i){let h=n||t.options.databaseURL;h===void 0&&(t.options.projectId||vt("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Oe("Using default host for project ",t.options.projectId),h=`${t.options.projectId}-default-rtdb.firebaseio.com`);let f=ql(h,i),a=f.repoInfo,l;typeof process<"u"&&Qa&&(l=Qa[Rv]),l?(h=`http://${l}?ns=${a.namespace}`,f=ql(h,i),a=f.repoInfo):f.repoInfo.secure;const o=new kd(t.name,t.options,e);tv("Invalid Firebase Database URL",f),Y(f.path)||vt("Database URL must point to the root of a Firebase Database (not including a child path).");const s=Dv(a,t,o,new Ld(t,r));return new Pv(s,t)}function Sv(t,e){const r=no[e];(!r||r[t.key]!==t)&&vt(`Database ${e}(${t.repoInfo_}) has already been deleted.`),dv(t),delete r[t.key]}function Dv(t,e,r,n){let i=no[e.name];i||(i={},no[e.name]=i);let h=i[t.toURLString()];return h&&vt("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),h=new av(t,Av,r,n),i[t.toURLString()]=h,h}class Pv{constructor(e,r){this._repoInternal=e,this.app=r,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(uv(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Et(this._repo,X())),this._rootInternal}_delete(){return this._rootInternal!==null&&(Sv(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&vt("Cannot call "+e+" on a deleted database.")}}function Mv(t=id(),e){const r=jh(t,"database").getImmediate({identifier:e});if(!r._instanceStarted){const n=qf("database");n&&Lv(r,...n)}return r}function Lv(t,e,r,n={}){t=fn(t),t._checkNotDeleted("useEmulator");const i=`${e}:${r}`,h=t._repoInternal;if(t._instanceStarted){if(i===t._repoInternal.repoInfo_.host&&Lr(n,h.repoInfo_.emulatorOptions))return;vt("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let f;if(h.repoInfo_.nodeAdmin)n.mockUserToken&&vt('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),f=new Vr(Vr.OWNER);else if(n.mockUserToken){const a=typeof n.mockUserToken=="string"?n.mockUserToken:Hf(n.mockUserToken,t.app.options.projectId);f=new Vr(a)}Yi(e)&&(Bf(e),zf("Database",!0)),bv(h,i,n,f)}function kv(t){yd(rd),Fr(new Un("database",(e,{instanceIdentifier:r})=>{const n=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),h=e.getProvider("app-check-internal");return Ov(n,i,h,r)},"PUBLIC").setMultipleInstances(!0)),hn(Ka,Xa,t),hn(Ka,Xa,"esm2020")}gt.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},gt.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)},kv();var le={};function De(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var Fv=typeof Symbol=="function"&&Symbol.observable||"@@observable",Hl=Fv,ro=()=>Math.random().toString(36).substring(7).split("").join("."),Vv={INIT:`@@redux/INIT${ro()}`,REPLACE:`@@redux/REPLACE${ro()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${ro()}`},Jt=Vv;function Dt(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function Uv(t){if(t===void 0)return"undefined";if(t===null)return"null";const e=typeof t;switch(e){case"boolean":case"string":case"number":case"symbol":case"function":return e}if(Array.isArray(t))return"array";if(Hv(t))return"date";if(Bv(t))return"error";const r=qv(t);switch(r){case"Symbol":case"Promise":case"WeakMap":case"WeakSet":case"Map":case"Set":return r}return Object.prototype.toString.call(t).slice(8,-1).toLowerCase().replace(/\s/g,"")}function qv(t){return typeof t.constructor=="function"?t.constructor.name:null}function Bv(t){return t instanceof Error||typeof t.message=="string"&&t.constructor&&typeof t.constructor.stackTraceLimit=="number"}function Hv(t){return t instanceof Date?!0:typeof t.toDateString=="function"&&typeof t.getDate=="function"&&typeof t.setDate=="function"}function Pt(t){let e=typeof t;return le.NODE_ENV!=="production"&&(e=Uv(t)),e}function Gl(t,e,r){if(typeof t!="function")throw new Error(le.NODE_ENV==="production"?De(2):`Expected the root reducer to be a function. Instead, received: '${Pt(t)}'`);if(typeof e=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(le.NODE_ENV==="production"?De(0):"It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function. See https://redux.js.org/tutorials/fundamentals/part-4-store#creating-a-store-with-enhancers for an example.");if(typeof e=="function"&&typeof r>"u"&&(r=e,e=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(le.NODE_ENV==="production"?De(1):`Expected the enhancer to be a function. Instead, received: '${Pt(r)}'`);return r(Gl)(t,e)}let n=t,i=e,h=new Map,f=h,a=0,l=!1;function o(){f===h&&(f=new Map,h.forEach((v,y)=>{f.set(y,v)}))}function s(){if(l)throw new Error(le.NODE_ENV==="production"?De(3):"You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return i}function u(v){if(typeof v!="function")throw new Error(le.NODE_ENV==="production"?De(4):`Expected the listener to be a function. Instead, received: '${Pt(v)}'`);if(l)throw new Error(le.NODE_ENV==="production"?De(5):"You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api/store#subscribelistener for more details.");let y=!0;o();const E=a++;return f.set(E,v),function(){if(y){if(l)throw new Error(le.NODE_ENV==="production"?De(6):"You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api/store#subscribelistener for more details.");y=!1,o(),f.delete(E),h=null}}}function c(v){if(!Dt(v))throw new Error(le.NODE_ENV==="production"?De(7):`Actions must be plain objects. Instead, the actual type was: '${Pt(v)}'. You may need to add middleware to your store setup to handle dispatching other values, such as 'redux-thunk' to handle dispatching functions. See https://redux.js.org/tutorials/fundamentals/part-4-store#middleware and https://redux.js.org/tutorials/fundamentals/part-6-async-logic#using-the-redux-thunk-middleware for examples.`);if(typeof v.type>"u")throw new Error(le.NODE_ENV==="production"?De(8):'Actions may not have an undefined "type" property. You may have misspelled an action type string constant.');if(typeof v.type!="string")throw new Error(le.NODE_ENV==="production"?De(17):`Action "type" property must be a string. Instead, the actual type was: '${Pt(v.type)}'. Value was: '${v.type}' (stringified)`);if(l)throw new Error(le.NODE_ENV==="production"?De(9):"Reducers may not dispatch actions.");try{l=!0,i=n(i,v)}finally{l=!1}return(h=f).forEach(E=>{E()}),v}function d(v){if(typeof v!="function")throw new Error(le.NODE_ENV==="production"?De(10):`Expected the nextReducer to be a function. Instead, received: '${Pt(v)}`);n=v,c({type:Jt.REPLACE})}function p(){const v=u;return{subscribe(y){if(typeof y!="object"||y===null)throw new Error(le.NODE_ENV==="production"?De(11):`Expected the observer to be an object. Instead, received: '${Pt(y)}'`);function E(){const _=y;_.next&&_.next(s())}return E(),{unsubscribe:v(E)}},[Hl](){return this}}}return c({type:Jt.INIT}),{dispatch:c,subscribe:u,getState:s,replaceReducer:d,[Hl]:p}}function Wl(t){typeof console<"u"&&typeof console.error=="function"&&console.error(t);try{throw new Error(t)}catch{}}function Gv(t,e,r,n){const i=Object.keys(e),h=r&&r.type===Jt.INIT?"preloadedState argument passed to createStore":"previous state received by the reducer";if(i.length===0)return"Store does not have a valid reducer. Make sure the argument passed to combineReducers is an object whose values are reducers.";if(!Dt(t))return`The ${h} has unexpected type of "${Pt(t)}". Expected argument to be an object with the following keys: "${i.join('", "')}"`;const f=Object.keys(t).filter(a=>!e.hasOwnProperty(a)&&!n[a]);if(f.forEach(a=>{n[a]=!0}),!(r&&r.type===Jt.REPLACE)&&f.length>0)return`Unexpected ${f.length>1?"keys":"key"} "${f.join('", "')}" found in ${h}. Expected to find one of the known reducer keys instead: "${i.join('", "')}". Unexpected keys will be ignored.`}function Wv(t){Object.keys(t).forEach(e=>{const r=t[e];if(typeof r(void 0,{type:Jt.INIT})>"u")throw new Error(le.NODE_ENV==="production"?De(12):`The slice reducer for key "${e}" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.`);if(typeof r(void 0,{type:Jt.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(le.NODE_ENV==="production"?De(13):`The slice reducer for key "${e}" returned undefined when probed with a random type. Don't try to handle '${Jt.INIT}' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.`)})}function zl(t){const e=Object.keys(t),r={};for(let f=0;f<e.length;f++){const a=e[f];le.NODE_ENV!=="production"&&typeof t[a]>"u"&&Wl(`No reducer provided for key "${a}"`),typeof t[a]=="function"&&(r[a]=t[a])}const n=Object.keys(r);let i;le.NODE_ENV!=="production"&&(i={});let h;try{Wv(r)}catch(f){h=f}return function(a={},l){if(h)throw h;if(le.NODE_ENV!=="production"){const u=Gv(a,r,l,i);u&&Wl(u)}let o=!1;const s={};for(let u=0;u<n.length;u++){const c=n[u],d=r[c],p=a[c],m=d(p,l);if(typeof m>"u"){const v=l&&l.type;throw new Error(le.NODE_ENV==="production"?De(14):`When called with an action of type ${v?`"${String(v)}"`:"(unknown type)"}, the slice reducer for key "${c}" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.`)}s[c]=m,o=o||m!==p}return o=o||n.length!==Object.keys(a).length,o?s:a}}function oi(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,r)=>(...n)=>e(r(...n)))}function zv(...t){return e=>(r,n)=>{const i=e(r,n);let h=()=>{throw new Error(le.NODE_ENV==="production"?De(15):"Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")};const f={getState:i.getState,dispatch:(l,...o)=>h(l,...o)},a=t.map(l=>l(f));return h=oi(...a)(i.dispatch),{...i,dispatch:h}}}function io(t){return Dt(t)&&"type"in t&&typeof t.type=="string"}var Tn={},so=Symbol.for("immer-nothing"),lr=Symbol.for("immer-draftable"),Ge=Symbol.for("immer-state"),$l=Tn.NODE_ENV!=="production"?[function(t){return`The plugin for '${t}' has not been loaded into Immer. To enable the plugin, import and call \`enable${t}()\` when initializing your application.`},function(t){return`produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '${t}'`},"This object has been frozen and should not be mutated",function(t){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+t},"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.","Immer forbids circular references","The first or second argument to `produce` must be a function","The third argument to `produce` must be a function or undefined","First argument to `createDraft` must be a plain object, an array, or an immerable object","First argument to `finishDraft` must be a draft returned by `createDraft`",function(t){return`'current' expects a draft, got: ${t}`},"Object.defineProperty() cannot be used on an Immer draft","Object.setPrototypeOf() cannot be used on an Immer draft","Immer only supports deleting array indices","Immer only supports setting array indices and the 'length' property",function(t){return`'original' expects a draft, got: ${t}`}]:[];function fe(t,...e){if(Tn.NODE_ENV!=="production"){const r=$l[t],n=typeof r=="function"?r.apply(null,e):r;throw new Error(`[Immer] ${n}`)}throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Zt=Object.getPrototypeOf;function nt(t){return!!t&&!!t[Ge]}function rt(t){return t?Yl(t)||Array.isArray(t)||!!t[lr]||!!t.constructor?.[lr]||Rn(t)||hr(t):!1}var $v=Object.prototype.constructor.toString();function Yl(t){if(!t||typeof t!="object")return!1;const e=Zt(t);if(e===null)return!0;const r=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===$v}function Yv(t){return nt(t)||fe(15,t),t[Ge].base_}function cr(t,e){xt(t)===0?Reflect.ownKeys(t).forEach(r=>{e(r,t[r],t)}):t.forEach((r,n)=>e(n,r,t))}function xt(t){const e=t[Ge];return e?e.type_:Array.isArray(t)?1:Rn(t)?2:hr(t)?3:0}function fr(t,e){return xt(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function oo(t,e){return xt(t)===2?t.get(e):t[e]}function Ql(t,e,r){const n=xt(t);n===2?t.set(e,r):n===3?t.add(r):t[e]=r}function Qv(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function Rn(t){return t instanceof Map}function hr(t){return t instanceof Set}function jt(t){return t.copy_||t.base_}function ao(t,e){if(Rn(t))return new Map(t);if(hr(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const r=Yl(t);if(e===!0||e==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(t);delete n[Ge];let i=Reflect.ownKeys(n);for(let h=0;h<i.length;h++){const f=i[h],a=n[f];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(n[f]={configurable:!0,writable:!0,enumerable:a.enumerable,value:t[f]})}return Object.create(Zt(t),n)}else{const n=Zt(t);if(n!==null&&r)return{...t};const i=Object.create(n);return Object.assign(i,t)}}function uo(t,e=!1){return ui(t)||nt(t)||!rt(t)||(xt(t)>1&&Object.defineProperties(t,{set:{value:ai},add:{value:ai},clear:{value:ai},delete:{value:ai}}),Object.freeze(t),e&&Object.values(t).forEach(r=>uo(r,!0))),t}function ai(){fe(2)}function ui(t){return Object.isFrozen(t)}var lo={};function en(t){const e=lo[t];return e||fe(0,t),e}function Kv(t,e){lo[t]||(lo[t]=e)}var dr;function Kl(){return dr}function Xv(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Xl(t,e){e&&(en("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function co(t){fo(t),t.drafts_.forEach(Jv),t.drafts_=null}function fo(t){t===dr&&(dr=t.parent_)}function Jl(t){return dr=Xv(dr,t)}function Jv(t){const e=t[Ge];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function Zl(t,e){e.unfinalizedDrafts_=e.drafts_.length;const r=e.drafts_[0];return t!==void 0&&t!==r?(r[Ge].modified_&&(co(e),fe(4)),rt(t)&&(t=li(e,t),e.parent_||ci(e,t)),e.patches_&&en("Patches").generateReplacementPatches_(r[Ge].base_,t,e.patches_,e.inversePatches_)):t=li(e,r,[]),co(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==so?t:void 0}function li(t,e,r){if(ui(e))return e;const n=e[Ge];if(!n)return cr(e,(i,h)=>xl(t,n,e,i,h,r)),e;if(n.scope_!==t)return e;if(!n.modified_)return ci(t,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const i=n.copy_;let h=i,f=!1;n.type_===3&&(h=new Set(i),i.clear(),f=!0),cr(h,(a,l)=>xl(t,n,i,a,l,r,f)),ci(t,i,!1),r&&t.patches_&&en("Patches").generatePatches_(n,r,t.patches_,t.inversePatches_)}return n.copy_}function xl(t,e,r,n,i,h,f){if(Tn.NODE_ENV!=="production"&&i===r&&fe(5),nt(i)){const a=h&&e&&e.type_!==3&&!fr(e.assigned_,n)?h.concat(n):void 0,l=li(t,i,a);if(Ql(r,n,l),nt(l))t.canAutoFreeze_=!1;else return}else f&&r.add(i);if(rt(i)&&!ui(i)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;li(t,i),(!e||!e.scope_.parent_)&&typeof n!="symbol"&&(Rn(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&ci(t,i)}}function ci(t,e,r=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&uo(e,r)}function Zv(t,e){const r=Array.isArray(t),n={type_:r?1:0,scope_:e?e.scope_:Kl(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=n,h=ho;r&&(i=[n],h=pr);const{revoke:f,proxy:a}=Proxy.revocable(i,h);return n.draft_=a,n.revoke_=f,a}var ho={get(t,e){if(e===Ge)return t;const r=jt(t);if(!fr(r,e))return xv(t,r,e);const n=r[e];return t.finalized_||!rt(n)?n:n===po(t.base_,e)?(vo(t),t.copy_[e]=go(n,t)):n},has(t,e){return e in jt(t)},ownKeys(t){return Reflect.ownKeys(jt(t))},set(t,e,r){const n=jl(jt(t),e);if(n?.set)return n.set.call(t.draft_,r),!0;if(!t.modified_){const i=po(jt(t),e),h=i?.[Ge];if(h&&h.base_===r)return t.copy_[e]=r,t.assigned_[e]=!1,!0;if(Qv(r,i)&&(r!==void 0||fr(t.base_,e)))return!0;vo(t),mo(t)}return t.copy_[e]===r&&(r!==void 0||e in t.copy_)||Number.isNaN(r)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=r,t.assigned_[e]=!0),!0},deleteProperty(t,e){return po(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,vo(t),mo(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const r=jt(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:n.enumerable,value:r[e]}},defineProperty(){fe(11)},getPrototypeOf(t){return Zt(t.base_)},setPrototypeOf(){fe(12)}},pr={};cr(ho,(t,e)=>{pr[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}}),pr.deleteProperty=function(t,e){return Tn.NODE_ENV!=="production"&&isNaN(parseInt(e))&&fe(13),pr.set.call(this,t,e,void 0)},pr.set=function(t,e,r){return Tn.NODE_ENV!=="production"&&e!=="length"&&isNaN(parseInt(e))&&fe(14),ho.set.call(this,t[0],e,r,t[0])};function po(t,e){const r=t[Ge];return(r?jt(r):t)[e]}function xv(t,e,r){const n=jl(e,r);return n?"value"in n?n.value:n.get?.call(t.draft_):void 0}function jl(t,e){if(!(e in t))return;let r=Zt(t);for(;r;){const n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=Zt(r)}}function mo(t){t.modified_||(t.modified_=!0,t.parent_&&mo(t.parent_))}function vo(t){t.copy_||(t.copy_=ao(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var jv=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,r,n)=>{if(typeof e=="function"&&typeof r!="function"){const h=r;r=e;const f=this;return function(l=h,...o){return f.produce(l,s=>r.call(this,s,...o))}}typeof r!="function"&&fe(6),n!==void 0&&typeof n!="function"&&fe(7);let i;if(rt(e)){const h=Jl(this),f=go(e,void 0);let a=!0;try{i=r(f),a=!1}finally{a?co(h):fo(h)}return Xl(h,n),Zl(i,h)}else if(!e||typeof e!="object"){if(i=r(e),i===void 0&&(i=e),i===so&&(i=void 0),this.autoFreeze_&&uo(i,!0),n){const h=[],f=[];en("Patches").generateReplacementPatches_(e,i,h,f),n(h,f)}return i}else fe(1,e)},this.produceWithPatches=(e,r)=>{if(typeof e=="function")return(f,...a)=>this.produceWithPatches(f,l=>e(l,...a));let n,i;return[this.produce(e,r,(f,a)=>{n=f,i=a}),n,i]},typeof t?.autoFreeze=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof t?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){rt(t)||fe(8),nt(t)&&(t=ec(t));const e=Jl(this),r=go(t,void 0);return r[Ge].isManual_=!0,fo(e),r}finishDraft(t,e){const r=t&&t[Ge];(!r||!r.isManual_)&&fe(9);const{scope_:n}=r;return Xl(n,e),Zl(void 0,n)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let r;for(r=e.length-1;r>=0;r--){const i=e[r];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}r>-1&&(e=e.slice(r+1));const n=en("Patches").applyPatches_;return nt(t)?n(t,e):this.produce(t,i=>n(i,e))}};function go(t,e){const r=Rn(t)?en("MapSet").proxyMap_(t,e):hr(t)?en("MapSet").proxySet_(t,e):Zv(t,e);return(e?e.scope_:Kl()).drafts_.push(r),r}function ec(t){return nt(t)||fe(10,t),tc(t)}function tc(t){if(!rt(t)||ui(t))return t;const e=t[Ge];let r;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,r=ao(t,e.scope_.immer_.useStrictShallowCopy_)}else r=ao(t,!0);return cr(r,(n,i)=>{Ql(r,n,tc(i))}),e&&(e.finalized_=!1),r}function eg(){Tn.NODE_ENV!=="production"&&$l.push('Sets cannot have "replace" patches.',function(c){return"Unsupported patch operation: "+c},function(c){return"Cannot apply patch, path doesn't resolve: "+c},"Patching reserved attributes like __proto__, prototype and constructor is not allowed");const e="replace",r="add",n="remove";function i(c,d,p,m){switch(c.type_){case 0:case 2:return f(c,d,p,m);case 1:return h(c,d,p,m);case 3:return a(c,d,p,m)}}function h(c,d,p,m){let{base_:v,assigned_:y}=c,E=c.copy_;E.length<v.length&&([v,E]=[E,v],[p,m]=[m,p]);for(let g=0;g<v.length;g++)if(y[g]&&E[g]!==v[g]){const _=d.concat([g]);p.push({op:e,path:_,value:u(E[g])}),m.push({op:e,path:_,value:u(v[g])})}for(let g=v.length;g<E.length;g++){const _=d.concat([g]);p.push({op:r,path:_,value:u(E[g])})}for(let g=E.length-1;v.length<=g;--g){const _=d.concat([g]);m.push({op:n,path:_})}}function f(c,d,p,m){const{base_:v,copy_:y}=c;cr(c.assigned_,(E,g)=>{const _=oo(v,E),I=oo(y,E),N=g?fr(v,E)?e:r:n;if(_===I&&N===e)return;const w=d.concat(E);p.push(N===n?{op:N,path:w}:{op:N,path:w,value:I}),m.push(N===r?{op:n,path:w}:N===n?{op:r,path:w,value:u(_)}:{op:e,path:w,value:u(_)})})}function a(c,d,p,m){let{base_:v,copy_:y}=c,E=0;v.forEach(g=>{if(!y.has(g)){const _=d.concat([E]);p.push({op:n,path:_,value:g}),m.unshift({op:r,path:_,value:g})}E++}),E=0,y.forEach(g=>{if(!v.has(g)){const _=d.concat([E]);p.push({op:r,path:_,value:g}),m.unshift({op:n,path:_,value:g})}E++})}function l(c,d,p,m){p.push({op:e,path:[],value:d===so?void 0:d}),m.push({op:e,path:[],value:c})}function o(c,d){return d.forEach(p=>{const{path:m,op:v}=p;let y=c;for(let I=0;I<m.length-1;I++){const N=xt(y);let w=m[I];typeof w!="string"&&typeof w!="number"&&(w=""+w),(N===0||N===1)&&(w==="__proto__"||w==="constructor")&&fe(19),typeof y=="function"&&w==="prototype"&&fe(19),y=oo(y,w),typeof y!="object"&&fe(18,m.join("/"))}const E=xt(y),g=s(p.value),_=m[m.length-1];switch(v){case e:switch(E){case 2:return y.set(_,g);case 3:fe(16);default:return y[_]=g}case r:switch(E){case 1:return _==="-"?y.push(g):y.splice(_,0,g);case 2:return y.set(_,g);case 3:return y.add(g);default:return y[_]=g}case n:switch(E){case 1:return y.splice(_,1);case 2:return y.delete(_);case 3:return y.delete(p.value);default:return delete y[_]}default:fe(17,v)}}),c}function s(c){if(!rt(c))return c;if(Array.isArray(c))return c.map(s);if(Rn(c))return new Map(Array.from(c.entries()).map(([p,m])=>[p,s(m)]));if(hr(c))return new Set(Array.from(c).map(s));const d=Object.create(Zt(c));for(const p in c)d[p]=s(c[p]);return fr(c,lr)&&(d[lr]=c[lr]),d}function u(c){return nt(c)?s(c):c}Kv("Patches",{applyPatches_:o,generatePatches_:i,generateReplacementPatches_:l})}var ze=new jv,We=ze.produce,nc=ze.produceWithPatches.bind(ze);ze.setAutoFreeze.bind(ze),ze.setUseStrictShallowCopy.bind(ze);var rc=ze.applyPatches.bind(ze);ze.createDraft.bind(ze),ze.finishDraft.bind(ze);var tg={},ng=(t,e,r)=>{if(e.length===1&&e[0]===r){let n=!1;try{const i={};t(i)===i&&(n=!0)}catch{}if(n){let i;try{throw new Error}catch(h){({stack:i}=h)}console.warn(`The result function returned its own inputs without modification. e.g
\`createSelector([state => state.todos], todos => todos)\`
This could lead to inefficient memoization and unnecessary re-renders.
Ensure transformation logic is in the result function, and extraction logic is in the input selectors.`,{stack:i})}}},rg=(t,e,r)=>{const{memoize:n,memoizeOptions:i}=e,{inputSelectorResults:h,inputSelectorResultsCopy:f}=t,a=n(()=>({}),...i);if(!(a.apply(null,h)===a.apply(null,f))){let o;try{throw new Error}catch(s){({stack:o}=s)}console.warn(`An input selector returned a different result when passed same arguments.
This means your output selector will likely run more frequently than intended.
Avoid returning a new reference inside your input selector, e.g.
\`createSelector([state => state.todos.map(todo => todo.id)], todoIds => todoIds.length)\``,{arguments:r,firstInputs:h,secondInputs:f,stack:o})}},ig={inputStabilityCheck:"once",identityFunctionCheck:"once"};function sg(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function og(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function ag(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(r=>typeof r=="function")){const r=t.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${e}[${r}]`)}}var ic=t=>Array.isArray(t)?t:[t];function ug(t){const e=Array.isArray(t[0])?t[0]:t;return ag(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function sc(t,e){const r=[],{length:n}=t;for(let i=0;i<n;i++)r.push(t[i].apply(null,e));return r}var lg=(t,e)=>{const{identityFunctionCheck:r,inputStabilityCheck:n}={...ig,...e};return{identityFunctionCheck:{shouldRun:r==="always"||r==="once"&&t,run:ng},inputStabilityCheck:{shouldRun:n==="always"||n==="once"&&t,run:rg}}},cg=class{constructor(t){this.value=t}deref(){return this.value}},fg=typeof WeakRef<"u"?WeakRef:cg,hg=0,oc=1;function fi(){return{s:hg,v:void 0,o:null,p:null}}function mr(t,e={}){let r=fi();const{resultEqualityCheck:n}=e;let i,h=0;function f(){let a=r;const{length:l}=arguments;for(let u=0,c=l;u<c;u++){const d=arguments[u];if(typeof d=="function"||typeof d=="object"&&d!==null){let p=a.o;p===null&&(a.o=p=new WeakMap);const m=p.get(d);m===void 0?(a=fi(),p.set(d,a)):a=m}else{let p=a.p;p===null&&(a.p=p=new Map);const m=p.get(d);m===void 0?(a=fi(),p.set(d,a)):a=m}}const o=a;let s;if(a.s===oc)s=a.v;else if(s=t.apply(null,arguments),h++,n){const u=i?.deref?.()??i;u!=null&&n(u,s)&&(s=u,h!==0&&h--),i=typeof s=="object"&&s!==null||typeof s=="function"?new fg(s):s}return o.s=oc,o.v=s,s}return f.clearCache=()=>{r=fi(),f.resetResultsCount()},f.resultsCount=()=>h,f.resetResultsCount=()=>{h=0},f}function ac(t,...e){const r=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,n=(...i)=>{let h=0,f=0,a,l={},o=i.pop();typeof o=="object"&&(l=o,o=i.pop()),sg(o,`createSelector expects an output function after the inputs, but received: [${typeof o}]`);const s={...r,...l},{memoize:u,memoizeOptions:c=[],argsMemoize:d=mr,argsMemoizeOptions:p=[],devModeChecks:m={}}=s,v=ic(c),y=ic(p),E=ug(i),g=u(function(){return h++,o.apply(null,arguments)},...v);let _=!0;const I=d(function(){f++;const w=sc(E,arguments);if(a=g.apply(null,w),tg.NODE_ENV!=="production"){const{identityFunctionCheck:C,inputStabilityCheck:T}=lg(_,m);if(C.shouldRun&&C.run(o,w,a),T.shouldRun){const R=sc(E,arguments);T.run({inputSelectorResults:w,inputSelectorResultsCopy:R},{memoize:u,memoizeOptions:v},arguments)}_&&(_=!1)}return a},...y);return Object.assign(I,{resultFunc:o,memoizedResultFunc:g,dependencies:E,dependencyRecomputations:()=>f,resetDependencyRecomputations:()=>{f=0},lastResult:()=>a,recomputations:()=>h,resetRecomputations:()=>{h=0},memoize:u,argsMemoize:d})};return Object.assign(n,{withTypes:()=>n}),n}var uc=ac(mr),dg=Object.assign((t,e=uc)=>{og(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const r=Object.keys(t),n=r.map(h=>t[h]);return e(n,(...h)=>h.reduce((f,a,l)=>(f[r[l]]=a,f),{}))},{withTypes:()=>dg});function lc(t){return({dispatch:r,getState:n})=>i=>h=>typeof h=="function"?h(r,n,t):i(h)}var pg=lc(),mg=lc,F={},vg=(...t)=>{const e=ac(...t),r=Object.assign((...n)=>{const i=e(...n),h=(f,...a)=>i(nt(f)?ec(f):f,...a);return Object.assign(h,i),h},{withTypes:()=>r});return r};vg(mr);var gg=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?oi:oi.apply(null,arguments)},cc=t=>t&&typeof t.match=="function";function Ve(t,e){function r(...n){if(e){let i=e(...n);if(!i)throw new Error(F.NODE_ENV==="production"?K(0):"prepareAction did not return an object");return{type:t,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:t,payload:n[0]}}return r.toString=()=>`${t}`,r.type=t,r.match=n=>io(n)&&n.type===t,r}function yg(t){return typeof t=="function"&&"type"in t&&cc(t)}function Eg(t){const e=t?`${t}`.split("/"):[],r=e[e.length-1]||"actionCreator";return`Detected an action creator with type "${t||"unknown"}" being dispatched. 
Make sure you're calling the action creator before dispatching, i.e. \`dispatch(${r}())\` instead of \`dispatch(${r})\`. This is necessary even if the action has no payload.`}function _g(t={}){if(F.NODE_ENV==="production")return()=>r=>n=>r(n);const{isActionCreator:e=yg}=t;return()=>r=>n=>(e(n)&&console.warn(Eg(n.type)),r(n))}function fc(t,e){let r=0;return{measureTime(n){const i=Date.now();try{return n()}finally{const h=Date.now();r+=h-i}},warnIfExceeded(){r>t&&console.warn(`${e} took ${r}ms, which is more than the warning threshold of ${t}ms. 
If your state or actions are very large, you may want to disable the middleware as it might cause too much of a slowdown in development mode. See https://redux-toolkit.js.org/api/getDefaultMiddleware for instructions.
It is disabled in production builds, so you don't need to worry about that.`)}}}var hc=class Sr extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Sr.prototype)}static get[Symbol.species](){return Sr}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new Sr(...e[0].concat(this)):new Sr(...e.concat(this))}};function dc(t){return rt(t)?We(t,()=>{}):t}function hi(t,e,r){return t.has(e)?t.get(e):t.set(e,r(e)).get(e)}function Ig(t){return typeof t!="object"||t==null||Object.isFrozen(t)}function Ng(t,e,r){const n=pc(t,e,r);return{detectMutations(){return mc(t,e,n,r)}}}function pc(t,e=[],r,n="",i=new Set){const h={value:r};if(!t(r)&&!i.has(r)){i.add(r),h.children={};for(const f in r){const a=n?n+"."+f:f;e.length&&e.indexOf(a)!==-1||(h.children[f]=pc(t,e,r[f],a))}}return h}function mc(t,e=[],r,n,i=!1,h=""){const f=r?r.value:void 0,a=f===n;if(i&&!a&&!Number.isNaN(n))return{wasMutated:!0,path:h};if(t(f)||t(n))return{wasMutated:!1};const l={};for(let s in r.children)l[s]=!0;for(let s in n)l[s]=!0;const o=e.length>0;for(let s in l){const u=h?h+"."+s:s;if(o&&e.some(p=>p instanceof RegExp?p.test(u):u===p))continue;const c=mc(t,e,r.children[s],n[s],a,u);if(c.wasMutated)return c}return{wasMutated:!1}}function wg(t={}){if(F.NODE_ENV==="production")return()=>e=>r=>e(r);{let e=function(a,l,o,s){return JSON.stringify(a,r(l,s),o)},r=function(a,l){let o=[],s=[];return l||(l=function(u,c){return o[0]===c?"[Circular ~]":"[Circular ~."+s.slice(0,o.indexOf(c)).join(".")+"]"}),function(u,c){if(o.length>0){var d=o.indexOf(this);~d?o.splice(d+1):o.push(this),~d?s.splice(d,1/0,u):s.push(u),~o.indexOf(c)&&(c=l.call(this,u,c))}else o.push(c);return a==null?c:a.call(this,u,c)}},{isImmutable:n=Ig,ignoredPaths:i,warnAfter:h=32}=t;const f=Ng.bind(null,n,i);return({getState:a})=>{let l=a(),o=f(l),s;return u=>c=>{const d=fc(h,"ImmutableStateInvariantMiddleware");d.measureTime(()=>{if(l=a(),s=o.detectMutations(),o=f(l),s.wasMutated)throw new Error(F.NODE_ENV==="production"?K(19):`A state mutation was detected between dispatches, in the path '${s.path||""}'.  This may cause incorrect behavior. (https://redux.js.org/style-guide/style-guide#do-not-mutate-state)`)});const p=u(c);return d.measureTime(()=>{if(l=a(),s=o.detectMutations(),o=f(l),s.wasMutated)throw new Error(F.NODE_ENV==="production"?K(20):`A state mutation was detected inside a dispatch, in the path: ${s.path||""}. Take a look at the reducer(s) handling the action ${e(c)}. (https://redux.js.org/style-guide/style-guide#do-not-mutate-state)`)}),d.warnIfExceeded(),p}}}}function vc(t){const e=typeof t;return t==null||e==="string"||e==="boolean"||e==="number"||Array.isArray(t)||Dt(t)}function yo(t,e="",r=vc,n,i=[],h){let f;if(!r(t))return{keyPath:e||"<root>",value:t};if(typeof t!="object"||t===null||h?.has(t))return!1;const a=n!=null?n(t):Object.entries(t),l=i.length>0;for(const[o,s]of a){const u=e?e+"."+o:o;if(!(l&&i.some(d=>d instanceof RegExp?d.test(u):u===d))){if(!r(s))return{keyPath:u,value:s};if(typeof s=="object"&&(f=yo(s,u,r,n,i,h),f))return f}}return h&&gc(t)&&h.add(t),!1}function gc(t){if(!Object.isFrozen(t))return!1;for(const e of Object.values(t))if(!(typeof e!="object"||e===null)&&!gc(e))return!1;return!0}function Cg(t={}){if(F.NODE_ENV==="production")return()=>e=>r=>e(r);{const{isSerializable:e=vc,getEntries:r,ignoredActions:n=[],ignoredActionPaths:i=["meta.arg","meta.baseQueryMeta"],ignoredPaths:h=[],warnAfter:f=32,ignoreState:a=!1,ignoreActions:l=!1,disableCache:o=!1}=t,s=!o&&WeakSet?new WeakSet:void 0;return u=>c=>d=>{if(!io(d))return c(d);const p=c(d),m=fc(f,"SerializableStateInvariantMiddleware");return!l&&!(n.length&&n.indexOf(d.type)!==-1)&&m.measureTime(()=>{const v=yo(d,"",e,r,i,s);if(v){const{keyPath:y,value:E}=v;console.error(`A non-serializable value was detected in an action, in the path: \`${y}\`. Value:`,E,`
Take a look at the logic that dispatched this action: `,d,`
(See https://redux.js.org/faq/actions#why-should-type-be-a-string-or-at-least-serializable-why-should-my-action-types-be-constants)`,`
(To allow non-serializable values see: https://redux-toolkit.js.org/usage/usage-guide#working-with-non-serializable-data)`)}}),a||(m.measureTime(()=>{const v=u.getState(),y=yo(v,"",e,r,h,s);if(y){const{keyPath:E,value:g}=y;console.error(`A non-serializable value was detected in the state, in the path: \`${E}\`. Value:`,g,`
Take a look at the reducer(s) handling this action type: ${d.type}.
(See https://redux.js.org/faq/organizing-state#can-i-put-functions-promises-or-other-non-serializable-items-in-my-store-state)`)}}),m.warnIfExceeded()),p}}}function di(t){return typeof t=="boolean"}var Tg=()=>function(e){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:i=!0,actionCreatorCheck:h=!0}=e??{};let f=new hc;if(r&&(di(r)?f.push(pg):f.push(mg(r.extraArgument))),F.NODE_ENV!=="production"){if(n){let a={};di(n)||(a=n),f.unshift(wg(a))}if(i){let a={};di(i)||(a=i),f.push(Cg(a))}if(h){let a={};di(h)||(a=h),f.unshift(_g(a))}}return f},pi="RTK_autoBatch",vr=()=>t=>({payload:t,meta:{[pi]:!0}}),yc=t=>e=>{setTimeout(e,t)},Rg=(t={type:"raf"})=>e=>(...r)=>{const n=e(...r);let i=!0,h=!1,f=!1;const a=new Set,l=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:yc(10):t.type==="callback"?t.queueNotification:yc(t.timeout),o=()=>{f=!1,h&&(h=!1,a.forEach(s=>s()))};return Object.assign({},n,{subscribe(s){const u=()=>i&&s(),c=n.subscribe(u);return a.add(s),()=>{c(),a.delete(s)}},dispatch(s){try{return i=!s?.meta?.[pi],h=!i,h&&(f||(f=!0,l(o))),n.dispatch(s)}finally{i=!0}}})},Ag=t=>function(r){const{autoBatch:n=!0}=r??{};let i=new hc(t);return n&&i.push(Rg(typeof n=="object"?n:void 0)),i};function bg(t){const e=Tg(),{reducer:r=void 0,middleware:n,devTools:i=!0,duplicateMiddlewareCheck:h=!0,preloadedState:f=void 0,enhancers:a=void 0}=t||{};let l;if(typeof r=="function")l=r;else if(Dt(r))l=zl(r);else throw new Error(F.NODE_ENV==="production"?K(1):"`reducer` is a required argument, and must be a function or an object of functions that can be passed to combineReducers");if(F.NODE_ENV!=="production"&&n&&typeof n!="function")throw new Error(F.NODE_ENV==="production"?K(2):"`middleware` field must be a callback");let o;if(typeof n=="function"){if(o=n(e),F.NODE_ENV!=="production"&&!Array.isArray(o))throw new Error(F.NODE_ENV==="production"?K(3):"when using a middleware builder function, an array of middleware must be returned")}else o=e();if(F.NODE_ENV!=="production"&&o.some(m=>typeof m!="function"))throw new Error(F.NODE_ENV==="production"?K(4):"each middleware provided to configureStore must be a function");if(F.NODE_ENV!=="production"&&h){let m=new Set;o.forEach(v=>{if(m.has(v))throw new Error(F.NODE_ENV==="production"?K(42):"Duplicate middleware references found when creating the store. Ensure that each middleware is only included once.");m.add(v)})}let s=oi;i&&(s=gg({trace:F.NODE_ENV!=="production",...typeof i=="object"&&i}));const u=zv(...o),c=Ag(u);if(F.NODE_ENV!=="production"&&a&&typeof a!="function")throw new Error(F.NODE_ENV==="production"?K(5):"`enhancers` field must be a callback");let d=typeof a=="function"?a(c):c();if(F.NODE_ENV!=="production"&&!Array.isArray(d))throw new Error(F.NODE_ENV==="production"?K(6):"`enhancers` callback must return an array");if(F.NODE_ENV!=="production"&&d.some(m=>typeof m!="function"))throw new Error(F.NODE_ENV==="production"?K(7):"each enhancer provided to configureStore must be a function");F.NODE_ENV!=="production"&&o.length&&!d.includes(u)&&console.error("middlewares were provided, but middleware enhancer was not included in final enhancers - make sure to call `getDefaultEnhancers`");const p=s(...d);return Gl(l,f,p)}function Ec(t){const e={},r=[];let n;const i={addCase(h,f){if(F.NODE_ENV!=="production"){if(r.length>0)throw new Error(F.NODE_ENV==="production"?K(26):"`builder.addCase` should only be called before calling `builder.addMatcher`");if(n)throw new Error(F.NODE_ENV==="production"?K(27):"`builder.addCase` should only be called before calling `builder.addDefaultCase`")}const a=typeof h=="string"?h:h.type;if(!a)throw new Error(F.NODE_ENV==="production"?K(28):"`builder.addCase` cannot be called with an empty action type");if(a in e)throw new Error(F.NODE_ENV==="production"?K(29):`\`builder.addCase\` cannot be called with two reducers for the same action type '${a}'`);return e[a]=f,i},addAsyncThunk(h,f){if(F.NODE_ENV!=="production"&&n)throw new Error(F.NODE_ENV==="production"?K(43):"`builder.addAsyncThunk` should only be called before calling `builder.addDefaultCase`");return f.pending&&(e[h.pending.type]=f.pending),f.rejected&&(e[h.rejected.type]=f.rejected),f.fulfilled&&(e[h.fulfilled.type]=f.fulfilled),f.settled&&r.push({matcher:h.settled,reducer:f.settled}),i},addMatcher(h,f){if(F.NODE_ENV!=="production"&&n)throw new Error(F.NODE_ENV==="production"?K(30):"`builder.addMatcher` should only be called before calling `builder.addDefaultCase`");return r.push({matcher:h,reducer:f}),i},addDefaultCase(h){if(F.NODE_ENV!=="production"&&n)throw new Error(F.NODE_ENV==="production"?K(31):"`builder.addDefaultCase` can only be called once");return n=h,i}};return t(i),[e,r,n]}function Og(t){return typeof t=="function"}function Sg(t,e){if(F.NODE_ENV!=="production"&&typeof e=="object")throw new Error(F.NODE_ENV==="production"?K(8):"The object notation for `createReducer` has been removed. Please use the 'builder callback' notation instead: https://redux-toolkit.js.org/api/createReducer");let[r,n,i]=Ec(e),h;if(Og(t))h=()=>dc(t());else{const a=dc(t);h=()=>a}function f(a=h(),l){let o=[r[l.type],...n.filter(({matcher:s})=>s(l)).map(({reducer:s})=>s)];return o.filter(s=>!!s).length===0&&(o=[i]),o.reduce((s,u)=>{if(u)if(nt(s)){const d=u(s,l);return d===void 0?s:d}else{if(rt(s))return We(s,c=>u(c,l));{const c=u(s,l);if(c===void 0){if(s===null)return s;throw Error("A case reducer on a non-draftable value must not return undefined")}return c}}return s},a)}return f.getInitialState=h,f}var _c=(t,e)=>cc(t)?t.match(e):t(e);function _t(...t){return e=>t.some(r=>_c(r,e))}function gr(...t){return e=>t.every(r=>_c(r,e))}function mi(t,e){if(!t||!t.meta)return!1;const r=typeof t.meta.requestId=="string",n=e.indexOf(t.meta.requestStatus)>-1;return r&&n}function yr(t){return typeof t[0]=="function"&&"pending"in t[0]&&"fulfilled"in t[0]&&"rejected"in t[0]}function Eo(...t){return t.length===0?e=>mi(e,["pending"]):yr(t)?_t(...t.map(e=>e.pending)):Eo()(t[0])}function An(...t){return t.length===0?e=>mi(e,["rejected"]):yr(t)?_t(...t.map(e=>e.rejected)):An()(t[0])}function vi(...t){const e=r=>r&&r.meta&&r.meta.rejectedWithValue;return t.length===0?gr(An(...t),e):yr(t)?gr(An(...t),e):vi()(t[0])}function Mt(...t){return t.length===0?e=>mi(e,["fulfilled"]):yr(t)?_t(...t.map(e=>e.fulfilled)):Mt()(t[0])}function _o(...t){return t.length===0?e=>mi(e,["pending","fulfilled","rejected"]):yr(t)?_t(...t.flatMap(e=>[e.pending,e.rejected,e.fulfilled])):_o()(t[0])}var Dg="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",gi=(t=21)=>{let e="",r=t;for(;r--;)e+=Dg[Math.random()*64|0];return e},Pg=["name","message","stack","code"],Io=class{constructor(t,e){this.payload=t,this.meta=e}_type},Ic=class{constructor(t,e){this.payload=t,this.meta=e}_type},Mg=t=>{if(typeof t=="object"&&t!==null){const e={};for(const r of Pg)typeof t[r]=="string"&&(e[r]=t[r]);return e}return{message:String(t)}},Nc="External signal was aborted",wc=(()=>{function t(e,r,n){const i=Ve(e+"/fulfilled",(l,o,s,u)=>({payload:l,meta:{...u||{},arg:s,requestId:o,requestStatus:"fulfilled"}})),h=Ve(e+"/pending",(l,o,s)=>({payload:void 0,meta:{...s||{},arg:o,requestId:l,requestStatus:"pending"}})),f=Ve(e+"/rejected",(l,o,s,u,c)=>({payload:u,error:(n&&n.serializeError||Mg)(l||"Rejected"),meta:{...c||{},arg:s,requestId:o,rejectedWithValue:!!u,requestStatus:"rejected",aborted:l?.name==="AbortError",condition:l?.name==="ConditionError"}}));function a(l,{signal:o}={}){return(s,u,c)=>{const d=n?.idGenerator?n.idGenerator(l):gi(),p=new AbortController;let m,v;function y(g){v=g,p.abort()}o&&(o.aborted?y(Nc):o.addEventListener("abort",()=>y(Nc),{once:!0}));const E=(async function(){let g;try{let I=n?.condition?.(l,{getState:u,extra:c});if(kg(I)&&(I=await I),I===!1||p.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const N=new Promise((w,C)=>{m=()=>{C({name:"AbortError",message:v||"Aborted"})},p.signal.addEventListener("abort",m)});s(h(d,l,n?.getPendingMeta?.({requestId:d,arg:l},{getState:u,extra:c}))),g=await Promise.race([N,Promise.resolve(r(l,{dispatch:s,getState:u,extra:c,requestId:d,signal:p.signal,abort:y,rejectWithValue:(w,C)=>new Io(w,C),fulfillWithValue:(w,C)=>new Ic(w,C)})).then(w=>{if(w instanceof Io)throw w;return w instanceof Ic?i(w.payload,d,l,w.meta):i(w,d,l)})])}catch(I){g=I instanceof Io?f(null,d,l,I.payload,I.meta):f(I,d,l)}finally{m&&p.signal.removeEventListener("abort",m)}return n&&!n.dispatchConditionRejection&&f.match(g)&&g.meta.condition||s(g),g})();return Object.assign(E,{abort:y,requestId:d,arg:l,unwrap(){return E.then(Lg)}})}}return Object.assign(a,{pending:h,rejected:f,fulfilled:i,settled:_t(f,i),typePrefix:e})}return t.withTypes=()=>t,t})();function Lg(t){if(t.meta&&t.meta.rejectedWithValue)throw t.payload;if(t.error)throw t.error;return t.payload}function kg(t){return t!==null&&typeof t=="object"&&typeof t.then=="function"}var Fg=Symbol.for("rtk-slice-createasyncthunk"),Vg=(t=>(t.reducer="reducer",t.reducerWithPrepare="reducerWithPrepare",t.asyncThunk="asyncThunk",t))(Vg||{});function Ug(t,e){return`${t}/${e}`}function qg({creators:t}={}){const e=t?.asyncThunk?.[Fg];return function(n){const{name:i,reducerPath:h=i}=n;if(!i)throw new Error(F.NODE_ENV==="production"?K(11):"`name` is a required option for createSlice");typeof process<"u"&&F.NODE_ENV==="development"&&n.initialState===void 0&&console.error("You must provide an `initialState` value that is not `undefined`. You may have misspelled `initialState`");const f=(typeof n.reducers=="function"?n.reducers(Hg()):n.reducers)||{},a=Object.keys(f),l={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},o={addCase(g,_){const I=typeof g=="string"?g:g.type;if(!I)throw new Error(F.NODE_ENV==="production"?K(12):"`context.addCase` cannot be called with an empty action type");if(I in l.sliceCaseReducersByType)throw new Error(F.NODE_ENV==="production"?K(13):"`context.addCase` cannot be called with two reducers for the same action type: "+I);return l.sliceCaseReducersByType[I]=_,o},addMatcher(g,_){return l.sliceMatchers.push({matcher:g,reducer:_}),o},exposeAction(g,_){return l.actionCreators[g]=_,o},exposeCaseReducer(g,_){return l.sliceCaseReducersByName[g]=_,o}};a.forEach(g=>{const _=f[g],I={reducerName:g,type:Ug(i,g),createNotation:typeof n.reducers=="function"};Wg(_)?$g(I,_,o,e):Gg(I,_,o)});function s(){if(F.NODE_ENV!=="production"&&typeof n.extraReducers=="object")throw new Error(F.NODE_ENV==="production"?K(14):"The object notation for `createSlice.extraReducers` has been removed. Please use the 'builder callback' notation instead: https://redux-toolkit.js.org/api/createSlice");const[g={},_=[],I=void 0]=typeof n.extraReducers=="function"?Ec(n.extraReducers):[n.extraReducers],N={...g,...l.sliceCaseReducersByType};return Sg(n.initialState,w=>{for(let C in N)w.addCase(C,N[C]);for(let C of l.sliceMatchers)w.addMatcher(C.matcher,C.reducer);for(let C of _)w.addMatcher(C.matcher,C.reducer);I&&w.addDefaultCase(I)})}const u=g=>g,c=new Map,d=new WeakMap;let p;function m(g,_){return p||(p=s()),p(g,_)}function v(){return p||(p=s()),p.getInitialState()}function y(g,_=!1){function I(w){let C=w[g];if(typeof C>"u"){if(_)C=hi(d,I,v);else if(F.NODE_ENV!=="production")throw new Error(F.NODE_ENV==="production"?K(15):"selectSlice returned undefined for an uninjected slice reducer")}return C}function N(w=u){const C=hi(c,_,()=>new WeakMap);return hi(C,w,()=>{const T={};for(const[R,A]of Object.entries(n.selectors??{}))T[R]=Bg(A,w,()=>hi(d,w,v),_);return T})}return{reducerPath:g,getSelectors:N,get selectors(){return N(I)},selectSlice:I}}const E={name:i,reducer:m,actions:l.actionCreators,caseReducers:l.sliceCaseReducersByName,getInitialState:v,...y(h),injectInto(g,{reducerPath:_,...I}={}){const N=_??h;return g.inject({reducerPath:N,reducer:m},I),{...E,...y(N,!0)}}};return E}}function Bg(t,e,r,n){function i(h,...f){let a=e(h);if(typeof a>"u"){if(n)a=r();else if(F.NODE_ENV!=="production")throw new Error(F.NODE_ENV==="production"?K(16):"selectState returned undefined for an uninjected slice reducer")}return t(a,...f)}return i.unwrapped=t,i}var tn=qg();function Hg(){function t(e,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...r}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...r){return e(...r)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:r}},asyncThunk:t}}function Gg({type:t,reducerName:e,createNotation:r},n,i){let h,f;if("reducer"in n){if(r&&!zg(n))throw new Error(F.NODE_ENV==="production"?K(17):"Please use the `create.preparedReducer` notation for prepared action creators with the `create` notation.");h=n.reducer,f=n.prepare}else h=n;i.addCase(t,h).exposeCaseReducer(e,h).exposeAction(e,f?Ve(t,f):Ve(t))}function Wg(t){return t._reducerDefinitionType==="asyncThunk"}function zg(t){return t._reducerDefinitionType==="reducerWithPrepare"}function $g({type:t,reducerName:e},r,n,i){if(!i)throw new Error(F.NODE_ENV==="production"?K(18):"Cannot use `create.asyncThunk` in the built-in `createSlice`. Use `buildCreateSlice({ creators: { asyncThunk: asyncThunkCreator } })` to create a customised version of `createSlice`.");const{payloadCreator:h,fulfilled:f,pending:a,rejected:l,settled:o,options:s}=r,u=i(t,h,s);n.exposeAction(e,u),f&&n.addCase(u.fulfilled,f),a&&n.addCase(u.pending,a),l&&n.addCase(u.rejected,l),o&&n.addMatcher(u.settled,o),n.exposeCaseReducer(e,{fulfilled:f||yi,pending:a||yi,rejected:l||yi,settled:o||yi})}function yi(){}var Yg=(t,e)=>{if(typeof t!="function")throw new TypeError(F.NODE_ENV==="production"?K(32):`${e} is not a function`)},{assign:No}=Object,wo="listenerMiddleware",Qg=t=>{let{type:e,actionCreator:r,matcher:n,predicate:i,effect:h}=t;if(e)i=Ve(e).match;else if(r)e=r.type,i=r.match;else if(n)i=n;else if(!i)throw new Error(F.NODE_ENV==="production"?K(21):"Creating or removing a listener requires one of the known fields for matching an action");return Yg(h,"options.listener"),{predicate:i,type:e,effect:h}},Kg=No(t=>{const{type:e,predicate:r,effect:n}=Qg(t);return{id:gi(),effect:n,type:e,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(F.NODE_ENV==="production"?K(22):"Unsubscribe not initialized")}}},{withTypes:()=>Kg}),Xg=No(Ve(`${wo}/add`),{withTypes:()=>Xg});Ve(`${wo}/removeAll`);var Jg=No(Ve(`${wo}/remove`),{withTypes:()=>Jg});function K(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var Zg=class extends Error{issues;constructor(t){super(t[0].message),this.name="SchemaError",this.issues=t}},Ue={},xg=(t=>(t.uninitialized="uninitialized",t.pending="pending",t.fulfilled="fulfilled",t.rejected="rejected",t))(xg||{});function Cc(t){return{status:t,isUninitialized:t==="uninitialized",isLoading:t==="pending",isSuccess:t==="fulfilled",isError:t==="rejected"}}var Tc=Dt;function Rc(t,e){if(t===e||!(Tc(t)&&Tc(e)||Array.isArray(t)&&Array.isArray(e)))return e;const r=Object.keys(e),n=Object.keys(t);let i=r.length===n.length;const h=Array.isArray(e)?[]:{};for(const f of r)h[f]=Rc(t[f],e[f]),i&&(i=t[f]===h[f]);return i?t:h}function Co(t){let e=0;for(const r in t)e++;return e}var Ac=t=>[].concat(...t);function jg(){return typeof document>"u"?!0:document.visibilityState!=="hidden"}function Ei(t){return t!=null}function e1(){return typeof navigator>"u"||navigator.onLine===void 0?!0:navigator.onLine}function t1(t,e,r){return t.has(e)?t.get(e):t.set(e,r).get(e)}function To(t,e,r){return t.has(e)?t.get(e):t.set(e,r(e)).get(e)}var Ro=()=>new Map,bn=class{constructor(t,e=void 0){this.value=t,this.meta=e}};async function n1(t=0,e=5){const r=Math.min(t,e),n=~~((Math.random()+.4)*(300<<r));await new Promise(i=>setTimeout(h=>i(h),n))}function r1(t,e){throw Object.assign(new bn({error:t,meta:e}),{throwImmediately:!0})}var bc={},i1=(t,e)=>async(r,n,i)=>{const h=[5,(e||bc).maxRetries,(i||bc).maxRetries].filter(s=>s!==void 0),[f]=h.slice(-1),l={maxRetries:f,backoff:n1,retryCondition:(s,u,{attempt:c})=>c<=f,...e,...i};let o=0;for(;;)try{const s=await t(r,n,i);if(s.error)throw new bn(s);return s}catch(s){if(o++,s.throwImmediately){if(s instanceof bn)return s.value;throw s}if(s instanceof bn&&!l.retryCondition(s.value.error,r,{attempt:o,baseQueryApi:n,extraOptions:i}))return s.value;await l.backoff(o,l.maxRetries)}};Object.assign(i1,{fail:r1});var _i=Ve("__rtkq/focused"),Ao=Ve("__rtkq/unfocused"),Ii=Ve("__rtkq/online"),bo=Ve("__rtkq/offline"),Oo=!1;function s1(t,e){function r(){const n=()=>t(_i()),i=()=>t(Ao()),h=()=>t(Ii()),f=()=>t(bo()),a=()=>{window.document.visibilityState==="visible"?n():i()};return Oo||typeof window<"u"&&window.addEventListener&&(window.addEventListener("visibilitychange",a,!1),window.addEventListener("focus",n,!1),window.addEventListener("online",h,!1),window.addEventListener("offline",f,!1),Oo=!0),()=>{window.removeEventListener("focus",n),window.removeEventListener("visibilitychange",a),window.removeEventListener("online",h),window.removeEventListener("offline",f),Oo=!1}}return r()}function Ni(t){return t.type==="query"}function o1(t){return t.type==="mutation"}function Er(t){return t.type==="infinitequery"}function wi(t){return Ni(t)||Er(t)}function So(t,e,r,n,i,h){return a1(t)?t(e,r,n,i).filter(Ei).map(Do).map(h):Array.isArray(t)?t.map(Do).map(h):[]}function a1(t){return typeof t=="function"}function Do(t){return typeof t=="string"?{type:t}:t}function u1(t,e){return t.catch(e)}var _r=Symbol("forceQueryFn"),Po=t=>typeof t[_r]=="function";function l1({serializeQueryArgs:t,queryThunk:e,infiniteQueryThunk:r,mutationThunk:n,api:i,context:h,internalState:f}){const{runningQueries:a,runningMutations:l}=f,{unsubscribeQueryResult:o,removeMutationResult:s,updateSubscriptionOptions:u}=i.internalActions;return{buildInitiateQuery:E,buildInitiateInfiniteQuery:g,buildInitiateMutation:_,getRunningQueryThunk:c,getRunningMutationThunk:d,getRunningQueriesThunk:p,getRunningMutationsThunk:m};function c(I,N){return w=>{const C=h.endpointDefinitions[I],T=t({queryArgs:N,endpointDefinition:C,endpointName:I});return a.get(w)?.[T]}}function d(I,N){return w=>l.get(w)?.[N]}function p(){return I=>Object.values(a.get(I)||{}).filter(Ei)}function m(){return I=>Object.values(l.get(I)||{}).filter(Ei)}function v(I){if(Ue.NODE_ENV!=="production"){if(v.triggered)return;const N=I(i.internalActions.internal_getRTKQSubscriptions());if(v.triggered=!0,typeof N!="object"||typeof N?.type=="string")throw new Error(Ue.NODE_ENV==="production"?K(34):`Warning: Middleware for RTK-Query API at reducerPath "${i.reducerPath}" has not been added to the store.
You must add the middleware for RTK-Query to function correctly!`)}}function y(I,N){const w=(C,{subscribe:T=!0,forceRefetch:R,subscriptionOptions:A,[_r]:b,...O}={})=>(S,L)=>{const k=t({queryArgs:C,endpointDefinition:N,endpointName:I});let V;const U={...O,type:"query",subscribe:T,forceRefetch:R,subscriptionOptions:A,endpointName:I,originalArgs:C,queryCacheKey:k,[_r]:b};if(Ni(N))V=e(U);else{const{direction:$,initialPageParam:G}=O;V=r({...U,direction:$,initialPageParam:G})}const M=i.endpoints[I].select(C),H=S(V),J=M(L());v(S);const{requestId:ue,abort:z}=H,ie=J.requestId!==ue,re=a.get(S)?.[k],Z=()=>M(L()),j=Object.assign(b?H.then(Z):ie&&!re?Promise.resolve(J):Promise.all([re,H]).then(Z),{arg:C,requestId:ue,subscriptionOptions:A,queryCacheKey:k,abort:z,async unwrap(){const $=await j;if($.isError)throw $.error;return $.data},refetch:()=>S(w(C,{subscribe:!1,forceRefetch:!0})),unsubscribe(){T&&S(o({queryCacheKey:k,requestId:ue}))},updateSubscriptionOptions($){j.subscriptionOptions=$,S(u({endpointName:I,requestId:ue,queryCacheKey:k,options:$}))}});if(!re&&!ie&&!b){const $=t1(a,S,{});$[k]=j,j.then(()=>{delete $[k],Co($)||a.delete(S)})}return j};return w}function E(I,N){return y(I,N)}function g(I,N){return y(I,N)}function _(I){return(N,{track:w=!0,fixedCacheKey:C}={})=>(T,R)=>{const A=n({type:"mutation",endpointName:I,originalArgs:N,track:w,fixedCacheKey:C}),b=T(A);v(T);const{requestId:O,abort:S,unwrap:L}=b,k=u1(b.unwrap().then(H=>({data:H})),H=>({error:H})),V=()=>{T(s({requestId:O,fixedCacheKey:C}))},U=Object.assign(k,{arg:b.arg,requestId:O,abort:S,unwrap:L,reset:V}),M=l.get(T)||{};return l.set(T,M),M[O]=U,U.then(()=>{delete M[O],Co(M)||l.delete(T)}),C&&(M[C]=U,U.then(()=>{M[C]===U&&(delete M[C],Co(M)||l.delete(T))})),U}}}var Oc=class extends Zg{constructor(t,e,r,n){super(t),this.value=e,this.schemaName=r,this._bqMeta=n}},nn=(t,e)=>Array.isArray(t)?t.includes(e):!!t;async function rn(t,e,r,n){const i=await t["~standard"].validate(e);if(i.issues)throw new Oc(i.issues,e,r,n);return i.value}function Sc(t){return t}var Ir=(t={})=>({...t,[pi]:!0});function c1({reducerPath:t,baseQuery:e,context:{endpointDefinitions:r},serializeQueryArgs:n,api:i,assertTagType:h,selectors:f,onSchemaFailure:a,catchSchemaFailure:l,skipSchemaValidation:o}){const s=(A,b,O,S)=>(L,k)=>{const V=r[A],U=n({queryArgs:b,endpointDefinition:V,endpointName:A});if(L(i.internalActions.queryResultPatched({queryCacheKey:U,patches:O})),!S)return;const M=i.endpoints[A].select(b)(k()),H=So(V.providesTags,M.data,void 0,b,{},h);L(i.internalActions.updateProvidedBy([{queryCacheKey:U,providedTags:H}]))};function u(A,b,O=0){const S=[b,...A];return O&&S.length>O?S.slice(0,-1):S}function c(A,b,O=0){const S=[...A,b];return O&&S.length>O?S.slice(1):S}const d=(A,b,O,S=!0)=>(L,k)=>{const U=i.endpoints[A].select(b)(k()),M={patches:[],inversePatches:[],undo:()=>L(i.util.patchQueryData(A,b,M.inversePatches,S))};if(U.status==="uninitialized")return M;let H;if("data"in U)if(rt(U.data)){const[J,ue,z]=nc(U.data,O);M.patches.push(...ue),M.inversePatches.push(...z),H=J}else H=O(U.data),M.patches.push({op:"replace",path:[],value:H}),M.inversePatches.push({op:"replace",path:[],value:U.data});return M.patches.length===0||L(i.util.patchQueryData(A,b,M.patches,S)),M},p=(A,b,O)=>S=>S(i.endpoints[A].initiate(b,{subscribe:!1,forceRefetch:!0,[_r]:()=>({data:O})})),m=(A,b)=>A.query&&A[b]?A[b]:Sc,v=async(A,{signal:b,abort:O,rejectWithValue:S,fulfillWithValue:L,dispatch:k,getState:V,extra:U})=>{const M=r[A.endpointName],{metaSchema:H,skipSchemaValidation:J=o}=M;try{let ue=Sc;const z={signal:b,abort:O,dispatch:k,getState:V,extra:U,endpoint:A.endpointName,type:A.type,forced:A.type==="query"?y(A,V()):void 0,queryCacheKey:A.type==="query"?A.queryCacheKey:void 0},ie=A.type==="query"?A[_r]:void 0;let re;const Z=async($,G,qe,Dn)=>{if(G==null&&$.pages.length)return Promise.resolve({data:$});const Ut={queryArg:A.originalArgs,pageParam:G},Pn=await j(Ut),pt=Dn?u:c;return{data:{pages:pt($.pages,Pn.data,qe),pageParams:pt($.pageParams,G,qe)},meta:Pn.meta}};async function j($){let G;const{extraOptions:qe,argSchema:Dn,rawResponseSchema:Ut,responseSchema:Pn}=M;if(Dn&&!nn(J,"arg")&&($=await rn(Dn,$,"argSchema",{})),ie?G=ie():M.query?(ue=m(M,"transformResponse"),G=await e(M.query($),z,qe)):G=await M.queryFn($,z,qe,at=>e(at,z,qe)),typeof process<"u"&&Ue.NODE_ENV==="development"){const at=M.query?"`baseQuery`":"`queryFn`";let ut;if(!G)ut=`${at} did not return anything.`;else if(typeof G!="object")ut=`${at} did not return an object.`;else if(G.error&&G.data)ut=`${at} returned an object containing both \`error\` and \`result\`.`;else if(G.error===void 0&&G.data===void 0)ut=`${at} returned an object containing neither a valid \`error\` and \`result\`. At least one of them should not be \`undefined\``;else for(const Mn of Object.keys(G))if(Mn!=="error"&&Mn!=="data"&&Mn!=="meta"){ut=`The object returned by ${at} has the unknown property ${Mn}.`;break}ut&&console.error(`Error encountered handling the endpoint ${A.endpointName}.
                  ${ut}
                  It needs to return an object with either the shape \`{ data: <value> }\` or \`{ error: <value> }\` that may contain an optional \`meta\` property.
                  Object returned was:`,G)}if(G.error)throw new bn(G.error,G.meta);let{data:pt}=G;Ut&&!nn(J,"rawResponse")&&(pt=await rn(Ut,G.data,"rawResponseSchema",G.meta));let qt=await ue(pt,G.meta,$);return Pn&&!nn(J,"response")&&(qt=await rn(Pn,qt,"responseSchema",G.meta)),{...G,data:qt}}if(A.type==="query"&&"infiniteQueryOptions"in M){const{infiniteQueryOptions:$}=M,{maxPages:G=1/0}=$;let qe;const Dn={pages:[],pageParams:[]},Ut=f.selectQueryEntry(V(),A.queryCacheKey)?.data,pt=y(A,V())&&!A.direction||!Ut?Dn:Ut;if("direction"in A&&A.direction&&pt.pages.length){const qt=A.direction==="backward",ut=(qt?Dc:Mo)($,pt,A.originalArgs);qe=await Z(pt,ut,G,qt)}else{const{initialPageParam:qt=$.initialPageParam}=A,at=Ut?.pageParams??[],ut=at[0]??qt,Mn=at.length;qe=await Z(pt,ut,G),ie&&(qe={data:qe.data.pages[0]});for(let Of=1;Of<Mn;Of++){const Fy=Mo($,qe.data,A.originalArgs);qe=await Z(qe.data,Fy,G)}}re=qe}else re=await j(A.originalArgs);return H&&!nn(J,"meta")&&re.meta&&(re.meta=await rn(H,re.meta,"metaSchema",re.meta)),L(re.data,Ir({fulfilledTimeStamp:Date.now(),baseQueryMeta:re.meta}))}catch(ue){let z=ue;if(z instanceof bn){let ie=m(M,"transformErrorResponse");const{rawErrorResponseSchema:re,errorResponseSchema:Z}=M;let{value:j,meta:$}=z;try{re&&!nn(J,"rawErrorResponse")&&(j=await rn(re,j,"rawErrorResponseSchema",$)),H&&!nn(J,"meta")&&($=await rn(H,$,"metaSchema",$));let G=await ie(j,$,A.originalArgs);return Z&&!nn(J,"errorResponse")&&(G=await rn(Z,G,"errorResponseSchema",$)),S(G,Ir({baseQueryMeta:$}))}catch(G){z=G}}try{if(z instanceof Oc){const ie={endpoint:A.endpointName,arg:A.originalArgs,type:A.type,queryCacheKey:A.type==="query"?A.queryCacheKey:void 0};M.onSchemaFailure?.(z,ie),a?.(z,ie);const{catchSchemaFailure:re=l}=M;if(re)return S(re(z,ie),Ir({baseQueryMeta:z._bqMeta}))}}catch(ie){z=ie}throw typeof process<"u"&&Ue.NODE_ENV!=="production"?console.error(`An unhandled error occurred processing a request for the endpoint "${A.endpointName}".
In the case of an unhandled error, no tags will be "provided" or "invalidated".`,z):console.error(z),z}};function y(A,b){const O=f.selectQueryEntry(b,A.queryCacheKey),S=f.selectConfig(b).refetchOnMountOrArgChange,L=O?.fulfilledTimeStamp,k=A.forceRefetch??(A.subscribe&&S);return k?k===!0||(Number(new Date)-Number(L))/1e3>=k:!1}const E=()=>wc(`${t}/executeQuery`,v,{getPendingMeta({arg:b}){const O=r[b.endpointName];return Ir({startedTimeStamp:Date.now(),...Er(O)?{direction:b.direction}:{}})},condition(b,{getState:O}){const S=O(),L=f.selectQueryEntry(S,b.queryCacheKey),k=L?.fulfilledTimeStamp,V=b.originalArgs,U=L?.originalArgs,M=r[b.endpointName],H=b.direction;return Po(b)?!0:L?.status==="pending"?!1:y(b,S)||Ni(M)&&M?.forceRefetch?.({currentArg:V,previousArg:U,endpointState:L,state:S})?!0:!(k&&!H)},dispatchConditionRejection:!0}),g=E(),_=E(),I=wc(`${t}/executeMutation`,v,{getPendingMeta(){return Ir({startedTimeStamp:Date.now()})}}),N=A=>"force"in A,w=A=>"ifOlderThan"in A,C=(A,b,O)=>(S,L)=>{const k=N(O)&&O.force,V=w(O)&&O.ifOlderThan,U=(H=!0)=>{const J={forceRefetch:H,isPrefetch:!0};return i.endpoints[A].initiate(b,J)},M=i.endpoints[A].select(b)(L());if(k)S(U());else if(V){const H=M?.fulfilledTimeStamp;if(!H){S(U());return}(Number(new Date)-Number(new Date(H)))/1e3>=V&&S(U())}else S(U(!1))};function T(A){return b=>b?.meta?.arg?.endpointName===A}function R(A,b){return{matchPending:gr(Eo(A),T(b)),matchFulfilled:gr(Mt(A),T(b)),matchRejected:gr(An(A),T(b))}}return{queryThunk:g,mutationThunk:I,infiniteQueryThunk:_,prefetch:C,updateQueryData:d,upsertQueryData:p,patchQueryData:s,buildMatchThunkActions:R}}function Mo(t,{pages:e,pageParams:r},n){const i=e.length-1;return t.getNextPageParam(e[i],e,r[i],r,n)}function Dc(t,{pages:e,pageParams:r},n){return t.getPreviousPageParam?.(e[0],e,r[0],r,n)}function Pc(t,e,r,n){return So(r[t.meta.arg.endpointName][e],Mt(t)?t.payload:void 0,vi(t)?t.payload:void 0,t.meta.arg.originalArgs,"baseQueryMeta"in t.meta?t.meta.baseQueryMeta:void 0,n)}function Ci(t,e,r){const n=t[e];n&&r(n)}function Nr(t){return("arg"in t?t.arg.fixedCacheKey:t.fixedCacheKey)??t.requestId}function Mc(t,e,r){const n=t[Nr(e)];n&&r(n)}var Ti={};function f1({reducerPath:t,queryThunk:e,mutationThunk:r,serializeQueryArgs:n,context:{endpointDefinitions:i,apiUid:h,extractRehydrationInfo:f,hasRehydrationInfo:a},assertTagType:l,config:o}){const s=Ve(`${t}/resetApiState`);function u(T,R,A,b){T[R.queryCacheKey]??={status:"uninitialized",endpointName:R.endpointName},Ci(T,R.queryCacheKey,O=>{O.status="pending",O.requestId=A&&O.requestId?O.requestId:b.requestId,R.originalArgs!==void 0&&(O.originalArgs=R.originalArgs),O.startedTimeStamp=b.startedTimeStamp;const S=i[b.arg.endpointName];Er(S)&&"direction"in R&&(O.direction=R.direction)})}function c(T,R,A,b){Ci(T,R.arg.queryCacheKey,O=>{if(O.requestId!==R.requestId&&!b)return;const{merge:S}=i[R.arg.endpointName];if(O.status="fulfilled",S)if(O.data!==void 0){const{fulfilledTimeStamp:L,arg:k,baseQueryMeta:V,requestId:U}=R;let M=We(O.data,H=>S(H,A,{arg:k.originalArgs,baseQueryMeta:V,fulfilledTimeStamp:L,requestId:U}));O.data=M}else O.data=A;else O.data=i[R.arg.endpointName].structuralSharing??!0?Rc(nt(O.data)?Yv(O.data):O.data,A):A;delete O.error,O.fulfilledTimeStamp=R.fulfilledTimeStamp})}const d=tn({name:`${t}/queries`,initialState:Ti,reducers:{removeQueryResult:{reducer(T,{payload:{queryCacheKey:R}}){delete T[R]},prepare:vr()},cacheEntriesUpserted:{reducer(T,R){for(const A of R.payload){const{queryDescription:b,value:O}=A;u(T,b,!0,{arg:b,requestId:R.meta.requestId,startedTimeStamp:R.meta.timestamp}),c(T,{arg:b,requestId:R.meta.requestId,fulfilledTimeStamp:R.meta.timestamp,baseQueryMeta:{}},O,!0)}},prepare:T=>({payload:T.map(b=>{const{endpointName:O,arg:S,value:L}=b,k=i[O];return{queryDescription:{type:"query",endpointName:O,originalArgs:b.arg,queryCacheKey:n({queryArgs:S,endpointDefinition:k,endpointName:O})},value:L}}),meta:{[pi]:!0,requestId:gi(),timestamp:Date.now()}})},queryResultPatched:{reducer(T,{payload:{queryCacheKey:R,patches:A}}){Ci(T,R,b=>{b.data=rc(b.data,A.concat())})},prepare:vr()}},extraReducers(T){T.addCase(e.pending,(R,{meta:A,meta:{arg:b}})=>{const O=Po(b);u(R,b,O,A)}).addCase(e.fulfilled,(R,{meta:A,payload:b})=>{const O=Po(A.arg);c(R,A,b,O)}).addCase(e.rejected,(R,{meta:{condition:A,arg:b,requestId:O},error:S,payload:L})=>{Ci(R,b.queryCacheKey,k=>{if(!A){if(k.requestId!==O)return;k.status="rejected",k.error=L??S}})}).addMatcher(a,(R,A)=>{const{queries:b}=f(A);for(const[O,S]of Object.entries(b))(S?.status==="fulfilled"||S?.status==="rejected")&&(R[O]=S)})}}),p=tn({name:`${t}/mutations`,initialState:Ti,reducers:{removeMutationResult:{reducer(T,{payload:R}){const A=Nr(R);A in T&&delete T[A]},prepare:vr()}},extraReducers(T){T.addCase(r.pending,(R,{meta:A,meta:{requestId:b,arg:O,startedTimeStamp:S}})=>{O.track&&(R[Nr(A)]={requestId:b,status:"pending",endpointName:O.endpointName,startedTimeStamp:S})}).addCase(r.fulfilled,(R,{payload:A,meta:b})=>{b.arg.track&&Mc(R,b,O=>{O.requestId===b.requestId&&(O.status="fulfilled",O.data=A,O.fulfilledTimeStamp=b.fulfilledTimeStamp)})}).addCase(r.rejected,(R,{payload:A,error:b,meta:O})=>{O.arg.track&&Mc(R,O,S=>{S.requestId===O.requestId&&(S.status="rejected",S.error=A??b)})}).addMatcher(a,(R,A)=>{const{mutations:b}=f(A);for(const[O,S]of Object.entries(b))(S?.status==="fulfilled"||S?.status==="rejected")&&O!==S?.requestId&&(R[O]=S)})}}),m={tags:{},keys:{}},v=tn({name:`${t}/invalidation`,initialState:m,reducers:{updateProvidedBy:{reducer(T,R){for(const{queryCacheKey:A,providedTags:b}of R.payload){y(T,A);for(const{type:O,id:S}of b){const L=(T.tags[O]??={})[S||"__internal_without_id"]??=[];L.includes(A)||L.push(A)}T.keys[A]=b}},prepare:vr()}},extraReducers(T){T.addCase(d.actions.removeQueryResult,(R,{payload:{queryCacheKey:A}})=>{y(R,A)}).addMatcher(a,(R,A)=>{const{provided:b}=f(A);for(const[O,S]of Object.entries(b.tags??{}))for(const[L,k]of Object.entries(S)){const V=(R.tags[O]??={})[L||"__internal_without_id"]??=[];for(const U of k)V.includes(U)||V.push(U),R.keys[U]=b.keys[U]}}).addMatcher(_t(Mt(e),vi(e)),(R,A)=>{E(R,[A])}).addMatcher(d.actions.cacheEntriesUpserted.match,(R,A)=>{const b=A.payload.map(({queryDescription:O,value:S})=>({type:"UNKNOWN",payload:S,meta:{requestStatus:"fulfilled",requestId:"UNKNOWN",arg:O}}));E(R,b)})}});function y(T,R){const A=T.keys[R]??[];for(const b of A){const O=b.type,S=b.id??"__internal_without_id",L=T.tags[O]?.[S];L&&(T.tags[O][S]=L.filter(k=>k!==R))}delete T.keys[R]}function E(T,R){const A=R.map(b=>{const O=Pc(b,"providesTags",i,l),{queryCacheKey:S}=b.meta.arg;return{queryCacheKey:S,providedTags:O}});v.caseReducers.updateProvidedBy(T,v.actions.updateProvidedBy(A))}const g=tn({name:`${t}/subscriptions`,initialState:Ti,reducers:{updateSubscriptionOptions(T,R){},unsubscribeQueryResult(T,R){},internal_getRTKQSubscriptions(){}}}),_=tn({name:`${t}/internalSubscriptions`,initialState:Ti,reducers:{subscriptionsUpdated:{reducer(T,R){return rc(T,R.payload)},prepare:vr()}}}),I=tn({name:`${t}/config`,initialState:{online:e1(),focused:jg(),middlewareRegistered:!1,...o},reducers:{middlewareRegistered(T,{payload:R}){T.middlewareRegistered=T.middlewareRegistered==="conflict"||h!==R?"conflict":!0}},extraReducers:T=>{T.addCase(Ii,R=>{R.online=!0}).addCase(bo,R=>{R.online=!1}).addCase(_i,R=>{R.focused=!0}).addCase(Ao,R=>{R.focused=!1}).addMatcher(a,R=>({...R}))}}),N=zl({queries:d.reducer,mutations:p.reducer,provided:v.reducer,subscriptions:_.reducer,config:I.reducer}),w=(T,R)=>N(s.match(R)?void 0:T,R),C={...I.actions,...d.actions,...g.actions,..._.actions,...p.actions,...v.actions,resetApiState:s};return{reducer:w,actions:C}}var Lo=Symbol.for("RTKQ/skipToken"),Lc={status:"uninitialized"},kc=We(Lc,()=>{}),Fc=We(Lc,()=>{});function h1({serializeQueryArgs:t,reducerPath:e,createSelector:r}){const n=g=>kc,i=g=>Fc;return{buildQuerySelector:c,buildInfiniteQuerySelector:d,buildMutationSelector:p,selectInvalidatedBy:m,selectCachedArgsForQuery:v,selectApiState:f,selectQueries:a,selectMutations:o,selectQueryEntry:l,selectConfig:s};function h(g){return{...g,...Cc(g.status)}}function f(g){const _=g[e];if(Ue.NODE_ENV!=="production"&&!_){if(f.triggered)return _;f.triggered=!0,console.error(`Error: No data found at \`state.${e}\`. Did you forget to add the reducer to the store?`)}return _}function a(g){return f(g)?.queries}function l(g,_){return a(g)?.[_]}function o(g){return f(g)?.mutations}function s(g){return f(g)?.config}function u(g,_,I){return N=>{if(N===Lo)return r(n,I);const w=t({queryArgs:N,endpointDefinition:_,endpointName:g});return r(T=>l(T,w)??kc,I)}}function c(g,_){return u(g,_,h)}function d(g,_){const{infiniteQueryOptions:I}=_;function N(w){const C={...w,...Cc(w.status)},{isLoading:T,isError:R,direction:A}=C,b=A==="forward",O=A==="backward";return{...C,hasNextPage:y(I,C.data,C.originalArgs),hasPreviousPage:E(I,C.data,C.originalArgs),isFetchingNextPage:T&&b,isFetchingPreviousPage:T&&O,isFetchNextPageError:R&&b,isFetchPreviousPageError:R&&O}}return u(g,_,N)}function p(){return g=>{let _;return typeof g=="object"?_=Nr(g)??Lo:_=g,r(_===Lo?i:w=>f(w)?.mutations?.[_]??Fc,h)}}function m(g,_){const I=g[e],N=new Set;for(const w of _.filter(Ei).map(Do)){const C=I.provided.tags[w.type];if(!C)continue;let T=(w.id!==void 0?C[w.id]:Ac(Object.values(C)))??[];for(const R of T)N.add(R)}return Ac(Array.from(N.values()).map(w=>{const C=I.queries[w];return C?[{queryCacheKey:w,endpointName:C.endpointName,originalArgs:C.originalArgs}]:[]}))}function v(g,_){return Object.values(a(g)).filter(I=>I?.endpointName===_&&I.status!=="uninitialized").map(I=>I.originalArgs)}function y(g,_,I){return _?Mo(g,_,I)!=null:!1}function E(g,_,I){return!_||!g.getPreviousPageParam?!1:Dc(g,_,I)!=null}}var Vc=WeakMap?new WeakMap:void 0,Uc=({endpointName:t,queryArgs:e})=>{let r="";const n=Vc?.get(e);if(typeof n=="string")r=n;else{const i=JSON.stringify(e,(h,f)=>(f=typeof f=="bigint"?{$bigint:f.toString()}:f,f=Dt(f)?Object.keys(f).sort().reduce((a,l)=>(a[l]=f[l],a),{}):f,f));Dt(e)&&Vc?.set(e,i),r=i}return`${t}(${r})`};function d1(...t){return function(r){const n=mr(o=>r.extractRehydrationInfo?.(o,{reducerPath:r.reducerPath??"api"})),i={reducerPath:"api",keepUnusedDataFor:60,refetchOnMountOrArgChange:!1,refetchOnFocus:!1,refetchOnReconnect:!1,invalidationBehavior:"delayed",...r,extractRehydrationInfo:n,serializeQueryArgs(o){let s=Uc;if("serializeQueryArgs"in o.endpointDefinition){const u=o.endpointDefinition.serializeQueryArgs;s=c=>{const d=u(c);return typeof d=="string"?d:Uc({...c,queryArgs:d})}}else r.serializeQueryArgs&&(s=r.serializeQueryArgs);return s(o)},tagTypes:[...r.tagTypes||[]]},h={endpointDefinitions:{},batch(o){o()},apiUid:gi(),extractRehydrationInfo:n,hasRehydrationInfo:mr(o=>n(o)!=null)},f={injectEndpoints:l,enhanceEndpoints({addTagTypes:o,endpoints:s}){if(o)for(const u of o)i.tagTypes.includes(u)||i.tagTypes.push(u);if(s)for(const[u,c]of Object.entries(s))typeof c=="function"?c(h.endpointDefinitions[u]):Object.assign(h.endpointDefinitions[u]||{},c);return f}},a=t.map(o=>o.init(f,i,h));function l(o){const s=o.endpoints({query:u=>({...u,type:"query"}),mutation:u=>({...u,type:"mutation"}),infiniteQuery:u=>({...u,type:"infinitequery"})});for(const[u,c]of Object.entries(s)){if(o.overrideExisting!==!0&&u in h.endpointDefinitions){if(o.overrideExisting==="throw")throw new Error(Ue.NODE_ENV==="production"?K(39):`called \`injectEndpoints\` to override already-existing endpointName ${u} without specifying \`overrideExisting: true\``);typeof process<"u"&&Ue.NODE_ENV==="development"&&console.error(`called \`injectEndpoints\` to override already-existing endpointName ${u} without specifying \`overrideExisting: true\``);continue}if(typeof process<"u"&&Ue.NODE_ENV==="development"&&Er(c)){const{infiniteQueryOptions:d}=c,{maxPages:p,getPreviousPageParam:m}=d;if(typeof p=="number"){if(p<1)throw new Error(Ue.NODE_ENV==="production"?K(40):`maxPages for endpoint '${u}' must be a number greater than 0`);if(typeof m!="function")throw new Error(Ue.NODE_ENV==="production"?K(41):`getPreviousPageParam for endpoint '${u}' must be a function if maxPages is used`)}}h.endpointDefinitions[u]=c;for(const d of a)d.injectEndpoint(u,c)}return f}return f.injectEndpoints({endpoints:r.endpoints})}}function p1(){return function(){throw new Error(Ue.NODE_ENV==="production"?K(33):"When using `fakeBaseQuery`, all queries & mutations must use the `queryFn` definition syntax.")}}function It(t,...e){return Object.assign(t,...e)}var m1=({api:t,queryThunk:e,internalState:r,mwApi:n})=>{const i=`${t.reducerPath}/subscriptions`;let h=null,f=null;const{updateSubscriptionOptions:a,unsubscribeQueryResult:l}=t.internalActions,o=(m,v)=>{if(a.match(v)){const{queryCacheKey:E,requestId:g,options:_}=v.payload,I=m.get(E);return I?.has(g)&&I.set(g,_),!0}if(l.match(v)){const{queryCacheKey:E,requestId:g}=v.payload,_=m.get(E);return _&&_.delete(g),!0}if(t.internalActions.removeQueryResult.match(v))return m.delete(v.payload.queryCacheKey),!0;if(e.pending.match(v)){const{meta:{arg:E,requestId:g}}=v,_=To(m,E.queryCacheKey,Ro);return E.subscribe&&_.set(g,E.subscriptionOptions??_.get(g)??{}),!0}let y=!1;if(e.rejected.match(v)){const{meta:{condition:E,arg:g,requestId:_}}=v;if(E&&g.subscribe){const I=To(m,g.queryCacheKey,Ro);I.set(_,g.subscriptionOptions??I.get(_)??{}),y=!0}}return y},s=()=>r.currentSubscriptions,d={getSubscriptions:s,getSubscriptionCount:m=>s().get(m)?.size??0,isRequestSubscribed:(m,v)=>!!s()?.get(m)?.get(v)};function p(m){return JSON.parse(JSON.stringify(Object.fromEntries([...m].map(([v,y])=>[v,Object.fromEntries(y)]))))}return(m,v)=>{if(h||(h=p(r.currentSubscriptions)),t.util.resetApiState.match(m))return h={},r.currentSubscriptions.clear(),f=null,[!0,!1];if(t.internalActions.internal_getRTKQSubscriptions.match(m))return[!1,d];const y=o(r.currentSubscriptions,m);let E=!0;if(Ue.NODE_ENV==="test"&&typeof m.type=="string"&&m.type===`${t.reducerPath}/getPolling`)return[!1,r.currentPolls];if(y){f||(f=setTimeout(()=>{const I=p(r.currentSubscriptions),[,N]=nc(h,()=>I);v.next(t.internalActions.subscriptionsUpdated(N)),h=I,f=null},500));const g=typeof m.type=="string"&&!!m.type.startsWith(i),_=e.rejected.match(m)&&m.meta.condition&&!!m.meta.arg.subscribe;E=!g&&!_}return[E,!1]}},v1=2147483647/1e3-1,g1=({reducerPath:t,api:e,queryThunk:r,context:n,internalState:i,selectors:{selectQueryEntry:h,selectConfig:f},getRunningQueryThunk:a,mwApi:l})=>{const{removeQueryResult:o,unsubscribeQueryResult:s,cacheEntriesUpserted:u}=e.internalActions,c=i.runningQueries.get(l.dispatch),d=_t(s.match,r.fulfilled,r.rejected,u.match);function p(g){const _=i.currentSubscriptions.get(g);if(!_)return!1;const I=_.size>0,N=c?.[g]!==void 0;return I||N}const m={},v=(g,_,I)=>{const N=_.getState(),w=f(N);if(d(g)){let C;if(u.match(g))C=g.payload.map(T=>T.queryDescription.queryCacheKey);else{const{queryCacheKey:T}=s.match(g)?g.payload:g.meta.arg;C=[T]}y(C,_,w)}if(e.util.resetApiState.match(g))for(const[C,T]of Object.entries(m))T&&clearTimeout(T),delete m[C];if(n.hasRehydrationInfo(g)){const{queries:C}=n.extractRehydrationInfo(g);y(Object.keys(C),_,w)}};function y(g,_,I){const N=_.getState();for(const w of g){const C=h(N,w);C?.endpointName&&E(w,C.endpointName,_,I)}}function E(g,_,I,N){const C=n.endpointDefinitions[_]?.keepUnusedDataFor??N.keepUnusedDataFor;if(C===1/0)return;const T=Math.max(0,Math.min(C,v1));if(!p(g)){const R=m[g];R&&clearTimeout(R),m[g]=setTimeout(()=>{if(!p(g)){const A=h(I.getState(),g);A?.endpointName&&I.dispatch(a(A.endpointName,A.originalArgs))?.abort(),I.dispatch(o({queryCacheKey:g}))}delete m[g]},T*1e3)}}return v},qc=new Error("Promise never resolved before cacheEntryRemoved."),y1=({api:t,reducerPath:e,context:r,queryThunk:n,mutationThunk:i,internalState:h,selectors:{selectQueryEntry:f,selectApiState:a}})=>{const l=_o(n),o=_o(i),s=Mt(n,i),u={};function c(y,E,g){const _=u[y];_?.valueResolved&&(_.valueResolved({data:E,meta:g}),delete _.valueResolved)}function d(y){const E=u[y];E&&(delete u[y],E.cacheEntryRemoved())}const p=(y,E,g)=>{const _=m(y);function I(N,w,C,T){const R=f(g,w),A=f(E.getState(),w);!R&&A&&v(N,T,w,E,C)}if(n.pending.match(y))I(y.meta.arg.endpointName,_,y.meta.requestId,y.meta.arg.originalArgs);else if(t.internalActions.cacheEntriesUpserted.match(y))for(const{queryDescription:N,value:w}of y.payload){const{endpointName:C,originalArgs:T,queryCacheKey:R}=N;I(C,R,y.meta.requestId,T),c(R,w,{})}else if(i.pending.match(y))E.getState()[e].mutations[_]&&v(y.meta.arg.endpointName,y.meta.arg.originalArgs,_,E,y.meta.requestId);else if(s(y))c(_,y.payload,y.meta.baseQueryMeta);else if(t.internalActions.removeQueryResult.match(y)||t.internalActions.removeMutationResult.match(y))d(_);else if(t.util.resetApiState.match(y))for(const N of Object.keys(u))d(N)};function m(y){return l(y)?y.meta.arg.queryCacheKey:o(y)?y.meta.arg.fixedCacheKey??y.meta.requestId:t.internalActions.removeQueryResult.match(y)?y.payload.queryCacheKey:t.internalActions.removeMutationResult.match(y)?Nr(y.payload):""}function v(y,E,g,_,I){const N=r.endpointDefinitions[y],w=N?.onCacheEntryAdded;if(!w)return;const C={},T=new Promise(L=>{C.cacheEntryRemoved=L}),R=Promise.race([new Promise(L=>{C.valueResolved=L}),T.then(()=>{throw qc})]);R.catch(()=>{}),u[g]=C;const A=t.endpoints[y].select(wi(N)?E:g),b=_.dispatch((L,k,V)=>V),O={..._,getCacheEntry:()=>A(_.getState()),requestId:I,extra:b,updateCachedData:wi(N)?L=>_.dispatch(t.util.updateQueryData(y,E,L)):void 0,cacheDataLoaded:R,cacheEntryRemoved:T},S=w(E,O);Promise.resolve(S).catch(L=>{if(L!==qc)throw L})}return p},E1=({api:t,context:{apiUid:e},reducerPath:r})=>(n,i)=>{t.util.resetApiState.match(n)&&i.dispatch(t.internalActions.middlewareRegistered(e)),typeof process<"u"&&Ue.NODE_ENV==="development"&&t.internalActions.middlewareRegistered.match(n)&&n.payload===e&&i.getState()[r]?.config?.middlewareRegistered==="conflict"&&console.warn(`There is a mismatch between slice and middleware for the reducerPath "${r}".
You can only have one api per reducer path, this will lead to crashes in various situations!${r==="api"?`
If you have multiple apis, you *have* to specify the reducerPath option when using createApi!`:""}`)},_1=({reducerPath:t,context:e,context:{endpointDefinitions:r},mutationThunk:n,queryThunk:i,api:h,assertTagType:f,refetchQuery:a,internalState:l})=>{const{removeQueryResult:o}=h.internalActions,s=_t(Mt(n),vi(n)),u=_t(Mt(n,i),An(n,i));let c=[];const d=(v,y)=>{s(v)?m(Pc(v,"invalidatesTags",r,f),y):u(v)?m([],y):h.util.invalidateTags.match(v)&&m(So(v.payload,void 0,void 0,void 0,void 0,f),y)};function p(v){const{queries:y,mutations:E}=v;for(const g of[y,E])for(const _ in g)if(g[_]?.status==="pending")return!0;return!1}function m(v,y){const E=y.getState(),g=E[t];if(c.push(...v),g.config.invalidationBehavior==="delayed"&&p(g))return;const _=c;if(c=[],_.length===0)return;const I=h.util.selectInvalidatedBy(E,_);e.batch(()=>{const N=Array.from(I.values());for(const{queryCacheKey:w}of N){const C=g.queries[w],T=To(l.currentSubscriptions,w,Ro);C&&(T.size===0?y.dispatch(o({queryCacheKey:w})):C.status!=="uninitialized"&&y.dispatch(a(C)))}})}return d},I1=({reducerPath:t,queryThunk:e,api:r,refetchQuery:n,internalState:i})=>{const{currentPolls:h,currentSubscriptions:f}=i,a=new Set;let l=null;const o=(v,y)=>{(r.internalActions.updateSubscriptionOptions.match(v)||r.internalActions.unsubscribeQueryResult.match(v))&&s(v.payload.queryCacheKey,y),(e.pending.match(v)||e.rejected.match(v)&&v.meta.condition)&&s(v.meta.arg.queryCacheKey,y),(e.fulfilled.match(v)||e.rejected.match(v)&&!v.meta.condition)&&u(v.meta.arg,y),r.util.resetApiState.match(v)&&(p(),l&&(clearTimeout(l),l=null),a.clear())};function s(v,y){a.add(v),l||(l=setTimeout(()=>{for(const E of a)c({queryCacheKey:E},y);a.clear(),l=null},0))}function u({queryCacheKey:v},y){const E=y.getState()[t],g=E.queries[v],_=f.get(v);if(!g||g.status==="uninitialized")return;const{lowestPollingInterval:I,skipPollingIfUnfocused:N}=m(_);if(!Number.isFinite(I))return;const w=h.get(v);w?.timeout&&(clearTimeout(w.timeout),w.timeout=void 0);const C=Date.now()+I;h.set(v,{nextPollTimestamp:C,pollingInterval:I,timeout:setTimeout(()=>{(E.config.focused||!N)&&y.dispatch(n(g)),u({queryCacheKey:v},y)},I)})}function c({queryCacheKey:v},y){const g=y.getState()[t].queries[v],_=f.get(v);if(!g||g.status==="uninitialized")return;const{lowestPollingInterval:I}=m(_);if(Ue.NODE_ENV==="test"){const C=h.pollUpdateCounters??={};C[v]??=0,C[v]++}if(!Number.isFinite(I)){d(v);return}const N=h.get(v),w=Date.now()+I;(!N||w<N.nextPollTimestamp)&&u({queryCacheKey:v},y)}function d(v){const y=h.get(v);y?.timeout&&clearTimeout(y.timeout),h.delete(v)}function p(){for(const v of h.keys())d(v)}function m(v=new Map){let y=!1,E=Number.POSITIVE_INFINITY;for(const g of v.values())g.pollingInterval&&(E=Math.min(g.pollingInterval,E),y=g.skipPollingIfUnfocused||y);return{lowestPollingInterval:E,skipPollingIfUnfocused:y}}return o},N1=({api:t,context:e,queryThunk:r,mutationThunk:n})=>{const i=Eo(r,n),h=An(r,n),f=Mt(r,n),a={};return(o,s)=>{if(i(o)){const{requestId:u,arg:{endpointName:c,originalArgs:d}}=o.meta,p=e.endpointDefinitions[c],m=p?.onQueryStarted;if(m){const v={},y=new Promise((I,N)=>{v.resolve=I,v.reject=N});y.catch(()=>{}),a[u]=v;const E=t.endpoints[c].select(wi(p)?d:u),g=s.dispatch((I,N,w)=>w),_={...s,getCacheEntry:()=>E(s.getState()),requestId:u,extra:g,updateCachedData:wi(p)?I=>s.dispatch(t.util.updateQueryData(c,d,I)):void 0,queryFulfilled:y};m(d,_)}}else if(f(o)){const{requestId:u,baseQueryMeta:c}=o.meta;a[u]?.resolve({data:o.payload,meta:c}),delete a[u]}else if(h(o)){const{requestId:u,rejectedWithValue:c,baseQueryMeta:d}=o.meta;a[u]?.reject({error:o.payload??o.error,isUnhandledError:!c,meta:d}),delete a[u]}}},w1=({reducerPath:t,context:e,api:r,refetchQuery:n,internalState:i})=>{const{removeQueryResult:h}=r.internalActions,f=(l,o)=>{_i.match(l)&&a(o,"refetchOnFocus"),Ii.match(l)&&a(o,"refetchOnReconnect")};function a(l,o){const s=l.getState()[t],u=s.queries,c=i.currentSubscriptions;e.batch(()=>{for(const d of c.keys()){const p=u[d],m=c.get(d);if(!m||!p)continue;const v=[...m.values()];(v.some(E=>E[o]===!0)||v.every(E=>E[o]===void 0)&&s.config[o])&&(m.size===0?l.dispatch(h({queryCacheKey:d})):p.status!=="uninitialized"&&l.dispatch(n(p)))}})}return f};function C1(t){const{reducerPath:e,queryThunk:r,api:n,context:i,internalState:h}=t,{apiUid:f}=i,a={invalidateTags:Ve(`${e}/invalidateTags`)},l=c=>c.type.startsWith(`${e}/`),o=[E1,g1,_1,I1,y1,N1];return{middleware:c=>{let d=!1;const p={...t,internalState:h,refetchQuery:u,isThisApiSliceAction:l,mwApi:c},m=o.map(E=>E(p)),v=m1(p),y=w1(p);return E=>g=>{if(!io(g))return E(g);d||(d=!0,c.dispatch(n.internalActions.middlewareRegistered(f)));const _={...c,next:E},I=c.getState(),[N,w]=v(g,_,I);let C;if(N?C=E(g):C=w,c.getState()[e]&&(y(g,_,I),l(g)||i.hasRehydrationInfo(g)))for(const T of m)T(g,_,I);return C}},actions:a};function u(c){return t.api.endpoints[c.endpointName].initiate(c.originalArgs,{subscribe:!1,forceRefetch:!0})}}var Bc=Symbol(),T1=({createSelector:t=uc}={})=>({name:Bc,init(e,{baseQuery:r,tagTypes:n,reducerPath:i,serializeQueryArgs:h,keepUnusedDataFor:f,refetchOnMountOrArgChange:a,refetchOnFocus:l,refetchOnReconnect:o,invalidationBehavior:s,onSchemaFailure:u,catchSchemaFailure:c,skipSchemaValidation:d},p){eg();const m=Z=>(typeof process<"u"&&Ue.NODE_ENV==="development"&&(n.includes(Z.type)||console.error(`Tag type '${Z.type}' was used, but not specified in \`tagTypes\`!`)),Z);Object.assign(e,{reducerPath:i,endpoints:{},internalActions:{onOnline:Ii,onOffline:bo,onFocus:_i,onFocusLost:Ao},util:{}});const v=h1({serializeQueryArgs:h,reducerPath:i,createSelector:t}),{selectInvalidatedBy:y,selectCachedArgsForQuery:E,buildQuerySelector:g,buildInfiniteQuerySelector:_,buildMutationSelector:I}=v;It(e.util,{selectInvalidatedBy:y,selectCachedArgsForQuery:E});const{queryThunk:N,infiniteQueryThunk:w,mutationThunk:C,patchQueryData:T,updateQueryData:R,upsertQueryData:A,prefetch:b,buildMatchThunkActions:O}=c1({baseQuery:r,reducerPath:i,context:p,api:e,serializeQueryArgs:h,assertTagType:m,selectors:v,onSchemaFailure:u,catchSchemaFailure:c,skipSchemaValidation:d}),{reducer:S,actions:L}=f1({context:p,queryThunk:N,mutationThunk:C,serializeQueryArgs:h,reducerPath:i,assertTagType:m,config:{refetchOnFocus:l,refetchOnReconnect:o,refetchOnMountOrArgChange:a,keepUnusedDataFor:f,reducerPath:i,invalidationBehavior:s}});It(e.util,{patchQueryData:T,updateQueryData:R,upsertQueryData:A,prefetch:b,resetApiState:L.resetApiState,upsertQueryEntries:L.cacheEntriesUpserted}),It(e.internalActions,L);const k={currentSubscriptions:new Map,currentPolls:new Map,runningQueries:new Map,runningMutations:new Map},{buildInitiateQuery:V,buildInitiateInfiniteQuery:U,buildInitiateMutation:M,getRunningMutationThunk:H,getRunningMutationsThunk:J,getRunningQueriesThunk:ue,getRunningQueryThunk:z}=l1({queryThunk:N,mutationThunk:C,infiniteQueryThunk:w,api:e,serializeQueryArgs:h,context:p,internalState:k});It(e.util,{getRunningMutationThunk:H,getRunningMutationsThunk:J,getRunningQueryThunk:z,getRunningQueriesThunk:ue});const{middleware:ie,actions:re}=C1({reducerPath:i,context:p,queryThunk:N,mutationThunk:C,infiniteQueryThunk:w,api:e,assertTagType:m,selectors:v,getRunningQueryThunk:z,internalState:k});return It(e.util,re),It(e,{reducer:S,middleware:ie}),{name:Bc,injectEndpoint(Z,j){const $=e,G=$.endpoints[Z]??={};Ni(j)&&It(G,{name:Z,select:g(Z,j),initiate:V(Z,j)},O(N,Z)),o1(j)&&It(G,{name:Z,select:I(),initiate:M(Z)},O(C,Z)),Er(j)&&It(G,{name:Z,select:_(Z,j),initiate:U(Z,j)},O(N,Z))}}}}),R1=d1(T1());const A1=t=>{try{const e=JSON.stringify(t);localStorage.setItem("econolabs",e)}catch(e){console.log(e)}};function b1(){const t=new Date;let e=t.getMonth()+1,r=t.getDay(),n=t.getSeconds(),i=t.getMilliseconds();e.toString().length<2&&(e="0"+(t.getMonth()+1)),n.toString().length<2&&(n="0"+t.getMinutes());let h="user-"+e+"-"+r+"-"+n+"-"+i+"@gmail.com";return{email:h,user:"Anonymous "+i+n,userEmail:h.replace(/[^a-zA-Z0-9]/g,"_")}}const O1=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];function S1(t){let e={};for(var r=0;r<t.length;r++)for(var n=t[r],i=0;i<n.length;i++)t[r][i]!==""&&(e[O1[i]+(r+1)]=t[r][i]);return e}function Pe(){return Pe=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Pe.apply(this,arguments)}function it(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,h;for(h=0;h<n.length;h++)i=n[h],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}var D1=Ri(function(t){return typeof t=="string"?t:null}),Nt=function(e){return e!=null};function Ri(t){return function(e){return Nt(t(e))}}var P1=function(e){return e.length>0},ft=function(e){return Object.keys(e).reduce(function(r,n){var i,h=e[n];return Pe({},r,Nt(h)?(i={},i[n]=h,i):{})},{})};function ko(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=e.length-1;return function(){for(var i=arguments.length,h=new Array(i),f=0;f<i;f++)h[f]=arguments[f];for(var a=e[0].apply(this,h),l=1;l<=n;l++)a=e[l].call(this,a);return a}}var M1=Ri(function(t){return Nt(t)&&typeof t=="object"&&!Array.isArray(t)?t:null}),L1=Ri(function(t){return Array.isArray(t)&&t.every(D1)&&P1(t)?t:null}),k1=Ri(function(t){return M1(t)&&"errors"in t&&L1(t.errors)?{errors:t.errors}:null}),F1=function(e){return k1(e)?{errors:e.errors,source:"api"}:{errors:["Responded with a status code outside the 2xx range, and the response body is not recognisable."],source:"decoding"}},wr=function(e){this.message=e},V1=function(e){return/application\/[^+]*[+]?(json);?.*/.test(e)},U1=function(e){var r=e.headers.get("content-type");return Nt(r)&&V1(r)},Hc=function(e){if(U1(e))return e.json().catch(function(r){throw new wr("unable to parse JSON response.")});throw new wr("expected JSON response from server.")},q1=function(e){return function(r){return(r.ok?e({response:r}).then(function(n){return{type:"success",status:r.status,response:n,originalResponse:r}}):Hc(r).then(function(n){return Pe({type:"error",status:r.status},F1(n),{originalResponse:r})})).catch(function(n){if(n instanceof wr)return{type:"error",source:"decoding",status:r.status,originalResponse:r,errors:[n.message]};throw n})}},Ke=function(){return function(e){var r=e.response;return Hc(r)}},B1=function(e){return function(r){Object.keys(e).forEach(function(n){return r.searchParams.set(n,e[n].toString())})}},H1=function(e){return function(r){r.pathname==="/"?r.pathname=e:r.pathname+=e}},G1=function(e){var r=e.pathname,n=e.query;return function(i){var h=new URL(i);return H1(r)(h),B1(n)(h),h.toString()}},W1=function(e){var r={};return e.forEach(function(n,i){r[i]=n}),r},z1=function(e){var r=new URL(e),n=r.pathname,i=r.searchParams,h=W1(i);return{query:h,pathname:n==="/"?void 0:n}},Me=function(e){return function(r,n){n===void 0&&(n={});var i=e(r),h=i.headers,f=i.query,a=it(i,["headers","query"]);return Pe({},a,n,{query:f,headers:Pe({},h,n.headers)})}},Ae=function(e){return e},$1=function(e){var r=e.accessKey,n=e.apiVersion,i=n===void 0?"v1":n,h=e.apiUrl,f=h===void 0?"https://api.unsplash.com":h,a=e.headers,l=e.fetch,o=it(e,["accessKey","apiVersion","apiUrl","headers","fetch"]);return function(s){var u=s.handleResponse,c=s.handleRequest;return ko(c,function(d){var p=d.pathname,m=d.query,v=d.method,y=v===void 0?"GET":v,E=d.headers,g=d.body,_=d.signal,I=G1({pathname:p,query:m})(f),N=Pe({method:y,headers:Pe({},a,E,{"Accept-Version":i},Nt(r)?{Authorization:"Client-ID "+r}:{}),body:g,signal:_},o),w=l??fetch;return w(I,N).then(q1(u))})}},Fo="x-total",Y1=function(e){var r=e.headers.get(Fo);if(Nt(r)){var n=parseInt(r);if(Number.isInteger(n))return n;throw new wr("expected "+Fo+" header to be valid integer.")}else throw new wr("expected "+Fo+" header to exist.")},Lt=function(){return function(e){var r=e.response;return Ke()({response:r}).then(function(n){return{results:n,total:Y1(r)}})}},Gc=function(e){return Nt(e)?{collections:e.join()}:{}},Q1=function(e){return Nt(e)?{topics:e.join()}:{}},st=function(e){var r=e.page,n=e.perPage,i=e.orderBy;return ft({per_page:n,order_by:i,page:r})},Ai="/collections",K1=(function(){var t=function(r){var n=r.collectionId;return Ai+"/"+n+"/photos"};return Ae({getPathname:t,handleRequest:Me(function(e){var r=e.collectionId,n=e.orientation,i=it(e,["collectionId","orientation"]);return{pathname:t({collectionId:r}),query:ft(Pe({},st(i),{orientation:n}))}}),handleResponse:Lt()})})(),X1=(function(){var t=function(r){var n=r.collectionId;return Ai+"/"+n};return Ae({getPathname:t,handleRequest:Me(function(e){var r=e.collectionId;return{pathname:t({collectionId:r}),query:{}}}),handleResponse:Ke()})})(),J1=(function(){var t=function(){return Ai};return Ae({getPathname:t,handleRequest:Me(function(e){return e===void 0&&(e={}),{pathname:t(),query:st(e)}}),handleResponse:Lt()})})(),Z1=(function(){var t=function(r){var n=r.collectionId;return Ai+"/"+n+"/related"};return Ae({getPathname:t,handleRequest:Me(function(e){var r=e.collectionId;return{pathname:t({collectionId:r}),query:{}}}),handleResponse:Ke()})})(),Cr="/photos",x1=(function(){var t=function(){return Cr};return Ae({getPathname:function(r){return t()},handleRequest:Me(function(e){return e===void 0&&(e={}),{pathname:Cr,query:ft(st(e))}}),handleResponse:Lt()})})(),j1=(function(){var t=function(r){var n=r.photoId;return Cr+"/"+n};return Ae({getPathname:t,handleRequest:Me(function(e){var r=e.photoId;return{pathname:t({photoId:r}),query:{}}}),handleResponse:Ke()})})(),e0=(function(){var t=function(r){var n=r.photoId;return Cr+"/"+n+"/statistics"};return Ae({getPathname:t,handleRequest:Me(function(e){var r=e.photoId;return{pathname:t({photoId:r}),query:{}}}),handleResponse:Ke()})})(),t0=(function(){var t=function(){return Cr+"/random"};return Ae({getPathname:t,handleRequest:Me(function(e){var r=e===void 0?{}:e,n=r.collectionIds,i=r.contentFilter,h=r.topicIds,f=it(r,["collectionIds","contentFilter","topicIds"]);return{pathname:t(),query:ft(Pe({},f,{content_filter:i},Gc(n),Q1(h))),headers:{"cache-control":"no-cache"}}}),handleResponse:Ke()})})(),n0={handleRequest:Me(function(t){var e=t.downloadLocation,r=z1(e),n=r.pathname,i=r.query;if(!Nt(n))throw new Error("Could not parse pathname from url.");return{pathname:n,query:ft(i)}}),handleResponse:Ke()},Vo="/search",r0=(function(){var t=function(){return Vo+"/photos"};return Ae({getPathname:function(r){return t()},handleRequest:Me(function(e){var r=e.query,n=e.page,i=e.perPage,h=e.orderBy,f=e.collectionIds,a=e.lang,l=e.contentFilter,o=it(e,["query","page","perPage","orderBy","collectionIds","lang","contentFilter"]);return{pathname:t(),query:ft(Pe({query:r,content_filter:l,lang:a,order_by:h},st({page:n,perPage:i}),Gc(f),o))}}),handleResponse:Ke()})})(),i0=(function(){var t=function(){return Vo+"/collections"};return Ae({getPathname:function(r){return t()},handleRequest:Me(function(e){var r=e.query,n=it(e,["query"]);return{pathname:t(),query:Pe({query:r},st(n))}}),handleResponse:Ke()})})(),s0=(function(){var t=function(){return Vo+"/users"};return Ae({getPathname:function(r){return t()},handleRequest:Me(function(e){var r=e.query,n=it(e,["query"]);return{pathname:t(),query:Pe({query:r},st(n))}}),handleResponse:Ke()})})(),bi="/users",o0=(function(){var t=function(r){var n=r.username;return bi+"/"+n};return Ae({getPathname:t,handleRequest:Me(function(e){var r=e.username;return{pathname:t({username:r}),query:{}}}),handleResponse:Ke()})})(),a0=(function(){var t=function(r){var n=r.username;return bi+"/"+n+"/photos"};return Ae({getPathname:t,handleRequest:Me(function(e){var r=e.username,n=e.stats,i=e.orientation,h=it(e,["username","stats","orientation"]);return{pathname:t({username:r}),query:ft(Pe({},st(h),{orientation:i,stats:n}))}}),handleResponse:Lt()})})(),u0=(function(){var t=function(r){var n=r.username;return bi+"/"+n+"/likes"};return Ae({getPathname:t,handleRequest:Me(function(e){var r=e.username,n=e.orientation,i=it(e,["username","orientation"]);return{pathname:t({username:r}),query:ft(Pe({},st(i),{orientation:n}))}}),handleResponse:Lt()})})(),l0=(function(){var t=function(r){var n=r.username;return bi+"/"+n+"/collections"};return Ae({getPathname:t,handleRequest:Me(function(e){var r=e.username,n=it(e,["username"]);return{pathname:t({username:r}),query:st(n)}}),handleResponse:Lt()})})(),Wc="/topics",Oi=function(e){var r=e.topicIdOrSlug;return Wc+"/"+r},c0=Ae({getPathname:Oi,handleRequest:function(e){var r=e.page,n=e.perPage,i=e.orderBy,h=e.topicIdsOrSlugs;return{pathname:Wc,query:ft(Pe({},st({page:r,perPage:n}),{ids:h?.join(","),order_by:i}))}},handleResponse:Lt()}),f0=Ae({getPathname:Oi,handleRequest:function(e){var r=e.topicIdOrSlug;return{pathname:Oi({topicIdOrSlug:r}),query:{}}},handleResponse:Ke()}),h0=(function(){var t=ko(Oi,function(e){return e+"/photos"});return Ae({getPathname:t,handleRequest:function(r){var n=r.topicIdOrSlug,i=r.orientation,h=it(r,["topicIdOrSlug","orientation"]);return{pathname:t({topicIdOrSlug:n}),query:ft(Pe({},st(h),{orientation:i}))}},handleResponse:Lt()})})(),zc;(function(t){t.Afrikaans="af",t.Amharic="am",t.Arabic="ar",t.Azerbaijani="az",t.Belarusian="be",t.Bulgarian="bg",t.Bengali="bn",t.Bosnian="bs",t.Catalan="ca",t.Cebuano="ceb",t.Corsican="co",t.Czech="cs",t.Welsh="cy",t.Danish="da",t.German="de",t.Greek="el",t.English="en",t.Esperanto="eo",t.Spanish="es",t.Estonian="et",t.Basque="eu",t.Persian="fa",t.Finnish="fi",t.French="fr",t.Frisian="fy",t.Irish="ga",t.ScotsGaelic="gd",t.Galician="gl",t.Gujarati="gu",t.Hausa="ha",t.Hawaiian="haw",t.Hindi="hi",t.Hmong="hmn",t.Croatian="hr",t.HaitianCreole="ht",t.Hungarian="hu",t.Armenian="hy",t.Indonesian="id",t.Igbo="ig",t.Icelandic="is",t.Italian="it",t.Hebrew="iw",t.Japanese="ja",t.Javanese="jw",t.Georgian="ka",t.Kazakh="kk",t.Khmer="km",t.Kannada="kn",t.Korean="ko",t.Kurdish="ku",t.Kyrgyz="ky",t.Latin="la",t.Luxembourgish="lb",t.Lao="lo",t.Lithuanian="lt",t.Latvian="lv",t.Malagasy="mg",t.Maori="mi",t.Macedonian="mk",t.Malayalam="ml",t.Mongolian="mn",t.Marathi="mr",t.Malay="ms",t.Maltese="mt",t.Myanmar="my",t.Nepali="ne",t.Dutch="nl",t.Norwegian="no",t.Nyanja="ny",t.Oriya="or",t.Punjabi="pa",t.Polish="pl",t.Pashto="ps",t.Portuguese="pt",t.Romanian="ro",t.Russian="ru",t.Kinyarwanda="rw",t.Sindhi="sd",t.Sinhala="si",t.Slovak="sk",t.Slovenian="sl",t.Samoan="sm",t.Shona="sn",t.Somali="so",t.Albanian="sq",t.Serbian="sr",t.Sesotho="st",t.Sundanese="su",t.Swedish="sv",t.Swahili="sw",t.Tamil="ta",t.Telugu="te",t.Tajik="tg",t.Thai="th",t.Turkmen="tk",t.Filipino="tl",t.Turkish="tr",t.Tatar="tt",t.Uighur="ug",t.Ukrainian="uk",t.Urdu="ur",t.Uzbek="uz",t.Vietnamese="vi",t.Xhosa="xh",t.Yiddish="yi",t.Yoruba="yo",t.ChineseSimplified="zh",t.ChineseTraditional="zh-TW",t.Zulu="zu"})(zc||(zc={}));var $c;(function(t){t.LATEST="latest",t.POPULAR="popular",t.VIEWS="views",t.DOWNLOADS="downloads",t.OLDEST="oldest"})($c||($c={}));var d0=ko($1,function(t){return{photos:{get:t(j1),list:t(x1),getStats:t(e0),getRandom:t(t0),trackDownload:t(n0)},users:{getPhotos:t(a0),getCollections:t(l0),getLikes:t(u0),get:t(o0)},search:{getCollections:t(i0),getPhotos:t(r0),getUsers:t(s0)},collections:{getPhotos:t(K1),get:t(X1),list:t(J1),getRelated:t(Z1)},topics:{list:t(c0),get:t(f0),getPhotos:t(h0)}}});function Yc(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Si={exports:{}},Qc;function p0(){if(Qc)return Si.exports;Qc=1;function t(){}return t.prototype={on:function(e,r,n){var i=this.e||(this.e={});return(i[e]||(i[e]=[])).push({fn:r,ctx:n}),this},once:function(e,r,n){var i=this;function h(){i.off(e,h),r.apply(n,arguments)}return h._=r,this.on(e,h,n)},emit:function(e){var r=[].slice.call(arguments,1),n=((this.e||(this.e={}))[e]||[]).slice(),i=0,h=n.length;for(i;i<h;i++)n[i].fn.apply(n[i].ctx,r);return this},off:function(e,r){var n=this.e||(this.e={}),i=n[e],h=[];if(i&&r)for(var f=0,a=i.length;f<a;f++)i[f].fn!==r&&i[f].fn._!==r&&h.push(i[f]);return h.length?n[e]=h:delete n[e],this}},Si.exports=t,Si.exports.TinyEmitter=t,Si.exports}var m0=p0();const v0=Yc(m0);function Xe(t){var e;return typeof t=="number"?e=t:typeof t=="string"&&(e=t.indexOf(".")>-1?parseFloat(t):parseInt(t,10)),e}function g0(t){return-1*Xe(t)}var ht;function kt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Di="ERROR",Kc="DIV/0",Pi="NAME",y0="N/A",E0="NULL",_0="NUM",I0="REF",On="VALUE",Tr=(ht={},kt(ht,Di,"#ERROR!"),kt(ht,Kc,"#DIV/0!"),kt(ht,Pi,"#NAME?"),kt(ht,y0,"#N/A"),kt(ht,E0,"#NULL!"),kt(ht,_0,"#NUM!"),kt(ht,I0,"#REF!"),kt(ht,On,"#VALUE!"),ht);function Mi(t){var e;return t=(t+"").replace(/#|!|\?/g,""),Tr[t]&&(e=Tr[t]),e||null}function N0(t){var e=!1;for(var r in Tr)if(Object.prototype.hasOwnProperty.call(Tr,r)&&Tr[r]===t){e=!0;break}return e}var w0="+";function Uo(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];var i=r.reduce(function(h,f){return h+Xe(f)},Xe(t));if(isNaN(i))throw Error(On);return i}Uo.SYMBOL=w0;var C0="&";function qo(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return e.reduce(function(n,i){return n+i.toString()},"")}qo.SYMBOL=C0;var T0="/";function Bo(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];var i=r.reduce(function(h,f){return h/Xe(f)},Xe(t));if(i===1/0)throw Error(Kc);if(isNaN(i))throw Error(On);return i}Bo.SYMBOL=T0;var R0="=";function Ho(t,e){return t===e}Ho.SYMBOL=R0;var Go={},P={},Wo={},zo={},ot={},Xc;function Je(){return Xc||(Xc=1,ot.nil=new Error("#NULL!"),ot.div0=new Error("#DIV/0!"),ot.value=new Error("#VALUE!"),ot.ref=new Error("#REF!"),ot.name=new Error("#NAME?"),ot.num=new Error("#NUM!"),ot.na=new Error("#N/A"),ot.error=new Error("#ERROR!"),ot.data=new Error("#GETTING_DATA")),ot}var Jc;function dt(){return Jc||(Jc=1,(function(t){var e=Je();t.flattenShallow=function(n){return!n||!n.reduce?n:n.reduce(function(i,h){var f=Array.isArray(i),a=Array.isArray(h);return f&&a?i.concat(h):f?(i.push(h),i):a?[i].concat(h):[i,h]})},t.isFlat=function(n){if(!n)return!1;for(var i=0;i<n.length;++i)if(Array.isArray(n[i]))return!1;return!0},t.flatten=function(){for(var n=t.argsToArray.apply(null,arguments);!t.isFlat(n);)n=t.flattenShallow(n);return n},t.argsToArray=function(n){var i=[];return t.arrayEach(n,function(h){i.push(h)}),i},t.numbers=function(){var n=this.flatten.apply(null,arguments);return n.filter(function(i){return typeof i=="number"})},t.cleanFloat=function(n){var i=1e14;return Math.round(n*i)/i},t.parseBool=function(n){if(typeof n=="boolean"||n instanceof Error)return n;if(typeof n=="number")return n!==0;if(typeof n=="string"){var i=n.toUpperCase();if(i==="TRUE")return!0;if(i==="FALSE")return!1}return n instanceof Date&&!isNaN(n)?!0:e.value},t.parseNumber=function(n){return n===void 0||n===""||isNaN(n)?e.value:parseFloat(n)},t.parseNumberArray=function(n){var i;if(!n||(i=n.length)===0)return e.value;for(var h;i--;){if(h=t.parseNumber(n[i]),h===e.value)return h;n[i]=h}return n},t.parseMatrix=function(n){if(!n||n.length===0)return e.value;for(var i,h=0;h<n.length;h++)if(i=t.parseNumberArray(n[h]),n[h]=i,i instanceof Error)return i;return n};var r=new Date(Date.UTC(1900,0,1));t.parseDate=function(n){if(!isNaN(n)){if(n instanceof Date)return new Date(n);var i=parseInt(n,10);return i<0?e.num:i<=60?new Date(r.getTime()+(i-1)*864e5):new Date(r.getTime()+(i-2)*864e5)}return typeof n=="string"&&(n=new Date(n),!isNaN(n))?n:e.value},t.parseDateArray=function(n){for(var i=n.length,h;i--;){if(h=this.parseDate(n[i]),h===e.value)return h;n[i]=h}return n},t.anyIsError=function(){for(var n=arguments.length;n--;)if(arguments[n]instanceof Error)return!0;return!1},t.arrayValuesToNumbers=function(n){for(var i=n.length,h;i--;)if(h=n[i],typeof h!="number"){if(h===!0){n[i]=1;continue}if(h===!1){n[i]=0;continue}if(typeof h=="string"){var f=this.parseNumber(h);f instanceof Error?n[i]=0:n[i]=f}}return n},t.rest=function(n,i){return i=i||1,!n||typeof n.slice!="function"?n:n.slice(i)},t.initial=function(n,i){return i=i||1,!n||typeof n.slice!="function"?n:n.slice(0,n.length-i)},t.arrayEach=function(n,i){for(var h=-1,f=n.length;++h<f&&i(n[h],h,n)!==!1;);return n},t.transpose=function(n){return n?n[0].map(function(i,h){return n.map(function(f){return f[h]})}):e.value}})(zo)),zo}var $o={},Yo={},Zc;function Qo(){return Zc||(Zc=1,(function(t){var e=dt(),r=Je();t.ASC=function(){throw new Error("ASC is not implemented")},t.BAHTTEXT=function(){throw new Error("BAHTTEXT is not implemented")},t.CHAR=function(n){return n=e.parseNumber(n),n instanceof Error?n:String.fromCharCode(n)},t.CLEAN=function(n){n=n||"";var i=/[\0-\x1F]/g;return n.replace(i,"")},t.CODE=function(n){n=n||"";var i=n.charCodeAt(0);return isNaN(i)&&(i=r.na),i},t.CONCATENATE=function(){for(var n=e.flatten(arguments),i=0;(i=n.indexOf(!0))>-1;)n[i]="TRUE";for(var h=0;(h=n.indexOf(!1))>-1;)n[h]="FALSE";return n.join("")},t.DBCS=function(){throw new Error("DBCS is not implemented")},t.DOLLAR=function(){throw new Error("DOLLAR is not implemented")},t.EXACT=function(n,i){return arguments.length!==2?r.na:n===i},t.FIND=function(n,i,h){return arguments.length<2?r.na:(h=h===void 0?0:h,i?i.indexOf(n,h-1)+1:null)},t.FIXED=function(){throw new Error("FIXED is not implemented")},t.HTML2TEXT=function(n){var i="";return n&&(n instanceof Array?n.forEach(function(h){i!==""&&(i+=`
`),i+=h.replace(/<(?:.|\n)*?>/gm,"")}):i=n.replace(/<(?:.|\n)*?>/gm,"")),i},t.LEFT=function(n,i){return i=i===void 0?1:i,i=e.parseNumber(i),i instanceof Error||typeof n!="string"?r.value:n?n.substring(0,i):null},t.LEN=function(n){return arguments.length===0?r.error:typeof n=="string"?n?n.length:0:n.length?n.length:r.value},t.LOWER=function(n){return typeof n!="string"?r.value:n&&n.toLowerCase()},t.MID=function(n,i,h){if(i=e.parseNumber(i),h=e.parseNumber(h),e.anyIsError(i,h)||typeof n!="string")return h;var f=i-1,a=f+h;return n.substring(f,a)},t.NUMBERVALUE=function(n,i,h){return i=typeof i>"u"?".":i,h=typeof h>"u"?",":h,Number(n.replace(i,".").replace(h,""))},t.PRONETIC=function(){throw new Error("PRONETIC is not implemented")},t.PROPER=function(n){return n===void 0||n.length===0||(n===!0&&(n="TRUE"),n===!1&&(n="FALSE"),isNaN(n)&&typeof n=="number")?r.value:(typeof n=="number"&&(n=""+n),n.replace(/\w\S*/g,function(i){return i.charAt(0).toUpperCase()+i.substr(1).toLowerCase()}))},t.REGEXEXTRACT=function(n,i){if(arguments.length<2)return r.na;var h=n.match(new RegExp(i));return h?h[h.length>1?h.length-1:0]:null},t.REGEXMATCH=function(n,i,h){if(arguments.length<2)return r.na;var f=n.match(new RegExp(i));return h?f:!!f},t.REGEXREPLACE=function(n,i,h){return arguments.length<3?r.na:n.replace(new RegExp(i),h)},t.REPLACE=function(n,i,h,f){return i=e.parseNumber(i),h=e.parseNumber(h),e.anyIsError(i,h)||typeof n!="string"||typeof f!="string"?r.value:n.substr(0,i-1)+f+n.substr(i-1+h)},t.REPT=function(n,i){return i=e.parseNumber(i),i instanceof Error?i:new Array(i+1).join(n)},t.RIGHT=function(n,i){return i=i===void 0?1:i,i=e.parseNumber(i),i instanceof Error?i:n?n.substring(n.length-i):r.na},t.SEARCH=function(n,i,h){var f;return typeof n!="string"||typeof i!="string"?r.value:(h=h===void 0?0:h,f=i.toLowerCase().indexOf(n.toLowerCase(),h-1)+1,f===0?r.value:f)},t.SPLIT=function(n,i){return n.split(i)},t.SUBSTITUTE=function(n,i,h,f){if(arguments.length<2)return r.na;if(!n||!i||!h)return n;if(f===void 0)return n.replace(new RegExp(i,"g"),h);for(var a=0,l=0;n.indexOf(i,a)>0;)if(a=n.indexOf(i,a+1),l++,l===f)return n.substring(0,a)+h+n.substring(a+i.length)},t.T=function(n){return typeof n=="string"?n:""},t.TEXT=function(){throw new Error("TEXT is not implemented")},t.TRIM=function(n){return typeof n!="string"?r.value:n.replace(/ +/g," ").trim()},t.UNICHAR=t.CHAR,t.UNICODE=t.CODE,t.UPPER=function(n){return typeof n!="string"?r.value:n.toUpperCase()},t.VALUE=function(){throw new Error("VALUE is not implemented")}})(Yo)),Yo}var Li={exports:{}},A0=Li.exports,xc;function jc(){return xc||(xc=1,(function(t,e){(function(r,n){t.exports=n()})(A0,function(){var r=(function(n,i){var h=Array.prototype.concat,f=Array.prototype.slice,a=Object.prototype.toString;function l(E,g){var _=E>g?E:g;return n.pow(10,17-~~(n.log(_>0?_:-_)*n.LOG10E))}var o=Array.isArray||function(g){return a.call(g)==="[object Array]"};function s(E){return a.call(E)==="[object Function]"}function u(E){return typeof E=="number"?E-E===0:!1}function c(E){return h.apply([],E)}function d(){return new d._init(arguments)}d.fn=d.prototype,d._init=function(g){if(o(g[0]))if(o(g[0][0])){s(g[1])&&(g[0]=d.map(g[0],g[1]));for(var _=0;_<g[0].length;_++)this[_]=g[0][_];this.length=g[0].length}else this[0]=s(g[1])?d.map(g[0],g[1]):g[0],this.length=1;else if(u(g[0]))this[0]=d.seq.apply(null,g),this.length=1;else{if(g[0]instanceof d)return d(g[0].toArray());this[0]=[],this.length=1}return this},d._init.prototype=d.prototype,d._init.constructor=d,d.utils={calcRdx:l,isArray:o,isFunction:s,isNumber:u,toVector:c},d._random_fn=n.random,d.setRandom=function(g){if(typeof g!="function")throw new TypeError("fn is not a function");d._random_fn=g},d.extend=function(g){var _,I;if(arguments.length===1){for(I in g)d[I]=g[I];return this}for(_=1;_<arguments.length;_++)for(I in arguments[_])g[I]=arguments[_][I];return g},d.rows=function(g){return g.length||1},d.cols=function(g){return g[0].length||1},d.dimensions=function(g){return{rows:d.rows(g),cols:d.cols(g)}},d.row=function(g,_){return o(_)?_.map(function(I){return d.row(g,I)}):g[_]},d.rowa=function(g,_){return d.row(g,_)},d.col=function(g,_){if(o(_)){var I=d.arange(g.length).map(function(){return new Array(_.length)});return _.forEach(function(C,T){d.arange(g.length).forEach(function(R){I[R][T]=g[R][C]})}),I}for(var N=new Array(g.length),w=0;w<g.length;w++)N[w]=[g[w][_]];return N},d.cola=function(g,_){return d.col(g,_).map(function(I){return I[0]})},d.diag=function(g){for(var _=d.rows(g),I=new Array(_),N=0;N<_;N++)I[N]=[g[N][N]];return I},d.antidiag=function(g){for(var _=d.rows(g)-1,I=new Array(_),N=0;_>=0;_--,N++)I[N]=[g[N][_]];return I},d.transpose=function(g){var _=[],I,N,w,C,T;for(o(g[0])||(g=[g]),N=g.length,w=g[0].length,T=0;T<w;T++){for(I=new Array(N),C=0;C<N;C++)I[C]=g[C][T];_.push(I)}return _.length===1?_[0]:_},d.map=function(g,_,I){var N,w,C,T,R;for(o(g[0])||(g=[g]),w=g.length,C=g[0].length,T=I?g:new Array(w),N=0;N<w;N++)for(T[N]||(T[N]=new Array(C)),R=0;R<C;R++)T[N][R]=_(g[N][R],N,R);return T.length===1?T[0]:T},d.cumreduce=function(g,_,I){var N,w,C,T,R;for(o(g[0])||(g=[g]),w=g.length,C=g[0].length,T=I?g:new Array(w),N=0;N<w;N++)for(T[N]||(T[N]=new Array(C)),C>0&&(T[N][0]=g[N][0]),R=1;R<C;R++)T[N][R]=_(T[N][R-1],g[N][R]);return T.length===1?T[0]:T},d.alter=function(g,_){return d.map(g,_,!0)},d.create=function(g,_,I){var N=new Array(g),w,C;for(s(_)&&(I=_,_=g),w=0;w<g;w++)for(N[w]=new Array(_),C=0;C<_;C++)N[w][C]=I(w,C);return N};function p(){return 0}d.zeros=function(g,_){return u(_)||(_=g),d.create(g,_,p)};function m(){return 1}d.ones=function(g,_){return u(_)||(_=g),d.create(g,_,m)},d.rand=function(g,_){return u(_)||(_=g),d.create(g,_,d._random_fn)};function v(E,g){return E===g?1:0}d.identity=function(g,_){return u(_)||(_=g),d.create(g,_,v)},d.symmetric=function(g){var _=g.length,I,N;if(g.length!==g[0].length)return!1;for(I=0;I<_;I++)for(N=0;N<_;N++)if(g[N][I]!==g[I][N])return!1;return!0},d.clear=function(g){return d.alter(g,p)},d.seq=function(g,_,I,N){s(N)||(N=!1);var w=[],C=l(g,_),T=(_*C-g*C)/((I-1)*C),R=g,A;for(A=0;R<=_&&A<I;A++,R=(g*C+T*C*A)/C)w.push(N?N(R,A):R);return w},d.arange=function(g,_,I){var N=[],w;if(I=I||1,_===i&&(_=g,g=0),g===_||I===0)return[];if(g<_&&I<0)return[];if(g>_&&I>0)return[];if(I>0)for(w=g;w<_;w+=I)N.push(w);else for(w=g;w>_;w+=I)N.push(w);return N},d.slice=(function(){function E(_,I,N,w){var C,T=[],R=_.length;if(I===i&&N===i&&w===i)return d.copy(_);if(I=I||0,N=N||_.length,I=I>=0?I:R+I,N=N>=0?N:R+N,w=w||1,I===N||w===0)return[];if(I<N&&w<0)return[];if(I>N&&w>0)return[];if(w>0)for(C=I;C<N;C+=w)T.push(_[C]);else for(C=I;C>N;C+=w)T.push(_[C]);return T}function g(_,I){var N,w;if(I=I||{},u(I.row)){if(u(I.col))return _[I.row][I.col];var C=d.rowa(_,I.row);return N=I.col||{},E(C,N.start,N.end,N.step)}if(u(I.col)){var T=d.cola(_,I.col);return w=I.row||{},E(T,w.start,w.end,w.step)}w=I.row||{},N=I.col||{};var R=E(_,w.start,w.end,w.step);return R.map(function(A){return E(A,N.start,N.end,N.step)})}return g})(),d.sliceAssign=function(g,_,I){var N,w;if(u(_.row)){if(u(_.col))return g[_.row][_.col]=I;_.col=_.col||{},_.col.start=_.col.start||0,_.col.end=_.col.end||g[0].length,_.col.step=_.col.step||1,N=d.arange(_.col.start,n.min(g.length,_.col.end),_.col.step);var C=_.row;return N.forEach(function(R,A){g[C][R]=I[A]}),g}if(u(_.col)){_.row=_.row||{},_.row.start=_.row.start||0,_.row.end=_.row.end||g.length,_.row.step=_.row.step||1,w=d.arange(_.row.start,n.min(g[0].length,_.row.end),_.row.step);var T=_.col;return w.forEach(function(R,A){g[R][T]=I[A]}),g}return I[0].length===i&&(I=[I]),_.row.start=_.row.start||0,_.row.end=_.row.end||g.length,_.row.step=_.row.step||1,_.col.start=_.col.start||0,_.col.end=_.col.end||g[0].length,_.col.step=_.col.step||1,w=d.arange(_.row.start,n.min(g.length,_.row.end),_.row.step),N=d.arange(_.col.start,n.min(g[0].length,_.col.end),_.col.step),w.forEach(function(R,A){N.forEach(function(b,O){g[R][b]=I[A][O]})}),g},d.diagonal=function(g){var _=d.zeros(g.length,g.length);return g.forEach(function(I,N){_[N][N]=I}),_},d.copy=function(g){return g.map(function(_){return u(_)?_:_.map(function(I){return I})})};var y=d.prototype;return y.length=0,y.push=Array.prototype.push,y.sort=Array.prototype.sort,y.splice=Array.prototype.splice,y.slice=Array.prototype.slice,y.toArray=function(){return this.length>1?f.call(this):f.call(this)[0]},y.map=function(g,_){return d(d.map(this,g,_))},y.cumreduce=function(g,_){return d(d.cumreduce(this,g,_))},y.alter=function(g){return d.alter(this,g),this},(function(E){for(var g=0;g<E.length;g++)(function(_){y[_]=function(I){var N=this,w;return I?(setTimeout(function(){I.call(N,y[_].call(N))}),this):(w=d[_](this),o(w)?d(w):w)}})(E[g])})("transpose clear symmetric rows cols dimensions diag antidiag".split(" ")),(function(E){for(var g=0;g<E.length;g++)(function(_){y[_]=function(I,N){var w=this;return N?(setTimeout(function(){N.call(w,y[_].call(w,I))}),this):d(d[_](this,I))}})(E[g])})("row col".split(" ")),(function(E){for(var g=0;g<E.length;g++)(function(_){y[_]=function(){return d(d[_].apply(null,arguments))}})(E[g])})("create zeros ones rand identity".split(" ")),d})(Math);return(function(n,i){var h=n.utils.isFunction;function f(o,s){return o-s}function a(o,s,u){return i.max(s,i.min(o,u))}n.sum=function(s){for(var u=0,c=s.length;--c>=0;)u+=s[c];return u},n.sumsqrd=function(s){for(var u=0,c=s.length;--c>=0;)u+=s[c]*s[c];return u},n.sumsqerr=function(s){for(var u=n.mean(s),c=0,d=s.length,p;--d>=0;)p=s[d]-u,c+=p*p;return c},n.sumrow=function(s){for(var u=0,c=s.length;--c>=0;)u+=s[c];return u},n.product=function(s){for(var u=1,c=s.length;--c>=0;)u*=s[c];return u},n.min=function(s){for(var u=s[0],c=0;++c<s.length;)s[c]<u&&(u=s[c]);return u},n.max=function(s){for(var u=s[0],c=0;++c<s.length;)s[c]>u&&(u=s[c]);return u},n.unique=function(s){for(var u={},c=[],d=0;d<s.length;d++)u[s[d]]||(u[s[d]]=!0,c.push(s[d]));return c},n.mean=function(s){return n.sum(s)/s.length},n.meansqerr=function(s){return n.sumsqerr(s)/s.length},n.geomean=function(s){var u=s.map(i.log),c=n.mean(u);return i.exp(c)},n.median=function(s){var u=s.length,c=s.slice().sort(f);return u&1?c[u/2|0]:(c[u/2-1]+c[u/2])/2},n.cumsum=function(s){return n.cumreduce(s,function(u,c){return u+c})},n.cumprod=function(s){return n.cumreduce(s,function(u,c){return u*c})},n.diff=function(s){var u=[],c=s.length,d;for(d=1;d<c;d++)u.push(s[d]-s[d-1]);return u},n.rank=function(o){var s,u=[],c={};for(s=0;s<o.length;s++){var d=o[s];c[d]?c[d]++:(c[d]=1,u.push(d))}var p=u.sort(f),m={},v=1;for(s=0;s<p.length;s++){var d=p[s],y=c[d],E=v,g=v+y-1,_=(E+g)/2;m[d]=_,v+=y}return o.map(function(I){return m[I]})},n.mode=function(s){var u=s.length,c=s.slice().sort(f),d=1,p=0,m=0,v=[],y;for(y=0;y<u;y++)c[y]===c[y+1]?d++:(d>p?(v=[c[y]],p=d,m=0):d===p&&(v.push(c[y]),m++),d=1);return m===0?v[0]:v},n.range=function(s){return n.max(s)-n.min(s)},n.variance=function(s,u){return n.sumsqerr(s)/(s.length-(u?1:0))},n.pooledvariance=function(s){var u=s.reduce(function(d,p){return d+n.sumsqerr(p)},0),c=s.reduce(function(d,p){return d+p.length},0);return u/(c-s.length)},n.deviation=function(o){for(var s=n.mean(o),u=o.length,c=new Array(u),d=0;d<u;d++)c[d]=o[d]-s;return c},n.stdev=function(s,u){return i.sqrt(n.variance(s,u))},n.pooledstdev=function(s){return i.sqrt(n.pooledvariance(s))},n.meandev=function(s){for(var u=n.mean(s),c=[],d=s.length-1;d>=0;d--)c.push(i.abs(s[d]-u));return n.mean(c)},n.meddev=function(s){for(var u=n.median(s),c=[],d=s.length-1;d>=0;d--)c.push(i.abs(s[d]-u));return n.median(c)},n.coeffvar=function(s){return n.stdev(s)/n.mean(s)},n.quartiles=function(s){var u=s.length,c=s.slice().sort(f);return[c[i.round(u/4)-1],c[i.round(u/2)-1],c[i.round(u*3/4)-1]]},n.quantiles=function(s,u,c,d){var p=s.slice().sort(f),m=[u.length],v=s.length,y,E,g,_,I,N;for(typeof c>"u"&&(c=3/8),typeof d>"u"&&(d=3/8),y=0;y<u.length;y++)E=u[y],g=c+E*(1-c-d),_=v*E+g,I=i.floor(a(_,1,v-1)),N=a(_-I,0,1),m[y]=(1-N)*p[I-1]+N*p[I];return m},n.percentile=function(s,u,c){var d=s.slice().sort(f),p=u*(d.length+(c?1:-1))+(c?0:1),m=parseInt(p),v=p-m;return m+1<d.length?d[m-1]+v*(d[m]-d[m-1]):d[m-1]},n.percentileOfScore=function(s,u,c){var d=0,p=s.length,m=!1,v,y;for(c==="strict"&&(m=!0),y=0;y<p;y++)v=s[y],(m&&v<u||!m&&v<=u)&&d++;return d/p},n.histogram=function(s,u){u=u||4;var c=n.min(s),d=(n.max(s)-c)/u,p=s.length,m=[],v;for(v=0;v<u;v++)m[v]=0;for(v=0;v<p;v++)m[i.min(i.floor((s[v]-c)/d),u-1)]+=1;return m},n.covariance=function(s,u){var c=n.mean(s),d=n.mean(u),p=s.length,m=new Array(p),v;for(v=0;v<p;v++)m[v]=(s[v]-c)*(u[v]-d);return n.sum(m)/(p-1)},n.corrcoeff=function(s,u){return n.covariance(s,u)/n.stdev(s,1)/n.stdev(u,1)},n.spearmancoeff=function(o,s){return o=n.rank(o),s=n.rank(s),n.corrcoeff(o,s)},n.stanMoment=function(s,u){for(var c=n.mean(s),d=n.stdev(s),p=s.length,m=0,v=0;v<p;v++)m+=i.pow((s[v]-c)/d,u);return m/s.length},n.skewness=function(s){return n.stanMoment(s,3)},n.kurtosis=function(s){return n.stanMoment(s,4)-3};var l=n.prototype;(function(o){for(var s=0;s<o.length;s++)(function(u){l[u]=function(c,d){var p=[],m=0,v=this;if(h(c)&&(d=c,c=!1),d)return setTimeout(function(){d.call(v,l[u].call(v,c))}),this;if(this.length>1){for(v=c===!0?this:this.transpose();m<v.length;m++)p[m]=n[u](v[m]);return p}return n[u](this[0],c)}})(o[s])})("cumsum cumprod".split(" ")),(function(o){for(var s=0;s<o.length;s++)(function(u){l[u]=function(c,d){var p=[],m=0,v=this;if(h(c)&&(d=c,c=!1),d)return setTimeout(function(){d.call(v,l[u].call(v,c))}),this;if(this.length>1){for(u!=="sumrow"&&(v=c===!0?this:this.transpose());m<v.length;m++)p[m]=n[u](v[m]);return c===!0?n[u](n.utils.toVector(p)):p}return n[u](this[0],c)}})(o[s])})("sum sumsqrd sumsqerr sumrow product min max unique mean meansqerr geomean median diff rank mode range variance deviation stdev meandev meddev coeffvar quartiles histogram skewness kurtosis".split(" ")),(function(o){for(var s=0;s<o.length;s++)(function(u){l[u]=function(){var c=[],d=0,p=this,m=Array.prototype.slice.call(arguments),v;if(h(m[m.length-1])){v=m[m.length-1];var y=m.slice(0,m.length-1);return setTimeout(function(){v.call(p,l[u].apply(p,y))}),this}else{v=void 0;var E=function(_){return n[u].apply(p,[_].concat(m))}}if(this.length>1){for(p=p.transpose();d<p.length;d++)c[d]=E(p[d]);return c}return E(this[0])}})(o[s])})("quantiles percentileOfScore".split(" "))})(r,Math),(function(n,i){n.gammaln=function(f){var a=0,l=[76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18],o=1.000000000190015,s,u,c;for(c=(u=s=f)+5.5,c-=(s+.5)*i.log(c);a<6;a++)o+=l[a]/++u;return i.log(2.5066282746310007*o/s)-c},n.loggam=function(f){var a,l,o,s,u,c,d,p=[.08333333333333333,-.002777777777777778,.0007936507936507937,-.0005952380952380952,.0008417508417508418,-.001917526917526918,.00641025641025641,-.02955065359477124,.1796443723688307,-1.3924322169059];if(a=f,d=0,f==1||f==2)return 0;for(f<=7&&(d=i.floor(7-f),a=f+d),l=1/(a*a),o=2*i.PI,u=p[9],c=8;c>=0;c--)u*=l,u+=p[c];if(s=u/a+.5*i.log(o)+(a-.5)*i.log(a)-a,f<=7)for(c=1;c<=d;c++)s-=i.log(a-1),a-=1;return s},n.gammafn=function(f){var a=[-1.716185138865495,24.76565080557592,-379.80425647094563,629.3311553128184,866.9662027904133,-31451.272968848367,-36144.413418691176,66456.14382024054],l=[-30.8402300119739,315.35062697960416,-1015.1563674902192,-3107.771671572311,22538.11842098015,4755.846277527881,-134659.9598649693,-115132.2596755535],o=!1,s=0,u=0,c=0,d=f,p,m,v,y;if(f>171.6243769536076)return 1/0;if(d<=0)if(y=d%1+36e-17,y)o=(d&1?-1:1)*i.PI/i.sin(i.PI*y),d=1-d;else return 1/0;for(v=d,d<1?m=d++:m=(d-=s=(d|0)-1)-1,p=0;p<8;++p)c=(c+a[p])*m,u=u*m+l[p];if(y=c/u+1,v<d)y/=v;else if(v>d)for(p=0;p<s;++p)y*=d,d++;return o&&(y=o/y),y},n.gammap=function(f,a){return n.lowRegGamma(f,a)*n.gammafn(f)},n.lowRegGamma=function(f,a){var l=n.gammaln(f),o=f,s=1/f,u=s,c=a+1-f,d=1/1e-30,p=1/c,m=p,v=1,y=-~(i.log(f>=1?f:1/f)*8.5+f*.4+17),E;if(a<0||f<=0)return NaN;if(a<f+1){for(;v<=y;v++)s+=u*=a/++o;return s*i.exp(-a+f*i.log(a)-l)}for(;v<=y;v++)E=-v*(v-f),c+=2,p=E*p+c,d=c+E/d,p=1/p,m*=p*d;return 1-m*i.exp(-a+f*i.log(a)-l)},n.factorialln=function(f){return f<0?NaN:n.gammaln(f+1)},n.factorial=function(f){return f<0?NaN:n.gammafn(f+1)},n.combination=function(f,a){return f>170||a>170?i.exp(n.combinationln(f,a)):n.factorial(f)/n.factorial(a)/n.factorial(f-a)},n.combinationln=function(f,a){return n.factorialln(f)-n.factorialln(a)-n.factorialln(f-a)},n.permutation=function(f,a){return n.factorial(f)/n.factorial(f-a)},n.betafn=function(f,a){if(!(f<=0||a<=0))return f+a>170?i.exp(n.betaln(f,a)):n.gammafn(f)*n.gammafn(a)/n.gammafn(f+a)},n.betaln=function(f,a){return n.gammaln(f)+n.gammaln(a)-n.gammaln(f+a)},n.betacf=function(f,a,l){var o=1e-30,s=1,u=a+l,c=a+1,d=a-1,p=1,m=1-u*f/c,v,y,E,g;for(i.abs(m)<o&&(m=o),m=1/m,g=m;s<=100&&(v=2*s,y=s*(l-s)*f/((d+v)*(a+v)),m=1+y*m,i.abs(m)<o&&(m=o),p=1+y/p,i.abs(p)<o&&(p=o),m=1/m,g*=m*p,y=-(a+s)*(u+s)*f/((a+v)*(c+v)),m=1+y*m,i.abs(m)<o&&(m=o),p=1+y/p,i.abs(p)<o&&(p=o),m=1/m,E=m*p,g*=E,!(i.abs(E-1)<3e-7));s++);return g},n.gammapinv=function(f,a){var l=0,o=a-1,s=1e-8,u=n.gammaln(a),c,d,p,m,v,y,E;if(f>=1)return i.max(100,a+100*i.sqrt(a));if(f<=0)return 0;for(a>1?(y=i.log(o),E=i.exp(o*(y-1)-u),v=f<.5?f:1-f,p=i.sqrt(-2*i.log(v)),c=(2.30753+p*.27061)/(1+p*(.99229+p*.04481))-p,f<.5&&(c=-c),c=i.max(.001,a*i.pow(1-1/(9*a)-c/(3*i.sqrt(a)),3))):(p=1-a*(.253+a*.12),f<p?c=i.pow(f/p,1/a):c=1-i.log(1-(f-p)/(1-p)));l<12;l++){if(c<=0)return 0;if(d=n.lowRegGamma(a,c)-f,a>1?p=E*i.exp(-(c-o)+o*(i.log(c)-y)):p=i.exp(-c+o*i.log(c)-u),m=d/p,c-=p=m/(1-.5*i.min(1,m*((a-1)/c-1))),c<=0&&(c=.5*(c+p)),i.abs(p)<s*c)break}return c},n.erf=function(f){var a=[-1.3026537197817094,.6419697923564902,.019476473204185836,-.00956151478680863,-.000946595344482036,.000366839497852761,42523324806907e-18,-20278578112534e-18,-1624290004647e-18,130365583558e-17,15626441722e-18,-85238095915e-18,6529054439e-18,5059343495e-18,-991364156e-18,-227365122e-18,96467911e-18,2394038e-18,-6886027e-18,894487e-18,313092e-18,-112708e-18,381e-18,7106e-18,-1523e-18,-94e-18,121e-18,-28e-18],l=a.length-1,o=!1,s=0,u=0,c,d,p,m;for(f<0&&(f=-f,o=!0),c=2/(2+f),d=4*c-2;l>0;l--)p=s,s=d*s-u+a[l],u=p;return m=c*i.exp(-f*f+.5*(a[0]+d*s)-u),o?m-1:1-m},n.erfc=function(f){return 1-n.erf(f)},n.erfcinv=function(f){var a=0,l,o,s,u;if(f>=2)return-100;if(f<=0)return 100;for(u=f<1?f:2-f,s=i.sqrt(-2*i.log(u/2)),l=-.70711*((2.30753+s*.27061)/(1+s*(.99229+s*.04481))-s);a<2;a++)o=n.erfc(l)-u,l+=o/(1.1283791670955126*i.exp(-l*l)-l*o);return f<1?l:-l},n.ibetainv=function(f,a,l){var o=1e-8,s=a-1,u=l-1,c=0,d,p,m,v,y,E,g,_,I,N,w;if(f<=0)return 0;if(f>=1)return 1;for(a>=1&&l>=1?(m=f<.5?f:1-f,v=i.sqrt(-2*i.log(m)),g=(2.30753+v*.27061)/(1+v*(.99229+v*.04481))-v,f<.5&&(g=-g),_=(g*g-3)/6,I=2/(1/(2*a-1)+1/(2*l-1)),N=g*i.sqrt(_+I)/I-(1/(2*l-1)-1/(2*a-1))*(_+5/6-2/(3*I)),g=a/(a+l*i.exp(2*N))):(d=i.log(a/(a+l)),p=i.log(l/(a+l)),v=i.exp(a*d)/a,y=i.exp(l*p)/l,N=v+y,f<v/N?g=i.pow(a*N*f,1/a):g=1-i.pow(l*N*(1-f),1/l)),w=-n.gammaln(a)-n.gammaln(l)+n.gammaln(a+l);c<10;c++){if(g===0||g===1)return g;if(E=n.ibeta(g,a,l)-f,v=i.exp(s*i.log(g)+u*i.log(1-g)+w),y=E/v,g-=v=y/(1-.5*i.min(1,y*(s/g-u/(1-g)))),g<=0&&(g=.5*(g+v)),g>=1&&(g=.5*(g+v+1)),i.abs(v)<o*g&&c>0)break}return g},n.ibeta=function(f,a,l){var o=f===0||f===1?0:i.exp(n.gammaln(a+l)-n.gammaln(a)-n.gammaln(l)+a*i.log(f)+l*i.log(1-f));return f<0||f>1?!1:f<(a+1)/(a+l+2)?o*n.betacf(f,a,l)/a:1-o*n.betacf(1-f,l,a)/l},n.randn=function(f,a){var l,o,s,u,c;if(a||(a=f),f)return n.create(f,a,function(){return n.randn()});do l=n._random_fn(),o=1.7156*(n._random_fn()-.5),s=l-.449871,u=i.abs(o)+.386595,c=s*s+u*(.196*u-.25472*s);while(c>.27597&&(c>.27846||o*o>-4*i.log(l)*l*l));return o/l},n.randg=function(f,a,l){var o=f,s,u,c,d,p,m;if(l||(l=a),f||(f=1),a)return m=n.zeros(a,l),m.alter(function(){return n.randg(f)}),m;f<1&&(f+=1),s=f-1/3,u=1/i.sqrt(9*s);do{do p=n.randn(),d=1+u*p;while(d<=0);d=d*d*d,c=n._random_fn()}while(c>1-.331*i.pow(p,4)&&i.log(c)>.5*p*p+s*(1-d+i.log(d)));if(f==o)return s*d;do c=n._random_fn();while(c===0);return i.pow(c,1/o)*s*d},(function(h){for(var f=0;f<h.length;f++)(function(a){n.fn[a]=function(){return n(n.map(this,function(l){return n[a](l)}))}})(h[f])})("gammaln gammafn factorial factorialln".split(" ")),(function(h){for(var f=0;f<h.length;f++)(function(a){n.fn[a]=function(){return n(n[a].apply(null,arguments))}})(h[f])})("randn".split(" "))})(r,Math),(function(n,i){(function(o){for(var s=0;s<o.length;s++)(function(u){n[u]=function c(d,p,m){return this instanceof c?(this._a=d,this._b=p,this._c=m,this):new c(d,p,m)},n.fn[u]=function(c,d,p){var m=n[u](c,d,p);return m.data=this,m},n[u].prototype.sample=function(c){var d=this._a,p=this._b,m=this._c;return c?n.alter(c,function(){return n[u].sample(d,p,m)}):n[u].sample(d,p,m)},(function(c){for(var d=0;d<c.length;d++)(function(p){n[u].prototype[p]=function(m){var v=this._a,y=this._b,E=this._c;return!m&&m!==0&&(m=this.data),typeof m!="number"?n.fn.map.call(m,function(g){return n[u][p](g,v,y,E)}):n[u][p](m,v,y,E)}})(c[d])})("pdf cdf inv".split(" ")),(function(c){for(var d=0;d<c.length;d++)(function(p){n[u].prototype[p]=function(){return n[u][p](this._a,this._b,this._c)}})(c[d])})("mean median mode variance".split(" "))})(o[s])})("beta centralF cauchy chisquare exponential gamma invgamma kumaraswamy laplace lognormal noncentralt normal pareto studentt weibull uniform binomial negbin hypgeom poisson triangular tukey arcsine".split(" ")),n.extend(n.beta,{pdf:function(s,u,c){return s>1||s<0?0:u==1&&c==1?1:u<512&&c<512?i.pow(s,u-1)*i.pow(1-s,c-1)/n.betafn(u,c):i.exp((u-1)*i.log(s)+(c-1)*i.log(1-s)-n.betaln(u,c))},cdf:function(s,u,c){return s>1||s<0?(s>1)*1:n.ibeta(s,u,c)},inv:function(s,u,c){return n.ibetainv(s,u,c)},mean:function(s,u){return s/(s+u)},median:function(s,u){return n.ibetainv(.5,s,u)},mode:function(s,u){return(s-1)/(s+u-2)},sample:function(s,u){var c=n.randg(s);return c/(c+n.randg(u))},variance:function(s,u){return s*u/(i.pow(s+u,2)*(s+u+1))}}),n.extend(n.centralF,{pdf:function(s,u,c){var d,p,m;return s<0?0:u<=2?s===0&&u<2?1/0:s===0&&u===2?1:1/n.betafn(u/2,c/2)*i.pow(u/c,u/2)*i.pow(s,u/2-1)*i.pow(1+u/c*s,-(u+c)/2):(d=u*s/(c+s*u),p=c/(c+s*u),m=u*p/2,m*n.binomial.pdf((u-2)/2,(u+c-2)/2,d))},cdf:function(s,u,c){return s<0?0:n.ibeta(u*s/(u*s+c),u/2,c/2)},inv:function(s,u,c){return c/(u*(1/n.ibetainv(s,u/2,c/2)-1))},mean:function(s,u){return u>2?u/(u-2):void 0},mode:function(s,u){return s>2?u*(s-2)/(s*(u+2)):void 0},sample:function(s,u){var c=n.randg(s/2)*2,d=n.randg(u/2)*2;return c/s/(d/u)},variance:function(s,u){if(!(u<=4))return 2*u*u*(s+u-2)/(s*(u-2)*(u-2)*(u-4))}}),n.extend(n.cauchy,{pdf:function(s,u,c){return c<0?0:c/(i.pow(s-u,2)+i.pow(c,2))/i.PI},cdf:function(s,u,c){return i.atan((s-u)/c)/i.PI+.5},inv:function(o,s,u){return s+u*i.tan(i.PI*(o-.5))},median:function(s){return s},mode:function(s){return s},sample:function(s,u){return n.randn()*i.sqrt(1/(2*n.randg(.5)))*u+s}}),n.extend(n.chisquare,{pdf:function(s,u){return s<0?0:s===0&&u===2?.5:i.exp((u/2-1)*i.log(s)-s/2-u/2*i.log(2)-n.gammaln(u/2))},cdf:function(s,u){return s<0?0:n.lowRegGamma(u/2,s/2)},inv:function(o,s){return 2*n.gammapinv(o,.5*s)},mean:function(o){return o},median:function(s){return s*i.pow(1-2/(9*s),3)},mode:function(s){return s-2>0?s-2:0},sample:function(s){return n.randg(s/2)*2},variance:function(s){return 2*s}}),n.extend(n.exponential,{pdf:function(s,u){return s<0?0:u*i.exp(-u*s)},cdf:function(s,u){return s<0?0:1-i.exp(-u*s)},inv:function(o,s){return-i.log(1-o)/s},mean:function(o){return 1/o},median:function(o){return 1/o*i.log(2)},mode:function(){return 0},sample:function(s){return-1/s*i.log(n._random_fn())},variance:function(o){return i.pow(o,-2)}}),n.extend(n.gamma,{pdf:function(s,u,c){return s<0?0:s===0&&u===1?1/c:i.exp((u-1)*i.log(s)-s/c-n.gammaln(u)-u*i.log(c))},cdf:function(s,u,c){return s<0?0:n.lowRegGamma(u,s/c)},inv:function(o,s,u){return n.gammapinv(o,s)*u},mean:function(o,s){return o*s},mode:function(s,u){if(s>1)return(s-1)*u},sample:function(s,u){return n.randg(s)*u},variance:function(s,u){return s*u*u}}),n.extend(n.invgamma,{pdf:function(s,u,c){return s<=0?0:i.exp(-(u+1)*i.log(s)-c/s-n.gammaln(u)+u*i.log(c))},cdf:function(s,u,c){return s<=0?0:1-n.lowRegGamma(u,c/s)},inv:function(o,s,u){return u/n.gammapinv(1-o,s)},mean:function(o,s){return o>1?s/(o-1):void 0},mode:function(s,u){return u/(s+1)},sample:function(s,u){return u/n.randg(s)},variance:function(s,u){if(!(s<=2))return u*u/((s-1)*(s-1)*(s-2))}}),n.extend(n.kumaraswamy,{pdf:function(s,u,c){return s===0&&u===1?c:s===1&&c===1?u:i.exp(i.log(u)+i.log(c)+(u-1)*i.log(s)+(c-1)*i.log(1-i.pow(s,u)))},cdf:function(s,u,c){return s<0?0:s>1?1:1-i.pow(1-i.pow(s,u),c)},inv:function(s,u,c){return i.pow(1-i.pow(1-s,1/c),1/u)},mean:function(o,s){return s*n.gammafn(1+1/o)*n.gammafn(s)/n.gammafn(1+1/o+s)},median:function(s,u){return i.pow(1-i.pow(2,-1/u),1/s)},mode:function(s,u){if(s>=1&&u>=1&&s!==1&&u!==1)return i.pow((s-1)/(s*u-1),1/s)},variance:function(){throw new Error("variance not yet implemented")}}),n.extend(n.lognormal,{pdf:function(s,u,c){return s<=0?0:i.exp(-i.log(s)-.5*i.log(2*i.PI)-i.log(c)-i.pow(i.log(s)-u,2)/(2*c*c))},cdf:function(s,u,c){return s<0?0:.5+.5*n.erf((i.log(s)-u)/i.sqrt(2*c*c))},inv:function(o,s,u){return i.exp(-1.4142135623730951*u*n.erfcinv(2*o)+s)},mean:function(s,u){return i.exp(s+u*u/2)},median:function(s){return i.exp(s)},mode:function(s,u){return i.exp(s-u*u)},sample:function(s,u){return i.exp(n.randn()*u+s)},variance:function(s,u){return(i.exp(u*u)-1)*i.exp(2*s+u*u)}}),n.extend(n.noncentralt,{pdf:function(s,u,c){var d=1e-14;return i.abs(c)<d?n.studentt.pdf(s,u):i.abs(s)<d?i.exp(n.gammaln((u+1)/2)-c*c/2-.5*i.log(i.PI*u)-n.gammaln(u/2)):u/s*(n.noncentralt.cdf(s*i.sqrt(1+2/u),u+2,c)-n.noncentralt.cdf(s,u,c))},cdf:function(s,u,c){var d=1e-14,p=200;if(i.abs(c)<d)return n.studentt.cdf(s,u);var m=!1;s<0&&(m=!0,c=-c);for(var v=n.normal.cdf(-c,0,1),y=d+1,E=y,g=s*s/(s*s+u),_=0,I=i.exp(-c*c/2),N=i.exp(-c*c/2-.5*i.log(2)-n.gammaln(3/2))*c;_<p||E>d||y>d;)E=y,_>0&&(I*=c*c/(2*_),N*=c*c/(2*(_+1/2))),y=I*n.beta.cdf(g,_+.5,u/2)+N*n.beta.cdf(g,_+1,u/2),v+=.5*y,_++;return m?1-v:v}}),n.extend(n.normal,{pdf:function(s,u,c){return i.exp(-.5*i.log(2*i.PI)-i.log(c)-i.pow(s-u,2)/(2*c*c))},cdf:function(s,u,c){return .5*(1+n.erf((s-u)/i.sqrt(2*c*c)))},inv:function(o,s,u){return-1.4142135623730951*u*n.erfcinv(2*o)+s},mean:function(o){return o},median:function(s){return s},mode:function(o){return o},sample:function(s,u){return n.randn()*u+s},variance:function(o,s){return s*s}}),n.extend(n.pareto,{pdf:function(s,u,c){return s<u?0:c*i.pow(u,c)/i.pow(s,c+1)},cdf:function(s,u,c){return s<u?0:1-i.pow(u/s,c)},inv:function(s,u,c){return u/i.pow(1-s,1/c)},mean:function(s,u){if(!(u<=1))return u*i.pow(s,u)/(u-1)},median:function(s,u){return s*(u*i.SQRT2)},mode:function(s){return s},variance:function(o,s){if(!(s<=2))return o*o*s/(i.pow(s-1,2)*(s-2))}}),n.extend(n.studentt,{pdf:function(s,u){return u=u>1e100?1e100:u,1/(i.sqrt(u)*n.betafn(.5,u/2))*i.pow(1+s*s/u,-((u+1)/2))},cdf:function(s,u){var c=u/2;return n.ibeta((s+i.sqrt(s*s+u))/(2*i.sqrt(s*s+u)),c,c)},inv:function(o,s){var u=n.ibetainv(2*i.min(o,1-o),.5*s,.5);return u=i.sqrt(s*(1-u)/u),o>.5?u:-u},mean:function(s){return s>1?0:void 0},median:function(){return 0},mode:function(){return 0},sample:function(s){return n.randn()*i.sqrt(s/(2*n.randg(s/2)))},variance:function(s){return s>2?s/(s-2):s>1?1/0:void 0}}),n.extend(n.weibull,{pdf:function(s,u,c){return s<0||u<0||c<0?0:c/u*i.pow(s/u,c-1)*i.exp(-i.pow(s/u,c))},cdf:function(s,u,c){return s<0?0:1-i.exp(-i.pow(s/u,c))},inv:function(o,s,u){return s*i.pow(-i.log(1-o),1/u)},mean:function(o,s){return o*n.gammafn(1+1/s)},median:function(s,u){return s*i.pow(i.log(2),1/u)},mode:function(s,u){return u<=1?0:s*i.pow((u-1)/u,1/u)},sample:function(s,u){return s*i.pow(-i.log(n._random_fn()),1/u)},variance:function(s,u){return s*s*n.gammafn(1+2/u)-i.pow(n.weibull.mean(s,u),2)}}),n.extend(n.uniform,{pdf:function(s,u,c){return s<u||s>c?0:1/(c-u)},cdf:function(s,u,c){return s<u?0:s<c?(s-u)/(c-u):1},inv:function(o,s,u){return s+o*(u-s)},mean:function(s,u){return .5*(s+u)},median:function(s,u){return n.mean(s,u)},mode:function(){throw new Error("mode is not yet implemented")},sample:function(s,u){return s/2+u/2+(u/2-s/2)*(2*n._random_fn()-1)},variance:function(s,u){return i.pow(u-s,2)/12}});function h(o,s,u,c){for(var d=0,p=1,m=1,v=1,y=0,E=0,g;i.abs((m-E)/m)>c;)E=m,g=-(s+y)*(s+u+y)*o/(s+2*y)/(s+2*y+1),d=m+g*d,p=v+g*p,y=y+1,g=y*(u-y)*o/(s+2*y-1)/(s+2*y),m=d+g*m,v=p+g*v,d=d/v,p=p/v,m=m/v,v=1;return m/s}n.extend(n.binomial,{pdf:function(s,u,c){return c===0||c===1?u*c===s?1:0:n.combination(u,s)*i.pow(c,s)*i.pow(1-c,u-s)},cdf:function(s,u,c){var d,p=1e-10;if(s<0)return 0;if(s>=u)return 1;if(c<0||c>1||u<=0)return NaN;s=i.floor(s);var m=c,v=s+1,y=u-s,E=v+y,g=i.exp(n.gammaln(E)-n.gammaln(y)-n.gammaln(v)+v*i.log(m)+y*i.log(1-m));return m<(v+1)/(E+2)?d=g*h(m,v,y,p):d=1-g*h(1-m,y,v,p),i.round((1-d)*(1/p))/(1/p)}}),n.extend(n.negbin,{pdf:function(s,u,c){return s!==s>>>0?!1:s<0?0:n.combination(s+u-1,u-1)*i.pow(1-c,s)*i.pow(c,u)},cdf:function(s,u,c){var d=0,p=0;if(s<0)return 0;for(;p<=s;p++)d+=n.negbin.pdf(p,u,c);return d}}),n.extend(n.hypgeom,{pdf:function(s,u,c,d){if(s!==s|0)return!1;if(s<0||s<c-(u-d))return 0;if(s>d||s>c)return 0;if(c*2>u)return d*2>u?n.hypgeom.pdf(u-c-d+s,u,u-c,u-d):n.hypgeom.pdf(d-s,u,u-c,d);if(d*2>u)return n.hypgeom.pdf(c-s,u,c,u-d);if(c<d)return n.hypgeom.pdf(s,u,d,c);for(var p=1,m=0,v=0;v<s;v++){for(;p>1&&m<d;)p*=1-c/(u-m),m++;p*=(d-v)*(c-v)/((v+1)*(u-c-d+v+1))}for(;m<d;m++)p*=1-c/(u-m);return i.min(1,i.max(0,p))},cdf:function(s,u,c,d){if(s<0||s<c-(u-d))return 0;if(s>=d||s>=c)return 1;if(c*2>u)return d*2>u?n.hypgeom.cdf(u-c-d+s,u,u-c,u-d):1-n.hypgeom.cdf(d-s-1,u,u-c,d);if(d*2>u)return 1-n.hypgeom.cdf(c-s-1,u,c,u-d);if(c<d)return n.hypgeom.cdf(s,u,d,c);for(var p=1,m=1,v=0,y=0;y<s;y++){for(;p>1&&v<d;){var E=1-c/(u-v);m*=E,p*=E,v++}m*=(d-y)*(c-y)/((y+1)*(u-c-d+y+1)),p+=m}for(;v<d;v++)p*=1-c/(u-v);return i.min(1,i.max(0,p))}}),n.extend(n.poisson,{pdf:function(s,u){return u<0||s%1!==0||s<0?0:i.pow(u,s)*i.exp(-u)/n.factorial(s)},cdf:function(s,u){var c=[],d=0;if(s<0)return 0;for(;d<=s;d++)c.push(n.poisson.pdf(d,u));return n.sum(c)},mean:function(o){return o},variance:function(o){return o},sampleSmall:function(s){var u=1,c=0,d=i.exp(-s);do c++,u*=n._random_fn();while(u>d);return c-1},sampleLarge:function(s){var u=s,c,d,p,m,v,y,E,g,_,I;for(m=i.sqrt(u),v=i.log(u),E=.931+2.53*m,y=-.059+.02483*E,g=1.1239+1.1328/(E-3.4),_=.9277-3.6224/(E-2);;){if(d=i.random()-.5,p=i.random(),I=.5-i.abs(d),c=i.floor((2*y/I+E)*d+u+.43),I>=.07&&p<=_)return c;if(!(c<0||I<.013&&p>I)&&i.log(p)+i.log(g)-i.log(y/(I*I)+E)<=-u+c*v-n.loggam(c+1))return c}},sample:function(s){return s<10?this.sampleSmall(s):this.sampleLarge(s)}}),n.extend(n.triangular,{pdf:function(s,u,c,d){return c<=u||d<u||d>c?NaN:s<u||s>c?0:s<d?2*(s-u)/((c-u)*(d-u)):s===d?2/(c-u):2*(c-s)/((c-u)*(c-d))},cdf:function(s,u,c,d){return c<=u||d<u||d>c?NaN:s<=u?0:s>=c?1:s<=d?i.pow(s-u,2)/((c-u)*(d-u)):1-i.pow(c-s,2)/((c-u)*(c-d))},inv:function(s,u,c,d){return c<=u||d<u||d>c?NaN:s<=(d-u)/(c-u)?u+(c-u)*i.sqrt(s*((d-u)/(c-u))):u+(c-u)*(1-i.sqrt((1-s)*(1-(d-u)/(c-u))))},mean:function(s,u,c){return(s+u+c)/3},median:function(s,u,c){if(c<=(s+u)/2)return u-i.sqrt((u-s)*(u-c))/i.sqrt(2);if(c>(s+u)/2)return s+i.sqrt((u-s)*(c-s))/i.sqrt(2)},mode:function(s,u,c){return c},sample:function(s,u,c){var d=n._random_fn();return d<(c-s)/(u-s)?s+i.sqrt(d*(u-s)*(c-s)):u-i.sqrt((1-d)*(u-s)*(u-c))},variance:function(s,u,c){return(s*s+u*u+c*c-s*u-s*c-u*c)/18}}),n.extend(n.arcsine,{pdf:function(s,u,c){return c<=u?NaN:s<=u||s>=c?0:2/i.PI*i.pow(i.pow(c-u,2)-i.pow(2*s-u-c,2),-.5)},cdf:function(s,u,c){return s<u?0:s<c?2/i.PI*i.asin(i.sqrt((s-u)/(c-u))):1},inv:function(o,s,u){return s+(.5-.5*i.cos(i.PI*o))*(u-s)},mean:function(s,u){return u<=s?NaN:(s+u)/2},median:function(s,u){return u<=s?NaN:(s+u)/2},mode:function(){throw new Error("mode is not yet implemented")},sample:function(s,u){return(s+u)/2+(u-s)/2*i.sin(2*i.PI*n.uniform.sample(0,1))},variance:function(s,u){return u<=s?NaN:i.pow(u-s,2)/8}});function f(o){return o/i.abs(o)}n.extend(n.laplace,{pdf:function(s,u,c){return c<=0?0:i.exp(-i.abs(s-u)/c)/(2*c)},cdf:function(s,u,c){return c<=0?0:s<u?.5*i.exp((s-u)/c):1-.5*i.exp(-(s-u)/c)},mean:function(o){return o},median:function(o){return o},mode:function(o){return o},variance:function(o,s){return 2*s*s},sample:function(s,u){var c=n._random_fn()-.5;return s-u*f(c)*i.log(1-2*i.abs(c))}});function a(o,s,u){var c=12,d=6,p=-30,m=-50,v=60,y=8,E=3,g=2,_=3,I=[.9815606342467192,.9041172563704749,.7699026741943047,.5873179542866175,.3678314989981802,.1252334085114689],N=[.04717533638651183,.10693932599531843,.16007832854334622,.20316742672306592,.2334925365383548,.24914704581340277],w=o*.5;if(w>=y)return 1;var C=2*n.normal.cdf(w,0,1,1,0)-1;C>=i.exp(m/u)?C=i.pow(C,u):C=0;var T;o>E?T=g:T=_;for(var R=w,A=(y-w)/T,b=R+A,O=0,S=u-1,L=1;L<=T;L++){for(var k=0,V=.5*(b+R),U=.5*(b-R),M=1;M<=c;M++){var H,J;d<M?(H=c-M+1,J=I[H-1]):(H=M,J=-I[H-1]);var ue=U*J,z=V+ue,ie=z*z;if(ie>v)break;var re=2*n.normal.cdf(z,0,1,1,0),Z=2*n.normal.cdf(z,o,1,1,0),j=re*.5-Z*.5;j>=i.exp(p/S)&&(j=N[H-1]*i.exp(-(.5*ie))*i.pow(j,S),k+=j)}k*=2*U*u/i.sqrt(2*i.PI),O+=k,R=b,b+=A}return C+=O,C<=i.exp(p/s)?0:(C=i.pow(C,s),C>=1?1:C)}function l(o,s,u){var c=.322232421088,d=.099348462606,p=-1,m=.588581570495,v=-.342242088547,y=.531103462366,E=-.204231210125,g=.10353775285,_=-453642210148e-16,I=.0038560700634,N=.8832,w=.2368,C=1.208,T=1.4142,R=120,A=.5-.5*o,b=i.sqrt(i.log(1/(A*A))),O=b+((((b*_+E)*b+v)*b+p)*b+c)/((((b*I+g)*b+y)*b+m)*b+d);u<R&&(O+=(O*O*O+O)/u/4);var S=N-w*O;return u<R&&(S+=-1.214/u+C*O/u),O*(S*i.log(s-1)+T)}n.extend(n.tukey,{cdf:function(s,u,c){var d=1,p=u,m=16,v=8,y=-30,E=1e-14,g=100,_=800,I=5e3,N=25e3,w=1,C=.5,T=.25,R=.125,A=[.9894009349916499,.9445750230732326,.8656312023878318,.755404408355003,.6178762444026438,.45801677765722737,.2816035507792589,.09501250983763744],b=[.027152459411754096,.062253523938647894,.09515851168249279,.12462897125553388,.14959598881657674,.16915651939500254,.18260341504492358,.1894506104550685];if(s<=0)return 0;if(c<2||d<1||p<2)return NaN;if(!Number.isFinite(s))return 1;if(c>N)return a(s,d,p);var O=c*.5,S=O*i.log(c)-c*i.log(2)-n.gammaln(O),L=O-1,k=c*.25,V;c<=g?V=w:c<=_?V=C:c<=I?V=T:V=R,S+=i.log(V);for(var U=0,M=1;M<=50;M++){for(var H=0,J=(2*M-1)*V,ue=1;ue<=m;ue++){var z,ie;v<ue?(z=ue-v-1,ie=S+L*i.log(J+A[z]*V)-(A[z]*V+J)*k):(z=ue-1,ie=S+L*i.log(J-A[z]*V)+(A[z]*V-J)*k);var re;if(ie>=y){v<ue?re=s*i.sqrt((A[z]*V+J)*.5):re=s*i.sqrt((-(A[z]*V)+J)*.5);var Z=a(re,d,p),j=Z*b[z]*i.exp(ie);H+=j}}if(M*V>=1&&H<=E)break;U+=H}if(H>E)throw new Error("tukey.cdf failed to converge");return U>1&&(U=1),U},inv:function(o,s,u){var c=1,d=s,p=1e-4,m=50;if(u<2||c<1||d<2)return NaN;if(o<0||o>1)return NaN;if(o===0)return 0;if(o===1)return 1/0;var v=l(o,d,u),y=n.tukey.cdf(v,s,u)-o,E;y>0?E=i.max(0,v-1):E=v+1;for(var g=n.tukey.cdf(E,s,u)-o,_,I=1;I<m;I++){_=E-g*(E-v)/(g-y),y=g,v=E,_<0&&(_=0,g=-o),g=n.tukey.cdf(_,s,u)-o,E=_;var N=i.abs(E-v);if(N<p)return _}throw new Error("tukey.inv failed to converge")}})})(r,Math),(function(n,i){var h=Array.prototype.push,f=n.utils.isArray;function a(l){return f(l)||l instanceof n}n.extend({add:function(o,s){return a(s)?(a(s[0])||(s=[s]),n.map(o,function(u,c,d){return u+s[c][d]})):n.map(o,function(u){return u+s})},subtract:function(o,s){return a(s)?(a(s[0])||(s=[s]),n.map(o,function(u,c,d){return u-s[c][d]||0})):n.map(o,function(u){return u-s})},divide:function(o,s){return a(s)?(a(s[0])||(s=[s]),n.multiply(o,n.inv(s))):n.map(o,function(u){return u/s})},multiply:function(o,s){var u,c,d,p,m,v,y,E;if(o.length===void 0&&s.length===void 0)return o*s;if(m=o.length,v=o[0].length,y=n.zeros(m,d=a(s)?s[0].length:v),E=0,a(s)){for(;E<d;E++)for(u=0;u<m;u++){for(p=0,c=0;c<v;c++)p+=o[u][c]*s[c][E];y[u][E]=p}return m===1&&E===1?y[0][0]:y}return n.map(o,function(g){return g*s})},outer:function(o,s){return n.multiply(o.map(function(u){return[u]}),[s])},dot:function(o,s){a(o[0])||(o=[o]),a(s[0])||(s=[s]);for(var u=o[0].length===1&&o.length!==1?n.transpose(o):o,c=s[0].length===1&&s.length!==1?n.transpose(s):s,d=[],p=0,m=u.length,v=u[0].length,y,E;p<m;p++){for(d[p]=[],y=0,E=0;E<v;E++)y+=u[p][E]*c[p][E];d[p]=y}return d.length===1?d[0]:d},pow:function(o,s){return n.map(o,function(u){return i.pow(u,s)})},exp:function(o){return n.map(o,function(s){return i.exp(s)})},log:function(o){return n.map(o,function(s){return i.log(s)})},abs:function(o){return n.map(o,function(s){return i.abs(s)})},norm:function(o,s){var u=0,c=0;for(isNaN(s)&&(s=2),a(o[0])&&(o=o[0]);c<o.length;c++)u+=i.pow(i.abs(o[c]),s);return i.pow(u,1/s)},angle:function(o,s){return i.acos(n.dot(o,s)/(n.norm(o)*n.norm(s)))},aug:function(o,s){var u=[],c;for(c=0;c<o.length;c++)u.push(o[c].slice());for(c=0;c<u.length;c++)h.apply(u[c],s[c]);return u},inv:function(o){for(var s=o.length,u=o[0].length,c=n.identity(s,u),d=n.gauss_jordan(o,c),p=[],m=0,v;m<s;m++)for(p[m]=[],v=u;v<d[0].length;v++)p[m][v-u]=d[m][v];return p},det:function l(o){if(o.length===2)return o[0][0]*o[1][1]-o[0][1]*o[1][0];for(var s=0,u=0;u<o.length;u++){for(var c=[],d=1;d<o.length;d++){c[d-1]=[];for(var p=0;p<o.length;p++)p<u?c[d-1][p]=o[d][p]:p>u&&(c[d-1][p-1]=o[d][p])}var m=u%2?-1:1;s+=l(c)*o[0][u]*m}return s},gauss_elimination:function(o,s){var u=0,c=0,d=o.length,p=o[0].length,m=1,v=0,y=[],E,g,_,I;for(o=n.aug(o,s),E=o[0].length,u=0;u<d;u++){for(g=o[u][u],c=u,I=u+1;I<p;I++)g<i.abs(o[I][u])&&(g=o[I][u],c=I);if(c!=u)for(I=0;I<E;I++)_=o[u][I],o[u][I]=o[c][I],o[c][I]=_;for(c=u+1;c<d;c++)for(m=o[c][u]/o[u][u],I=u;I<E;I++)o[c][I]=o[c][I]-m*o[u][I]}for(u=d-1;u>=0;u--){for(v=0,c=u+1;c<=d-1;c++)v=v+y[c]*o[u][c];y[u]=(o[u][E-1]-v)/o[u][u]}return y},gauss_jordan:function(o,s){var u=n.aug(o,s),c=u.length,d=u[0].length,p=0,m,v,y;for(v=0;v<c;v++){var E=v;for(y=v+1;y<c;y++)i.abs(u[y][v])>i.abs(u[E][v])&&(E=y);var g=u[v];for(u[v]=u[E],u[E]=g,y=v+1;y<c;y++)for(p=u[y][v]/u[v][v],m=v;m<d;m++)u[y][m]-=u[v][m]*p}for(v=c-1;v>=0;v--){for(p=u[v][v],y=0;y<v;y++)for(m=d-1;m>v-1;m--)u[y][m]-=u[v][m]*u[y][v]/p;for(u[v][v]/=p,m=c;m<d;m++)u[v][m]/=p}return u},triaUpSolve:function(o,s){var u=o[0].length,c=n.zeros(1,u)[0],d,p=!1;return s[0].length!=null&&(s=s.map(function(m){return m[0]}),p=!0),n.arange(u-1,-1,-1).forEach(function(m){d=n.arange(m+1,u).map(function(v){return c[v]*o[m][v]}),c[m]=(s[m]-n.sum(d))/o[m][m]}),p?c.map(function(m){return[m]}):c},triaLowSolve:function(o,s){var u=o[0].length,c=n.zeros(1,u)[0],d,p=!1;return s[0].length!=null&&(s=s.map(function(m){return m[0]}),p=!0),n.arange(u).forEach(function(m){d=n.arange(m).map(function(v){return o[m][v]*c[v]}),c[m]=(s[m]-n.sum(d))/o[m][m]}),p?c.map(function(m){return[m]}):c},lu:function(o){var s=o.length,u=n.identity(s),c=n.zeros(o.length,o[0].length),d;return n.arange(s).forEach(function(p){c[0][p]=o[0][p]}),n.arange(1,s).forEach(function(p){n.arange(p).forEach(function(m){d=n.arange(m).map(function(v){return u[p][v]*c[v][m]}),u[p][m]=(o[p][m]-n.sum(d))/c[m][m]}),n.arange(p,s).forEach(function(m){d=n.arange(p).map(function(v){return u[p][v]*c[v][m]}),c[p][m]=o[d.length][m]-n.sum(d)})}),[u,c]},cholesky:function(o){var s=o.length,u=n.zeros(o.length,o[0].length),c;return n.arange(s).forEach(function(d){c=n.arange(d).map(function(p){return i.pow(u[d][p],2)}),u[d][d]=i.sqrt(o[d][d]-n.sum(c)),n.arange(d+1,s).forEach(function(p){c=n.arange(d).map(function(m){return u[d][m]*u[p][m]}),u[p][d]=(o[d][p]-n.sum(c))/u[d][d]})}),u},gauss_jacobi:function(o,s,u,c){for(var d=0,p=0,m=o.length,v=[],y=[],E=[],g,_,I,N;d<m;d++)for(v[d]=[],y[d]=[],E[d]=[],p=0;p<m;p++)d>p?(v[d][p]=o[d][p],y[d][p]=E[d][p]=0):d<p?(y[d][p]=o[d][p],v[d][p]=E[d][p]=0):(E[d][p]=o[d][p],v[d][p]=y[d][p]=0);for(I=n.multiply(n.multiply(n.inv(E),n.add(v,y)),-1),_=n.multiply(n.inv(E),s),g=u,N=n.add(n.multiply(I,u),_),d=2;i.abs(n.norm(n.subtract(N,g)))>c;)g=N,N=n.add(n.multiply(I,g),_),d++;return N},gauss_seidel:function(o,s,u,c){for(var d=0,p=o.length,m=[],v=[],y=[],E,g,_,I,N;d<p;d++)for(m[d]=[],v[d]=[],y[d]=[],E=0;E<p;E++)d>E?(m[d][E]=o[d][E],v[d][E]=y[d][E]=0):d<E?(v[d][E]=o[d][E],m[d][E]=y[d][E]=0):(y[d][E]=o[d][E],m[d][E]=v[d][E]=0);for(I=n.multiply(n.multiply(n.inv(n.add(y,m)),v),-1),_=n.multiply(n.inv(n.add(y,m)),s),g=u,N=n.add(n.multiply(I,u),_),d=2;i.abs(n.norm(n.subtract(N,g)))>c;)g=N,N=n.add(n.multiply(I,g),_),d=d+1;return N},SOR:function(o,s,u,c,d){for(var p=0,m=o.length,v=[],y=[],E=[],g,_,I,N,w;p<m;p++)for(v[p]=[],y[p]=[],E[p]=[],g=0;g<m;g++)p>g?(v[p][g]=o[p][g],y[p][g]=E[p][g]=0):p<g?(y[p][g]=o[p][g],v[p][g]=E[p][g]=0):(E[p][g]=o[p][g],v[p][g]=y[p][g]=0);for(N=n.multiply(n.inv(n.add(E,n.multiply(v,d))),n.subtract(n.multiply(E,1-d),n.multiply(y,d))),I=n.multiply(n.multiply(n.inv(n.add(E,n.multiply(v,d))),s),d),_=u,w=n.add(n.multiply(N,u),I),p=2;i.abs(n.norm(n.subtract(w,_)))>c;)_=w,w=n.add(n.multiply(N,_),I),p++;return w},householder:function(o){for(var s=o.length,u=o[0].length,c=0,d=[],p=[],m,v,y,E,g;c<s-1;c++){for(m=0,E=c+1;E<u;E++)m+=o[E][c]*o[E][c];for(g=o[c+1][c]>0?-1:1,m=g*i.sqrt(m),v=i.sqrt((m*m-o[c+1][c]*m)/2),d=n.zeros(s,1),d[c+1][0]=(o[c+1][c]-m)/(2*v),y=c+2;y<s;y++)d[y][0]=o[y][c]/(2*v);p=n.subtract(n.identity(s,u),n.multiply(n.multiply(d,n.transpose(d)),2)),o=n.multiply(p,n.multiply(o,p))}return o},QR:(function(){var l=n.sum,o=n.arange;function s(u){var c=u.length,d=u[0].length,p=n.zeros(d,d);u=n.copy(u);var m,v,y;for(v=0;v<d;v++){for(p[v][v]=i.sqrt(l(o(c).map(function(E){return u[E][v]*u[E][v]}))),m=0;m<c;m++)u[m][v]=u[m][v]/p[v][v];for(y=v+1;y<d;y++)for(p[v][y]=l(o(c).map(function(E){return u[E][v]*u[E][y]})),m=0;m<c;m++)u[m][y]=u[m][y]-u[m][v]*p[v][y]}return[u,p]}return s})(),lstsq:(function(){function l(s){s=n.copy(s);var u=s.length,c=n.identity(u);return n.arange(u-1,-1,-1).forEach(function(d){n.sliceAssign(c,{row:d},n.divide(n.slice(c,{row:d}),s[d][d])),n.sliceAssign(s,{row:d},n.divide(n.slice(s,{row:d}),s[d][d])),n.arange(d).forEach(function(p){var m=n.multiply(s[p][d],-1),v=n.slice(s,{row:p}),y=n.multiply(n.slice(s,{row:d}),m);n.sliceAssign(s,{row:p},n.add(v,y));var E=n.slice(c,{row:p}),g=n.multiply(n.slice(c,{row:d}),m);n.sliceAssign(c,{row:p},n.add(E,g))})}),c}function o(s,u){var c=!1;u[0].length===void 0&&(u=u.map(function(N){return[N]}),c=!0);var d=n.QR(s),p=d[0],m=d[1],v=s[0].length,y=n.slice(p,{col:{end:v}}),E=n.slice(m,{row:{end:v}}),g=l(E),_=n.transpose(y);_[0].length===void 0&&(_=[_]);var I=n.multiply(n.multiply(g,_),u);return I.length===void 0&&(I=[[I]]),c?I.map(function(N){return N[0]}):I}return o})(),jacobi:function(o){for(var s=1,u=o.length,c=n.identity(u,u),d=[],p,m,v,y,E,g,_,I;s===1;){for(g=o[0][1],y=0,E=1,m=0;m<u;m++)for(v=0;v<u;v++)m!=v&&g<i.abs(o[m][v])&&(g=i.abs(o[m][v]),y=m,E=v);for(o[y][y]===o[E][E]?_=o[y][E]>0?i.PI/4:-i.PI/4:_=i.atan(2*o[y][E]/(o[y][y]-o[E][E]))/2,I=n.identity(u,u),I[y][y]=i.cos(_),I[y][E]=-i.sin(_),I[E][y]=i.sin(_),I[E][E]=i.cos(_),c=n.multiply(c,I),p=n.multiply(n.multiply(n.inv(I),o),I),o=p,s=0,m=1;m<u;m++)for(v=1;v<u;v++)m!=v&&i.abs(o[m][v])>.001&&(s=1)}for(m=0;m<u;m++)d.push(o[m][m]);return[c,d]},rungekutta:function(o,s,u,c,d,p){var m,v,y,E,g;if(p===2)for(;c<=u;)m=s*o(c,d),v=s*o(c+s,d+m),y=d+(m+v)/2,d=y,c=c+s;if(p===4)for(;c<=u;)m=s*o(c,d),v=s*o(c+s/2,d+m/2),E=s*o(c+s/2,d+v/2),g=s*o(c+s,d+E),y=d+(m+2*v+2*E+g)/6,d=y,c=c+s;return d},romberg:function(o,s,u,c){for(var d=0,p=(u-s)/2,m=[],v=[],y=[],E,g,_,I,N;d<c/2;){for(N=o(s),_=s,I=0;_<=u;_=_+p,I++)m[I]=_;for(E=m.length,_=1;_<E-1;_++)N+=(_%2!==0?4:2)*o(m[_]);N=p/3*(N+o(u)),y[d]=N,p/=2,d++}for(g=y.length,E=1;g!==1;){for(_=0;_<g-1;_++)v[_]=(i.pow(4,E)*y[_+1]-y[_])/(i.pow(4,E)-1);g=v.length,y=v,v=[],E++}return y},richardson:function(o,s,u,c){function d(w,C){for(var T=0,R=w.length,A;T<R;T++)w[T]===C&&(A=T);return A}for(var p=i.abs(u-o[d(o,u)+1]),m=0,v=[],y=[],E,g,_,I,N;c>=p;)E=d(o,u+c),g=d(o,u),v[m]=(s[E]-2*s[g]+s[2*g-E])/(c*c),c/=2,m++;for(I=v.length,_=1;I!=1;){for(N=0;N<I-1;N++)y[N]=(i.pow(4,_)*v[N+1]-v[N])/(i.pow(4,_)-1);I=y.length,v=y,y=[],_++}return v},simpson:function(o,s,u,c){for(var d=(u-s)/c,p=o(s),m=[],v=s,y=0,E=1,g;v<=u;v=v+d,y++)m[y]=v;for(g=m.length;E<g-1;E++)p+=(E%2!==0?4:2)*o(m[E]);return d/3*(p+o(u))},hermite:function(o,s,u,c){for(var d=o.length,p=0,m=0,v=[],y=[],E=[],g=[],_;m<d;m++){for(v[m]=1,_=0;_<d;_++)m!=_&&(v[m]*=(c-o[_])/(o[m]-o[_]));for(y[m]=0,_=0;_<d;_++)m!=_&&(y[m]+=1/(o[m]-o[_]));E[m]=(1-2*(c-o[m])*y[m])*(v[m]*v[m]),g[m]=(c-o[m])*(v[m]*v[m]),p+=E[m]*s[m]+g[m]*u[m]}return p},lagrange:function(o,s,u){for(var c=0,d=0,p,m,v=o.length;d<v;d++){for(m=s[d],p=0;p<v;p++)d!=p&&(m*=(u-o[p])/(o[d]-o[p]));c+=m}return c},cubic_spline:function(o,s,u){for(var c=o.length,d=0,p,m=[],v=[],y=[],E=[],g=[],_=[],I=[];d<c-1;d++)g[d]=o[d+1]-o[d];for(y[0]=0,d=1;d<c-1;d++)y[d]=3/g[d]*(s[d+1]-s[d])-3/g[d-1]*(s[d]-s[d-1]);for(d=1;d<c-1;d++)m[d]=[],v[d]=[],m[d][d-1]=g[d-1],m[d][d]=2*(g[d-1]+g[d]),m[d][d+1]=g[d],v[d][0]=y[d];for(E=n.multiply(n.inv(m),v),p=0;p<c-1;p++)_[p]=(s[p+1]-s[p])/g[p]-g[p]*(E[p+1][0]+2*E[p][0])/3,I[p]=(E[p+1][0]-E[p][0])/(3*g[p]);for(p=0;p<c&&!(o[p]>u);p++);return p-=1,s[p]+(u-o[p])*_[p]+n.sq(u-o[p])*E[p]+(u-o[p])*n.sq(u-o[p])*I[p]},gauss_quadrature:function(){throw new Error("gauss_quadrature not yet implemented")},PCA:function(o){var s=o.length,u=o[0].length,c=0,d,p,m=[],v=[],y=[],E=[],g=[],_=[],I=[],N=[],w=[],C=[];for(c=0;c<s;c++)m[c]=n.sum(o[c])/u;for(c=0;c<u;c++)for(I[c]=[],d=0;d<s;d++)I[c][d]=o[d][c]-m[d];for(I=n.transpose(I),c=0;c<s;c++)for(N[c]=[],d=0;d<s;d++)N[c][d]=n.dot([I[c]],[I[d]])/(u-1);for(y=n.jacobi(N),w=y[0],v=y[1],C=n.transpose(w),c=0;c<v.length;c++)for(d=c;d<v.length;d++)v[c]<v[d]&&(p=v[c],v[c]=v[d],v[d]=p,E=C[c],C[c]=C[d],C[d]=E);for(_=n.transpose(I),c=0;c<s;c++)for(g[c]=[],d=0;d<_.length;d++)g[c][d]=n.dot([C[c]],[_[d]]);return[o,v,C,g]}}),(function(l){for(var o=0;o<l.length;o++)(function(s){n.fn[s]=function(u,c){var d=this;return c?(setTimeout(function(){c.call(d,n.fn[s].call(d,u))},15),this):typeof n[s](this,u)=="number"?n[s](this,u):n(n[s](this,u))}})(l[o])})("add divide multiply subtract dot pow exp log abs norm angle".split(" "))})(r,Math),(function(n,i){var h=[].slice,f=n.utils.isNumber,a=n.utils.isArray;n.extend({zscore:function(){var s=h.call(arguments);return f(s[1])?(s[0]-s[1])/s[2]:(s[0]-n.mean(s[1]))/n.stdev(s[1],s[2])},ztest:function(){var s=h.call(arguments),u;return a(s[1])?(u=n.zscore(s[0],s[1],s[3]),s[2]===1?n.normal.cdf(-i.abs(u),0,1):n.normal.cdf(-i.abs(u),0,1)*2):s.length>2?(u=n.zscore(s[0],s[1],s[2]),s[3]===1?n.normal.cdf(-i.abs(u),0,1):n.normal.cdf(-i.abs(u),0,1)*2):(u=s[0],s[1]===1?n.normal.cdf(-i.abs(u),0,1):n.normal.cdf(-i.abs(u),0,1)*2)}}),n.extend(n.fn,{zscore:function(s,u){return(s-this.mean())/this.stdev(u)},ztest:function(s,u,c){var d=i.abs(this.zscore(s,c));return u===1?n.normal.cdf(-d,0,1):n.normal.cdf(-d,0,1)*2}}),n.extend({tscore:function(){var s=h.call(arguments);return s.length===4?(s[0]-s[1])/(s[2]/i.sqrt(s[3])):(s[0]-n.mean(s[1]))/(n.stdev(s[1],!0)/i.sqrt(s[1].length))},ttest:function(){var s=h.call(arguments),u;return s.length===5?(u=i.abs(n.tscore(s[0],s[1],s[2],s[3])),s[4]===1?n.studentt.cdf(-u,s[3]-1):n.studentt.cdf(-u,s[3]-1)*2):f(s[1])?(u=i.abs(s[0]),s[2]==1?n.studentt.cdf(-u,s[1]-1):n.studentt.cdf(-u,s[1]-1)*2):(u=i.abs(n.tscore(s[0],s[1])),s[2]==1?n.studentt.cdf(-u,s[1].length-1):n.studentt.cdf(-u,s[1].length-1)*2)}}),n.extend(n.fn,{tscore:function(s){return(s-this.mean())/(this.stdev(!0)/i.sqrt(this.cols()))},ttest:function(s,u){return u===1?1-n.studentt.cdf(i.abs(this.tscore(s)),this.cols()-1):n.studentt.cdf(-i.abs(this.tscore(s)),this.cols()-1)*2}}),n.extend({anovafscore:function(){var s=h.call(arguments),u,c,d,p,m,v,y,E;if(s.length===1){for(m=new Array(s[0].length),y=0;y<s[0].length;y++)m[y]=s[0][y];s=m}for(c=new Array,y=0;y<s.length;y++)c=c.concat(s[y]);for(d=n.mean(c),u=0,y=0;y<s.length;y++)u=u+s[y].length*i.pow(n.mean(s[y])-d,2);for(u/=s.length-1,v=0,y=0;y<s.length;y++)for(p=n.mean(s[y]),E=0;E<s[y].length;E++)v+=i.pow(s[y][E]-p,2);return v/=c.length-s.length,u/v},anovaftest:function(){var s=h.call(arguments),u,c,d,p;if(f(s[0]))return 1-n.centralF.cdf(s[0],s[1],s[2]);var m=n.anovafscore(s);for(u=s.length-1,d=0,p=0;p<s.length;p++)d=d+s[p].length;return c=d-u-1,1-n.centralF.cdf(m,u,c)},ftest:function(s,u,c){return 1-n.centralF.cdf(s,u,c)}}),n.extend(n.fn,{anovafscore:function(){return n.anovafscore(this.toArray())},anovaftes:function(){var s=0,u;for(u=0;u<this.length;u++)s=s+this[u].length;return n.ftest(this.anovafscore(),this.length-1,s-this.length)}}),n.extend({qscore:function(){var s=h.call(arguments),u,c,d,p,m;return f(s[0])?(u=s[0],c=s[1],d=s[2],p=s[3],m=s[4]):(u=n.mean(s[0]),c=n.mean(s[1]),d=s[0].length,p=s[1].length,m=s[2]),i.abs(u-c)/(m*i.sqrt((1/d+1/p)/2))},qtest:function(){var s=h.call(arguments),u;s.length===3?(u=s[0],s=s.slice(1)):s.length===7?(u=n.qscore(s[0],s[1],s[2],s[3],s[4]),s=s.slice(5)):(u=n.qscore(s[0],s[1],s[2]),s=s.slice(3));var c=s[0],d=s[1];return 1-n.tukey.cdf(u,d,c-d)},tukeyhsd:function(s){for(var u=n.pooledstdev(s),c=s.map(function(E){return n.mean(E)}),d=s.reduce(function(E,g){return E+g.length},0),p=[],m=0;m<s.length;++m)for(var v=m+1;v<s.length;++v){var y=n.qtest(c[m],c[v],s[m].length,s[v].length,u,d,s.length);p.push([[m,v],y])}return p}}),n.extend({normalci:function(){var s=h.call(arguments),u=new Array(2),c;return s.length===4?c=i.abs(n.normal.inv(s[1]/2,0,1)*s[2]/i.sqrt(s[3])):c=i.abs(n.normal.inv(s[1]/2,0,1)*n.stdev(s[2])/i.sqrt(s[2].length)),u[0]=s[0]-c,u[1]=s[0]+c,u},tci:function(){var s=h.call(arguments),u=new Array(2),c;return s.length===4?c=i.abs(n.studentt.inv(s[1]/2,s[3]-1)*s[2]/i.sqrt(s[3])):c=i.abs(n.studentt.inv(s[1]/2,s[2].length-1)*n.stdev(s[2],!0)/i.sqrt(s[2].length)),u[0]=s[0]-c,u[1]=s[0]+c,u},significant:function(s,u){return s<u}}),n.extend(n.fn,{normalci:function(s,u){return n.normalci(s,u,this.toArray())},tci:function(s,u){return n.tci(s,u,this.toArray())}});function l(o,s,u,c){if(o>1||u>1||o<=0||u<=0)throw new Error("Proportions should be greater than 0 and less than 1");var d=(o*s+u*c)/(s+c),p=i.sqrt(d*(1-d)*(1/s+1/c));return(o-u)/p}n.extend(n.fn,{oneSidedDifferenceOfProportions:function(s,u,c,d){var p=l(s,u,c,d);return n.ztest(p,1)},twoSidedDifferenceOfProportions:function(s,u,c,d){var p=l(s,u,c,d);return n.ztest(p,2)}})})(r,Math),r.models=(function(){function n(l){var o=l[0].length,s=r.arange(o).map(function(u){var c=r.arange(o).filter(function(d){return d!==u});return i(r.col(l,u).map(function(d){return d[0]}),r.col(l,c))});return s}function i(l,o){var s=l.length,u=o[0].length-1,c=s-u-1,d=r.lstsq(o,l),p=r.multiply(o,d.map(function(I){return[I]})).map(function(I){return I[0]}),m=r.subtract(l,p),v=r.mean(l),y=r.sum(p.map(function(I){return Math.pow(I-v,2)})),E=r.sum(l.map(function(I,N){return Math.pow(I-p[N],2)})),g=y+E,_=y/g;return{exog:o,endog:l,nobs:s,df_model:u,df_resid:c,coef:d,predict:p,resid:m,ybar:v,SST:g,SSE:y,SSR:E,R2:_}}function h(l){var o=n(l.exog),s=Math.sqrt(l.SSR/l.df_resid),u=o.map(function(v){var y=v.SST,E=v.R2;return s/Math.sqrt(y*(1-E))}),c=l.coef.map(function(v,y){return(v-0)/u[y]}),d=c.map(function(v){var y=r.studentt.cdf(v,l.df_resid);return(y>.5?1-y:y)*2}),p=r.studentt.inv(.975,l.df_resid),m=l.coef.map(function(v,y){var E=p*u[y];return[v-E,v+E]});return{se:u,t:c,p:d,sigmaHat:s,interval95:m}}function f(l){var o=l.R2/l.df_model/((1-l.R2)/l.df_resid),s=function(c,d,p){return r.beta.cdf(c/(p/d+c),d/2,p/2)},u=1-s(o,l.df_model,l.df_resid);return{F_statistic:o,pvalue:u}}function a(l,o){var s=i(l,o),u=h(s),c=f(s),d=1-(1-s.R2)*((s.nobs-1)/s.df_resid);return s.t=u,s.f=c,s.adjust_R2=d,s}return{ols:a}})(),r.extend({buildxmatrix:function(){for(var i=new Array(arguments.length),h=0;h<arguments.length;h++){var f=[1];i[h]=f.concat(arguments[h])}return r(i)},builddxmatrix:function(){for(var i=new Array(arguments[0].length),h=0;h<arguments[0].length;h++){var f=[1];i[h]=f.concat(arguments[0][h])}return r(i)},buildjxmatrix:function(i){for(var h=new Array(i.length),f=0;f<i.length;f++)h[f]=i[f];return r.builddxmatrix(h)},buildymatrix:function(i){return r(i).transpose()},buildjymatrix:function(i){return i.transpose()},matrixmult:function(i,h){var f,a,l,o,s;if(i.cols()==h.rows()){if(h.rows()>1){for(o=[],f=0;f<i.rows();f++)for(o[f]=[],a=0;a<h.cols();a++){for(s=0,l=0;l<i.cols();l++)s+=i.toArray()[f][l]*h.toArray()[l][a];o[f][a]=s}return r(o)}for(o=[],f=0;f<i.rows();f++)for(o[f]=[],a=0;a<h.cols();a++){for(s=0,l=0;l<i.cols();l++)s+=i.toArray()[f][l]*h.toArray()[a];o[f][a]=s}return r(o)}},regress:function(i,h){var f=r.xtranspxinv(i),a=i.transpose(),l=r.matrixmult(r(f),a);return r.matrixmult(l,h)},regresst:function(i,h,f){var a=r.regress(i,h),l={};l.anova={};var o=r.jMatYBar(i,a);l.yBar=o;var s=h.mean();l.anova.residuals=r.residuals(h,o),l.anova.ssr=r.ssr(o,s),l.anova.msr=l.anova.ssr/(i[0].length-1),l.anova.sse=r.sse(h,o),l.anova.mse=l.anova.sse/(h.length-(i[0].length-1)-1),l.anova.sst=r.sst(h,s),l.anova.mst=l.anova.sst/(h.length-1),l.anova.r2=1-l.anova.sse/l.anova.sst,l.anova.r2<0&&(l.anova.r2=0),l.anova.fratio=l.anova.msr/l.anova.mse,l.anova.pvalue=r.anovaftest(l.anova.fratio,i[0].length-1,h.length-(i[0].length-1)-1),l.anova.rmse=Math.sqrt(l.anova.mse),l.anova.r2adj=1-l.anova.mse/l.anova.mst,l.anova.r2adj<0&&(l.anova.r2adj=0),l.stats=new Array(i[0].length);for(var u=r.xtranspxinv(i),c,d,p,m=0;m<a.length;m++)c=Math.sqrt(l.anova.mse*Math.abs(u[m][m])),d=Math.abs(a[m]/c),p=r.ttest(d,h.length-i[0].length-1,f),l.stats[m]=[a[m],c,d,p];return l.regress=a,l},xtranspx:function(i){return r.matrixmult(i.transpose(),i)},xtranspxinv:function(i){var h=r.matrixmult(i.transpose(),i),f=r.inv(h);return f},jMatYBar:function(i,h){var f=r.matrixmult(i,h);return new r(f)},residuals:function(i,h){return r.matrixsubtract(i,h)},ssr:function(i,h){for(var f=0,a=0;a<i.length;a++)f+=Math.pow(i[a]-h,2);return f},sse:function(i,h){for(var f=0,a=0;a<i.length;a++)f+=Math.pow(i[a]-h[a],2);return f},sst:function(i,h){for(var f=0,a=0;a<i.length;a++)f+=Math.pow(i[a]-h,2);return f},matrixsubtract:function(i,h){for(var f=new Array(i.length),a=0;a<i.length;a++){f[a]=new Array(i[a].length);for(var l=0;l<i[a].length;l++)f[a][l]=i[a][l]-h[a][l]}return r(f)}}),r.jStat=r,r})})(Li)),Li.exports}var sn={},ef;function Ko(){if(ef)return sn;ef=1;var t="=",e=[">",">=","<","<=","=","<>"],r="operator",n="literal",i=[r,n];sn.TOKEN_TYPE_OPERATOR=r,sn.TOKEN_TYPE_LITERAL=n;function h(u,c){if(i.indexOf(c)===-1)throw new Error("Unsupported token type: "+c);return{value:u,type:c}}function f(u){return typeof u!="string"||/^\d+(\.\d+)?$/.test(u)&&(u=u.indexOf(".")===-1?parseInt(u,10):parseFloat(u)),u}function a(u){for(var c=u.length,d=[],p=0,m="",v="";p<c;){var y=u.charAt(p);switch(y){case">":case"<":case"=":v=v+y,m.length>0&&(d.push(m),m="");break;default:v.length>0&&(d.push(v),v=""),m=m+y;break}p++}return m.length>0&&d.push(m),v.length>0&&d.push(v),d}function l(u){for(var c="",d=[],p=0;p<u.length;p++){var m=u[p];p===0&&e.indexOf(m)>=0?d.push(h(m,r)):c+=m}return c.length>0&&d.push(h(f(c),n)),d.length>0&&d[0].type!==r&&d.unshift(h(t,r)),d}function o(u){for(var c=[],d,p=0;p<u.length;p++){var m=u[p];switch(m.type){case r:d=m.value;break;case n:c.push(m.value);break}}return s(c,d)}function s(u,c){var d=!1;switch(c){case">":d=u[0]>u[1];break;case">=":d=u[0]>=u[1];break;case"<":d=u[0]<u[1];break;case"<=":d=u[0]<=u[1];break;case"=":d=u[0]==u[1];break;case"<>":d=u[0]!=u[1];break}return d}return sn.parse=function(u){return l(a(u))},sn.createToken=h,sn.compute=o,sn}var Ft={},tf;function nf(){if(tf)return Ft;tf=1;var t=dt(),e=Je();return Ft.UNIQUE=function(){for(var r=[],n=0;n<arguments.length;++n){for(var i=!1,h=arguments[n],f=0;f<r.length&&(i=r[f]===h,!i);++f);i||r.push(h)}return r},Ft.FLATTEN=t.flatten,Ft.ARGS2ARRAY=function(){return Array.prototype.slice.call(arguments,0)},Ft.REFERENCE=function(r,n){if(!arguments.length)return e.error;try{for(var i=n.split("."),h=r,f=0;f<i.length;++f){var a=i[f];if(a[a.length-1]==="]"){var l=a.indexOf("["),o=a.substring(l+1,a.length-1);h=h[a.substring(0,l)][o]}else h=h[a]}return h}catch{}},Ft.JOIN=function(r,n){return r.join(n)},Ft.NUMBERS=function(){var r=t.flatten(arguments);return r.filter(function(n){return typeof n=="number"})},Ft}var rf;function ki(){return rf||(rf=1,(function(t){var e=Fi(),r=Qo(),n=jc(),i=dt(),h=Ko(),f=Je(),a=nf(),l=2.5066282746310002;t.AVEDEV=function(){var o=i.parseNumberArray(i.flatten(arguments));return o instanceof Error?o:n.sum(n(o).subtract(n.mean(o)).abs()[0])/o.length},t.AVERAGE=function(){for(var o=i.numbers(i.flatten(arguments)),s=o.length,u=0,c=0,d,p=0;p<s;p++)u+=o[p],c+=1;return d=u/c,isNaN(d)&&(d=f.num),d},t.AVERAGEA=function(){for(var o=i.flatten(arguments),s=o.length,u=0,c=0,d,p=0;p<s;p++){var m=o[p];typeof m=="number"&&(u+=m),m===!0&&u++,m!==null&&c++}return d=u/c,isNaN(d)&&(d=f.num),d},t.AVERAGEIF=function(o,s,u){if(arguments.length<=1)return f.na;if(u=u||o,o=i.flatten(o),u=i.parseNumberArray(i.flatten(u)),u instanceof Error)return u;for(var c=0,d=0,p=s===void 0||s==="*",m=p?null:h.parse(s+""),v=0;v<o.length;v++){var y=o[v];if(p)d+=u[v],c++;else{var E=[h.createToken(y,h.TOKEN_TYPE_LITERAL)].concat(m);h.compute(E)&&(d+=u[v],c++)}}return d/c},t.AVERAGEIFS=function(){for(var o=i.argsToArray(arguments),s=(o.length-1)/2,u=i.flatten(o[0]),c=0,d=0,p=0;p<u.length;p++){for(var m=!1,v=0;v<s;v++){var y=o[2*v+1][p],E=o[2*v+2],g=E===void 0||E==="*",_=!1;if(g)_=!0;else{var I=h.parse(E+""),N=[h.createToken(y,h.TOKEN_TYPE_LITERAL)].concat(I);_=h.compute(N)}if(!_){m=!1;break}m=!0}m&&(d+=u[p],c++)}var w=d/c;return isNaN(w)?0:w},t.BETA={},t.BETA.DIST=function(o,s,u,c,d,p){return arguments.length<4||(d=d===void 0?0:d,p=p===void 0?1:p,o=i.parseNumber(o),s=i.parseNumber(s),u=i.parseNumber(u),d=i.parseNumber(d),p=i.parseNumber(p),i.anyIsError(o,s,u,d,p))?f.value:(o=(o-d)/(p-d),c?n.beta.cdf(o,s,u):n.beta.pdf(o,s,u))},t.BETA.INV=function(o,s,u,c,d){return c=c===void 0?0:c,d=d===void 0?1:d,o=i.parseNumber(o),s=i.parseNumber(s),u=i.parseNumber(u),c=i.parseNumber(c),d=i.parseNumber(d),i.anyIsError(o,s,u,c,d)?f.value:n.beta.inv(o,s,u)*(d-c)+c},t.BINOM={},t.BINOM.DIST=function(o,s,u,c){return o=i.parseNumber(o),s=i.parseNumber(s),u=i.parseNumber(u),c=i.parseNumber(c),i.anyIsError(o,s,u,c)?f.value:c?n.binomial.cdf(o,s,u):n.binomial.pdf(o,s,u)},t.BINOM.DIST.RANGE=function(o,s,u,c){if(c=c===void 0?u:c,o=i.parseNumber(o),s=i.parseNumber(s),u=i.parseNumber(u),c=i.parseNumber(c),i.anyIsError(o,s,u,c))return f.value;for(var d=0,p=u;p<=c;p++)d+=e.COMBIN(o,p)*Math.pow(s,p)*Math.pow(1-s,o-p);return d},t.BINOM.INV=function(o,s,u){if(o=i.parseNumber(o),s=i.parseNumber(s),u=i.parseNumber(u),i.anyIsError(o,s,u))return f.value;for(var c=0;c<=o;){if(n.binomial.cdf(c,o,s)>=u)return c;c++}},t.CHISQ={},t.CHISQ.DIST=function(o,s,u){return o=i.parseNumber(o),s=i.parseNumber(s),i.anyIsError(o,s)?f.value:u?n.chisquare.cdf(o,s):n.chisquare.pdf(o,s)},t.CHISQ.DIST.RT=function(o,s){return!o|!s?f.na:o<1||s>Math.pow(10,10)?f.num:typeof o!="number"||typeof s!="number"?f.value:1-n.chisquare.cdf(o,s)},t.CHISQ.INV=function(o,s){return o=i.parseNumber(o),s=i.parseNumber(s),i.anyIsError(o,s)?f.value:n.chisquare.inv(o,s)},t.CHISQ.INV.RT=function(o,s){return!o|!s?f.na:o<0||o>1||s<1||s>Math.pow(10,10)?f.num:typeof o!="number"||typeof s!="number"?f.value:n.chisquare.inv(1-o,s)},t.CHISQ.TEST=function(o,s){if(arguments.length!==2)return f.na;if(!(o instanceof Array)||!(s instanceof Array)||o.length!==s.length||o[0]&&s[0]&&o[0].length!==s[0].length)return f.value;var u=o.length,c,d,p;for(d=0;d<u;d++)o[d]instanceof Array||(c=o[d],o[d]=[],o[d].push(c)),s[d]instanceof Array||(c=s[d],s[d]=[],s[d].push(c));var m=o[0].length,v=m===1?u-1:(u-1)*(m-1),y=0,E=Math.PI;for(d=0;d<u;d++)for(p=0;p<m;p++)y+=Math.pow(o[d][p]-s[d][p],2)/s[d][p];function g(_,I){var N=Math.exp(-.5*_);I%2===1&&(N=N*Math.sqrt(2*_/E));for(var w=I;w>=2;)N=N*_/w,w=w-2;for(var C=N,T=I;C>1e-10*N;)T=T+2,C=C*_/T,N=N+C;return 1-N}return Math.round(g(y,v)*1e6)/1e6},t.COLUMN=function(o,s){if(arguments.length!==2)return f.na;if(s<0)return f.num;if(!(o instanceof Array)||typeof s!="number")return f.value;if(o.length!==0)return n.col(o,s)},t.COLUMNS=function(o){return arguments.length!==1?f.na:o instanceof Array?o.length===0?0:n.cols(o):f.value},t.CONFIDENCE={},t.CONFIDENCE.NORM=function(o,s,u){return o=i.parseNumber(o),s=i.parseNumber(s),u=i.parseNumber(u),i.anyIsError(o,s,u)?f.value:n.normalci(1,o,s,u)[1]-1},t.CONFIDENCE.T=function(o,s,u){return o=i.parseNumber(o),s=i.parseNumber(s),u=i.parseNumber(u),i.anyIsError(o,s,u)?f.value:n.tci(1,o,s,u)[1]-1},t.CORREL=function(o,s){return o=i.parseNumberArray(i.flatten(o)),s=i.parseNumberArray(i.flatten(s)),i.anyIsError(o,s)?f.value:n.corrcoeff(o,s)},t.COUNT=function(){return i.numbers(i.flatten(arguments)).length},t.COUNTA=function(){var o=i.flatten(arguments);return o.length-t.COUNTBLANK(o)},t.COUNTIN=function(o,s){var u=0;o=i.flatten(o);for(var c=0;c<o.length;c++)o[c]===s&&u++;return u},t.COUNTBLANK=function(){for(var o=i.flatten(arguments),s=0,u,c=0;c<o.length;c++)u=o[c],(u===null||u==="")&&s++;return s},t.COUNTIF=function(o,s){o=i.flatten(o);var u=s===void 0||s==="*";if(u)return o.length;for(var c=0,d=h.parse(s+""),p=0;p<o.length;p++){var m=o[p],v=[h.createToken(m,h.TOKEN_TYPE_LITERAL)].concat(d);h.compute(v)&&c++}return c},t.COUNTIFS=function(){for(var o=i.argsToArray(arguments),s=new Array(i.flatten(o[0]).length),u=0;u<s.length;u++)s[u]=!0;for(u=0;u<o.length;u+=2){var c=i.flatten(o[u]),d=o[u+1],p=d===void 0||d==="*";if(!p)for(var m=h.parse(d+""),v=0;v<c.length;v++){var y=c[v],E=[h.createToken(y,h.TOKEN_TYPE_LITERAL)].concat(m);s[v]=s[v]&&h.compute(E)}}var g=0;for(u=0;u<s.length;u++)s[u]&&g++;return g},t.COUNTUNIQUE=function(){return a.UNIQUE.apply(null,i.flatten(arguments)).length},t.COVARIANCE={},t.COVARIANCE.P=function(o,s){if(o=i.parseNumberArray(i.flatten(o)),s=i.parseNumberArray(i.flatten(s)),i.anyIsError(o,s))return f.value;for(var u=n.mean(o),c=n.mean(s),d=0,p=o.length,m=0;m<p;m++)d+=(o[m]-u)*(s[m]-c);return d/p},t.COVARIANCE.S=function(o,s){return o=i.parseNumberArray(i.flatten(o)),s=i.parseNumberArray(i.flatten(s)),i.anyIsError(o,s)?f.value:n.covariance(o,s)},t.DEVSQ=function(){var o=i.parseNumberArray(i.flatten(arguments));if(o instanceof Error)return o;for(var s=n.mean(o),u=0,c=0;c<o.length;c++)u+=Math.pow(o[c]-s,2);return u},t.EXPON={},t.EXPON.DIST=function(o,s,u){return o=i.parseNumber(o),s=i.parseNumber(s),i.anyIsError(o,s)?f.value:u?n.exponential.cdf(o,s):n.exponential.pdf(o,s)},t.F={},t.F.DIST=function(o,s,u,c){return o=i.parseNumber(o),s=i.parseNumber(s),u=i.parseNumber(u),i.anyIsError(o,s,u)?f.value:c?n.centralF.cdf(o,s,u):n.centralF.pdf(o,s,u)},t.F.DIST.RT=function(o,s,u){return arguments.length!==3?f.na:o<0||s<1||u<1?f.num:typeof o!="number"||typeof s!="number"||typeof u!="number"?f.value:1-n.centralF.cdf(o,s,u)},t.F.INV=function(o,s,u){return o=i.parseNumber(o),s=i.parseNumber(s),u=i.parseNumber(u),i.anyIsError(o,s,u)?f.value:o<=0||o>1?f.num:n.centralF.inv(o,s,u)},t.F.INV.RT=function(o,s,u){return arguments.length!==3?f.na:o<0||o>1||s<1||s>Math.pow(10,10)||u<1||u>Math.pow(10,10)?f.num:typeof o!="number"||typeof s!="number"||typeof u!="number"?f.value:n.centralF.inv(1-o,s,u)},t.F.TEST=function(o,s){if(!o||!s||!(o instanceof Array)||!(s instanceof Array))return f.na;if(o.length<2||s.length<2)return f.div0;var u=function(v,y){for(var E=0,g=0;g<v.length;g++)E+=Math.pow(v[g]-y,2);return E},c=e.SUM(o)/o.length,d=e.SUM(s)/s.length,p=u(o,c)/(o.length-1),m=u(s,d)/(s.length-1);return p/m},t.FISHER=function(o){return o=i.parseNumber(o),o instanceof Error?o:Math.log((1+o)/(1-o))/2},t.FISHERINV=function(o){if(o=i.parseNumber(o),o instanceof Error)return o;var s=Math.exp(2*o);return(s-1)/(s+1)},t.FORECAST=function(o,s,u){if(o=i.parseNumber(o),s=i.parseNumberArray(i.flatten(s)),u=i.parseNumberArray(i.flatten(u)),i.anyIsError(o,s,u))return f.value;for(var c=n.mean(u),d=n.mean(s),p=u.length,m=0,v=0,y=0;y<p;y++)m+=(u[y]-c)*(s[y]-d),v+=Math.pow(u[y]-c,2);var E=m/v,g=d-E*c;return g+E*o},t.FREQUENCY=function(o,s){if(o=i.parseNumberArray(i.flatten(o)),s=i.parseNumberArray(i.flatten(s)),i.anyIsError(o,s))return f.value;for(var u=o.length,c=s.length,d=[],p=0;p<=c;p++){d[p]=0;for(var m=0;m<u;m++)p===0?o[m]<=s[0]&&(d[0]+=1):p<c?o[m]>s[p-1]&&o[m]<=s[p]&&(d[p]+=1):p===c&&o[m]>s[c-1]&&(d[c]+=1)}return d},t.GAMMA=function(o){return o=i.parseNumber(o),o instanceof Error?o:o===0||parseInt(o,10)===o&&o<0?f.num:n.gammafn(o)},t.GAMMA.DIST=function(o,s,u,c){return arguments.length!==4?f.na:o<0||s<=0||u<=0||typeof o!="number"||typeof s!="number"||typeof u!="number"?f.value:c?n.gamma.cdf(o,s,u,!0):n.gamma.pdf(o,s,u,!1)},t.GAMMA.INV=function(o,s,u){return arguments.length!==3?f.na:o<0||o>1||s<=0||u<=0?f.num:typeof o!="number"||typeof s!="number"||typeof u!="number"?f.value:n.gamma.inv(o,s,u)},t.GAMMALN=function(o){return o=i.parseNumber(o),o instanceof Error?o:n.gammaln(o)},t.GAMMALN.PRECISE=function(o){return arguments.length!==1?f.na:o<=0?f.num:typeof o!="number"?f.value:n.gammaln(o)},t.GAUSS=function(o){return o=i.parseNumber(o),o instanceof Error?o:n.normal.cdf(o,0,1)-.5},t.GEOMEAN=function(){var o=i.parseNumberArray(i.flatten(arguments));return o instanceof Error?o:n.geomean(o)},t.GROWTH=function(o,s,u,c){if(o=i.parseNumberArray(o),o instanceof Error)return o;var d;if(s===void 0)for(s=[],d=1;d<=o.length;d++)s.push(d);if(u===void 0)for(u=[],d=1;d<=o.length;d++)u.push(d);if(s=i.parseNumberArray(s),u=i.parseNumberArray(u),i.anyIsError(s,u))return f.value;c===void 0&&(c=!0);var p=o.length,m=0,v=0,y=0,E=0;for(d=0;d<p;d++){var g=s[d],_=Math.log(o[d]);m+=g,v+=_,y+=g*_,E+=g*g}m/=p,v/=p,y/=p,E/=p;var I,N;c?(I=(y-m*v)/(E-m*m),N=v-I*m):(I=y/E,N=0);var w=[];for(d=0;d<u.length;d++)w.push(Math.exp(N+I*u[d]));return w},t.HARMEAN=function(){var o=i.parseNumberArray(i.flatten(arguments));if(o instanceof Error)return o;for(var s=o.length,u=0,c=0;c<s;c++)u+=1/o[c];return s/u},t.HYPGEOM={},t.HYPGEOM.DIST=function(o,s,u,c,d){if(o=i.parseNumber(o),s=i.parseNumber(s),u=i.parseNumber(u),c=i.parseNumber(c),i.anyIsError(o,s,u,c))return f.value;function p(v,y,E,g){return e.COMBIN(E,v)*e.COMBIN(g-E,y-v)/e.COMBIN(g,y)}function m(v,y,E,g){for(var _=0,I=0;I<=v;I++)_+=p(I,y,E,g);return _}return d?m(o,s,u,c):p(o,s,u,c)},t.INTERCEPT=function(o,s){return o=i.parseNumberArray(o),s=i.parseNumberArray(s),i.anyIsError(o,s)?f.value:o.length!==s.length?f.na:t.FORECAST(0,o,s)},t.KURT=function(){var o=i.parseNumberArray(i.flatten(arguments));if(o instanceof Error)return o;for(var s=n.mean(o),u=o.length,c=0,d=0;d<u;d++)c+=Math.pow(o[d]-s,4);return c=c/Math.pow(n.stdev(o,!0),4),u*(u+1)/((u-1)*(u-2)*(u-3))*c-3*(u-1)*(u-1)/((u-2)*(u-3))},t.LARGE=function(o,s){return o=i.parseNumberArray(i.flatten(o)),s=i.parseNumber(s),i.anyIsError(o,s)?o:o.sort(function(u,c){return c-u})[s-1]},t.LINEST=function(o,s){if(o=i.parseNumberArray(i.flatten(o)),s=i.parseNumberArray(i.flatten(s)),i.anyIsError(o,s))return f.value;for(var u=n.mean(o),c=n.mean(s),d=s.length,p=0,m=0,v=0;v<d;v++)p+=(s[v]-c)*(o[v]-u),m+=Math.pow(s[v]-c,2);var y=p/m,E=u-y*c;return[y,E]},t.LOGEST=function(o,s){if(o=i.parseNumberArray(i.flatten(o)),s=i.parseNumberArray(i.flatten(s)),i.anyIsError(o,s))return f.value;for(var u=0;u<o.length;u++)o[u]=Math.log(o[u]);var c=t.LINEST(o,s);return c[0]=Math.round(Math.exp(c[0])*1e6)/1e6,c[1]=Math.round(Math.exp(c[1])*1e6)/1e6,c},t.LOGNORM={},t.LOGNORM.DIST=function(o,s,u,c){return o=i.parseNumber(o),s=i.parseNumber(s),u=i.parseNumber(u),i.anyIsError(o,s,u)?f.value:c?n.lognormal.cdf(o,s,u):n.lognormal.pdf(o,s,u)},t.LOGNORM.INV=function(o,s,u){return o=i.parseNumber(o),s=i.parseNumber(s),u=i.parseNumber(u),i.anyIsError(o,s,u)?f.value:n.lognormal.inv(o,s,u)},t.MAX=function(){var o=i.numbers(i.flatten(arguments));return o.length===0?0:Math.max.apply(Math,o)},t.MAXA=function(){var o=i.arrayValuesToNumbers(i.flatten(arguments));return o.length===0?0:Math.max.apply(Math,o)},t.MEDIAN=function(){var o=i.arrayValuesToNumbers(i.flatten(arguments)),s=n.median(o);return isNaN(s)&&(s=f.num),s},t.MIN=function(){var o=i.numbers(i.flatten(arguments));return o.length===0?0:Math.min.apply(Math,o)},t.MINA=function(){var o=i.arrayValuesToNumbers(i.flatten(arguments));return o.length===0?0:Math.min.apply(Math,o)},t.MODE={},t.MODE.MULT=function(){var o=i.parseNumberArray(i.flatten(arguments));if(o instanceof Error)return o;for(var s=o.length,u={},c=[],d=0,p,m=0;m<s;m++)p=o[m],u[p]=u[p]?u[p]+1:1,u[p]>d&&(d=u[p],c=[]),u[p]===d&&(c[c.length]=p);return c},t.MODE.SNGL=function(){var o=i.parseNumberArray(i.flatten(arguments));return o instanceof Error?o:t.MODE.MULT(o).sort(function(s,u){return s-u})[0]},t.NEGBINOM={},t.NEGBINOM.DIST=function(o,s,u,c){return o=i.parseNumber(o),s=i.parseNumber(s),u=i.parseNumber(u),i.anyIsError(o,s,u)?f.value:c?n.negbin.cdf(o,s,u):n.negbin.pdf(o,s,u)},t.NORM={},t.NORM.DIST=function(o,s,u,c){return o=i.parseNumber(o),s=i.parseNumber(s),u=i.parseNumber(u),i.anyIsError(o,s,u)?f.value:u<=0?f.num:c?n.normal.cdf(o,s,u):n.normal.pdf(o,s,u)},t.NORM.INV=function(o,s,u){return o=i.parseNumber(o),s=i.parseNumber(s),u=i.parseNumber(u),i.anyIsError(o,s,u)?f.value:n.normal.inv(o,s,u)},t.NORM.S={},t.NORM.S.DIST=function(o,s){return o=i.parseNumber(o),o instanceof Error?f.value:s?n.normal.cdf(o,0,1):n.normal.pdf(o,0,1)},t.NORM.S.INV=function(o){return o=i.parseNumber(o),o instanceof Error?f.value:n.normal.inv(o,0,1)},t.PEARSON=function(o,s){if(s=i.parseNumberArray(i.flatten(s)),o=i.parseNumberArray(i.flatten(o)),i.anyIsError(s,o))return f.value;for(var u=n.mean(o),c=n.mean(s),d=o.length,p=0,m=0,v=0,y=0;y<d;y++)p+=(o[y]-u)*(s[y]-c),m+=Math.pow(o[y]-u,2),v+=Math.pow(s[y]-c,2);return p/Math.sqrt(m*v)},t.PERCENTILE={},t.PERCENTILE.EXC=function(o,s){if(o=i.parseNumberArray(i.flatten(o)),s=i.parseNumber(s),i.anyIsError(o,s))return f.value;o=o.sort(function(p,m){return p-m});var u=o.length;if(s<1/(u+1)||s>1-1/(u+1))return f.num;var c=s*(u+1)-1,d=Math.floor(c);return i.cleanFloat(c===d?o[c]:o[d]+(c-d)*(o[d+1]-o[d]))},t.PERCENTILE.INC=function(o,s){if(o=i.parseNumberArray(i.flatten(o)),s=i.parseNumber(s),i.anyIsError(o,s))return f.value;o=o.sort(function(p,m){return p-m});var u=o.length,c=s*(u-1),d=Math.floor(c);return i.cleanFloat(c===d?o[c]:o[d]+(c-d)*(o[d+1]-o[d]))},t.PERCENTRANK={},t.PERCENTRANK.EXC=function(o,s,u){if(u=u===void 0?3:u,o=i.parseNumberArray(i.flatten(o)),s=i.parseNumber(s),u=i.parseNumber(u),i.anyIsError(o,s,u))return f.value;o=o.sort(function(g,_){return g-_});for(var c=a.UNIQUE.apply(null,o),d=o.length,p=c.length,m=Math.pow(10,u),v=0,y=!1,E=0;!y&&E<p;)s===c[E]?(v=(o.indexOf(c[E])+1)/(d+1),y=!0):s>=c[E]&&(s<c[E+1]||E===p-1)&&(v=(o.indexOf(c[E])+1+(s-c[E])/(c[E+1]-c[E]))/(d+1),y=!0),E++;return Math.floor(v*m)/m},t.PERCENTRANK.INC=function(o,s,u){if(u=u===void 0?3:u,o=i.parseNumberArray(i.flatten(o)),s=i.parseNumber(s),u=i.parseNumber(u),i.anyIsError(o,s,u))return f.value;o=o.sort(function(g,_){return g-_});for(var c=a.UNIQUE.apply(null,o),d=o.length,p=c.length,m=Math.pow(10,u),v=0,y=!1,E=0;!y&&E<p;)s===c[E]?(v=o.indexOf(c[E])/(d-1),y=!0):s>=c[E]&&(s<c[E+1]||E===p-1)&&(v=(o.indexOf(c[E])+(s-c[E])/(c[E+1]-c[E]))/(d-1),y=!0),E++;return Math.floor(v*m)/m},t.PERMUT=function(o,s){return o=i.parseNumber(o),s=i.parseNumber(s),i.anyIsError(o,s)?f.value:e.FACT(o)/e.FACT(o-s)},t.PERMUTATIONA=function(o,s){return o=i.parseNumber(o),s=i.parseNumber(s),i.anyIsError(o,s)?f.value:Math.pow(o,s)},t.PHI=function(o){return o=i.parseNumber(o),o instanceof Error?f.value:Math.exp(-.5*o*o)/l},t.POISSON={},t.POISSON.DIST=function(o,s,u){return o=i.parseNumber(o),s=i.parseNumber(s),i.anyIsError(o,s)?f.value:u?n.poisson.cdf(o,s):n.poisson.pdf(o,s)},t.PROB=function(o,s,u,c){if(u===void 0)return 0;if(c=c===void 0?u:c,o=i.parseNumberArray(i.flatten(o)),s=i.parseNumberArray(i.flatten(s)),u=i.parseNumber(u),c=i.parseNumber(c),i.anyIsError(o,s,u,c))return f.value;if(u===c)return o.indexOf(u)>=0?s[o.indexOf(u)]:0;for(var d=o.sort(function(y,E){return y-E}),p=d.length,m=0,v=0;v<p;v++)d[v]>=u&&d[v]<=c&&(m+=s[o.indexOf(d[v])]);return m},t.QUARTILE={},t.QUARTILE.EXC=function(o,s){if(o=i.parseNumberArray(i.flatten(o)),s=i.parseNumber(s),i.anyIsError(o,s))return f.value;switch(s){case 1:return t.PERCENTILE.EXC(o,.25);case 2:return t.PERCENTILE.EXC(o,.5);case 3:return t.PERCENTILE.EXC(o,.75);default:return f.num}},t.QUARTILE.INC=function(o,s){if(o=i.parseNumberArray(i.flatten(o)),s=i.parseNumber(s),i.anyIsError(o,s))return f.value;switch(s){case 1:return t.PERCENTILE.INC(o,.25);case 2:return t.PERCENTILE.INC(o,.5);case 3:return t.PERCENTILE.INC(o,.75);default:return f.num}},t.RANK={},t.RANK.AVG=function(o,s,u){if(o=i.parseNumber(o),s=i.parseNumberArray(i.flatten(s)),i.anyIsError(o,s))return f.value;s=i.flatten(s),u=u||!1;var c=u?function(v,y){return v-y}:function(v,y){return y-v};s=s.sort(c);for(var d=s.length,p=0,m=0;m<d;m++)s[m]===o&&p++;return p>1?(2*s.indexOf(o)+p+1)/2:s.indexOf(o)+1},t.RANK.EQ=function(o,s,u){if(o=i.parseNumber(o),s=i.parseNumberArray(i.flatten(s)),i.anyIsError(o,s))return f.value;u=u||!1;var c=u?function(d,p){return d-p}:function(d,p){return p-d};return s=s.sort(c),s.indexOf(o)+1},t.ROW=function(o,s){if(arguments.length!==2)return f.na;if(s<0)return f.num;if(!(o instanceof Array)||typeof s!="number")return f.value;if(o.length!==0)return n.row(o,s)},t.ROWS=function(o){return arguments.length!==1?f.na:o instanceof Array?o.length===0?0:n.rows(o):f.value},t.RSQ=function(o,s){return o=i.parseNumberArray(i.flatten(o)),s=i.parseNumberArray(i.flatten(s)),i.anyIsError(o,s)?f.value:Math.pow(t.PEARSON(o,s),2)},t.SKEW=function(){var o=i.parseNumberArray(i.flatten(arguments));if(o instanceof Error)return o;for(var s=n.mean(o),u=o.length,c=0,d=0;d<u;d++)c+=Math.pow(o[d]-s,3);return u*c/((u-1)*(u-2)*Math.pow(n.stdev(o,!0),3))},t.SKEW.P=function(){var o=i.parseNumberArray(i.flatten(arguments));if(o instanceof Error)return o;for(var s=n.mean(o),u=o.length,c=0,d=0,p=0;p<u;p++)d+=Math.pow(o[p]-s,3),c+=Math.pow(o[p]-s,2);return d=d/u,c=c/u,d/Math.pow(c,3/2)},t.SLOPE=function(o,s){if(o=i.parseNumberArray(i.flatten(o)),s=i.parseNumberArray(i.flatten(s)),i.anyIsError(o,s))return f.value;for(var u=n.mean(s),c=n.mean(o),d=s.length,p=0,m=0,v=0;v<d;v++)p+=(s[v]-u)*(o[v]-c),m+=Math.pow(s[v]-u,2);return p/m},t.SMALL=function(o,s){return o=i.parseNumberArray(i.flatten(o)),s=i.parseNumber(s),i.anyIsError(o,s)?o:o.sort(function(u,c){return u-c})[s-1]},t.STANDARDIZE=function(o,s,u){return o=i.parseNumber(o),s=i.parseNumber(s),u=i.parseNumber(u),i.anyIsError(o,s,u)?f.value:(o-s)/u},t.STDEV={},t.STDEV.P=function(){var o=t.VAR.P.apply(this,arguments),s=Math.sqrt(o);return isNaN(s)&&(s=f.num),s},t.STDEV.S=function(){var o=t.VAR.S.apply(this,arguments),s=Math.sqrt(o);return s},t.STDEVA=function(){var o=t.VARA.apply(this,arguments),s=Math.sqrt(o);return s},t.STDEVPA=function(){var o=t.VARPA.apply(this,arguments),s=Math.sqrt(o);return isNaN(s)&&(s=f.num),s},t.STEYX=function(o,s){if(o=i.parseNumberArray(i.flatten(o)),s=i.parseNumberArray(i.flatten(s)),i.anyIsError(o,s))return f.value;for(var u=n.mean(s),c=n.mean(o),d=s.length,p=0,m=0,v=0,y=0;y<d;y++)p+=Math.pow(o[y]-c,2),m+=(s[y]-u)*(o[y]-c),v+=Math.pow(s[y]-u,2);return Math.sqrt((p-m*m/v)/(d-2))},t.TRANSPOSE=function(o){return o?n.transpose(o):f.na},t.T=r.T,t.T.DIST=function(o,s,u){return o=i.parseNumber(o),s=i.parseNumber(s),i.anyIsError(o,s)?f.value:u?n.studentt.cdf(o,s):n.studentt.pdf(o,s)},t.T.DIST["2T"]=function(o,s){return arguments.length!==2?f.na:o<0||s<1?f.num:typeof o!="number"||typeof s!="number"?f.value:(1-n.studentt.cdf(o,s))*2},t.T.DIST.RT=function(o,s){return arguments.length!==2?f.na:o<0||s<1?f.num:typeof o!="number"||typeof s!="number"?f.value:1-n.studentt.cdf(o,s)},t.T.INV=function(o,s){return o=i.parseNumber(o),s=i.parseNumber(s),i.anyIsError(o,s)?f.value:n.studentt.inv(o,s)},t.T.INV["2T"]=function(o,s){return o=i.parseNumber(o),s=i.parseNumber(s),o<=0||o>1||s<1?f.num:i.anyIsError(o,s)?f.value:Math.abs(n.studentt.inv(o/2,s))},t.T.TEST=function(o,s){if(o=i.parseNumberArray(i.flatten(o)),s=i.parseNumberArray(i.flatten(s)),i.anyIsError(o,s))return f.value;var u=n.mean(o),c=n.mean(s),d=0,p=0,m;for(m=0;m<o.length;m++)d+=Math.pow(o[m]-u,2);for(m=0;m<s.length;m++)p+=Math.pow(s[m]-c,2);d=d/(o.length-1),p=p/(s.length-1);var v=Math.abs(u-c)/Math.sqrt(d/o.length+p/s.length);return t.T.DIST["2T"](v,o.length+s.length-2)},t.TREND=function(o,s,u){if(o=i.parseNumberArray(i.flatten(o)),s=i.parseNumberArray(i.flatten(s)),u=i.parseNumberArray(i.flatten(u)),i.anyIsError(o,s,u))return f.value;var c=t.LINEST(o,s),d=c[0],p=c[1],m=[];return u.forEach(function(v){m.push(d*v+p)}),m},t.TRIMMEAN=function(o,s){if(o=i.parseNumberArray(i.flatten(o)),s=i.parseNumber(s),i.anyIsError(o,s))return f.value;var u=e.FLOOR(o.length*s,2)/2;return n.mean(i.initial(i.rest(o.sort(function(c,d){return c-d}),u),u))},t.VAR={},t.VAR.P=function(){for(var o=i.numbers(i.flatten(arguments)),s=o.length,u=0,c=t.AVERAGE(o),d,p=0;p<s;p++)u+=Math.pow(o[p]-c,2);return d=u/s,isNaN(d)&&(d=f.num),d},t.VAR.S=function(){for(var o=i.numbers(i.flatten(arguments)),s=o.length,u=0,c=t.AVERAGE(o),d=0;d<s;d++)u+=Math.pow(o[d]-c,2);return u/(s-1)},t.VARA=function(){for(var o=i.flatten(arguments),s=o.length,u=0,c=0,d=t.AVERAGEA(o),p=0;p<s;p++){var m=o[p];typeof m=="number"?u+=Math.pow(m-d,2):m===!0?u+=Math.pow(1-d,2):u+=Math.pow(0-d,2),m!==null&&c++}return u/(c-1)},t.VARPA=function(){for(var o=i.flatten(arguments),s=o.length,u=0,c=0,d=t.AVERAGEA(o),p,m=0;m<s;m++){var v=o[m];typeof v=="number"?u+=Math.pow(v-d,2):v===!0?u+=Math.pow(1-d,2):u+=Math.pow(0-d,2),v!==null&&c++}return p=u/c,isNaN(p)&&(p=f.num),p},t.WEIBULL={},t.WEIBULL.DIST=function(o,s,u,c){return o=i.parseNumber(o),s=i.parseNumber(s),u=i.parseNumber(u),i.anyIsError(o,s,u)?f.value:c?1-Math.exp(-Math.pow(o/u,s)):Math.pow(o,s-1)*Math.exp(-Math.pow(o/u,s))*s/Math.pow(u,s)},t.Z={},t.Z.TEST=function(o,s,u){if(o=i.parseNumberArray(i.flatten(o)),s=i.parseNumber(s),i.anyIsError(o,s))return f.value;u=u||t.STDEV.S(o);var c=o.length;return 1-t.NORM.S.DIST((t.AVERAGE(o)-s)/(u/Math.sqrt(c)),!0)}})($o)),$o}var Xo={},sf;function Jo(){return sf||(sf=1,(function(t){var e=Je();t.CELL=function(){throw new Error("CELL is not implemented")},t.ERROR={},t.ERROR.TYPE=function(r){switch(r){case e.nil:return 1;case e.div0:return 2;case e.value:return 3;case e.ref:return 4;case e.name:return 5;case e.num:return 6;case e.na:return 7;case e.data:return 8}return e.na},t.INFO=function(){throw new Error("INFO is not implemented")},t.ISBLANK=function(r){return r===null},t.ISBINARY=function(r){return/^[01]{1,10}$/.test(r)},t.ISERR=function(r){return[e.value,e.ref,e.div0,e.num,e.name,e.nil].indexOf(r)>=0||typeof r=="number"&&(isNaN(r)||!isFinite(r))},t.ISERROR=function(r){return t.ISERR(r)||r===e.na},t.ISEVEN=function(r){return!(Math.floor(Math.abs(r))&1)},t.ISFORMULA=function(){throw new Error("ISFORMULA is not implemented")},t.ISLOGICAL=function(r){return r===!0||r===!1},t.ISNA=function(r){return r===e.na},t.ISNONTEXT=function(r){return typeof r!="string"},t.ISNUMBER=function(r){return typeof r=="number"&&!isNaN(r)&&isFinite(r)},t.ISODD=function(r){return!!(Math.floor(Math.abs(r))&1)},t.ISREF=function(){throw new Error("ISREF is not implemented")},t.ISTEXT=function(r){return typeof r=="string"},t.N=function(r){return this.ISNUMBER(r)?r:r instanceof Date?r.getTime():r===!0?1:r===!1?0:this.ISERROR(r)?r:0},t.NA=function(){return e.na},t.SHEET=function(){throw new Error("SHEET is not implemented")},t.SHEETS=function(){throw new Error("SHEETS is not implemented")},t.TYPE=function(r){if(this.ISNUMBER(r))return 1;if(this.ISTEXT(r))return 2;if(this.ISLOGICAL(r))return 4;if(this.ISERROR(r))return 16;if(Array.isArray(r))return 64}})(Xo)),Xo}var of;function Fi(){return of||(of=1,(function(t){var e=dt(),r=Je(),n=ki(),i=Jo(),h=Ko();t.ABS=function(a){if(a=e.parseNumber(a),a instanceof Error)return a;var l=Math.abs(a);return l},t.ACOS=function(a){if(a=e.parseNumber(a),a instanceof Error)return a;var l=Math.acos(a);return isNaN(l)&&(l=r.num),l},t.ACOSH=function(a){if(a=e.parseNumber(a),a instanceof Error)return a;var l=Math.log(a+Math.sqrt(a*a-1));return isNaN(l)&&(l=r.num),l},t.ACOT=function(a){if(a=e.parseNumber(a),a instanceof Error)return a;var l=Math.atan(1/a);return l},t.ACOTH=function(a){if(a=e.parseNumber(a),a instanceof Error)return a;var l=.5*Math.log((a+1)/(a-1));return isNaN(l)&&(l=r.num),l},t.AGGREGATE=function(a,l,o,s){if(a=e.parseNumber(a),l=e.parseNumber(a),e.anyIsError(a,l))return r.value;switch(a){case 1:return n.AVERAGE(o);case 2:return n.COUNT(o);case 3:return n.COUNTA(o);case 4:return n.MAX(o);case 5:return n.MIN(o);case 6:return t.PRODUCT(o);case 7:return n.STDEV.S(o);case 8:return n.STDEV.P(o);case 9:return t.SUM(o);case 10:return n.VAR.S(o);case 11:return n.VAR.P(o);case 12:return n.MEDIAN(o);case 13:return n.MODE.SNGL(o);case 14:return n.LARGE(o,s);case 15:return n.SMALL(o,s);case 16:return n.PERCENTILE.INC(o,s);case 17:return n.QUARTILE.INC(o,s);case 18:return n.PERCENTILE.EXC(o,s);case 19:return n.QUARTILE.EXC(o,s)}},t.ARABIC=function(a){if(!/^M*(?:D?C{0,3}|C[MD])(?:L?X{0,3}|X[CL])(?:V?I{0,3}|I[XV])$/.test(a))return r.value;var l=0;return a.replace(/[MDLV]|C[MD]?|X[CL]?|I[XV]?/g,function(o){l+={M:1e3,CM:900,D:500,CD:400,C:100,XC:90,L:50,XL:40,X:10,IX:9,V:5,IV:4,I:1}[o]}),l},t.ASIN=function(a){if(a=e.parseNumber(a),a instanceof Error)return a;var l=Math.asin(a);return isNaN(l)&&(l=r.num),l},t.ASINH=function(a){return a=e.parseNumber(a),a instanceof Error?a:Math.log(a+Math.sqrt(a*a+1))},t.ATAN=function(a){return a=e.parseNumber(a),a instanceof Error?a:Math.atan(a)},t.ATAN2=function(a,l){return a=e.parseNumber(a),l=e.parseNumber(l),e.anyIsError(a,l)?r.value:Math.atan2(a,l)},t.ATANH=function(a){if(a=e.parseNumber(a),a instanceof Error)return a;var l=Math.log((1+a)/(1-a))/2;return isNaN(l)&&(l=r.num),l},t.BASE=function(a,l,o){if(o=o||0,a=e.parseNumber(a),l=e.parseNumber(l),o=e.parseNumber(o),e.anyIsError(a,l,o))return r.value;o=o===void 0?0:o;var s=a.toString(l);return new Array(Math.max(o+1-s.length,0)).join("0")+s},t.CEILING=function(a,l,o){if(l=l===void 0?1:Math.abs(l),o=o||0,a=e.parseNumber(a),l=e.parseNumber(l),o=e.parseNumber(o),e.anyIsError(a,l,o))return r.value;if(l===0)return 0;var s=-Math.floor(Math.log(l)/Math.log(10));return a>=0?t.ROUND(Math.ceil(a/l)*l,s):o===0?-t.ROUND(Math.floor(Math.abs(a)/l)*l,s):-t.ROUND(Math.ceil(Math.abs(a)/l)*l,s)},t.CEILING.MATH=t.CEILING,t.CEILING.PRECISE=t.CEILING,t.COMBIN=function(a,l){return a=e.parseNumber(a),l=e.parseNumber(l),e.anyIsError(a,l)?r.value:t.FACT(a)/(t.FACT(l)*t.FACT(a-l))},t.COMBINA=function(a,l){return a=e.parseNumber(a),l=e.parseNumber(l),e.anyIsError(a,l)?r.value:a===0&&l===0?1:t.COMBIN(a+l-1,a-1)},t.COS=function(a){return a=e.parseNumber(a),a instanceof Error?a:Math.cos(a)},t.COSH=function(a){return a=e.parseNumber(a),a instanceof Error?a:(Math.exp(a)+Math.exp(-a))/2},t.COT=function(a){return a=e.parseNumber(a),a instanceof Error?a:1/Math.tan(a)},t.COTH=function(a){if(a=e.parseNumber(a),a instanceof Error)return a;var l=Math.exp(2*a);return(l+1)/(l-1)},t.CSC=function(a){return a=e.parseNumber(a),a instanceof Error?a:1/Math.sin(a)},t.CSCH=function(a){return a=e.parseNumber(a),a instanceof Error?a:2/(Math.exp(a)-Math.exp(-a))},t.DECIMAL=function(a,l){return arguments.length<1?r.value:parseInt(a,l)},t.DEGREES=function(a){return a=e.parseNumber(a),a instanceof Error?a:a*180/Math.PI},t.EVEN=function(a){return a=e.parseNumber(a),a instanceof Error?a:t.CEILING(a,-2,-1)},t.EXP=function(a){return arguments.length<1?r.na:typeof a!="number"||arguments.length>1?r.error:(a=Math.exp(a),a)};var f=[];t.FACT=function(a){if(a=e.parseNumber(a),a instanceof Error)return a;var l=Math.floor(a);return l===0||l===1?1:(f[l]>0||(f[l]=t.FACT(l-1)*l),f[l])},t.FACTDOUBLE=function(a){if(a=e.parseNumber(a),a instanceof Error)return a;var l=Math.floor(a);return l<=0?1:l*t.FACTDOUBLE(l-2)},t.FLOOR=function(a,l){if(a=e.parseNumber(a),l=e.parseNumber(l),e.anyIsError(a,l))return r.value;if(l===0)return 0;if(!(a>0&&l>0)&&!(a<0&&l<0))return r.num;l=Math.abs(l);var o=-Math.floor(Math.log(l)/Math.log(10));return a>=0?t.ROUND(Math.floor(a/l)*l,o):-t.ROUND(Math.ceil(Math.abs(a)/l),o)},t.FLOOR.MATH=function(a,l,o){if(l=l===void 0?1:l,o=o===void 0?0:o,a=e.parseNumber(a),l=e.parseNumber(l),o=e.parseNumber(o),e.anyIsError(a,l,o))return r.value;if(l===0)return 0;l=l?Math.abs(l):1;var s=-Math.floor(Math.log(l)/Math.log(10));return a>=0?t.ROUND(Math.floor(a/l)*l,s):o===0||o===void 0?-t.ROUND(Math.ceil(Math.abs(a)/l)*l,s):-t.ROUND(Math.floor(Math.abs(a)/l)*l,s)},t.FLOOR.PRECISE=t.FLOOR.MATH,t.GCD=function(){var a=e.parseNumberArray(e.flatten(arguments));if(a instanceof Error)return a;for(var l=a.length,o=a[0],s=o<0?-o:o,u=1;u<l;u++){for(var c=a[u],d=c<0?-c:c;s&&d;)s>d?s%=d:d%=s;s+=d}return s},t.INT=function(a){return a=e.parseNumber(a),a instanceof Error?a:Math.floor(a)},t.ISO={CEILING:t.CEILING},t.LCM=function(){var a=e.parseNumberArray(e.flatten(arguments));if(a instanceof Error)return a;for(var l,o,s,u,c=1;(s=a.pop())!==void 0;)for(;s>1;){if(s%2){for(l=3,o=Math.floor(Math.sqrt(s));l<=o&&s%l;l+=2);u=l<=o?l:s}else u=2;for(s/=u,c*=u,l=a.length;l;a[--l]%u===0&&(a[l]/=u)===1&&a.splice(l,1));}return c},t.LN=function(a){return a=e.parseNumber(a),a instanceof Error?a:Math.log(a)},t.LN10=function(){return Math.log(10)},t.LN2=function(){return Math.log(2)},t.LOG10E=function(){return Math.LOG10E},t.LOG2E=function(){return Math.LOG2E},t.LOG=function(a,l){return a=e.parseNumber(a),l=e.parseNumber(l),e.anyIsError(a,l)?r.value:(l=l===void 0?10:l,Math.log(a)/Math.log(l))},t.LOG10=function(a){return a=e.parseNumber(a),a instanceof Error?a:Math.log(a)/Math.log(10)},t.MOD=function(a,l){if(a=e.parseNumber(a),l=e.parseNumber(l),e.anyIsError(a,l))return r.value;if(l===0)return r.div0;var o=Math.abs(a%l);return l>0?o:-o},t.MROUND=function(a,l){return a=e.parseNumber(a),l=e.parseNumber(l),e.anyIsError(a,l)?r.value:a*l<0?r.num:Math.round(a/l)*l},t.MULTINOMIAL=function(){var a=e.parseNumberArray(e.flatten(arguments));if(a instanceof Error)return a;for(var l=0,o=1,s=0;s<a.length;s++)l+=a[s],o*=t.FACT(a[s]);return t.FACT(l)/o},t.ODD=function(a){if(a=e.parseNumber(a),a instanceof Error)return a;var l=Math.ceil(Math.abs(a));return l=l&1?l:l+1,a>0?l:-l},t.PI=function(){return Math.PI},t.E=function(){return Math.E},t.POWER=function(a,l){if(a=e.parseNumber(a),l=e.parseNumber(l),e.anyIsError(a,l))return r.value;var o=Math.pow(a,l);return isNaN(o)?r.num:o},t.PRODUCT=function(){var a=e.parseNumberArray(e.flatten(arguments));if(a instanceof Error)return a;for(var l=1,o=0;o<a.length;o++)l*=a[o];return l},t.QUOTIENT=function(a,l){return a=e.parseNumber(a),l=e.parseNumber(l),e.anyIsError(a,l)?r.value:parseInt(a/l,10)},t.RADIANS=function(a){return a=e.parseNumber(a),a instanceof Error?a:a*Math.PI/180},t.RAND=function(){return Math.random()},t.RANDBETWEEN=function(a,l){return a=e.parseNumber(a),l=e.parseNumber(l),e.anyIsError(a,l)?r.value:a+Math.ceil((l-a+1)*Math.random())-1},t.ROMAN=function(a){if(a=e.parseNumber(a),a instanceof Error)return a;for(var l=String(a).split(""),o=["","C","CC","CCC","CD","D","DC","DCC","DCCC","CM","","X","XX","XXX","XL","L","LX","LXX","LXXX","XC","","I","II","III","IV","V","VI","VII","VIII","IX"],s="",u=3;u--;)s=(o[+l.pop()+u*10]||"")+s;return new Array(+l.join("")+1).join("M")+s},t.ROUND=function(a,l){return a=e.parseNumber(a),l=e.parseNumber(l),e.anyIsError(a,l)?r.value:Math.round(a*Math.pow(10,l))/Math.pow(10,l)},t.ROUNDDOWN=function(a,l){if(a=e.parseNumber(a),l=e.parseNumber(l),e.anyIsError(a,l))return r.value;var o=a>0?1:-1;return o*Math.floor(Math.abs(a)*Math.pow(10,l))/Math.pow(10,l)},t.ROUNDUP=function(a,l){if(a=e.parseNumber(a),l=e.parseNumber(l),e.anyIsError(a,l))return r.value;var o=a>0?1:-1;return o*Math.ceil(Math.abs(a)*Math.pow(10,l))/Math.pow(10,l)},t.SEC=function(a){return a=e.parseNumber(a),a instanceof Error?a:1/Math.cos(a)},t.SECH=function(a){return a=e.parseNumber(a),a instanceof Error?a:2/(Math.exp(a)+Math.exp(-a))},t.SERIESSUM=function(a,l,o,s){if(a=e.parseNumber(a),l=e.parseNumber(l),o=e.parseNumber(o),s=e.parseNumberArray(s),e.anyIsError(a,l,o,s))return r.value;for(var u=s[0]*Math.pow(a,l),c=1;c<s.length;c++)u+=s[c]*Math.pow(a,l+c*o);return u},t.SIGN=function(a){return a=e.parseNumber(a),a instanceof Error?a:a<0?-1:a===0?0:1},t.SIN=function(a){return a=e.parseNumber(a),a instanceof Error?a:Math.sin(a)},t.SINH=function(a){return a=e.parseNumber(a),a instanceof Error?a:(Math.exp(a)-Math.exp(-a))/2},t.SQRT=function(a){return a=e.parseNumber(a),a instanceof Error?a:a<0?r.num:Math.sqrt(a)},t.SQRTPI=function(a){return a=e.parseNumber(a),a instanceof Error?a:Math.sqrt(a*Math.PI)},t.SQRT1_2=function(){return 1/Math.sqrt(2)},t.SQRT2=function(){return Math.sqrt(2)},t.SUBTOTAL=function(a,l){if(a=e.parseNumber(a),a instanceof Error)return a;switch(a){case 1:return n.AVERAGE(l);case 2:return n.COUNT(l);case 3:return n.COUNTA(l);case 4:return n.MAX(l);case 5:return n.MIN(l);case 6:return t.PRODUCT(l);case 7:return n.STDEV.S(l);case 8:return n.STDEV.P(l);case 9:return t.SUM(l);case 10:return n.VAR.S(l);case 11:return n.VAR.P(l);case 101:return n.AVERAGE(l);case 102:return n.COUNT(l);case 103:return n.COUNTA(l);case 104:return n.MAX(l);case 105:return n.MIN(l);case 106:return t.PRODUCT(l);case 107:return n.STDEV.S(l);case 108:return n.STDEV.P(l);case 109:return t.SUM(l);case 110:return n.VAR.S(l);case 111:return n.VAR.P(l)}},t.ADD=function(a,l){return arguments.length!==2?r.na:(a=e.parseNumber(a),l=e.parseNumber(l),e.anyIsError(a,l)?r.value:a+l)},t.MINUS=function(a,l){return arguments.length!==2?r.na:(a=e.parseNumber(a),l=e.parseNumber(l),e.anyIsError(a,l)?r.value:a-l)},t.DIVIDE=function(a,l){return arguments.length!==2?r.na:(a=e.parseNumber(a),l=e.parseNumber(l),e.anyIsError(a,l)?r.value:l===0?r.div0:a/l)},t.MULTIPLY=function(a,l){return arguments.length!==2?r.na:(a=e.parseNumber(a),l=e.parseNumber(l),e.anyIsError(a,l)?r.value:a*l)},t.GTE=function(a,l){return arguments.length!==2?r.na:(a=e.parseNumber(a),l=e.parseNumber(l),e.anyIsError(a,l)?r.error:a>=l)},t.LT=function(a,l){return arguments.length!==2?r.na:(a=e.parseNumber(a),l=e.parseNumber(l),e.anyIsError(a,l)?r.error:a<l)},t.LTE=function(a,l){return arguments.length!==2?r.na:(a=e.parseNumber(a),l=e.parseNumber(l),e.anyIsError(a,l)?r.error:a<=l)},t.EQ=function(a,l){return arguments.length!==2?r.na:a===l},t.NE=function(a,l){return arguments.length!==2?r.na:a!==l},t.POW=function(a,l){return arguments.length!==2?r.na:(a=e.parseNumber(a),l=e.parseNumber(l),e.anyIsError(a,l)?r.error:t.POWER(a,l))},t.SUM=function(){var a=0;return e.arrayEach(e.argsToArray(arguments),function(l){if(typeof l=="number")a+=l;else if(typeof l=="string"){var o=parseFloat(l);!isNaN(o)&&(a+=o)}else Array.isArray(l)&&(a+=t.SUM.apply(null,l))}),a},t.SUMIF=function(a,l){if(a=e.parseNumberArray(e.flatten(a)),a instanceof Error)return a;for(var o=0,s=l===void 0||l==="*",u=s?null:h.parse(l+""),c=0;c<a.length;c++){var d=a[c];if(s)o+=d;else{var p=[h.createToken(d,h.TOKEN_TYPE_LITERAL)].concat(u);o+=h.compute(p)?d:0}}return o},t.SUMIFS=function(){var a=e.argsToArray(arguments),l=e.parseNumberArray(e.flatten(a.shift()));if(l instanceof Error)return l;for(var o=a,s=l.length,u=o.length,c=0,d=0;d<s;d++){for(var p=l[d],m=!1,v=0;v<u;v++){var y=o[v],E=y===void 0||y==="*",g=!1;if(E)g=!0;else{var _=h.parse(y+""),I=[h.createToken(p,h.TOKEN_TYPE_LITERAL)].concat(_);g=h.compute(I)}if(!g){m=!1;break}m=!0}m&&(c+=p)}return c},t.SUMPRODUCT=function(){if(!arguments||arguments.length===0)return r.value;for(var a=arguments.length+1,l=0,o,s,u,c,d=0;d<arguments[0].length;d++)if(arguments[0][d]instanceof Array)for(var p=0;p<arguments[0][d].length;p++){for(o=1,s=1;s<a;s++){if(c=e.parseNumber(arguments[s-1][d][p]),c instanceof Error)return c;o*=c}l+=o}else{for(o=1,s=1;s<a;s++){if(u=e.parseNumber(arguments[s-1][d]),u instanceof Error)return u;o*=u}l+=o}return l},t.SUMSQ=function(){var a=e.parseNumberArray(e.flatten(arguments));if(a instanceof Error)return a;for(var l=0,o=a.length,s=0;s<o;s++)l+=i.ISNUMBER(a[s])?a[s]*a[s]:0;return l},t.SUMX2MY2=function(a,l){if(a=e.parseNumberArray(e.flatten(a)),l=e.parseNumberArray(e.flatten(l)),e.anyIsError(a,l))return r.value;for(var o=0,s=0;s<a.length;s++)o+=a[s]*a[s]-l[s]*l[s];return o},t.SUMX2PY2=function(a,l){if(a=e.parseNumberArray(e.flatten(a)),l=e.parseNumberArray(e.flatten(l)),e.anyIsError(a,l))return r.value;var o=0;a=e.parseNumberArray(e.flatten(a)),l=e.parseNumberArray(e.flatten(l));for(var s=0;s<a.length;s++)o+=a[s]*a[s]+l[s]*l[s];return o},t.SUMXMY2=function(a,l){if(a=e.parseNumberArray(e.flatten(a)),l=e.parseNumberArray(e.flatten(l)),e.anyIsError(a,l))return r.value;var o=0;a=e.flatten(a),l=e.flatten(l);for(var s=0;s<a.length;s++)o+=Math.pow(a[s]-l[s],2);return o},t.TAN=function(a){return a=e.parseNumber(a),a instanceof Error?a:Math.tan(a)},t.TANH=function(a){if(a=e.parseNumber(a),a instanceof Error)return a;var l=Math.exp(2*a);return(l-1)/(l+1)},t.TRUNC=function(a,l){if(l=l===void 0?0:l,a=e.parseNumber(a),l=e.parseNumber(l),e.anyIsError(a,l))return r.value;var o=a>0?1:-1;return o*Math.floor(Math.abs(a)*Math.pow(10,l))/Math.pow(10,l)}})(Wo)),Wo}var Zo={},xo={},af;function b0(){return af||(af=1,(function(t){(function(e){e(typeof DO_NOT_EXPORT_BESSEL>"u"?t:{})})(function(e){e.version="1.0.2";var r=Math;function n(s,u){for(var c=0,d=0;c<s.length;++c)d=u*d+s[c];return d}function i(s,u,c,d,p){if(u===0)return c;if(u===1)return d;for(var m=2/s,v=d,y=1;y<u;++y)v=d*y*m+p*c,c=d,d=v;return v}function h(s,u,c,d,p){return function(v,y){if(d){if(v===0)return d==1?-1/0:1/0;if(v<0)return NaN}if(y===0)return s(v);if(y===1)return u(v);if(y<0)return NaN;y|=0;var E=s(v),g=u(v);return i(v,y,E,g,p)}}var f=(function(){var s=.636619772,u=[57568490574,-13362590354,6516196407e-1,-1121442418e-2,77392.33017,-184.9052456].reverse(),c=[57568490411,1029532985,9494680718e-3,59272.64853,267.8532712,1].reverse(),d=[1,-.001098628627,2734510407e-14,-2073370639e-15,2093887211e-16].reverse(),p=[-.01562499995,.0001430488765,-6911147651e-15,7621095161e-16,-934935152e-16].reverse();function m(I){var N=0,w=0,C=0,T=I*I;if(I<8)w=n(u,T),C=n(c,T),N=w/C;else{var R=I-.785398164;T=64/T,w=n(d,T),C=n(p,T),N=r.sqrt(s/I)*(r.cos(R)*w-r.sin(R)*C*8/I)}return N}var v=[72362614232,-7895059235,2423968531e-1,-2972611439e-3,15704.4826,-30.16036606].reverse(),y=[144725228442,2300535178,1858330474e-2,99447.43394,376.9991397,1].reverse(),E=[1,.00183105,-3516396496e-14,2457520174e-15,-240337019e-15].reverse(),g=[.04687499995,-.0002002690873,8449199096e-15,-88228987e-14,105787412e-15].reverse();function _(I){var N=0,w=0,C=0,T=I*I,R=r.abs(I)-2.356194491;return Math.abs(I)<8?(w=I*n(v,T),C=n(y,T),N=w/C):(T=64/T,w=n(E,T),C=n(g,T),N=r.sqrt(s/r.abs(I))*(r.cos(R)*w-r.sin(R)*C*8/r.abs(I)),I<0&&(N=-N)),N}return function I(N,w){if(w=Math.round(w),!isFinite(N))return isNaN(N)?N:0;if(w<0)return(w%2?-1:1)*I(N,-w);if(N<0)return(w%2?-1:1)*I(-N,w);if(w===0)return m(N);if(w===1)return _(N);if(N===0)return 0;var C=0;if(N>w)C=i(N,w,m(N),_(N),-1);else{for(var T=2*r.floor((w+r.floor(r.sqrt(40*w)))/2),R=!1,A=0,b=0,O=1,S=0,L=2/N,k=T;k>0;k--)S=k*L*O-A,A=O,O=S,r.abs(O)>1e10&&(O*=1e-10,A*=1e-10,C*=1e-10,b*=1e-10),R&&(b+=O),R=!R,k==w&&(C=A);b=2*b-O,C/=b}return C}})(),a=(function(){var s=.636619772,u=[-2957821389,7062834065,-5123598036e-1,1087988129e-2,-86327.92757,228.4622733].reverse(),c=[40076544269,7452499648e-1,7189466438e-3,47447.2647,226.1030244,1].reverse(),d=[1,-.001098628627,2734510407e-14,-2073370639e-15,2093887211e-16].reverse(),p=[-.01562499995,.0001430488765,-6911147651e-15,7621095161e-16,-934945152e-16].reverse();function m(I){var N=0,w=0,C=0,T=I*I,R=I-.785398164;return I<8?(w=n(u,T),C=n(c,T),N=w/C+s*f(I,0)*r.log(I)):(T=64/T,w=n(d,T),C=n(p,T),N=r.sqrt(s/I)*(r.sin(R)*w+r.cos(R)*C*8/I)),N}var v=[-4900604943e3,127527439e4,-51534381390,7349264551e-1,-4237922726e-3,8511.937935].reverse(),y=[249958057e5,424441966400,3733650367,2245904002e-2,102042.605,354.9632885,1].reverse(),E=[1,.00183105,-3516396496e-14,2457520174e-15,-240337019e-15].reverse(),g=[.04687499995,-.0002002690873,8449199096e-15,-88228987e-14,105787412e-15].reverse();function _(I){var N=0,w=0,C=0,T=I*I,R=I-2.356194491;return I<8?(w=I*n(v,T),C=n(y,T),N=w/C+s*(f(I,1)*r.log(I)-1/I)):(T=64/T,w=n(E,T),C=n(g,T),N=r.sqrt(s/I)*(r.sin(R)*w+r.cos(R)*C*8/I)),N}return h(m,_,"BESSELY",1,-1)})(),l=(function(){var s=[1,3.5156229,3.0899424,1.2067492,.2659732,.0360768,.0045813].reverse(),u=[.39894228,.01328592,.00225319,-.00157565,.00916281,-.02057706,.02635537,-.01647633,.00392377].reverse();function c(v){return v<=3.75?n(s,v*v/(3.75*3.75)):r.exp(r.abs(v))/r.sqrt(r.abs(v))*n(u,3.75/r.abs(v))}var d=[.5,.87890594,.51498869,.15084934,.02658733,.00301532,32411e-8].reverse(),p=[.39894228,-.03988024,-.00362018,.00163801,-.01031555,.02282967,-.02895312,.01787654,-.00420059].reverse();function m(v){return v<3.75?v*n(d,v*v/(3.75*3.75)):(v<0?-1:1)*r.exp(r.abs(v))/r.sqrt(r.abs(v))*n(p,3.75/r.abs(v))}return function v(y,E){if(E=Math.round(E),E===0)return c(y);if(E===1)return m(y);if(E<0)return NaN;if(r.abs(y)===0)return 0;if(y==1/0)return 1/0;var g=0,_,I=2/r.abs(y),N=0,w=1,C=0,T=2*r.round((E+r.round(r.sqrt(40*E)))/2);for(_=T;_>0;_--)C=_*I*w+N,N=w,w=C,r.abs(w)>1e10&&(w*=1e-10,N*=1e-10,g*=1e-10),_==E&&(g=N);return g*=v(y,0)/w,y<0&&E%2?-g:g}})(),o=(function(){var s=[-.57721566,.4227842,.23069756,.0348859,.00262698,1075e-7,74e-7].reverse(),u=[1.25331414,-.07832358,.02189568,-.01062446,.00587872,-.0025154,53208e-8].reverse();function c(v){return v<=2?-r.log(v/2)*l(v,0)+n(s,v*v/4):r.exp(-v)/r.sqrt(v)*n(u,2/v)}var d=[1,.15443144,-.67278579,-.18156897,-.01919402,-.00110404,-4686e-8].reverse(),p=[1.25331414,.23498619,-.0365562,.01504268,-.00780353,.00325614,-68245e-8].reverse();function m(v){return v<=2?r.log(v/2)*l(v,1)+1/v*n(d,v*v/4):r.exp(-v)/r.sqrt(v)*n(p,2/v)}return h(c,m,"BESSELK",2,1)})();e.besselj=f,e.bessely=a,e.besseli=l,e.besselk=o})})(xo)),xo}var uf;function lf(){return uf||(uf=1,(function(t){var e=Je(),r=jc(),n=Qo(),i=dt(),h=b0();function f(a){return/^[01]{1,10}$/.test(a)}t.BESSELI=function(a,l){return a=i.parseNumber(a),l=i.parseNumber(l),i.anyIsError(a,l)?e.value:h.besseli(a,l)},t.BESSELJ=function(a,l){return a=i.parseNumber(a),l=i.parseNumber(l),i.anyIsError(a,l)?e.value:h.besselj(a,l)},t.BESSELK=function(a,l){return a=i.parseNumber(a),l=i.parseNumber(l),i.anyIsError(a,l)?e.value:h.besselk(a,l)},t.BESSELY=function(a,l){return a=i.parseNumber(a),l=i.parseNumber(l),i.anyIsError(a,l)?e.value:h.bessely(a,l)},t.BIN2DEC=function(a){if(!f(a))return e.num;var l=parseInt(a,2),o=a.toString();return o.length===10&&o.substring(0,1)==="1"?parseInt(o.substring(1),2)-512:l},t.BIN2HEX=function(a,l){if(!f(a))return e.num;var o=a.toString();if(o.length===10&&o.substring(0,1)==="1")return(0xfffffffe00+parseInt(o.substring(1),2)).toString(16);var s=parseInt(a,2).toString(16);return l===void 0?s:isNaN(l)?e.value:l<0?e.num:(l=Math.floor(l),l>=s.length?n.REPT("0",l-s.length)+s:e.num)},t.BIN2OCT=function(a,l){if(!f(a))return e.num;var o=a.toString();if(o.length===10&&o.substring(0,1)==="1")return(1073741312+parseInt(o.substring(1),2)).toString(8);var s=parseInt(a,2).toString(8);return l===void 0?s:isNaN(l)?e.value:l<0?e.num:(l=Math.floor(l),l>=s.length?n.REPT("0",l-s.length)+s:e.num)},t.BITAND=function(a,l){return a=i.parseNumber(a),l=i.parseNumber(l),i.anyIsError(a,l)?e.value:a<0||l<0||Math.floor(a)!==a||Math.floor(l)!==l||a>0xffffffffffff||l>0xffffffffffff?e.num:a&l},t.BITLSHIFT=function(a,l){return a=i.parseNumber(a),l=i.parseNumber(l),i.anyIsError(a,l)?e.value:a<0||Math.floor(a)!==a||a>0xffffffffffff||Math.abs(l)>53?e.num:l>=0?a<<l:a>>-l},t.BITOR=function(a,l){return a=i.parseNumber(a),l=i.parseNumber(l),i.anyIsError(a,l)?e.value:a<0||l<0||Math.floor(a)!==a||Math.floor(l)!==l||a>0xffffffffffff||l>0xffffffffffff?e.num:a|l},t.BITRSHIFT=function(a,l){return a=i.parseNumber(a),l=i.parseNumber(l),i.anyIsError(a,l)?e.value:a<0||Math.floor(a)!==a||a>0xffffffffffff||Math.abs(l)>53?e.num:l>=0?a>>l:a<<-l},t.BITXOR=function(a,l){return a=i.parseNumber(a),l=i.parseNumber(l),i.anyIsError(a,l)?e.value:a<0||l<0||Math.floor(a)!==a||Math.floor(l)!==l||a>0xffffffffffff||l>0xffffffffffff?e.num:a^l},t.COMPLEX=function(a,l,o){if(a=i.parseNumber(a),l=i.parseNumber(l),i.anyIsError(a,l))return a;if(o=o===void 0?"i":o,o!=="i"&&o!=="j")return e.value;if(a===0&&l===0)return 0;if(a===0)return l===1?o:l.toString()+o;if(l===0)return a.toString();var s=l>0?"+":"";return a.toString()+s+(l===1?o:l.toString()+o)},t.CONVERT=function(a,l,o){if(a=i.parseNumber(a),a instanceof Error)return a;for(var s=[["a.u. of action","?",null,"action",!1,!1,105457168181818e-48],["a.u. of charge","e",null,"electric_charge",!1,!1,160217653141414e-33],["a.u. of energy","Eh",null,"energy",!1,!1,435974417757576e-32],["a.u. of length","a?",null,"length",!1,!1,529177210818182e-25],["a.u. of mass","m?",null,"mass",!1,!1,910938261616162e-45],["a.u. of time","?/Eh",null,"time",!1,!1,241888432650516e-31],["admiralty knot","admkn",null,"speed",!1,!0,.514773333],["ampere","A",null,"electric_current",!0,!1,1],["ampere per meter","A/m",null,"magnetic_field_intensity",!0,!1,1],["ngstrm","",["ang"],"length",!1,!0,1e-10],["are","ar",null,"area",!1,!0,100],["astronomical unit","ua",null,"length",!1,!1,149597870691667e-25],["bar","bar",null,"pressure",!1,!1,1e5],["barn","b",null,"area",!1,!1,1e-28],["becquerel","Bq",null,"radioactivity",!0,!1,1],["bit","bit",["b"],"information",!1,!0,1],["btu","BTU",["btu"],"energy",!1,!0,1055.05585262],["byte","byte",null,"information",!1,!0,8],["candela","cd",null,"luminous_intensity",!0,!1,1],["candela per square metre","cd/m?",null,"luminance",!0,!1,1],["coulomb","C",null,"electric_charge",!0,!1,1],["cubic ngstrm","ang3",["ang^3"],"volume",!1,!0,1e-30],["cubic foot","ft3",["ft^3"],"volume",!1,!0,.028316846592],["cubic inch","in3",["in^3"],"volume",!1,!0,16387064e-12],["cubic light-year","ly3",["ly^3"],"volume",!1,!0,846786664623715e-61],["cubic metre","m?",null,"volume",!0,!0,1],["cubic mile","mi3",["mi^3"],"volume",!1,!0,416818182544058e-5],["cubic nautical mile","Nmi3",["Nmi^3"],"volume",!1,!0,6352182208],["cubic Pica","Pica3",["Picapt3","Pica^3","Picapt^3"],"volume",!1,!0,758660370370369e-22],["cubic yard","yd3",["yd^3"],"volume",!1,!0,.764554857984],["cup","cup",null,"volume",!1,!0,.0002365882365],["dalton","Da",["u"],"mass",!1,!1,166053886282828e-41],["day","d",["day"],"time",!1,!0,86400],["degree","",null,"angle",!1,!1,.0174532925199433],["degrees Rankine","Rank",null,"temperature",!1,!0,.555555555555556],["dyne","dyn",["dy"],"force",!1,!0,1e-5],["electronvolt","eV",["ev"],"energy",!1,!0,1.60217656514141],["ell","ell",null,"length",!1,!0,1.143],["erg","erg",["e"],"energy",!1,!0,1e-7],["farad","F",null,"electric_capacitance",!0,!1,1],["fluid ounce","oz",null,"volume",!1,!0,295735295625e-16],["foot","ft",null,"length",!1,!0,.3048],["foot-pound","flb",null,"energy",!1,!0,1.3558179483314],["gal","Gal",null,"acceleration",!1,!1,.01],["gallon","gal",null,"volume",!1,!0,.003785411784],["gauss","G",["ga"],"magnetic_flux_density",!1,!0,1],["grain","grain",null,"mass",!1,!0,647989e-10],["gram","g",null,"mass",!1,!0,.001],["gray","Gy",null,"absorbed_dose",!0,!1,1],["gross registered ton","GRT",["regton"],"volume",!1,!0,2.8316846592],["hectare","ha",null,"area",!1,!0,1e4],["henry","H",null,"inductance",!0,!1,1],["hertz","Hz",null,"frequency",!0,!1,1],["horsepower","HP",["h"],"power",!1,!0,745.69987158227],["horsepower-hour","HPh",["hh","hph"],"energy",!1,!0,2684519538e-3],["hour","h",["hr"],"time",!1,!0,3600],["imperial gallon (U.K.)","uk_gal",null,"volume",!1,!0,.00454609],["imperial hundredweight","lcwt",["uk_cwt","hweight"],"mass",!1,!0,50.802345],["imperial quart (U.K)","uk_qt",null,"volume",!1,!0,.0011365225],["imperial ton","brton",["uk_ton","LTON"],"mass",!1,!0,1016.046909],["inch","in",null,"length",!1,!0,.0254],["international acre","uk_acre",null,"area",!1,!0,4046.8564224],["IT calorie","cal",null,"energy",!1,!0,4.1868],["joule","J",null,"energy",!0,!0,1],["katal","kat",null,"catalytic_activity",!0,!1,1],["kelvin","K",["kel"],"temperature",!0,!0,1],["kilogram","kg",null,"mass",!0,!0,1],["knot","kn",null,"speed",!1,!0,.514444444444444],["light-year","ly",null,"length",!1,!0,9460730472580800],["litre","L",["l","lt"],"volume",!1,!0,.001],["lumen","lm",null,"luminous_flux",!0,!1,1],["lux","lx",null,"illuminance",!0,!1,1],["maxwell","Mx",null,"magnetic_flux",!1,!1,1e-18],["measurement ton","MTON",null,"volume",!1,!0,1.13267386368],["meter per hour","m/h",["m/hr"],"speed",!1,!0,.00027777777777778],["meter per second","m/s",["m/sec"],"speed",!0,!0,1],["meter per second squared","m?s??",null,"acceleration",!0,!1,1],["parsec","pc",["parsec"],"length",!1,!0,0x6da012f958ee1c],["meter squared per second","m?/s",null,"kinematic_viscosity",!0,!1,1],["metre","m",null,"length",!0,!0,1],["miles per hour","mph",null,"speed",!1,!0,.44704],["millimetre of mercury","mmHg",null,"pressure",!1,!1,133.322],["minute","?",null,"angle",!1,!1,.000290888208665722],["minute","min",["mn"],"time",!1,!0,60],["modern teaspoon","tspm",null,"volume",!1,!0,5e-6],["mole","mol",null,"amount_of_substance",!0,!1,1],["morgen","Morgen",null,"area",!1,!0,2500],["n.u. of action","?",null,"action",!1,!1,105457168181818e-48],["n.u. of mass","m?",null,"mass",!1,!1,910938261616162e-45],["n.u. of speed","c?",null,"speed",!1,!1,299792458],["n.u. of time","?/(me?c??)",null,"time",!1,!1,128808866778687e-35],["nautical mile","M",["Nmi"],"length",!1,!0,1852],["newton","N",null,"force",!0,!0,1],["rsted","Oe ",null,"magnetic_field_intensity",!1,!1,79.5774715459477],["ohm","",null,"electric_resistance",!0,!1,1],["ounce mass","ozm",null,"mass",!1,!0,.028349523125],["pascal","Pa",null,"pressure",!0,!1,1],["pascal second","Pa?s",null,"dynamic_viscosity",!0,!1,1],["pferdestrke","PS",null,"power",!1,!0,735.49875],["phot","ph",null,"illuminance",!1,!1,1e-4],["pica (1/6 inch)","pica",null,"length",!1,!0,.00035277777777778],["pica (1/72 inch)","Pica",["Picapt"],"length",!1,!0,.00423333333333333],["poise","P",null,"dynamic_viscosity",!1,!1,.1],["pond","pond",null,"force",!1,!0,.00980665],["pound force","lbf",null,"force",!1,!0,4.4482216152605],["pound mass","lbm",null,"mass",!1,!0,.45359237],["quart","qt",null,"volume",!1,!0,.000946352946],["radian","rad",null,"angle",!0,!1,1],["second","?",null,"angle",!1,!1,484813681109536e-20],["second","s",["sec"],"time",!0,!0,1],["short hundredweight","cwt",["shweight"],"mass",!1,!0,45.359237],["siemens","S",null,"electrical_conductance",!0,!1,1],["sievert","Sv",null,"equivalent_dose",!0,!1,1],["slug","sg",null,"mass",!1,!0,14.59390294],["square ngstrm","ang2",["ang^2"],"area",!1,!0,1e-20],["square foot","ft2",["ft^2"],"area",!1,!0,.09290304],["square inch","in2",["in^2"],"area",!1,!0,64516e-8],["square light-year","ly2",["ly^2"],"area",!1,!0,895054210748189e17],["square meter","m?",null,"area",!0,!0,1],["square mile","mi2",["mi^2"],"area",!1,!0,2589988110336e-6],["square nautical mile","Nmi2",["Nmi^2"],"area",!1,!0,3429904],["square Pica","Pica2",["Picapt2","Pica^2","Picapt^2"],"area",!1,!0,1792111111111e-17],["square yard","yd2",["yd^2"],"area",!1,!0,.83612736],["statute mile","mi",null,"length",!1,!0,1609.344],["steradian","sr",null,"solid_angle",!0,!1,1],["stilb","sb",null,"luminance",!1,!1,1e-4],["stokes","St",null,"kinematic_viscosity",!1,!1,1e-4],["stone","stone",null,"mass",!1,!0,6.35029318],["tablespoon","tbs",null,"volume",!1,!0,147868e-10],["teaspoon","tsp",null,"volume",!1,!0,492892e-11],["tesla","T",null,"magnetic_flux_density",!0,!0,1],["thermodynamic calorie","c",null,"energy",!1,!0,4.184],["ton","ton",null,"mass",!1,!0,907.18474],["tonne","t",null,"mass",!1,!1,1e3],["U.K. pint","uk_pt",null,"volume",!1,!0,.00056826125],["U.S. bushel","bushel",null,"volume",!1,!0,.03523907],["U.S. oil barrel","barrel",null,"volume",!1,!0,.158987295],["U.S. pint","pt",["us_pt"],"volume",!1,!0,.000473176473],["U.S. survey mile","survey_mi",null,"length",!1,!0,1609.347219],["U.S. survey/statute acre","us_acre",null,"area",!1,!0,4046.87261],["volt","V",null,"voltage",!0,!1,1],["watt","W",null,"power",!0,!0,1],["watt-hour","Wh",["wh"],"energy",!1,!0,3600],["weber","Wb",null,"magnetic_flux",!0,!1,1],["yard","yd",null,"length",!1,!0,.9144],["year","yr",null,"time",!1,!0,31557600]],u={Yi:["yobi",80,12089258196146292e8,"Yi","yotta"],Zi:["zebi",70,11805916207174113e5,"Zi","zetta"],Ei:["exbi",60,1152921504606847e3,"Ei","exa"],Pi:["pebi",50,0x4000000000000,"Pi","peta"],Ti:["tebi",40,1099511627776,"Ti","tera"],Gi:["gibi",30,1073741824,"Gi","giga"],Mi:["mebi",20,1048576,"Mi","mega"],ki:["kibi",10,1024,"ki","kilo"]},c={Y:["yotta",1e24,"Y"],Z:["zetta",1e21,"Z"],E:["exa",1e18,"E"],P:["peta",1e15,"P"],T:["tera",1e12,"T"],G:["giga",1e9,"G"],M:["mega",1e6,"M"],k:["kilo",1e3,"k"],h:["hecto",100,"h"],e:["dekao",10,"e"],d:["deci",.1,"d"],c:["centi",.01,"c"],m:["milli",.001,"m"],u:["micro",1e-6,"u"],n:["nano",1e-9,"n"],p:["pico",1e-12,"p"],f:["femto",1e-15,"f"],a:["atto",1e-18,"a"],z:["zepto",1e-21,"z"],y:["yocto",1e-24,"y"]},d=null,p=null,m=l,v=o,y=1,E=1,g,_=0;_<s.length;_++)g=s[_][2]===null?[]:s[_][2],(s[_][1]===m||g.indexOf(m)>=0)&&(d=s[_]),(s[_][1]===v||g.indexOf(v)>=0)&&(p=s[_]);if(d===null){var I=u[l.substring(0,2)],N=c[l.substring(0,1)];l.substring(0,2)==="da"&&(N=["dekao",10,"da"]),I?(y=I[2],m=l.substring(2)):N&&(y=N[1],m=l.substring(N[2].length));for(var w=0;w<s.length;w++)g=s[w][2]===null?[]:s[w][2],(s[w][1]===m||g.indexOf(m)>=0)&&(d=s[w])}if(p===null){var C=u[o.substring(0,2)],T=c[o.substring(0,1)];o.substring(0,2)==="da"&&(T=["dekao",10,"da"]),C?(E=C[2],v=o.substring(2)):T&&(E=T[1],v=o.substring(T[2].length));for(var R=0;R<s.length;R++)g=s[R][2]===null?[]:s[R][2],(s[R][1]===v||g.indexOf(v)>=0)&&(p=s[R])}return d===null||p===null||d[3]!==p[3]?e.na:a*d[6]*y/(p[6]*E)},t.DEC2BIN=function(a,l){if(a=i.parseNumber(a),a instanceof Error)return a;if(!/^-?[0-9]{1,3}$/.test(a)||a<-512||a>511)return e.num;if(a<0)return"1"+n.REPT("0",9-(512+a).toString(2).length)+(512+a).toString(2);var o=parseInt(a,10).toString(2);return typeof l>"u"?o:isNaN(l)?e.value:l<0?e.num:(l=Math.floor(l),l>=o.length?n.REPT("0",l-o.length)+o:e.num)},t.DEC2HEX=function(a,l){if(a=i.parseNumber(a),a instanceof Error)return a;if(!/^-?[0-9]{1,12}$/.test(a)||a<-549755813888||a>549755813887)return e.num;if(a<0)return(1099511627776+a).toString(16);var o=parseInt(a,10).toString(16);return typeof l>"u"?o:isNaN(l)?e.value:l<0?e.num:(l=Math.floor(l),l>=o.length?n.REPT("0",l-o.length)+o:e.num)},t.DEC2OCT=function(a,l){if(a=i.parseNumber(a),a instanceof Error)return a;if(!/^-?[0-9]{1,9}$/.test(a)||a<-536870912||a>536870911)return e.num;if(a<0)return(1073741824+a).toString(8);var o=parseInt(a,10).toString(8);return typeof l>"u"?o:isNaN(l)?e.value:l<0?e.num:(l=Math.floor(l),l>=o.length?n.REPT("0",l-o.length)+o:e.num)},t.DELTA=function(a,l){return l=l===void 0?0:l,a=i.parseNumber(a),l=i.parseNumber(l),i.anyIsError(a,l)?e.value:a===l?1:0},t.ERF=function(a,l){return l=l===void 0?0:l,a=i.parseNumber(a),l=i.parseNumber(l),i.anyIsError(a,l)?e.value:r.erf(a)},t.ERF.PRECISE=function(){throw new Error("ERF.PRECISE is not implemented")},t.ERFC=function(a){return isNaN(a)?e.value:r.erfc(a)},t.ERFC.PRECISE=function(){throw new Error("ERFC.PRECISE is not implemented")},t.GESTEP=function(a,l){return l=l||0,a=i.parseNumber(a),i.anyIsError(l,a)?a:a>=l?1:0},t.HEX2BIN=function(a,l){if(!/^[0-9A-Fa-f]{1,10}$/.test(a))return e.num;var o=a.length===10&&a.substring(0,1).toLowerCase()==="f",s=o?parseInt(a,16)-1099511627776:parseInt(a,16);if(s<-512||s>511)return e.num;if(o)return"1"+n.REPT("0",9-(512+s).toString(2).length)+(512+s).toString(2);var u=s.toString(2);return l===void 0?u:isNaN(l)?e.value:l<0?e.num:(l=Math.floor(l),l>=u.length?n.REPT("0",l-u.length)+u:e.num)},t.HEX2DEC=function(a){if(!/^[0-9A-Fa-f]{1,10}$/.test(a))return e.num;var l=parseInt(a,16);return l>=549755813888?l-1099511627776:l},t.HEX2OCT=function(a,l){if(!/^[0-9A-Fa-f]{1,10}$/.test(a))return e.num;var o=parseInt(a,16);if(o>536870911&&o<0xffe0000000)return e.num;if(o>=0xffe0000000)return(o-0xffc0000000).toString(8);var s=o.toString(8);return l===void 0?s:isNaN(l)?e.value:l<0?e.num:(l=Math.floor(l),l>=s.length?n.REPT("0",l-s.length)+s:e.num)},t.IMABS=function(a){var l=t.IMREAL(a),o=t.IMAGINARY(a);return i.anyIsError(l,o)?e.value:Math.sqrt(Math.pow(l,2)+Math.pow(o,2))},t.IMAGINARY=function(a){if(a===void 0||a===!0||a===!1)return e.value;if(a===0||a==="0")return 0;if(["i","j"].indexOf(a)>=0)return 1;a=a.replace("+i","+1i").replace("-i","-1i").replace("+j","+1j").replace("-j","-1j");var l=a.indexOf("+"),o=a.indexOf("-");l===0&&(l=a.indexOf("+",1)),o===0&&(o=a.indexOf("-",1));var s=a.substring(a.length-1,a.length),u=s==="i"||s==="j";return l>=0||o>=0?u?l>=0?isNaN(a.substring(0,l))||isNaN(a.substring(l+1,a.length-1))?e.num:Number(a.substring(l+1,a.length-1)):isNaN(a.substring(0,o))||isNaN(a.substring(o+1,a.length-1))?e.num:-Number(a.substring(o+1,a.length-1)):e.num:u?isNaN(a.substring(0,a.length-1))?e.num:a.substring(0,a.length-1):isNaN(a)?e.num:0},t.IMARGUMENT=function(a){var l=t.IMREAL(a),o=t.IMAGINARY(a);return i.anyIsError(l,o)?e.value:l===0&&o===0?e.div0:l===0&&o>0?Math.PI/2:l===0&&o<0?-Math.PI/2:o===0&&l>0?0:o===0&&l<0?-Math.PI:l>0?Math.atan(o/l):l<0&&o>=0?Math.atan(o/l)+Math.PI:Math.atan(o/l)-Math.PI},t.IMCONJUGATE=function(a){var l=t.IMREAL(a),o=t.IMAGINARY(a);if(i.anyIsError(l,o))return e.value;var s=a.substring(a.length-1);return s=s==="i"||s==="j"?s:"i",o!==0?t.COMPLEX(l,-o,s):a},t.IMCOS=function(a){var l=t.IMREAL(a),o=t.IMAGINARY(a);if(i.anyIsError(l,o))return e.value;var s=a.substring(a.length-1);return s=s==="i"||s==="j"?s:"i",t.COMPLEX(Math.cos(l)*(Math.exp(o)+Math.exp(-o))/2,-Math.sin(l)*(Math.exp(o)-Math.exp(-o))/2,s)},t.IMCOSH=function(a){var l=t.IMREAL(a),o=t.IMAGINARY(a);if(i.anyIsError(l,o))return e.value;var s=a.substring(a.length-1);return s=s==="i"||s==="j"?s:"i",t.COMPLEX(Math.cos(o)*(Math.exp(l)+Math.exp(-l))/2,Math.sin(o)*(Math.exp(l)-Math.exp(-l))/2,s)},t.IMCOT=function(a){var l=t.IMREAL(a),o=t.IMAGINARY(a);return i.anyIsError(l,o)?e.value:t.IMDIV(t.IMCOS(a),t.IMSIN(a))},t.IMDIV=function(a,l){var o=t.IMREAL(a),s=t.IMAGINARY(a),u=t.IMREAL(l),c=t.IMAGINARY(l);if(i.anyIsError(o,s,u,c))return e.value;var d=a.substring(a.length-1),p=l.substring(l.length-1),m="i";if((d==="j"||p==="j")&&(m="j"),u===0&&c===0)return e.num;var v=u*u+c*c;return t.COMPLEX((o*u+s*c)/v,(s*u-o*c)/v,m)},t.IMEXP=function(a){var l=t.IMREAL(a),o=t.IMAGINARY(a);if(i.anyIsError(l,o))return e.value;var s=a.substring(a.length-1);s=s==="i"||s==="j"?s:"i";var u=Math.exp(l);return t.COMPLEX(u*Math.cos(o),u*Math.sin(o),s)},t.IMLN=function(a){var l=t.IMREAL(a),o=t.IMAGINARY(a);if(i.anyIsError(l,o))return e.value;var s=a.substring(a.length-1);return s=s==="i"||s==="j"?s:"i",t.COMPLEX(Math.log(Math.sqrt(l*l+o*o)),Math.atan(o/l),s)},t.IMLOG10=function(a){var l=t.IMREAL(a),o=t.IMAGINARY(a);if(i.anyIsError(l,o))return e.value;var s=a.substring(a.length-1);return s=s==="i"||s==="j"?s:"i",t.COMPLEX(Math.log(Math.sqrt(l*l+o*o))/Math.log(10),Math.atan(o/l)/Math.log(10),s)},t.IMLOG2=function(a){var l=t.IMREAL(a),o=t.IMAGINARY(a);if(i.anyIsError(l,o))return e.value;var s=a.substring(a.length-1);return s=s==="i"||s==="j"?s:"i",t.COMPLEX(Math.log(Math.sqrt(l*l+o*o))/Math.log(2),Math.atan(o/l)/Math.log(2),s)},t.IMPOWER=function(a,l){l=i.parseNumber(l);var o=t.IMREAL(a),s=t.IMAGINARY(a);if(i.anyIsError(l,o,s))return e.value;var u=a.substring(a.length-1);u=u==="i"||u==="j"?u:"i";var c=Math.pow(t.IMABS(a),l),d=t.IMARGUMENT(a);return t.COMPLEX(c*Math.cos(l*d),c*Math.sin(l*d),u)},t.IMPRODUCT=function(){var a=arguments[0];if(!arguments.length)return e.value;for(var l=1;l<arguments.length;l++){var o=t.IMREAL(a),s=t.IMAGINARY(a),u=t.IMREAL(arguments[l]),c=t.IMAGINARY(arguments[l]);if(i.anyIsError(o,s,u,c))return e.value;a=t.COMPLEX(o*u-s*c,o*c+s*u)}return a},t.IMREAL=function(a){if(a===void 0||a===!0||a===!1)return e.value;if(a===0||a==="0"||["i","+i","1i","+1i","-i","-1i","j","+j","1j","+1j","-j","-1j"].indexOf(a)>=0)return 0;var l=a.indexOf("+"),o=a.indexOf("-");l===0&&(l=a.indexOf("+",1)),o===0&&(o=a.indexOf("-",1));var s=a.substring(a.length-1,a.length),u=s==="i"||s==="j";return l>=0||o>=0?u?l>=0?isNaN(a.substring(0,l))||isNaN(a.substring(l+1,a.length-1))?e.num:Number(a.substring(0,l)):isNaN(a.substring(0,o))||isNaN(a.substring(o+1,a.length-1))?e.num:Number(a.substring(0,o)):e.num:u?isNaN(a.substring(0,a.length-1))?e.num:0:isNaN(a)?e.num:a},t.IMSEC=function(a){if(a===!0||a===!1)return e.value;var l=t.IMREAL(a),o=t.IMAGINARY(a);return i.anyIsError(l,o)?e.value:t.IMDIV("1",t.IMCOS(a))},t.IMSECH=function(a){var l=t.IMREAL(a),o=t.IMAGINARY(a);return i.anyIsError(l,o)?e.value:t.IMDIV("1",t.IMCOSH(a))},t.IMSIN=function(a){var l=t.IMREAL(a),o=t.IMAGINARY(a);if(i.anyIsError(l,o))return e.value;var s=a.substring(a.length-1);return s=s==="i"||s==="j"?s:"i",t.COMPLEX(Math.sin(l)*(Math.exp(o)+Math.exp(-o))/2,Math.cos(l)*(Math.exp(o)-Math.exp(-o))/2,s)},t.IMSINH=function(a){var l=t.IMREAL(a),o=t.IMAGINARY(a);if(i.anyIsError(l,o))return e.value;var s=a.substring(a.length-1);return s=s==="i"||s==="j"?s:"i",t.COMPLEX(Math.cos(o)*(Math.exp(l)-Math.exp(-l))/2,Math.sin(o)*(Math.exp(l)+Math.exp(-l))/2,s)},t.IMSQRT=function(a){var l=t.IMREAL(a),o=t.IMAGINARY(a);if(i.anyIsError(l,o))return e.value;var s=a.substring(a.length-1);s=s==="i"||s==="j"?s:"i";var u=Math.sqrt(t.IMABS(a)),c=t.IMARGUMENT(a);return t.COMPLEX(u*Math.cos(c/2),u*Math.sin(c/2),s)},t.IMCSC=function(a){if(a===!0||a===!1)return e.value;var l=t.IMREAL(a),o=t.IMAGINARY(a);return i.anyIsError(l,o)?e.num:t.IMDIV("1",t.IMSIN(a))},t.IMCSCH=function(a){if(a===!0||a===!1)return e.value;var l=t.IMREAL(a),o=t.IMAGINARY(a);return i.anyIsError(l,o)?e.num:t.IMDIV("1",t.IMSINH(a))},t.IMSUB=function(a,l){var o=this.IMREAL(a),s=this.IMAGINARY(a),u=this.IMREAL(l),c=this.IMAGINARY(l);if(i.anyIsError(o,s,u,c))return e.value;var d=a.substring(a.length-1),p=l.substring(l.length-1),m="i";return(d==="j"||p==="j")&&(m="j"),this.COMPLEX(o-u,s-c,m)},t.IMSUM=function(){if(!arguments.length)return e.value;for(var a=i.flatten(arguments),l=a[0],o=1;o<a.length;o++){var s=this.IMREAL(l),u=this.IMAGINARY(l),c=this.IMREAL(a[o]),d=this.IMAGINARY(a[o]);if(i.anyIsError(s,u,c,d))return e.value;l=this.COMPLEX(s+c,u+d)}return l},t.IMTAN=function(a){if(a===!0||a===!1)return e.value;var l=t.IMREAL(a),o=t.IMAGINARY(a);return i.anyIsError(l,o)?e.value:this.IMDIV(this.IMSIN(a),this.IMCOS(a))},t.OCT2BIN=function(a,l){if(!/^[0-7]{1,10}$/.test(a))return e.num;var o=a.length===10&&a.substring(0,1)==="7",s=o?parseInt(a,8)-1073741824:parseInt(a,8);if(s<-512||s>511)return e.num;if(o)return"1"+n.REPT("0",9-(512+s).toString(2).length)+(512+s).toString(2);var u=s.toString(2);return typeof l>"u"?u:isNaN(l)?e.value:l<0?e.num:(l=Math.floor(l),l>=u.length?n.REPT("0",l-u.length)+u:e.num)},t.OCT2DEC=function(a){if(!/^[0-7]{1,10}$/.test(a))return e.num;var l=parseInt(a,8);return l>=536870912?l-1073741824:l},t.OCT2HEX=function(a,l){if(!/^[0-7]{1,10}$/.test(a))return e.num;var o=parseInt(a,8);if(o>=536870912)return"ff"+(o+3221225472).toString(16);var s=o.toString(16);return l===void 0?s:isNaN(l)?e.value:l<0?e.num:(l=Math.floor(l),l>=s.length?n.REPT("0",l-s.length)+s:e.num)}})(Zo)),Zo}var jo={},cf;function ea(){return cf||(cf=1,(function(t){var e=Je(),r=dt(),n=new Date(Date.UTC(1900,0,1)),i=[void 0,0,1,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,1,2,3,4,5,6,0],h=[[],[1,2,3,4,5,6,7],[7,1,2,3,4,5,6],[6,0,1,2,3,4,5],[],[],[],[],[],[],[],[7,1,2,3,4,5,6],[6,7,1,2,3,4,5],[5,6,7,1,2,3,4],[4,5,6,7,1,2,3],[3,4,5,6,7,1,2],[2,3,4,5,6,7,1],[1,2,3,4,5,6,7]],f=[[],[6,0],[0,1],[1,2],[2,3],[3,4],[4,5],[5,6],void 0,void 0,void 0,[0,0],[1,1],[2,2],[3,3],[4,4],[5,5],[6,6]];t.DATE=function(s,u,c){var d;return s=r.parseNumber(s),u=r.parseNumber(u),c=r.parseNumber(c),r.anyIsError(s,u,c)?d=e.value:s<0||u<0||c<0?d=e.num:d=new Date(s,u-1,c),d},t.DATEVALUE=function(s){var u=2,c;return typeof s!="string"||(c=Date.parse(s),isNaN(c))?e.value:(c<=-22038912e5&&(u=1),Math.ceil((c-n)/864e5)+u)},t.DAY=function(s){var u=r.parseDate(s);return u instanceof Error?u:u.getDate()},t.DAYS=function(s,u){return s=r.parseDate(s),u=r.parseDate(u),s instanceof Error?s:u instanceof Error?u:o(s)-o(u)},t.DAYS360=function(s,u,c){if(c=r.parseBool(c),s=r.parseDate(s),u=r.parseDate(u),s instanceof Error)return s;if(u instanceof Error)return u;if(c instanceof Error)return c;var d=s.getMonth(),p=u.getMonth(),m,v;if(c)m=s.getDate()===31?30:s.getDate(),v=u.getDate()===31?30:u.getDate();else{var y=new Date(s.getFullYear(),d+1,0).getDate(),E=new Date(u.getFullYear(),p+1,0).getDate();m=s.getDate()===y?30:s.getDate(),u.getDate()===E?m<30?(p++,v=1):v=30:v=u.getDate()}return 360*(u.getFullYear()-s.getFullYear())+30*(p-d)+(v-m)},t.EDATE=function(s,u){return s=r.parseDate(s),s instanceof Error?s:isNaN(u)?e.value:(u=parseInt(u,10),s.setMonth(s.getMonth()+u),o(s))},t.EOMONTH=function(s,u){return s=r.parseDate(s),s instanceof Error?s:isNaN(u)?e.value:(u=parseInt(u,10),o(new Date(s.getFullYear(),s.getMonth()+u+1,0)))},t.HOUR=function(s){return s=r.parseDate(s),s instanceof Error?s:s.getHours()},t.INTERVAL=function(s){if(typeof s!="number"&&typeof s!="string")return e.value;s=parseInt(s,10);var u=Math.floor(s/94608e4);s=s%94608e4;var c=Math.floor(s/2592e3);s=s%2592e3;var d=Math.floor(s/86400);s=s%86400;var p=Math.floor(s/3600);s=s%3600;var m=Math.floor(s/60);s=s%60;var v=s;return u=u>0?u+"Y":"",c=c>0?c+"M":"",d=d>0?d+"D":"",p=p>0?p+"H":"",m=m>0?m+"M":"",v=v>0?v+"S":"","P"+u+c+d+"T"+p+m+v},t.ISOWEEKNUM=function(s){if(s=r.parseDate(s),s instanceof Error)return s;s.setHours(0,0,0),s.setDate(s.getDate()+4-(s.getDay()||7));var u=new Date(s.getFullYear(),0,1);return Math.ceil(((s-u)/864e5+1)/7)},t.MINUTE=function(s){return s=r.parseDate(s),s instanceof Error?s:s.getMinutes()},t.MONTH=function(s){return s=r.parseDate(s),s instanceof Error?s:s.getMonth()+1},t.NETWORKDAYS=function(s,u,c){return this.NETWORKDAYS.INTL(s,u,1,c)},t.NETWORKDAYS.INTL=function(s,u,c,d){if(s=r.parseDate(s),s instanceof Error)return s;if(u=r.parseDate(u),u instanceof Error)return u;if(c===void 0?c=f[1]:c=f[c],!(c instanceof Array))return e.value;d===void 0?d=[]:d instanceof Array||(d=[d]);for(var p=0;p<d.length;p++){var m=r.parseDate(d[p]);if(m instanceof Error)return m;d[p]=m}var v=(u-s)/(1e3*60*60*24)+1,y=v,E=s;for(p=0;p<v;p++){var g=new Date().getTimezoneOffset()>0?E.getUTCDay():E.getDay(),_=!1;(g===c[0]||g===c[1])&&(_=!0);for(var I=0;I<d.length;I++){var N=d[I];if(N.getDate()===E.getDate()&&N.getMonth()===E.getMonth()&&N.getFullYear()===E.getFullYear()){_=!0;break}}_&&y--,E.setDate(E.getDate()+1)}return y},t.NOW=function(){return new Date},t.SECOND=function(s){return s=r.parseDate(s),s instanceof Error?s:s.getSeconds()},t.TIME=function(s,u,c){return s=r.parseNumber(s),u=r.parseNumber(u),c=r.parseNumber(c),r.anyIsError(s,u,c)?e.value:s<0||u<0||c<0?e.num:(3600*s+60*u+c)/86400},t.TIMEVALUE=function(s){return s=r.parseDate(s),s instanceof Error?s:(3600*s.getHours()+60*s.getMinutes()+s.getSeconds())/86400},t.TODAY=function(){return new Date},t.WEEKDAY=function(s,u){if(s=r.parseDate(s),s instanceof Error)return s;u===void 0&&(u=1);var c=s.getDay();return h[u][c]},t.WEEKNUM=function(s,u){if(s=r.parseDate(s),s instanceof Error)return s;if(u===void 0&&(u=1),u===21)return this.ISOWEEKNUM(s);var c=i[u],d=new Date(s.getFullYear(),0,1),p=d.getDay()<c?1:0;return d-=Math.abs(d.getDay()-c)*24*60*60*1e3,Math.floor((s-d)/(1e3*60*60*24)/7+1)+p},t.WORKDAY=function(s,u,c){return this.WORKDAY.INTL(s,u,1,c)},t.WORKDAY.INTL=function(s,u,c,d){if(s=r.parseDate(s),s instanceof Error)return s;if(u=r.parseNumber(u),u instanceof Error)return u;if(u<0)return e.num;if(c===void 0?c=f[1]:c=f[c],!(c instanceof Array))return e.value;d===void 0?d=[]:d instanceof Array||(d=[d]);for(var p=0;p<d.length;p++){var m=r.parseDate(d[p]);if(m instanceof Error)return m;d[p]=m}for(var v=0;v<u;){s.setDate(s.getDate()+1);var y=s.getDay();if(!(y===c[0]||y===c[1])){for(var E=0;E<d.length;E++){var g=d[E];if(g.getDate()===s.getDate()&&g.getMonth()===s.getMonth()&&g.getFullYear()===s.getFullYear()){v--;break}}v++}}return s},t.YEAR=function(s){return s=r.parseDate(s),s instanceof Error?s:s.getFullYear()};function a(s){return new Date(s,1,29).getMonth()===1}function l(s,u){return Math.ceil((u-s)/1e3/60/60/24)}t.YEARFRAC=function(s,u,c){if(s=r.parseDate(s),s instanceof Error)return s;if(u=r.parseDate(u),u instanceof Error)return u;c=c||0;var d=s.getDate(),p=s.getMonth()+1,m=s.getFullYear(),v=u.getDate(),y=u.getMonth()+1,E=u.getFullYear();switch(c){case 0:return d===31&&v===31?(d=30,v=30):d===31?d=30:d===30&&v===31&&(v=30),(v+y*30+E*360-(d+p*30+m*360))/360;case 1:var g=function(C,T){var R=C.getFullYear(),A=new Date(R,2,1);if(a(R)&&C<A&&T>=A)return!0;var b=T.getFullYear(),O=new Date(b,2,1);return a(b)&&T>=O&&C<O},_=365;if(m===E||m+1===E&&(p>y||p===y&&d>=v))return(m===E&&a(m)||g(s,u)||y===1&&v===29)&&(_=366),l(s,u)/_;var I=E-m+1,N=(new Date(E+1,0,1)-new Date(m,0,1))/1e3/60/60/24,w=N/I;return l(s,u)/w;case 2:return l(s,u)/360;case 3:return l(s,u)/365;case 4:return(v+y*30+E*360-(d+p*30+m*360))/360}};function o(s){var u=s>-22038912e5?2:1;return Math.ceil((s-n)/864e5)+u}})(jo)),jo}var ff;function O0(){if(ff)return P;ff=1;var t=Fi(),e=ki(),r=lf(),n=ea();function i(h,f){if(f)for(var a in f)h[a]=f[a];return h}return P.BETADIST=e.BETA.DIST,P.BETAINV=e.BETA.INV,P.BINOMDIST=e.BINOM.DIST,P.CEILING=P.ISOCEILING=i(t.CEILING.MATH,t.CEILING),P.CEILINGMATH=t.CEILING.MATH,P.CEILINGPRECISE=t.CEILING.PRECISE,P.CHIDIST=e.CHISQ.DIST,P.CHIDISTRT=e.CHISQ.DIST.RT,P.CHIINV=e.CHISQ.INV,P.CHIINVRT=e.CHISQ.INV.RT,P.CHITEST=e.CHISQ.TEST,P.CONFIDENCE=i(e.CONFIDENCE.NORM,e.CONFIDENCE),P.COVAR=e.COVARIANCE.P,P.COVARIANCEP=e.COVARIANCE.P,P.COVARIANCES=e.COVARIANCE.S,P.CRITBINOM=e.BINOM.INV,P.EXPONDIST=e.EXPON.DIST,P.ERFCPRECISE=r.ERFC.PRECISE,P.ERFPRECISE=r.ERF.PRECISE,P.FDIST=e.F.DIST,P.FDISTRT=e.F.DIST.RT,P.FINVRT=e.F.INV.RT,P.FINV=e.F.INV,P.FLOOR=i(t.FLOOR.MATH,t.FLOOR),P.FLOORMATH=t.FLOOR.MATH,P.FLOORPRECISE=t.FLOOR.PRECISE,P.FTEST=e.F.TEST,P.GAMMADIST=e.GAMMA.DIST,P.GAMMAINV=e.GAMMA.INV,P.GAMMALNPRECISE=e.GAMMALN.PRECISE,P.HYPGEOMDIST=e.HYPGEOM.DIST,P.LOGINV=e.LOGNORM.INV,P.LOGNORMINV=e.LOGNORM.INV,P.LOGNORMDIST=e.LOGNORM.DIST,P.MODE=i(e.MODE.SNGL,e.MODE),P.MODEMULT=e.MODE.MULT,P.MODESNGL=e.MODE.SNGL,P.NEGBINOMDIST=e.NEGBINOM.DIST,P.NETWORKDAYSINTL=n.NETWORKDAYS.INTL,P.NORMDIST=e.NORM.DIST,P.NORMINV=e.NORM.INV,P.NORMSDIST=e.NORM.S.DIST,P.NORMSINV=e.NORM.S.INV,P.PERCENTILE=i(e.PERCENTILE.EXC,e.PERCENTILE),P.PERCENTILEEXC=e.PERCENTILE.EXC,P.PERCENTILEINC=e.PERCENTILE.INC,P.PERCENTRANK=i(e.PERCENTRANK.INC,e.PERCENTRANK),P.PERCENTRANKEXC=e.PERCENTRANK.EXC,P.PERCENTRANKINC=e.PERCENTRANK.INC,P.POISSON=i(e.POISSON.DIST,e.POISSON),P.POISSONDIST=e.POISSON.DIST,P.QUARTILE=i(e.QUARTILE.INC,e.QUARTILE),P.QUARTILEEXC=e.QUARTILE.EXC,P.QUARTILEINC=e.QUARTILE.INC,P.RANK=i(e.RANK.EQ,e.RANK),P.RANKAVG=e.RANK.AVG,P.RANKEQ=e.RANK.EQ,P.SKEWP=e.SKEW.P,P.STDEV=i(e.STDEV.S,e.STDEV),P.STDEVP=e.STDEV.P,P.STDEVS=e.STDEV.S,P.TDIST=e.T.DIST,P.TDISTRT=e.T.DIST.RT,P.TINV=e.T.INV,P.TTEST=e.T.TEST,P.VAR=i(e.VAR.S,e.VAR),P.VARP=e.VAR.P,P.VARS=e.VAR.S,P.WEIBULL=i(e.WEIBULL.DIST,e.WEIBULL),P.WEIBULLDIST=e.WEIBULL.DIST,P.WORKDAYINTL=n.WORKDAY.INTL,P.ZTEST=e.Z.TEST,P}var ta={},hf;function S0(){return hf||(hf=1,(function(t){var e=Je(),r=ki(),n=Fi(),i=dt(),h=Ko();function f(l){var o=[];return i.arrayEach(l,function(s){s&&o.push(s)}),o}t.FINDFIELD=function(l,o){var s=null;return i.arrayEach(l,function(u,c){if(u[0]===o)return s=c,!1}),s??e.value};function a(l,o){for(var s={},u=1;u<l[0].length;++u)s[u]=!0;var c=o[0].length;for(u=1;u<o.length;++u)o[u].length>c&&(c=o[u].length);for(var d=1;d<l.length;++d)for(var p=1;p<l[d].length;++p){for(var m=!1,v=!1,y=0;y<o.length;++y){var E=o[y];if(!(E.length<c)){var g=E[0];if(l[d][0]===g){v=!0;for(var _=1;_<E.length;++_)if(!m){var I=E[_]===void 0||E[_]==="*";if(I)m=!0;else{var N=h.parse(E[_]+""),w=[h.createToken(l[d][p],h.TOKEN_TYPE_LITERAL)].concat(N);m=h.compute(w)}}}}}v&&(s[p]=s[p]&&m)}for(var C=[],T=0;T<l[0].length;++T)s[T]&&C.push(T-1);return C}t.DAVERAGE=function(l,o,s){if(isNaN(o)&&typeof o!="string")return e.value;var u=a(l,s),c=[];if(typeof o=="string"){var d=t.FINDFIELD(l,o);c=i.rest(l[d])}else c=i.rest(l[o]);var p=0;return i.arrayEach(u,function(m){p+=c[m]}),u.length===0?e.div0:p/u.length},t.DCOUNT=function(l,o,s){if(isNaN(o)&&typeof o!="string")return e.value;var u=a(l,s),c=[];if(typeof o=="string"){var d=t.FINDFIELD(l,o);c=i.rest(l[d])}else c=i.rest(l[o]);var p=[];return i.arrayEach(u,function(m){p.push(c[m])}),r.COUNT(p)},t.DCOUNTA=function(l,o,s){if(isNaN(o)&&typeof o!="string")return e.value;var u=a(l,s),c=[];if(typeof o=="string"){var d=t.FINDFIELD(l,o);c=i.rest(l[d])}else c=i.rest(l[o]);var p=[];return i.arrayEach(u,function(m){p.push(c[m])}),r.COUNTA(p)},t.DGET=function(l,o,s){if(isNaN(o)&&typeof o!="string")return e.value;var u=a(l,s),c=[];if(typeof o=="string"){var d=t.FINDFIELD(l,o);c=i.rest(l[d])}else c=i.rest(l[o]);return u.length===0?e.value:u.length>1?e.num:c[u[0]]},t.DMAX=function(l,o,s){if(isNaN(o)&&typeof o!="string")return e.value;var u=a(l,s),c=[];if(typeof o=="string"){var d=t.FINDFIELD(l,o);c=i.rest(l[d])}else c=i.rest(l[o]);var p=c[u[0]];return i.arrayEach(u,function(m){p<c[m]&&(p=c[m])}),p},t.DMIN=function(l,o,s){if(isNaN(o)&&typeof o!="string")return e.value;var u=a(l,s),c=[];if(typeof o=="string"){var d=t.FINDFIELD(l,o);c=i.rest(l[d])}else c=i.rest(l[o]);var p=c[u[0]];return i.arrayEach(u,function(m){p>c[m]&&(p=c[m])}),p},t.DPRODUCT=function(l,o,s){if(isNaN(o)&&typeof o!="string")return e.value;var u=a(l,s),c=[];if(typeof o=="string"){var d=t.FINDFIELD(l,o);c=i.rest(l[d])}else c=i.rest(l[o]);var p=[];i.arrayEach(u,function(v){p.push(c[v])}),p=f(p);var m=1;return i.arrayEach(p,function(v){m*=v}),m},t.DSTDEV=function(l,o,s){if(isNaN(o)&&typeof o!="string")return e.value;var u=a(l,s),c=[];if(typeof o=="string"){var d=t.FINDFIELD(l,o);c=i.rest(l[d])}else c=i.rest(l[o]);var p=[];return i.arrayEach(u,function(m){p.push(c[m])}),p=f(p),r.STDEV.S(p)},t.DSTDEVP=function(l,o,s){if(isNaN(o)&&typeof o!="string")return e.value;var u=a(l,s),c=[];if(typeof o=="string"){var d=t.FINDFIELD(l,o);c=i.rest(l[d])}else c=i.rest(l[o]);var p=[];return i.arrayEach(u,function(m){p.push(c[m])}),p=f(p),r.STDEV.P(p)},t.DSUM=function(l,o,s){if(isNaN(o)&&typeof o!="string")return e.value;var u=a(l,s),c=[];if(typeof o=="string"){var d=t.FINDFIELD(l,o);c=i.rest(l[d])}else c=i.rest(l[o]);var p=[];return i.arrayEach(u,function(m){p.push(c[m])}),n.SUM(p)},t.DVAR=function(l,o,s){if(isNaN(o)&&typeof o!="string")return e.value;var u=a(l,s),c=[];if(typeof o=="string"){var d=t.FINDFIELD(l,o);c=i.rest(l[d])}else c=i.rest(l[o]);var p=[];return i.arrayEach(u,function(m){p.push(c[m])}),r.VAR.S(p)},t.DVARP=function(l,o,s){if(isNaN(o)&&typeof o!="string")return e.value;var u=a(l,s),c=[];if(typeof o=="string"){var d=t.FINDFIELD(l,o);c=i.rest(l[d])}else c=i.rest(l[o]);var p=[];return i.arrayEach(u,function(m){p.push(c[m])}),r.VAR.P(p)}})(ta)),ta}var $e={},df;function D0(){if(df)return $e;df=1;var t=Je(),e=dt(),r=Jo();return $e.AND=function(){for(var n=e.flatten(arguments),i=!0,h=0;h<n.length;h++)n[h]||(i=!1);return i},$e.CHOOSE=function(){if(arguments.length<2)return t.na;var n=arguments[0];return n<1||n>254||arguments.length<n+1?t.value:arguments[n]},$e.FALSE=function(){return!1},$e.IF=function(n,i,h){return n?i:h},$e.IFERROR=function(n,i){return r.ISERROR(n)?i:n},$e.IFNA=function(n,i){return n===t.na?i:n},$e.NOT=function(n){return!n},$e.OR=function(){for(var n=e.flatten(arguments),i=!1,h=0;h<n.length;h++)n[h]&&(i=!0);return i},$e.TRUE=function(){return!0},$e.XOR=function(){for(var n=e.flatten(arguments),i=0,h=0;h<n.length;h++)n[h]&&i++;return!!(Math.floor(Math.abs(i))&1)},$e.SWITCH=function(){var n;if(arguments.length>0){var i=arguments[0],h=arguments.length-1,f=Math.floor(h/2),a=!1,l=h%2!==0,o=h%2===0?null:arguments[arguments.length-1];if(f){for(var s=0;s<f;s++)if(i===arguments[s*2+1]){n=arguments[s*2+2],a=!0;break}}a||(n=l?o:t.na)}else n=t.value;return n},$e}var na={},pf;function P0(){return pf||(pf=1,(function(t){var e=Je(),r=ea(),n=dt();function i(f){return f&&f.getTime&&!isNaN(f.getTime())}function h(f){return f instanceof Date?f:new Date(f)}t.ACCRINT=function(f,a,l,o,s,u,c){return f=h(f),a=h(a),l=h(l),!i(f)||!i(a)||!i(l)?e.value:o<=0||s<=0||[1,2,4].indexOf(u)===-1||[0,1,2,3,4].indexOf(c)===-1||l<=f?e.num:(s=s||0,c=c||0,s*o*r.YEARFRAC(f,l,c))},t.ACCRINTM=function(){throw new Error("ACCRINTM is not implemented")},t.AMORDEGRC=function(){throw new Error("AMORDEGRC is not implemented")},t.AMORLINC=function(){throw new Error("AMORLINC is not implemented")},t.COUPDAYBS=function(){throw new Error("COUPDAYBS is not implemented")},t.COUPDAYS=function(){throw new Error("COUPDAYS is not implemented")},t.COUPDAYSNC=function(){throw new Error("COUPDAYSNC is not implemented")},t.COUPNCD=function(){throw new Error("COUPNCD is not implemented")},t.COUPNUM=function(){throw new Error("COUPNUM is not implemented")},t.COUPPCD=function(){throw new Error("COUPPCD is not implemented")},t.CUMIPMT=function(f,a,l,o,s,u){if(f=n.parseNumber(f),a=n.parseNumber(a),l=n.parseNumber(l),n.anyIsError(f,a,l))return e.value;if(f<=0||a<=0||l<=0||o<1||s<1||o>s||u!==0&&u!==1)return e.num;var c=t.PMT(f,a,l,0,u),d=0;o===1&&u===0&&(d=-l,o++);for(var p=o;p<=s;p++)u===1?d+=t.FV(f,p-2,c,l,1)-c:d+=t.FV(f,p-1,c,l,0);return d*=f,d},t.CUMPRINC=function(f,a,l,o,s,u){if(f=n.parseNumber(f),a=n.parseNumber(a),l=n.parseNumber(l),n.anyIsError(f,a,l))return e.value;if(f<=0||a<=0||l<=0||o<1||s<1||o>s||u!==0&&u!==1)return e.num;var c=t.PMT(f,a,l,0,u),d=0;o===1&&(u===0?d=c+l*f:d=c,o++);for(var p=o;p<=s;p++)u>0?d+=c-(t.FV(f,p-2,c,l,1)-c)*f:d+=c-t.FV(f,p-1,c,l,0)*f;return d},t.DB=function(f,a,l,o,s){if(s=s===void 0?12:s,f=n.parseNumber(f),a=n.parseNumber(a),l=n.parseNumber(l),o=n.parseNumber(o),s=n.parseNumber(s),n.anyIsError(f,a,l,o,s))return e.value;if(f<0||a<0||l<0||o<0||[1,2,3,4,5,6,7,8,9,10,11,12].indexOf(s)===-1||o>l)return e.num;if(a>=f)return 0;for(var u=(1-Math.pow(a/f,1/l)).toFixed(3),c=f*u*s/12,d=c,p=0,m=o===l?l-1:o,v=2;v<=m;v++)p=(f-d)*u,d+=p;return o===1?c:o===l?(f-d)*u:p},t.DDB=function(f,a,l,o,s){if(s=s===void 0?2:s,f=n.parseNumber(f),a=n.parseNumber(a),l=n.parseNumber(l),o=n.parseNumber(o),s=n.parseNumber(s),n.anyIsError(f,a,l,o,s))return e.value;if(f<0||a<0||l<0||o<0||s<=0||o>l)return e.num;if(a>=f)return 0;for(var u=0,c=0,d=1;d<=o;d++)c=Math.min((f-u)*(s/l),f-a-u),u+=c;return c},t.DISC=function(){throw new Error("DISC is not implemented")},t.DOLLARDE=function(f,a){if(f=n.parseNumber(f),a=n.parseNumber(a),n.anyIsError(f,a))return e.value;if(a<0)return e.num;if(a>=0&&a<1)return e.div0;a=parseInt(a,10);var l=parseInt(f,10);l+=f%1*Math.pow(10,Math.ceil(Math.log(a)/Math.LN10))/a;var o=Math.pow(10,Math.ceil(Math.log(a)/Math.LN2)+1);return l=Math.round(l*o)/o,l},t.DOLLARFR=function(f,a){if(f=n.parseNumber(f),a=n.parseNumber(a),n.anyIsError(f,a))return e.value;if(a<0)return e.num;if(a>=0&&a<1)return e.div0;a=parseInt(a,10);var l=parseInt(f,10);return l+=f%1*Math.pow(10,-Math.ceil(Math.log(a)/Math.LN10))*a,l},t.DURATION=function(){throw new Error("DURATION is not implemented")},t.EFFECT=function(f,a){return f=n.parseNumber(f),a=n.parseNumber(a),n.anyIsError(f,a)?e.value:f<=0||a<1?e.num:(a=parseInt(a,10),Math.pow(1+f/a,a)-1)},t.FV=function(f,a,l,o,s){if(o=o||0,s=s||0,f=n.parseNumber(f),a=n.parseNumber(a),l=n.parseNumber(l),o=n.parseNumber(o),s=n.parseNumber(s),n.anyIsError(f,a,l,o,s))return e.value;var u;if(f===0)u=o+l*a;else{var c=Math.pow(1+f,a);s===1?u=o*c+l*(1+f)*(c-1)/f:u=o*c+l*(c-1)/f}return-u},t.FVSCHEDULE=function(f,a){if(f=n.parseNumber(f),a=n.parseNumberArray(n.flatten(a)),n.anyIsError(f,a))return e.value;for(var l=a.length,o=f,s=0;s<l;s++)o*=1+a[s];return o},t.INTRATE=function(){throw new Error("INTRATE is not implemented")},t.IPMT=function(f,a,l,o,s,u){if(s=s||0,u=u||0,f=n.parseNumber(f),a=n.parseNumber(a),l=n.parseNumber(l),o=n.parseNumber(o),s=n.parseNumber(s),u=n.parseNumber(u),n.anyIsError(f,a,l,o,s,u))return e.value;var c=t.PMT(f,l,o,s,u),d;return a===1?u===1?d=0:d=-o:u===1?d=t.FV(f,a-2,c,o,1)-c:d=t.FV(f,a-1,c,o,0),d*f},t.IRR=function(f,a){if(a=a||0,f=n.parseNumberArray(n.flatten(f)),a=n.parseNumber(a),n.anyIsError(f,a))return e.value;for(var l=function(_,I,N){for(var w=N+1,C=_[0],T=1;T<_.length;T++)C+=_[T]/Math.pow(w,(I[T]-I[0])/365);return C},o=function(_,I,N){for(var w=N+1,C=0,T=1;T<_.length;T++){var R=(I[T]-I[0])/365;C-=R*_[T]/Math.pow(w,R+1)}return C},s=[],u=!1,c=!1,d=0;d<f.length;d++)s[d]=d===0?0:s[d-1]+365,f[d]>0&&(u=!0),f[d]<0&&(c=!0);if(!u||!c)return e.num;a=a===void 0?.1:a;var p=a,m=1e-10,v,y,E,g=!0;do E=l(f,s,p),v=p-E/o(f,s,p),y=Math.abs(v-p),p=v,g=y>m&&Math.abs(E)>m;while(g);return p},t.ISPMT=function(f,a,l,o){return f=n.parseNumber(f),a=n.parseNumber(a),l=n.parseNumber(l),o=n.parseNumber(o),n.anyIsError(f,a,l,o)?e.value:o*f*(a/l-1)},t.MDURATION=function(){throw new Error("MDURATION is not implemented")},t.MIRR=function(f,a,l){if(f=n.parseNumberArray(n.flatten(f)),a=n.parseNumber(a),l=n.parseNumber(l),n.anyIsError(f,a,l))return e.value;for(var o=f.length,s=[],u=[],c=0;c<o;c++)f[c]<0?s.push(f[c]):u.push(f[c]);var d=-t.NPV(l,u)*Math.pow(1+l,o-1),p=t.NPV(a,s)*(1+a);return Math.pow(d/p,1/(o-1))-1},t.NOMINAL=function(f,a){return f=n.parseNumber(f),a=n.parseNumber(a),n.anyIsError(f,a)?e.value:f<=0||a<1?e.num:(a=parseInt(a,10),(Math.pow(f+1,1/a)-1)*a)},t.NPER=function(f,a,l,o,s){if(s=s===void 0?0:s,o=o===void 0?0:o,f=n.parseNumber(f),a=n.parseNumber(a),l=n.parseNumber(l),o=n.parseNumber(o),s=n.parseNumber(s),n.anyIsError(f,a,l,o,s))return e.value;var u=a*(1+f*s)-o*f,c=l*f+a*(1+f*s);return Math.log(u/c)/Math.log(1+f)},t.NPV=function(){var f=n.parseNumberArray(n.flatten(arguments));if(f instanceof Error)return f;for(var a=f[0],l=0,o=1;o<f.length;o++)l+=f[o]/Math.pow(1+a,o);return l},t.ODDFPRICE=function(){throw new Error("ODDFPRICE is not implemented")},t.ODDFYIELD=function(){throw new Error("ODDFYIELD is not implemented")},t.ODDLPRICE=function(){throw new Error("ODDLPRICE is not implemented")},t.ODDLYIELD=function(){throw new Error("ODDLYIELD is not implemented")},t.PDURATION=function(f,a,l){return f=n.parseNumber(f),a=n.parseNumber(a),l=n.parseNumber(l),n.anyIsError(f,a,l)?e.value:f<=0?e.num:(Math.log(l)-Math.log(a))/Math.log(1+f)},t.PMT=function(f,a,l,o,s){if(o=o||0,s=s||0,f=n.parseNumber(f),a=n.parseNumber(a),l=n.parseNumber(l),o=n.parseNumber(o),s=n.parseNumber(s),n.anyIsError(f,a,l,o,s))return e.value;var u;if(f===0)u=(l+o)/a;else{var c=Math.pow(1+f,a);s===1?u=(o*f/(c-1)+l*f/(1-1/c))/(1+f):u=o*f/(c-1)+l*f/(1-1/c)}return-u},t.PPMT=function(f,a,l,o,s,u){return s=s||0,u=u||0,f=n.parseNumber(f),l=n.parseNumber(l),o=n.parseNumber(o),s=n.parseNumber(s),u=n.parseNumber(u),n.anyIsError(f,l,o,s,u)?e.value:t.PMT(f,l,o,s,u)-t.IPMT(f,a,l,o,s,u)},t.PRICE=function(){throw new Error("PRICE is not implemented")},t.PRICEDISC=function(){throw new Error("PRICEDISC is not implemented")},t.PRICEMAT=function(){throw new Error("PRICEMAT is not implemented")},t.PV=function(f,a,l,o,s){return o=o||0,s=s||0,f=n.parseNumber(f),a=n.parseNumber(a),l=n.parseNumber(l),o=n.parseNumber(o),s=n.parseNumber(s),n.anyIsError(f,a,l,o,s)?e.value:f===0?-l*a-o:((1-Math.pow(1+f,a))/f*l*(1+f*s)-o)/Math.pow(1+f,a)},t.RATE=function(f,a,l,o,s,u){if(u=u===void 0?.01:u,o=o===void 0?0:o,s=s===void 0?0:s,f=n.parseNumber(f),a=n.parseNumber(a),l=n.parseNumber(l),o=n.parseNumber(o),s=n.parseNumber(s),u=n.parseNumber(u),n.anyIsError(f,a,l,o,s,u))return e.value;var c=1e-10,d=50,p,m,v,y,E=0,g=0,_=0,I=u;for(Math.abs(I)<c?p=l*(1+f*I)+a*(1+I*s)*f+o:(g=Math.exp(f*Math.log(1+I)),p=l*g+a*(1/I+s)*(g-1)+o),m=l+a*f+o,v=l*g+a*(1/I+s)*(g-1)+o,_=y=0,E=I;Math.abs(m-v)>c&&_<d;)I=(v*y-m*E)/(v-m),y=E,E=I,Math.abs(I)<c?p=l*(1+f*I)+a*(1+I*s)*f+o:(g=Math.exp(f*Math.log(1+I)),p=l*g+a*(1/I+s)*(g-1)+o),m=v,v=p,++_;return I},t.RECEIVED=function(){throw new Error("RECEIVED is not implemented")},t.RRI=function(f,a,l){return f=n.parseNumber(f),a=n.parseNumber(a),l=n.parseNumber(l),n.anyIsError(f,a,l)?e.value:f===0||a===0?e.num:Math.pow(l/a,1/f)-1},t.SLN=function(f,a,l){return f=n.parseNumber(f),a=n.parseNumber(a),l=n.parseNumber(l),n.anyIsError(f,a,l)?e.value:l===0?e.num:(f-a)/l},t.SYD=function(f,a,l,o){return f=n.parseNumber(f),a=n.parseNumber(a),l=n.parseNumber(l),o=n.parseNumber(o),n.anyIsError(f,a,l,o)?e.value:l===0||o<1||o>l?e.num:(o=parseInt(o,10),(f-a)*(l-o+1)*2/(l*(l+1)))},t.TBILLEQ=function(f,a,l){return f=n.parseDate(f),a=n.parseDate(a),l=n.parseNumber(l),n.anyIsError(f,a,l)?e.value:l<=0||f>a||a-f>365*24*60*60*1e3?e.num:365*l/(360-l*r.DAYS360(f,a,!1))},t.TBILLPRICE=function(f,a,l){return f=n.parseDate(f),a=n.parseDate(a),l=n.parseNumber(l),n.anyIsError(f,a,l)?e.value:l<=0||f>a||a-f>365*24*60*60*1e3?e.num:100*(1-l*r.DAYS360(f,a,!1)/360)},t.TBILLYIELD=function(f,a,l){return f=n.parseDate(f),a=n.parseDate(a),l=n.parseNumber(l),n.anyIsError(f,a,l)?e.value:l<=0||f>a||a-f>365*24*60*60*1e3?e.num:(100-l)*360/(l*r.DAYS360(f,a,!1))},t.VDB=function(){throw new Error("VDB is not implemented")},t.XNPV=function(f,a,l){if(f=n.parseNumber(f),a=n.parseNumberArray(n.flatten(a)),l=n.parseDateArray(n.flatten(l)),n.anyIsError(f,a,l))return e.value;for(var o=0,s=0;s<a.length;s++)o+=a[s]/Math.pow(1+f,r.DAYS(l[s],l[0])/365);return o},t.YIELD=function(){throw new Error("YIELD is not implemented")},t.YIELDDISC=function(){throw new Error("YIELDDISC is not implemented")},t.YIELDMAT=function(){throw new Error("YIELDMAT is not implemented")}})(na)),na}var Rr={},mf;function M0(){if(mf)return Rr;mf=1;var t=Je(),e=dt();return Rr.MATCH=function(r,n,i){if(!r&&!n||(arguments.length===2&&(i=1),!(n instanceof Array))||i!==-1&&i!==0&&i!==1)return t.na;for(var h,f,a=0;a<n.length;a++)if(i===1){if(n[a]===r)return a+1;n[a]<r&&(f?n[a]>f&&(h=a+1,f=n[a]):(h=a+1,f=n[a]))}else if(i===0){if(typeof r=="string"){if(r=r.replace(/\?/g,"."),n[a].toLowerCase().match(r.toLowerCase()))return a+1}else if(n[a]===r)return a+1}else if(i===-1){if(n[a]===r)return a+1;n[a]>r&&(f?n[a]<f&&(h=a+1,f=n[a]):(h=a+1,f=n[a]))}return h||t.na},Rr.VLOOKUP=function(r,n,i,h){if(!r||!n||!i)return t.na;h=h||!1;for(var f=0;f<n.length;f++){var a=n[f];if(!h&&a[0]===r||a[0]===r||h&&typeof a[0]=="string"&&a[0].toLowerCase().indexOf(r.toLowerCase())!==-1)return i<a.length+1?a[i-1]:t.ref}return t.na},Rr.HLOOKUP=function(r,n,i,h){if(!r||!n||!i)return t.na;h=h||!1;for(var f=e.transpose(n),a=0;a<f.length;a++){var l=f[a];if(!h&&l[0]===r||l[0]===r||h&&typeof l[0]=="string"&&l[0].toLowerCase().indexOf(r.toLowerCase())!==-1)return i<l.length+1?l[i-1]:t.ref}return t.na},Rr}var vf;function L0(){return vf||(vf=1,(function(t){var e=[O0(),S0(),lf(),D0(),Fi(),Qo(),ea(),P0(),Jo(),M0(),ki(),nf()];for(var r in e){var n=e[r];for(var i in n)t[i]=t[i]||n[i]}})(Go)),Go}var k0=L0();const Vi=Yc(k0);var F0=["ABS","ACCRINT","ACOS","ACOSH","ACOT","ACOTH","ADD","AGGREGATE","AND","ARABIC","ARGS2ARRAY","ASIN","ASINH","ATAN","ATAN2","ATANH","AVEDEV","AVERAGE","AVERAGEA","AVERAGEIF","AVERAGEIFS","BASE","BESSELI","BESSELJ","BESSELK","BESSELY","BETA.DIST","BETA.INV","BETADIST","BETAINV","BIN2DEC","BIN2HEX","BIN2OCT","BINOM.DIST","BINOM.DIST.RANGE","BINOM.INV","BINOMDIST","BITAND","BITLSHIFT","BITOR","BITRSHIFT","BITXOR","CEILING","CEILINGMATH","CEILINGPRECISE","CHAR","CHISQ.DIST","CHISQ.DIST.RT","CHISQ.INV","CHISQ.INV.RT","CHOOSE","CHOOSE","CLEAN","CODE","COLUMN","COLUMNS","COMBIN","COMBINA","COMPLEX","CONCATENATE","CONFIDENCE","CONFIDENCE.NORM","CONFIDENCE.T","CONVERT","CORREL","COS","COSH","COT","COTH","COUNT","COUNTA","COUNTBLANK","COUNTIF","COUNTIFS","COUNTIN","COUNTUNIQUE","COVARIANCE.P","COVARIANCE.S","CSC","CSCH","CUMIPMT","CUMPRINC","DATE","DATEVALUE","DAY","DAYS","DAYS360","DB","DDB","DEC2BIN","DEC2HEX","DEC2OCT","DECIMAL","DEGREES","DELTA","DEVSQ","DIVIDE","DOLLARDE","DOLLARFR","E","EDATE","EFFECT","EOMONTH","EQ","ERF","ERFC","EVEN","EXACT","EXP","EXPON.DIST","EXPONDIST","F.DIST","F.DIST.RT","F.INV","F.INV.RT","FACT","FACTDOUBLE","FALSE","FDIST","FDISTRT","FIND","FINV","FINVRT","FISHER","FISHERINV","FLATTEN","FLOOR","FORECAST","FREQUENCY","FV","FVSCHEDULE","GAMMA","GAMMA.DIST","GAMMA.INV","GAMMADIST","GAMMAINV","GAMMALN","GAMMALN.PRECISE","GAUSS","GCD","GEOMEAN","GESTEP","GROWTH","GTE","HARMEAN","HEX2BIN","HEX2DEC","HEX2OCT","HOUR","HTML2TEXT","HYPGEOM.DIST","HYPGEOMDIST","IF","IMABS","IMAGINARY","IMARGUMENT","IMCONJUGATE","IMCOS","IMCOSH","IMCOT","IMCSC","IMCSCH","IMDIV","IMEXP","IMLN","IMLOG10","IMLOG2","IMPOWER","IMPRODUCT","IMREAL","IMSEC","IMSECH","IMSIN","IMSINH","IMSQRT","IMSUB","IMSUM","IMTAN","INT","INTERCEPT","INTERVAL","IPMT","IRR","ISBINARY","ISBLANK","ISEVEN","ISLOGICAL","ISNONTEXT","ISNUMBER","ISODD","ISODD","ISOWEEKNUM","ISPMT","ISTEXT","JOIN","KURT","LARGE","LCM","LEFT","LEN","LINEST","LN","LOG","LOG10","LOGEST","LOGNORM.DIST","LOGNORM.INV","LOGNORMDIST","LOGNORMINV","LOWER","LT","LTE","MATCH","MAX","MAXA","MEDIAN","MID","MIN","MINA","MINUS","MINUTE","MIRR","MOD","MODE.MULT","MODE.SNGL","MODEMULT","MODESNGL","MONTH","MROUND","MULTINOMIAL","MULTIPLY","NE","NEGBINOM.DIST","NEGBINOMDIST","NETWORKDAYS","NOMINAL","NORM.DIST","NORM.INV","NORM.S.DIST","NORM.S.INV","NORMDIST","NORMINV","NORMSDIST","NORMSINV","NOT","NOW","NPER","NPV","NUMBERS","OCT2BIN","OCT2DEC","OCT2HEX","ODD","OR","PDURATION","PEARSON","PERCENTILEEXC","PERCENTILEINC","PERCENTRANKEXC","PERCENTRANKINC","PERMUT","PERMUTATIONA","PHI","PI","PMT","POISSON.DIST","POISSONDIST","POW","POWER","PPMT","PROB","PRODUCT","PROPER","PV","QUARTILE.EXC","QUARTILE.INC","QUARTILEEXC","QUARTILEINC","QUOTIENT","RADIANS","RAND","RANDBETWEEN","RANK.AVG","RANK.EQ","RANKAVG","RANKEQ","RATE","REFERENCE","REGEXEXTRACT","REGEXMATCH","REGEXREPLACE","REPLACE","REPT","RIGHT","ROMAN","ROUND","ROUNDDOWN","ROUNDUP","ROW","ROWS","RRI","RSQ","SEARCH","SEC","SECH","SECOND","SERIESSUM","SIGN","SIN","SINH","SKEW","SKEW.P","SKEWP","SLN","SLOPE","SMALL","SPLIT","SPLIT","SQRT","SQRTPI","STANDARDIZE","STDEV.P","STDEV.S","STDEVA","STDEVP","STDEVPA","STDEVS","STEYX","SUBSTITUTE","SUBTOTAL","SUM","SUMIF","SUMIFS","SUMPRODUCT","SUMSQ","SUMX2MY2","SUMX2PY2","SUMXMY2","SWITCH","SYD","T","T.DIST","T.DIST.2T","T.DIST.RT","T.INV","T.INV.2T","TAN","TANH","TBILLEQ","TBILLPRICE","TBILLYIELD","TDIST","TDIST2T","TDISTRT","TIME","TIMEVALUE","TINV","TINV2T","TODAY","TRANSPOSE","TREND","TRIM","TRIMMEAN","TRUE","TRUNC","UNICHAR","UNICODE","UNIQUE","UPPER","VAR.P","VAR.S","VARA","VARP","VARPA","VARS","WEEKDAY","WEEKNUM","WEIBULL.DIST","WEIBULLDIST","WORKDAY","XIRR","XNPV","XOR","YEAR","YEARFRAC"],V0=F0;function Ui(t){return function(){t=t.toUpperCase();var r=t.split("."),n=!1,i;if(r.length===1)Vi[r[0]]&&(n=!0,i=Vi[r[0]].apply(Vi,arguments));else{for(var h=r.length,f=0,a=Vi;f<h;)if(a=a[r[f]],f++,!a){a=null;break}a&&(n=!0,i=a.apply(void 0,arguments))}if(!n)throw Error(Pi);return i}}Ui.isFactory=!0,Ui.SYMBOL=V0;var U0=">";function ra(t,e){return t>e}ra.SYMBOL=U0;var q0=">=";function ia(t,e){return t>=e}ia.SYMBOL=q0;var B0="<";function sa(t,e){return t<e}sa.SYMBOL=B0;var H0="<=";function oa(t,e){return t<=e}oa.SYMBOL=H0;var G0="-";function aa(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];var i=r.reduce(function(h,f){return h-Xe(f)},Xe(t));if(isNaN(i))throw Error(On);return i}aa.SYMBOL=G0;var W0="*";function ua(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];var i=r.reduce(function(h,f){return h*Xe(f)},Xe(t));if(isNaN(i))throw Error(On);return i}ua.SYMBOL=W0;var z0="<>";function la(t,e){return t!==e}la.SYMBOL=z0;var $0="^";function ca(t,e){var r=Math.pow(Xe(t),Xe(e));if(isNaN(r))throw Error(On);return r}ca.SYMBOL=$0;function Y0(t){return J0(t)||X0(t)||K0(t)||Q0()}function Q0(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function K0(t,e){if(t){if(typeof t=="string")return fa(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fa(t,e)}}function X0(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function J0(t){if(Array.isArray(t))return fa(t)}function fa(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Ar=Object.create(null);function gf(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];if(t=t.toUpperCase(),!Ar[t])throw Error(Pi);return Ar[t].apply(Ar,Y0(e))}function Ye(t,e){Array.isArray(t)||(t=[t.toUpperCase()]),t.forEach(function(r){e.isFactory?Ar[r]=e(r):Ar[r]=e})}Ye(Uo.SYMBOL,Uo),Ye(qo.SYMBOL,qo),Ye(Bo.SYMBOL,Bo),Ye(Ho.SYMBOL,Ho),Ye(ca.SYMBOL,ca),Ye(Ui.SYMBOL,Ui),Ye(ra.SYMBOL,ra),Ye(ia.SYMBOL,ia),Ye(sa.SYMBOL,sa),Ye(oa.SYMBOL,oa),Ye(ua.SYMBOL,ua),Ye(la.SYMBOL,la),Ye(aa.SYMBOL,aa);var B=function(e,r,n,i){for(n=n||{},i=e.length;i--;n[e[i]]=r);return n},he=[1,5],de=[1,8],pe=[1,6],me=[1,7],ve=[1,9],ge=[1,14],ye=[1,15],Ee=[1,16],_e=[1,12],Ie=[1,13],ce=[1,17],we=[1,19],br=[1,20],Ze=[1,21],on=[1,22],an=[1,23],Sn=[1,24],xe=[1,25],Le=[1,26],ke=[1,27],be=[1,28],ae=[5,9,10,11,13,14,15,16,17,18,19,20,29,30],yf=[5,9,10,11,13,14,15,16,17,18,19,20,29,30,32],ha=[5,9,10,11,13,14,15,16,17,18,19,20,29,30,34],qi=[5,10,11,13,14,15,16,17,29,30],Or=[5,10,13,14,15,16,29,30],Ef=[5,10,11,13,14,15,16,17,18,19,29,30],Bi=[13,29,30],da={trace:function(){},yy:{},symbols_:{error:2,expressions:3,expression:4,EOF:5,variableSequence:6,number:7,STRING:8,"&":9,"=":10,"+":11,"(":12,")":13,"<":14,">":15,NOT:16,"-":17,"*":18,"/":19,"^":20,FUNCTION:21,expseq:22,cell:23,ABSOLUTE_CELL:24,RELATIVE_CELL:25,MIXED_CELL:26,":":27,ARRAY:28,";":29,",":30,VARIABLE:31,DECIMAL:32,NUMBER:33,"%":34,ERROR:35,$accept:0,$end:1},terminals_:{5:"EOF",8:"STRING",9:"&",10:"=",11:"+",12:"(",13:")",14:"<",15:">",16:"NOT",17:"-",18:"*",19:"/",20:"^",21:"FUNCTION",24:"ABSOLUTE_CELL",25:"RELATIVE_CELL",26:"MIXED_CELL",27:":",28:"ARRAY",29:";",30:",",31:"VARIABLE",32:"DECIMAL",33:"NUMBER",34:"%",35:"ERROR"},productions_:[0,[3,2],[4,1],[4,1],[4,1],[4,3],[4,3],[4,3],[4,3],[4,4],[4,4],[4,4],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,2],[4,2],[4,3],[4,4],[4,1],[4,1],[4,2],[23,1],[23,1],[23,1],[23,3],[23,3],[23,3],[23,3],[23,3],[23,3],[23,3],[23,3],[23,3],[22,1],[22,1],[22,3],[22,3],[6,1],[6,3],[7,1],[7,3],[7,2],[2,1]],performAction:function(e,r,n,i,h,f,a){var l=f.length-1;switch(h){case 1:return f[l-1];case 2:this.$=i.callVariable(f[l][0]);break;case 3:this.$=i.toNumber(f[l]);break;case 4:this.$=i.trimEdges(f[l]);break;case 5:this.$=i.evaluateByOperator("&",[f[l-2],f[l]]);break;case 6:this.$=i.evaluateByOperator("=",[f[l-2],f[l]]);break;case 7:this.$=i.evaluateByOperator("+",[f[l-2],f[l]]);break;case 8:this.$=f[l-1];break;case 9:this.$=i.evaluateByOperator("<=",[f[l-3],f[l]]);break;case 10:this.$=i.evaluateByOperator(">=",[f[l-3],f[l]]);break;case 11:this.$=i.evaluateByOperator("<>",[f[l-3],f[l]]);break;case 12:this.$=i.evaluateByOperator("NOT",[f[l-2],f[l]]);break;case 13:this.$=i.evaluateByOperator(">",[f[l-2],f[l]]);break;case 14:this.$=i.evaluateByOperator("<",[f[l-2],f[l]]);break;case 15:this.$=i.evaluateByOperator("-",[f[l-2],f[l]]);break;case 16:this.$=i.evaluateByOperator("*",[f[l-2],f[l]]);break;case 17:this.$=i.evaluateByOperator("/",[f[l-2],f[l]]);break;case 18:this.$=i.evaluateByOperator("^",[f[l-2],f[l]]);break;case 19:var o=i.invertNumber(f[l]);this.$=o,isNaN(this.$)&&(this.$=0);break;case 20:var o=i.toNumber(f[l]);this.$=o,isNaN(this.$)&&(this.$=0);break;case 21:this.$=i.callFunction(f[l-2]);break;case 22:this.$=i.callFunction(f[l-3],f[l-1]);break;case 26:case 27:case 28:this.$=i.cellValue(f[l]);break;case 29:case 30:case 31:case 32:case 33:case 34:case 35:case 36:case 37:this.$=i.rangeValue(f[l-2],f[l]);break;case 38:case 42:this.$=[f[l]];break;case 39:this.$=i.trimEdges(e).split(",");break;case 40:case 41:f[l-2].push(f[l]),this.$=f[l-2];break;case 43:this.$=Array.isArray(f[l-2])?f[l-2]:[f[l-2]],this.$.push(f[l]);break;case 44:this.$=f[l];break;case 45:this.$=(f[l-2]+"."+f[l])*1;break;case 46:this.$=f[l-1]*.01;break;case 47:this.$=i.throwError(f[l]);break}},table:[{2:11,3:1,4:2,6:3,7:4,8:he,11:de,12:pe,17:me,21:ve,23:10,24:ge,25:ye,26:Ee,31:_e,33:Ie,35:ce},{1:[3]},{5:[1,18],9:we,10:br,11:Ze,14:on,15:an,16:Sn,17:xe,18:Le,19:ke,20:be},B(ae,[2,2],{32:[1,29]}),B(ae,[2,3],{34:[1,30]}),B(ae,[2,4]),{2:11,4:31,6:3,7:4,8:he,11:de,12:pe,17:me,21:ve,23:10,24:ge,25:ye,26:Ee,31:_e,33:Ie,35:ce},{2:11,4:32,6:3,7:4,8:he,11:de,12:pe,17:me,21:ve,23:10,24:ge,25:ye,26:Ee,31:_e,33:Ie,35:ce},{2:11,4:33,6:3,7:4,8:he,11:de,12:pe,17:me,21:ve,23:10,24:ge,25:ye,26:Ee,31:_e,33:Ie,35:ce},{12:[1,34]},B(ae,[2,23]),B(ae,[2,24],{2:35,35:ce}),B(yf,[2,42]),B(ha,[2,44],{32:[1,36]}),B(ae,[2,26],{27:[1,37]}),B(ae,[2,27],{27:[1,38]}),B(ae,[2,28],{27:[1,39]}),B([5,9,10,11,13,14,15,16,17,18,19,20,29,30,35],[2,47]),{1:[2,1]},{2:11,4:40,6:3,7:4,8:he,11:de,12:pe,17:me,21:ve,23:10,24:ge,25:ye,26:Ee,31:_e,33:Ie,35:ce},{2:11,4:41,6:3,7:4,8:he,11:de,12:pe,17:me,21:ve,23:10,24:ge,25:ye,26:Ee,31:_e,33:Ie,35:ce},{2:11,4:42,6:3,7:4,8:he,11:de,12:pe,17:me,21:ve,23:10,24:ge,25:ye,26:Ee,31:_e,33:Ie,35:ce},{2:11,4:45,6:3,7:4,8:he,10:[1,43],11:de,12:pe,15:[1,44],17:me,21:ve,23:10,24:ge,25:ye,26:Ee,31:_e,33:Ie,35:ce},{2:11,4:47,6:3,7:4,8:he,10:[1,46],11:de,12:pe,17:me,21:ve,23:10,24:ge,25:ye,26:Ee,31:_e,33:Ie,35:ce},{2:11,4:48,6:3,7:4,8:he,11:de,12:pe,17:me,21:ve,23:10,24:ge,25:ye,26:Ee,31:_e,33:Ie,35:ce},{2:11,4:49,6:3,7:4,8:he,11:de,12:pe,17:me,21:ve,23:10,24:ge,25:ye,26:Ee,31:_e,33:Ie,35:ce},{2:11,4:50,6:3,7:4,8:he,11:de,12:pe,17:me,21:ve,23:10,24:ge,25:ye,26:Ee,31:_e,33:Ie,35:ce},{2:11,4:51,6:3,7:4,8:he,11:de,12:pe,17:me,21:ve,23:10,24:ge,25:ye,26:Ee,31:_e,33:Ie,35:ce},{2:11,4:52,6:3,7:4,8:he,11:de,12:pe,17:me,21:ve,23:10,24:ge,25:ye,26:Ee,31:_e,33:Ie,35:ce},{31:[1,53]},B(ha,[2,46]),{9:we,10:br,11:Ze,13:[1,54],14:on,15:an,16:Sn,17:xe,18:Le,19:ke,20:be},B(qi,[2,19],{9:we,18:Le,19:ke,20:be}),B(qi,[2,20],{9:we,18:Le,19:ke,20:be}),{2:11,4:57,6:3,7:4,8:he,11:de,12:pe,13:[1,55],17:me,21:ve,22:56,23:10,24:ge,25:ye,26:Ee,28:[1,58],31:_e,33:Ie,35:ce},B(ae,[2,25]),{33:[1,59]},{24:[1,60],25:[1,61],26:[1,62]},{24:[1,63],25:[1,64],26:[1,65]},{24:[1,66],25:[1,67],26:[1,68]},B(ae,[2,5]),B([5,10,13,29,30],[2,6],{9:we,11:Ze,14:on,15:an,16:Sn,17:xe,18:Le,19:ke,20:be}),B(qi,[2,7],{9:we,18:Le,19:ke,20:be}),{2:11,4:69,6:3,7:4,8:he,11:de,12:pe,17:me,21:ve,23:10,24:ge,25:ye,26:Ee,31:_e,33:Ie,35:ce},{2:11,4:70,6:3,7:4,8:he,11:de,12:pe,17:me,21:ve,23:10,24:ge,25:ye,26:Ee,31:_e,33:Ie,35:ce},B(Or,[2,14],{9:we,11:Ze,17:xe,18:Le,19:ke,20:be}),{2:11,4:71,6:3,7:4,8:he,11:de,12:pe,17:me,21:ve,23:10,24:ge,25:ye,26:Ee,31:_e,33:Ie,35:ce},B(Or,[2,13],{9:we,11:Ze,17:xe,18:Le,19:ke,20:be}),B([5,10,13,16,29,30],[2,12],{9:we,11:Ze,14:on,15:an,17:xe,18:Le,19:ke,20:be}),B(qi,[2,15],{9:we,18:Le,19:ke,20:be}),B(Ef,[2,16],{9:we,20:be}),B(Ef,[2,17],{9:we,20:be}),B([5,10,11,13,14,15,16,17,18,19,20,29,30],[2,18],{9:we}),B(yf,[2,43]),B(ae,[2,8]),B(ae,[2,21]),{13:[1,72],29:[1,73],30:[1,74]},B(Bi,[2,38],{9:we,10:br,11:Ze,14:on,15:an,16:Sn,17:xe,18:Le,19:ke,20:be}),B(Bi,[2,39]),B(ha,[2,45]),B(ae,[2,29]),B(ae,[2,30]),B(ae,[2,31]),B(ae,[2,32]),B(ae,[2,33]),B(ae,[2,34]),B(ae,[2,35]),B(ae,[2,36]),B(ae,[2,37]),B(Or,[2,9],{9:we,11:Ze,17:xe,18:Le,19:ke,20:be}),B(Or,[2,11],{9:we,11:Ze,17:xe,18:Le,19:ke,20:be}),B(Or,[2,10],{9:we,11:Ze,17:xe,18:Le,19:ke,20:be}),B(ae,[2,22]),{2:11,4:75,6:3,7:4,8:he,11:de,12:pe,17:me,21:ve,23:10,24:ge,25:ye,26:Ee,31:_e,33:Ie,35:ce},{2:11,4:76,6:3,7:4,8:he,11:de,12:pe,17:me,21:ve,23:10,24:ge,25:ye,26:Ee,31:_e,33:Ie,35:ce},B(Bi,[2,40],{9:we,10:br,11:Ze,14:on,15:an,16:Sn,17:xe,18:Le,19:ke,20:be}),B(Bi,[2,41],{9:we,10:br,11:Ze,14:on,15:an,16:Sn,17:xe,18:Le,19:ke,20:be})],defaultActions:{18:[2,1]},parseError:function(e,r){if(r.recoverable)this.trace(e);else{var n=new Error(e);throw n.hash=r,n}},parse:function(e){var r=this,n=[0],i=[null],h=[],f=this.table,a="",l=0,o=0,s=0,u=2,c=1,d=h.slice.call(arguments,1),p=Object.create(this.lexer),m={yy:{}};for(var v in this.yy)Object.prototype.hasOwnProperty.call(this.yy,v)&&(m.yy[v]=this.yy[v]);p.setInput(e,m.yy),m.yy.lexer=p,m.yy.parser=this,typeof p.yylloc>"u"&&(p.yylloc={});var y=p.yylloc;h.push(y);var E=p.options&&p.options.ranges;typeof m.yy.parseError=="function"?this.parseError=m.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function g(U){n.length=n.length-2*U,i.length=i.length-U,h.length=h.length-U}for(var _=function(){var M;return M=p.lex()||c,typeof M!="number"&&(M=r.symbols_[M]||M),M},I,N,w,C,T,R={},A,b,O,S;;){if(w=n[n.length-1],this.defaultActions[w]?C=this.defaultActions[w]:((I===null||typeof I>"u")&&(I=_()),C=f[w]&&f[w][I]),typeof C>"u"||!C.length||!C[0]){var L=function(M){for(var H=n.length-1,J=0;;){if(u.toString()in f[M])return J;if(M===0||H<2)return!1;H-=2,M=n[H],++J}},k,V="";if(s)N!==c&&(k=L(w));else{k=L(w),S=[];for(A in f[w])this.terminals_[A]&&A>u&&S.push("'"+this.terminals_[A]+"'");p.showPosition?V="Parse error on line "+(l+1)+`:
`+p.showPosition()+`
Expecting `+S.join(", ")+", got '"+(this.terminals_[I]||I)+"'":V="Parse error on line "+(l+1)+": Unexpected "+(I==c?"end of input":"'"+(this.terminals_[I]||I)+"'"),this.parseError(V,{text:p.match,token:this.terminals_[I]||I,line:p.yylineno,loc:y,expected:S,recoverable:k!==!1})}if(s==3){if(I===c||N===c)throw new Error(V||"Parsing halted while starting to recover from another error.");o=p.yyleng,a=p.yytext,l=p.yylineno,y=p.yylloc,I=_()}if(k===!1)throw new Error(V||"Parsing halted. No suitable error recovery rule available.");g(k),N=I==u?null:I,I=u,w=n[n.length-1],C=f[w]&&f[w][u],s=3}if(C[0]instanceof Array&&C.length>1)throw new Error("Parse Error: multiple actions possible at state: "+w+", token: "+I);switch(C[0]){case 1:n.push(I),i.push(p.yytext),h.push(p.yylloc),n.push(C[1]),I=null,N?(I=N,N=null):(o=p.yyleng,a=p.yytext,l=p.yylineno,y=p.yylloc,s>0&&s--);break;case 2:if(b=this.productions_[C[1]][1],R.$=i[i.length-b],R._$={first_line:h[h.length-(b||1)].first_line,last_line:h[h.length-1].last_line,first_column:h[h.length-(b||1)].first_column,last_column:h[h.length-1].last_column},E&&(R._$.range=[h[h.length-(b||1)].range[0],h[h.length-1].range[1]]),T=this.performAction.apply(R,[a,o,l,m.yy,C[1],i,h].concat(d)),typeof T<"u")return T;b&&(n=n.slice(0,-1*b*2),i=i.slice(0,-1*b),h=h.slice(0,-1*b)),n.push(this.productions_[C[1]][0]),i.push(R.$),h.push(R._$),O=f[n[n.length-2]][n[n.length-1]],n.push(O);break;case 3:return!0}}return!0}},Z0=(function(){var t={EOF:1,parseError:function(r,n){if(this.yy.parser)this.yy.parser.parseError(r,n);else throw new Error(r)},setInput:function(r,n){return this.yy=n||this.yy||{},this._input=r,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var r=this._input[0];this.yytext+=r,this.yyleng++,this.offset++,this.match+=r,this.matched+=r;var n=r.match(/(?:\r\n?|\n).*/g);return n?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),r},unput:function(r){var n=r.length,i=r.split(/(?:\r\n?|\n)/g);this._input=r+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-n),this.offset-=n;var h=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),i.length-1&&(this.yylineno-=i.length-1);var f=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:i?(i.length===h.length?this.yylloc.first_column:0)+h[h.length-i.length].length-i[0].length:this.yylloc.first_column-n},this.options.ranges&&(this.yylloc.range=[f[0],f[0]+this.yyleng-n]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(r){this.unput(this.match.slice(r))},pastInput:function(){var r=this.matched.substr(0,this.matched.length-this.match.length);return(r.length>20?"...":"")+r.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var r=this.match;return r.length<20&&(r+=this._input.substr(0,20-r.length)),(r.substr(0,20)+(r.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var r=this.pastInput(),n=new Array(r.length+1).join("-");return r+this.upcomingInput()+`
`+n+"^"},test_match:function(r,n){var i,h,f;if(this.options.backtrack_lexer&&(f={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(f.yylloc.range=this.yylloc.range.slice(0))),h=r[0].match(/(?:\r\n?|\n).*/g),h&&(this.yylineno+=h.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:h?h[h.length-1].length-h[h.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+r[0].length},this.yytext+=r[0],this.match+=r[0],this.matches=r,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(r[0].length),this.matched+=r[0],i=this.performAction.call(this,this.yy,this,n,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),i)return i;if(this._backtrack){for(var a in f)this[a]=f[a];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var r,n,i,h;this._more||(this.yytext="",this.match="");for(var f=this._currentRules(),a=0;a<f.length;a++)if(i=this._input.match(this.rules[f[a]]),i&&(!n||i[0].length>n[0].length)){if(n=i,h=a,this.options.backtrack_lexer){if(r=this.test_match(i,f[a]),r!==!1)return r;if(this._backtrack){n=!1;continue}else return!1}else if(!this.options.flex)break}return n?(r=this.test_match(n,f[h]),r!==!1?r:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var r=this.next();return r||this.lex()},begin:function(r){this.conditionStack.push(r)},popState:function(){var r=this.conditionStack.length-1;return r>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(r){return r=this.conditionStack.length-1-Math.abs(r||0),r>=0?this.conditionStack[r]:"INITIAL"},pushState:function(r){this.begin(r)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(r,n,i,h){switch(i){case 0:break;case 1:return 8;case 2:return 8;case 3:return 21;case 4:return 35;case 5:return 24;case 6:return 26;case 7:return 26;case 8:return 25;case 9:return 21;case 10:return 31;case 11:return 31;case 12:return 33;case 13:return 28;case 14:return 9;case 15:return" ";case 16:return 32;case 17:return 27;case 18:return 29;case 19:return 30;case 20:return 18;case 21:return 19;case 22:return 17;case 23:return 11;case 24:return 20;case 25:return 12;case 26:return 13;case 27:return 15;case 28:return 14;case 29:return 16;case 30:return'"';case 31:return"'";case 32:return"!";case 33:return 10;case 34:return 34;case 35:return"#";case 36:return 5}},rules:[/^(?:\s+)/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:[A-Za-z]{1,}[A-Za-z_0-9\.]+(?=[(]))/,/^(?:#[A-Z0-9\/]+(!|\?)?)/,/^(?:\$[A-Za-z]+\$[0-9]+)/,/^(?:\$[A-Za-z]+[0-9]+)/,/^(?:[A-Za-z]+\$[0-9]+)/,/^(?:[A-Za-z]+[0-9]+)/,/^(?:[A-Za-z\.]+(?=[(]))/,/^(?:[A-Za-z]{1,}[A-Za-z_0-9]+)/,/^(?:[A-Za-z_]+)/,/^(?:[0-9]+)/,/^(?:\[(.*)?\])/,/^(?:&)/,/^(?: )/,/^(?:[.])/,/^(?::)/,/^(?:;)/,/^(?:,)/,/^(?:\*)/,/^(?:\/)/,/^(?:-)/,/^(?:\+)/,/^(?:\^)/,/^(?:\()/,/^(?:\))/,/^(?:>)/,/^(?:<)/,/^(?:NOT\b)/,/^(?:")/,/^(?:')/,/^(?:!)/,/^(?:=)/,/^(?:%)/,/^(?:[#])/,/^(?:$)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36],inclusive:!0}}};return t})();da.lexer=Z0;function pa(){this.yy={}}pa.prototype=da,da.Parser=pa;function x0(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return t=t.substring(e,t.length-e),t}function j0(t,e){return ry(t)||ny(t,e)||ty(t,e)||ey()}function ey(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ty(t,e){if(t){if(typeof t=="string")return _f(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _f(t,e)}}function _f(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function ny(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var r=[],n=!0,i=!1,h=void 0;try{for(var f=t[Symbol.iterator](),a;!(n=(a=f.next()).done)&&(r.push(a.value),!(e&&r.length===e));n=!0);}catch(l){i=!0,h=l}finally{try{!n&&f.return!=null&&f.return()}finally{if(i)throw h}}return r}}function ry(t){if(Array.isArray(t))return t}function iy(t){var e=parseInt(t,10);return isNaN(e)?e=-1:e=Math.max(e-1,-1),e}function sy(t){var e="";return t>=0&&(e="".concat(t+1)),e}var If="ABCDEFGHIJKLMNOPQRSTUVWXYZ",ma=If.length;function oy(t){var e=0;if(typeof t=="string"){t=t.toUpperCase();for(var r=0,n=t.length-1;r<t.length;r+=1,n-=1)e+=Math.pow(ma,n)*(If.indexOf(t[r])+1)}return--e,e}function ay(t){for(var e="";t>=0;)e=String.fromCharCode(t%ma+97)+e,t=Math.floor(t/ma)-1;return e.toUpperCase()}var Nf=/^([$])?([A-Za-z]+)([$])?([0-9]+)$/;function va(t){if(typeof t!="string"||!Nf.test(t))return[];var e=t.toUpperCase().match(Nf),r=j0(e,5),n=r[1],i=r[2],h=r[3],f=r[4];return[{index:iy(f),label:f,isAbsolute:h==="$"},{index:oy(i),label:i,isAbsolute:n==="$"}]}function wf(t,e){var r=(t.isAbsolute?"$":"")+sy(t.index),n=(e.isAbsolute?"$":"")+ay(e.index);return n+r}function Hi(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Hi=function(r){return typeof r}:Hi=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Hi(t)}function ga(t,e){return fy(t)||cy(t,e)||ly(t,e)||uy()}function uy(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ly(t,e){if(t){if(typeof t=="string")return Cf(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Cf(t,e)}}function Cf(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function cy(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var r=[],n=!0,i=!1,h=void 0;try{for(var f=t[Symbol.iterator](),a;!(n=(a=f.next()).done)&&(r.push(a.value),!(e&&r.length===e));n=!0);}catch(l){i=!0,h=l}finally{try{!n&&f.return!=null&&f.return()}finally{if(i)throw h}}return r}}function fy(t){if(Array.isArray(t))return t}function hy(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function dy(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function py(t,e,r){return e&&dy(t.prototype,e),t}function my(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ya(t,e)}function ya(t,e){return ya=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},ya(t,e)}function vy(t){var e=Ey();return function(){var n=Gi(t),i;if(e){var h=Gi(this).constructor;i=Reflect.construct(n,arguments,h)}else i=n.apply(this,arguments);return gy(this,i)}}function gy(t,e){return e&&(Hi(e)==="object"||typeof e=="function")?e:yy(t)}function yy(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ey(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function Gi(t){return Gi=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},Gi(t)}var Tf=(function(t){my(r,t);var e=vy(r);function r(){var n;return hy(this,r),n=e.call(this),n.parser=new pa,n.parser.yy={toNumber:Xe,trimEdges:x0,invertNumber:g0,throwError:function(h){return n._throwError(h)},callVariable:function(h){return n._callVariable(h)},evaluateByOperator:gf,callFunction:function(h,f){return n._callFunction(h,f)},cellValue:function(h){return n._callCellValue(h)},rangeValue:function(h,f){return n._callRangeValue(h,f)}},n.variables=Object.create(null),n.functions=Object.create(null),n.setVariable("TRUE",!0).setVariable("FALSE",!1).setVariable("NULL",null),n}return py(r,[{key:"parse",value:function(i){var h=null,f=null;try{i===""?h="":h=this.parser.parse(i)}catch(l){var a=Mi(l.message);a?f=a:f=Mi(Di)}return h instanceof Error&&(f=Mi(h.message)||Mi(Di),h=null),{error:f,result:h}}},{key:"setVariable",value:function(i,h){return this.variables[i]=h,this}},{key:"getVariable",value:function(i){return this.variables[i]}},{key:"_callVariable",value:function(i){var h=this.getVariable(i);if(this.emit("callVariable",i,function(f){f!==void 0&&(h=f)}),h===void 0)throw Error(Pi);return h}},{key:"setFunction",value:function(i,h){return this.functions[i]=h,this}},{key:"getFunction",value:function(i){return this.functions[i]}},{key:"_callFunction",value:function(i){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],f=this.getFunction(i),a;return f&&(a=f(h)),this.emit("callFunction",i,h,function(l){l!==void 0&&(a=l)}),a===void 0?gf(i,h):a}},{key:"_callCellValue",value:function(i){i=i.toUpperCase();var h=va(i),f=ga(h,2),a=f[0],l=f[1],o=void 0;return this.emit("callCellValue",{label:i,row:a,column:l},function(s){o=s}),o}},{key:"_callRangeValue",value:function(i,h){i=i.toUpperCase(),h=h.toUpperCase();var f=va(i),a=ga(f,2),l=a[0],o=a[1],s=va(h),u=ga(s,2),c=u[0],d=u[1],p={},m={};l.index<=c.index?(p.row=l,m.row=c):(p.row=c,m.row=l),o.index<=d.index?(p.column=o,m.column=d):(p.column=d,m.column=o),p.label=wf(p.row,p.column),m.label=wf(m.row,m.column);var v=[];return this.emit("callRangeValue",p,m,function(){var y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];v=y}),v}},{key:"_throwError",value:function(i){throw N0(i)?Error(i):Error(Di)}}]),r})(v0);console.log("basicfirebasecrudservices");let wt=new Tf;function Ea(t,e){let r;return function(...n){const i=this;clearTimeout(r),r=setTimeout(()=>{t.apply(i,n)},e)}}function _y({quizString:t="this {={var1-10}+1} some {=2+{var1-10}} that can be {=3+{var1-10}} with a {=4+{var1-10}} function",answer:e,randomNumber:r}){if(t.includes("{var1-10}")){let n=function([l,o]){const s=new RegExp(`${l}(.*?)${o}`,"gm"),u=c=>c.slice(l.length,o.length*-1);return function(c){return c.match(s).map(u)}};const i=/{var1-10}/g,h=r.toString();t=t.replace(i,h),e=e.replace(i,h),e=Math.round(wt.parse(e).result*1e4)/1e4;let a=n(["{=","}"])(t);for(let l=0;l<a.length;l++){let o=Math.round(wt.parse(a[l]).result*1e4)/1e4;t=t.replace("{="+a[l]+"}",o)}return{quizString:t,answer:e}}else return{quizString:t,answer:e}}const Iy=Ea(function(t,e,r="#resformula"){wt.on("callRangeValue",function(i,h,f){for(var a=[],l=i.row.index;l<=h.row.index;l++){for(var o=t[l],s=[],u=i.column.index;u<=h.column.index;u++)s.push(o[u]);a.push(s)}a&&f(a)});let n=wt.parse(e.slice(1));n.error||(document.querySelector(r).innerText=n.result)},275),Ny=Ea(function(t,e="#resformula"){wt.on("callCellValue",function(n,i){n&&i()});let r=wt.parse(t.slice(1));r.error||(document.querySelector(e).innerText=r.result)},275);function wy(t){return Cy(t)}function Cy(t){return We(t,r=>{let n=!0;for(;n;){n=!1;for(let i=0;i<r.length;i++)for(let h=0;h<r[i].length;h++){let f=r[i][h];if((typeof f=="string"||f instanceof String)&&f.toString().includes("=")){let a={:"POWER",:"NPV",:"IRR",:"MIRR",:"SUM",:"AVERAGE",:"ROUND",:"STDEV"},l=new RegExp(Object.keys(a).join("|"),"gi");f=f.replace(l,function(s){return a[s]});let o=Ty(r,f.slice(1));o.later?(r[i][h]=f,n=!0):r[i][h]=o.res.result}else r[i][h]=f}}})}function Ty(t,e){let r=[];wt.on("callCellValue",(f,a)=>{const l=f.column.index+1,o=f.row.index+1;if(r.push({x:l,y:o}),!t[o-1]||!t[o-1][l-1])return a("");a(t[o-1][l-1])}),wt.on("callRangeValue",(f,a,l)=>{for(var o=[],s=f.row.index;s<=a.row.index;s++){for(var u=t[s],c=[],d=f.column.index;d<=a.column.index;d++){var p=u[d];r.push({x:d,y:s}),c.push(p)}o.push(c)}o&&l(o)});let n=wt.parse(e),i=!1,h=[];return r.forEach(f=>{let a=null;try{a=t[f.y-1][f.x-1],h.push(a)}catch{}(typeof a=="string"||a instanceof String)&&a.toString().includes("=")&&(i=!0)}),{res:n,dependencies:r,later:i,dependendentOn:h}}if(is().length>1&&sd(is()[1]).then(function(){console.log("App deleted successfully")}).catch(function(t){console.log("Error deleting app:",t)}),is().length<1){let t={};try{t=document.body.dataset}catch(r){throw new Error("Unable to get params"+r)}const e={apiKey:t.api,databaseURL:"https://"+t.base+".firebaseio.com",appId:t.app};Ha(e)}const _a=Mv();async function Vt({url:t="crafts/temp_gmail_com/posts/-Ml6DEjYhdnjuW6HiHB7",type:e="array"}){try{let r=await Tv(eo(_a,t));if(r.exists()){let n=r.val();return e==="array"?Object.keys(n).map(i=>n[i]):n}else return e==="array"?[]:null}catch(r){return console.log(r),e==="array"?[]:{}}}async function Rf(t={temp:"temp"}){try{return await Cv(eo(_a),t),!0}catch(e){return console.error(e),e}}function Ry(t){return wv(Cn(eo(_a),t+"/")).key}function Ay(t={},e){switch(e.type){case"SEED_ARRAY":return We(t,r=>{r[e.payload.arrayName]=e.payload.arrayItems});case"LOAD_DATA":return We(t,r=>{r.data=e.payload.data,r.protoData=e.payload.protoData,r.expandView=!0});case"NEW_EMPTY_SPREADSHEET":return We(t,r=>{r.data=e.payload.data,r.protoData=e.payload.protoData,r.formulaValue=e.payload.protoData[0][0],r.expandView=!0});case"UPDATE_FORMULA":return We(t,r=>{r.formulaValue=e.payload.formulaValue,r.formulaRowIndex=e.payload.formulaRowIndex,r.formulaColumnIndex=e.payload.formulaColumnIndex,r.formulaIsInFocus=!1});case"SAVE_CELL_AND_SET_NEXT_CELL_ACTIVE":return We(t,r=>{r.data=e.payload.data,r.protoData=e.payload.protoData,r.formulaValue=e.payload.formulaValue,r.formulaRowIndex=e.payload.formulaRowIndex,r.formulaColumnIndex=e.payload.formulaColumnIndex});case"SET_STORE_OBJECT":return We(t,r=>{r[e.payload.key]=e.payload.value});case"PUSH_ITEM_TO_ARRAY":return We(t,r=>{r[e.payload.arrayName].push(e.payload.item)});default:return t}}function by(t){return new Promise(e=>setTimeout(e,t))}function Af(){try{const t=localStorage.getItem("econolabs");return t===null?void 0:JSON.parse(t)}catch{return}}function Oy(t){return t.sort(()=>Math.random()-.5)}function Sy([t,e]){const r=new RegExp(`${t}(.*?)${e}`,"gm"),n=i=>i.slice(t.length,e.length*-1);return function(i){return i.match(r).map(n)}}function Dy(t){return Array.isArray(t)&&t.length>0?`<table class="table">
  <thead>
    <tr>
      <th scope="col">#</th>
      <th scope="col"></th>
      <th scope="col"></th>
      <th scope="col"></th>
      <th scope="col"></th>
    </tr>
  </thead>
  <tbody>
    `+t.map((r,n)=>`
        <tr>
      <th scope="row">${n+1}</th>
      <td>${r?.bookD}</td>
      <td>${r?.bookK}</td>
      <td>${r?.sum}</td>
       <td>${r?.period}</td>
    </tr>
    <tr>
    <th scope='row'></th>
    <td colspan='4'>${r?.comment?r.comment:""}</td>
    </tr>
    `).join("")+`
    </tbody>
  </table> 
    `:""}const Wi=R1({reducerPath:"api",tagTypes:["OpenQuiz","Quiz","Answer","Avatar","Post","QuizCase","OpenQuizCase","OpenAvatar"],baseQuery:p1(),endpoints:t=>({fetchOpenAvatar:t.query({async queryFn(e="johndoe_gmail_com"){try{return{data:await Vt({url:"openavatars/"+e,type:"object"})}}catch(r){return console.log(r),{error:r}}},providesTags:(e,r,n)=>[{type:"OpenAvatar",id:n}]}),fetchQuizesCasesByDate:t.query({async queryFn(e="/currentDay/Wed__Feb_14__2024/"){try{let r=await Vt({url:e+"posts",type:"array"}),n=await Vt({url:e+"cases",type:"array"});return{data:[...r.map(i=>({...i,source:"posts"})),...n.map(i=>({...i,source:"cases"}))]}}catch(r){return console.log(r),{error:r}}},providesTags:(e,r,n)=>e?[...e.map(({id:i})=>({type:"QuizCase",id:i})),"QuizCase"]:["QuizCase"]}),fetchOpenQuizCaseById:t.query({async queryFn(e){try{let r=await Vt({url:"quizescases/quizesCasesIds/"+e,type:"object"});return{data:r||{}}}catch(r){return console.log(r),{error:r}}},providesTags:(e,r,n)=>[{type:"OpenQuizCase",id:n}]}),fetchOpenQuizesCasesIds:t.query({async queryFn(){try{return{data:await Vt({url:"quizescases/quizesCasesIds",type:"array"})}}catch(e){return console.log(e),{error:e}}},providesTags:(e=[],r,n)=>["QuizCase",...e.map(({id:i})=>({type:"QuizCase",id:i}))]}),fetchUserPosts:t.query({async queryFn(e){try{let r=await Vt({url:"usersCraft/"+e+"/posts",type:"array"});return{data:Array.isArray(r)?r:[]}}catch(r){return console.log(r),{error:r}}},providesTags:(e,r,n)=>[{type:"Post",id:n}]}),fetchQuizesArray:t.query({async queryFn(){let e=new Date,r=new Intl.DateTimeFormat("en",{weekday:"short",year:"numeric",month:"short",day:"numeric"}).format(new Date(e.getFullYear(),e.getMonth(),e.getDate())).replace(/[^a-zA-Z0-9]/g,"_");try{let n=await Vt({url:"/currentquiz/"+r+"/",type:"array"}),i=[],h=window?.quizesSets?window.quizesSets.map(a=>{let l=n.findIndex(o=>a.id===o.id);return l>-1?(n[l],i.push(l),n[l]):a}):[];return n=n.filter((a,l)=>!i.includes(l)&&!!a.id),h=[...h,...n],{data:h.map(a=>{let l={...a};return Array.isArray(a?.quizes)&&(l={...a,type:"onerandommanyanswers"}),Array.isArray(a?.choices)&&Array.isArray(a?.answers)&&a?.type!=="accounting"&&(l={...a,type:"multiplechoices"}),a?.answer&&a.answer.includes("{var1-10}")&&(l={...a,type:"quizwithrandomnumber"}),l})}}catch(n){return console.log(n),{error:n}}},providesTags:(e,r,n)=>[{type:"Quiz",id:n}]}),updatesForOpenQuizes:t.mutation({async queryFn({base:e="",updates:r={temp:"temp"}}){let n={};Object.keys(r).forEach(i=>{n[e+"/"+i]=r[i]});try{await Rf(n)}catch(i){return console.log(i),{error:i}}return{data:n}},invalidatesTags:["Answer"]})})}),bf=tn({name:"application",initialState:{email:"",userEmail:"",user:"",avatarUrl:"",isLoading:!0,selectedoption:null,selectedoptions:[],activePage:null,correctquizes:[],currentDay:null,openavatars:{}},reducers:{setOpenAvatars:(t,e)=>{t.openavatars=e.payload},setCurrentDate:(t,e)=>{t.currentDay=e.payload},loadCorrectquizes:(t,e)=>{t.correctquizes=e.payload},addCorrectQuiz:(t,e)=>{t.correctquizes.push(e.payload)},setInitialQuizOptions:t=>{t.selectedoptions=[],t.selectedoption=Math.random()*9+1},setSelectedOptions:(t,e)=>{t.selectedoptions=e.payload},setSelectedOption:(t,e)=>{t.selectedoption=e.payload},setUser:(t,e)=>{t.email=e.payload.email,t.userEmail=e.payload.userEmail,t.user=e.payload.user,t.avatarUrl=e.payload?.avatarUrl?e.payload?.avatarUrl:"https://images.unsplash.com/photo-1536300099515-6c61b290b654?q=80&w=200&auto=format&fit=crop",t.isLoading=!1},setAvatar:(t,e)=>{t.avatarUrl=e.payload},setActivePage:(t,e)=>{t.activePage=e.payload}}});function Py(){const t=bg({reducer:{application:bf.reducer,[Wi.reducerPath]:Wi.reducer},middleware:e=>e().concat(Wi.middleware)});return s1(t.dispatch),t}async function My(){let t=Af();return t&&t?.application&&/(.+)@(.+){2,}\.(.+){2,}/.test(t.application?.email)?{...t.application,userEmail:t?.application?t.application?.email.replace(/[^a-zA-Z0-9]/g,"_"):null}:null}function Ly(t,e){return typeof e=="string"&&e.includes("<br>")?t+" "+e.split("<br>")[0]:t+" "+!!e?e:""}function ky(t,e){let r=!1;return e.forEach(n=>{typeof n=="string"&&n.includes(t)&&(r=!0)}),r}return Object.assign({},{processquizwithrandomnumber:_y,createNewDraft:wy,getFirebaseNode:Vt,getFirebaseNodeKey:Ry,updateFirebaseNode:Rf,caseReducer:Ay,timeout:by,loadState:Af,getUser:My,identifyQuiz:Ly,foundQuiz:ky,debounce:Ea,debounceCallRangeValuealculation:Iy,debounceCallCellValuealculation:Ny,shuffle:Oy,extract:Sy,produce:We,saveState:A1,generateUser:b1,createProtoObject:S1,transactionsListFull:Dy,createUnplashApi:d0,formulaParser:Tf,createRtkFirebaseStore:Py,api:Wi,applicationActions:bf.actions})}));
