(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{u5oS:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return A}));var l=a("q1tI"),r=a.n(l),n=a("NKCw"),c=a("jFIn"),i=a("/MKj"),o=a("raqg"),u=a("y6RJ"),s=a("Bl7J"),d=a("VU5L"),m=(a("Qu+8"),a("vEsD")),p=(a("TUci"),a("7vrA")),b=a("cWnB");var v=a("vYJ8"),f=a("3Z9Z"),E=a("JI6e"),y=a("wx14"),h=a("zLVn"),k=a("TSYQ"),S=a.n(k),g=a("vUet"),_=a("dbZe"),j=["bsPrefix","active","children","className","as","linkAs","linkProps","href","title","target"],C=r.a.forwardRef((function(e,t){var a=e.bsPrefix,l=e.active,n=e.children,c=e.className,i=e.as,o=void 0===i?"li":i,u=e.linkAs,s=void 0===u?_.a:u,d=e.linkProps,m=e.href,p=e.title,b=e.target,v=Object(h.a)(e,j),f=Object(g.a)(a,"breadcrumb-item");return r.a.createElement(o,Object(y.a)({ref:t},v,{className:S()(f,c,{active:l}),"aria-current":l?"page":void 0}),l?n:r.a.createElement(s,Object(y.a)({},d,{href:m,title:p,target:b}),n))}));C.displayName="BreadcrumbItem",C.defaultProps={active:!1,linkProps:{}};var I=C,O=["bsPrefix","className","listProps","children","label","as"],w=r.a.forwardRef((function(e,t){var a=e.bsPrefix,l=e.className,n=e.listProps,c=e.children,i=e.label,o=e.as,u=void 0===o?"nav":o,s=Object(h.a)(e,O),d=Object(g.a)(a,"breadcrumb");return r.a.createElement(u,Object(y.a)({"aria-label":i,className:l,ref:t},s),r.a.createElement("ol",Object(y.a)({},n,{className:S()(d,null==n?void 0:n.className)}),c))}));w.displayName="Breadcrumb",w.defaultProps={label:"breadcrumb",listProps:{}},w.Item=I;var N=w,x=a("QojX"),L=(a("J7+s"),a("fhwx"),a("/2Ve"),[{id:1,type:"book",title:"Книга 1"},{id:2,type:"book",title:"Книга 2"},{id:3,type:"book",title:"Книга 3"},{id:4,type:"chapter",title:"Глава 1 Книги 1",source:"Книга 1"},{id:5,type:"chapter",title:"Глава 2 Книги 1",source:"Книга 1"},{id:6,type:"chapter",title:"Глава 3 Книги 1",source:"Книга 1"},{id:13,type:"subchapter",title:"Параграф 1 Главы 1 Книги 1",source:"Глава 1 Книги 1"},{id:14,type:"subchapter",title:"Параграф 2 Главы 1 Книги 1",source:"Глава 1 Книги 1"},{id:15,type:"subchapter",title:"Параграф 3 Главы 1 Книги 1",source:"Глава 1 Книги 1"},{id:16,type:"idea",title:"Идея 1 Параграфа 1 Главы 1 Книги 1",source:"Параграф 1 Главы 1 Книги 1"},{id:17,type:"idea",title:"Идея 2 Параграфа 1 Главы 1 Книги 1",source:"Параграф 1 Главы 1 Книги 1"},{id:18,type:"idea",title:"Идея 3 Параграфа 1 Главы 1 Книги 1",source:"Параграф 1 Главы 1 Книги 1"},{id:19,type:"sciencenote",title:"Note 1",source:"Идея 1 Параграфа 1 Главы 1 Книги 1",fireNodeId:"-Mcryv4ypZu5k136cd1h"},{id:20,type:"sciencenote",title:"Note 2",source:"Идея 1 Параграфа 1 Главы 1 Книги 1",fireNodeId:"-Mcs53WMJfo-bpk9_vd5"},{id:21,type:"sciencenote",title:"Note 3",source:"Идея 1 Параграфа 1 Главы 1 Книги 1",fireNodeId:"-Mcz_KoaEbhmU2yvGvJI"},{id:7,type:"chapter",title:"Глава 1 Книги 2",source:"Книга 2"},{id:8,type:"chapter",title:"Глава 2 Книги 2",source:"Книга 2"},{id:9,type:"chapter",title:"Глава 3 Книги 2",source:"Книга 2"},{id:10,type:"chapter",title:"Глава 1 Книги 3",source:"Книга 3"},{id:11,type:"chapter",title:"Глава 2 Книги 3",source:"Книга 3"},{id:12,type:"chapter",title:"Глава 3 Книги 3",source:"Книга 3"}]);function A(){var e=Object(i.c)(d.b).email.replace(/[^a-zA-Z0-9]/g,"_"),t=Object(c.a)("usersScience/"+e+"/library/"),a=t.data,l=t.loading,n=t.error;if(console.log(a),l)return r.a.createElement(s.a,null,"...");if(n)return r.a.createElement(s.a,null,":-(");var o=a?Object.keys(a).map((function(e){return a[e]})):null;return r.a.createElement(z,{libraryItems:o})}function z(e){var t=e.libraryItems,a=Object(i.c)(d.b).email,l=a.replace(/[^a-zA-Z0-9]/g,"_"),n=r.a.useState(null),c=(n[0],n[1],r.a.useState(null)),m=(c[0],c[1],Object(o.a)(t||L)),b=m[0],v=m[1],y=Object(o.a)({level1:"Книги",level2:"Книга",level3:"Главы",level4:"Параграфы",level5:"Идеи"}),h=y[0],k=y[1];function S(){if(a.length>6){var e={};return e["usersScience/"+l+"/library/"]=b,u.a.database().ref().update(e).then((function(){console.log("Success!!!")}))}}function g(e,t){void 0===e&&(e=null),void 0===t&&(t=null),"ShowAllBooks"===e&&k((function(e){e.level1="Книги",e.level2="Книга",e.level3="Главы",e.level4="Параграфы",e.level5="Идеи"})),"ShowAllChapters"===e&&k((function(e){e.level3="Главы",e.level4="Параграфы",e.level5="Идеи"})),"ShowAllSubChapters"===e&&k((function(e){e.level4="Параграфы",e.level5="Идеи"})),"ShowAllIdeas"===e&&k((function(e){e.level5="Идеи"})),"SelectBook"===e&&k((function(e){e.level2=t})),"SelectChapter"===e&&k((function(e){e.level3=t})),"SelectSubChapter"===e&&k((function(e){e.level4=t})),"SelectIdea"===e&&k((function(e){e.level5=t}))}return console.log(h),r.a.createElement(s.a,null,r.a.createElement(p.a,null,r.a.createElement(f.a,null,r.a.createElement(E.a,null,r.a.createElement(N,{style:{minWidth:"30rem"}},r.a.createElement(N.Item,{onClick:function(){return g("ShowAllBooks")}},h.level1),r.a.createElement(N.Item,{onClick:function(){return g("ShowAllChapters")}},h.level2),r.a.createElement(N.Item,{onClick:function(){return g("ShowAllSubChapters")}},h.level3),r.a.createElement(N.Item,{onClick:function(){return g("ShowAllIdeas")}},h.level4),r.a.createElement(N.Item,{active:!0},h.level5)),"Книги"===h.level1&&"Книга"===h.level2?r.a.createElement(P,{books:b.filter((function(e){return"book"===e.type})),updateLibrary:g,addBook:function(e){v((function(t){t.push({id:u.a.database().ref("usersScience/"+l+"/library/").push().key,type:"book",title:e})})),S()}}):null,"Книга"!==h.level2&&"Главы"===h.level3?r.a.createElement(B,{chapters:b.filter((function(e){return"chapter"===e.type&&e.source===h.level2})),updateLibrary:g,addChapter:function(e){v((function(t){t.push({id:u.a.database().ref("usersScience/"+l+"/library/").push().key,type:"chapter",title:e,source:h.level2})})),S()}}):null,"Главы"!==h.level3&&"Параграфы"===h.level4?r.a.createElement(J,{subchapters:b.filter((function(e){return"subchapter"===e.type&&e.source===h.level3})),updateLibrary:g}):null,"Параграфы"!==h.level4?r.a.createElement(Z,{ideas:b.filter((function(e){return"idea"===e.type&&e.source===h.level4})),updateLibrary:g}):null),r.a.createElement(E.a,null,"Идеи"!==h.level5?r.a.createElement(G,{sciencenotes:b.filter((function(e){return"sciencenote"===e.type&&e.source===h.level5})),updateLibrary:g}):r.a.createElement("div",null,"Выберите пункт")))))}function P(e){var t=e.books,a=void 0===t?[]:t,l=e.updateLibrary,c=void 0===l?null:l,i=e.addBook,o=r.a.useState(!1),u=o[0],s=o[1],d=Object(n.b)(),m=d.register,f=d.handleSubmit;return console.log(a),r.a.createElement(p.a,null,!!a&&a.map((function(e){return r.a.createElement("div",{key:e.id,onClick:function(){return c("SelectBook",e.title)}},e.title)})),r.a.createElement(b.a,{onClick:function(){return s(!u)},variant:"outline-secondary","aria-controls":"add_book_collapse","aria-expanded":u,size:"sm"},"+"),r.a.createElement(v.a,{in:u},r.a.createElement("div",{id:"add_book_collapse"},r.a.createElement(x.a,{onSubmit:f((function(e){console.log(e),i(e.book_title),s(!1)}))},r.a.createElement(x.a.Group,{controlId:"book_name"},r.a.createElement(x.a.Label,{className:"small text-muted"},"Добавить книгу"),r.a.createElement(x.a.Control,Object.assign({},m("book_title"),{as:"textarea",rows:"2"}))),r.a.createElement(b.a,{variant:"outline-secondary",type:"submit",size:"sm",block:!0},"Сохранить")))))}function B(e){var t=e.chapters,a=void 0===t?[]:t,l=e.updateLibrary,c=void 0===l?null:l,i=e.addChapter,o=r.a.useState(!1),u=o[0],s=o[1],d=Object(n.b)(),m=d.register,f=d.handleSubmit;return console.log(a),r.a.createElement(p.a,null,!!a&&a.map((function(e){return r.a.createElement("div",{key:e.id,onClick:function(){return c("SelectChapter",e.title)}},e.title)})),r.a.createElement(b.a,{onClick:function(){return s(!u)},variant:"outline-secondary","aria-controls":"add_chapter_collapse","aria-expanded":u,size:"sm"},"+"),r.a.createElement(v.a,{in:u},r.a.createElement("div",{id:"add_chapter_collapse"},r.a.createElement(x.a,{onSubmit:f((function(e){console.log(e),i(e.chapter_title),s(!1)}))},r.a.createElement(x.a.Group,{controlId:"chapter_name"},r.a.createElement(x.a.Label,{className:"small text-muted"},"Добавить главу"),r.a.createElement(x.a.Control,Object.assign({},m("chapter_title"),{as:"textarea",rows:"2"}))),r.a.createElement(b.a,{variant:"outline-secondary",type:"submit",size:"sm",block:!0},"Сохранить")))))}function J(e){var t=e.subchapters,a=void 0===t?[]:t,l=e.updateLibrary,c=void 0===l?null:l,i=r.a.useState(!1),o=i[0],u=i[1],s=Object(n.b)(),d=s.register,m=s.handleSubmit;return console.log(a),r.a.createElement(p.a,null,!!a&&a.map((function(e){return r.a.createElement("div",{key:e.id,onClick:function(){return c("SelectSubChapter",e.title)}},e.title)})),r.a.createElement(b.a,{onClick:function(){return u(!o)},variant:"outline-secondary","aria-controls":"add_subchapter_collapse","aria-expanded":o,size:"sm"},"+"),r.a.createElement(v.a,{in:o},r.a.createElement("div",{id:"add_subchapter_collapse"},r.a.createElement(x.a,{onSubmit:m((function(e){return console.log(e)}))},r.a.createElement(x.a.Group,{controlId:"subchapter_name"},r.a.createElement(x.a.Label,{className:"small text-muted"},"Добавить параграф"),r.a.createElement(x.a.Control,Object.assign({},d("subchapter_title"),{as:"textarea",rows:"2"}))),r.a.createElement(b.a,{variant:"outline-secondary",type:"submit",size:"sm",block:!0},"Сохранить")))))}function Z(e){var t=e.ideas,a=void 0===t?[]:t,l=e.updateLibrary,c=void 0===l?null:l,i=r.a.useState(!1),o=i[0],u=i[1],s=Object(n.b)(),d=s.register,m=s.handleSubmit;return console.log(a),r.a.createElement(p.a,null,!!a&&a.map((function(e){return r.a.createElement("div",{key:e.id,onClick:function(){return c("SelectIdea",e.title)}},e.title)})),r.a.createElement(b.a,{onClick:function(){return u(!o)},variant:"outline-secondary","aria-controls":"add_idea_collapse","aria-expanded":o,size:"sm"},"+"),r.a.createElement(v.a,{in:o},r.a.createElement("div",{id:"add_idea_collapse"},r.a.createElement(x.a,{onSubmit:m((function(e){return console.log(e)}))},r.a.createElement(x.a.Group,{controlId:"idea_name"},r.a.createElement(x.a.Label,{className:"small text-muted"},"Добавить идею"),r.a.createElement(x.a.Control,Object.assign({},d("idea_title"),{as:"textarea",rows:"2"}))),r.a.createElement(b.a,{variant:"outline-secondary",type:"submit",size:"sm",block:!0},"Сохранить")))))}function G(e){var t=e.sciencenotes,a=void 0===t?[]:t;e.updateLibrary;return console.log(a),r.a.createElement(p.a,{className:"mt-5"},!!a&&a.map((function(e){return r.a.createElement("div",{key:e.id}," ",r.a.createElement(M,{sciencenote:e}))})))}function M(e){var t=e.sciencenote,a=Object(i.c)(d.b).email.replace(/[^a-zA-Z0-9]/g,"_"),l=Object(c.a)("usersScience/"+a+"/notes/"+t.fireNodeId),n=l.data,o=l.loading,u=l.error;return o||!n?r.a.createElement("div",null,"..."):u?r.a.createElement("div",null,":-("):r.a.createElement(m.a,{note:n})}}}]);
//# sourceMappingURL=component---src-pages-mylibrary-js-a7cc724b19593ebb8b9f.js.map